(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{14:(wn,gt,L)=>{"use strict";L.d(gt,{nm:()=>Ir});var I=L(2793);L(5879),L(4097);var fe,at,Xt,mn,de,Ve=L(5861),rt=L(4303),be=L(4537),Xe=L(9058),Fe=L(7879);const pe=new Map,Se={activated:!1,tokenObservers:[]},$e={initialized:!1,enabled:!1};function je(We){return pe.get(We)||Object.assign({},Se)}function ht(){return $e}const Bt="https://content-firebaseappcheck.googleapis.com/v1",st="exchangeDebugToken",Vn={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class tn{constructor(He,ut,kt,Dt,bn){if(this.operation=He,this.retryPolicy=ut,this.getWaitDuration=kt,this.lowerBound=Dt,this.upperBound=bn,this.pending=null,this.nextErrorWaitInterval=Dt,Dt>bn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(He){var ut=this;return(0,Ve.Z)(function*(){ut.stop();try{ut.pending=new Xe.BH,yield function wt(We){return new Promise(He=>{setTimeout(He,We)})}(ut.getNextRun(He)),ut.pending.resolve(),yield ut.pending.promise,ut.pending=new Xe.BH,yield ut.operation(),ut.pending.resolve(),yield ut.pending.promise,ut.process(!0).catch(()=>{})}catch(kt){ut.retryPolicy(kt)?ut.process(!1).catch(()=>{}):ut.stop()}})()}getNextRun(He){if(He)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ut=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ut}}}const dt=new Xe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Tn(We){if(!je(We).activated)throw dt.create("use-before-activation",{appName:We.name})}function Xn(We,He){return(fe=fe||(0,Ve.Z)(function*({url:ut,body:kt},Dt){const bn={"Content-Type":"application/json"},qn=Dt.getImmediate({optional:!0});if(qn){const ki=yield qn.getHeartbeatsHeader();ki&&(bn["X-Firebase-Client"]=ki)}const Kn={method:"POST",body:JSON.stringify(kt),headers:bn};let Qn,Ln;try{Qn=yield fetch(ut,Kn)}catch(ki){throw dt.create("fetch-network-error",{originalErrorMessage:ki?.message})}if(200!==Qn.status)throw dt.create("fetch-status-error",{httpStatus:Qn.status});try{Ln=yield Qn.json()}catch(ki){throw dt.create("fetch-parse-error",{originalErrorMessage:ki?.message})}const wi=Ln.ttl.match(/^([\d.]+)(s)$/);if(!wi||!wi[2]||isNaN(Number(wi[1])))throw dt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ln.ttl}`});const Er=1e3*Number(wi[1]),_o=Date.now();return{token:Ln.token,expireTimeMillis:_o+Er,issuedAtTimeMillis:_o}})).apply(this,arguments)}function Sn(We,He){const{projectId:ut,appId:kt,apiKey:Dt}=We.options;return{url:`${Bt}/projects/${ut}/apps/${kt}:${st}?key=${Dt}`,body:{debug_token:He}}}const Pn="firebase-app-check-database",Un=1,pr="firebase-app-check-store";let Br=null;function or(We,He){return(at=at||(0,Ve.Z)(function*(ut,kt){const bn=(yield function Kt(){return Br||(Br=new Promise((We,He)=>{try{const ut=indexedDB.open(Pn,Un);ut.onsuccess=kt=>{We(kt.target.result)},ut.onerror=kt=>{var Dt;He(dt.create("storage-open",{originalErrorMessage:null===(Dt=kt.target.error)||void 0===Dt?void 0:Dt.message}))},ut.onupgradeneeded=kt=>{0===kt.oldVersion&&kt.target.result.createObjectStore(pr,{keyPath:"compositeKey"})}}catch(ut){He(dt.create("storage-open",{originalErrorMessage:ut?.message}))}}),Br)}()).transaction(pr,"readwrite"),Kn=bn.objectStore(pr).put({compositeKey:ut,value:kt});return new Promise((Qn,Ln)=>{Kn.onsuccess=wi=>{Qn()},bn.onerror=wi=>{var Er;Ln(dt.create("storage-set",{originalErrorMessage:null===(Er=wi.target.error)||void 0===Er?void 0:Er.message}))}})})).apply(this,arguments)}const Di=new Fe.Yd("@firebase/app-check");function Ii(We,He){return(0,Xe.hl)()?function an(We,He){return or(function Zi(We){return`${We.options.appId}-${We.name}`}(We),He)}(We,He).catch(ut=>{Di.warn(`Failed to write token to IndexedDB. Error: ${ut}`)}):Promise.resolve()}function ot(){return ht().enabled}function Pt(){return(Xt=Xt||(0,Ve.Z)(function*(){const We=ht();if(We.enabled&&We.token)return We.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const In={error:"UNKNOWN_ERROR"};function Mn(We){return Xe.US.encodeString(JSON.stringify(We),!1)}function br(We){return(mn=mn||(0,Ve.Z)(function*(He,ut=!1){const kt=He.app;Tn(kt);const Dt=je(kt);let qn,bn=Dt.token;if(bn&&!St(bn)&&(Dt.token=void 0,bn=void 0),!bn){const Ln=yield Dt.cachedTokenPromise;Ln&&(St(Ln)?bn=Ln:yield Ii(kt,void 0))}if(!ut&&bn&&St(bn))return{token:bn.token};let Qn,Kn=!1;if(ot()){Dt.exchangeTokenPromise||(Dt.exchangeTokenPromise=Xn(Sn(kt,yield Pt()),He.heartbeatServiceProvider).finally(()=>{Dt.exchangeTokenPromise=void 0}),Kn=!0);const Ln=yield Dt.exchangeTokenPromise;return yield Ii(kt,Ln),Dt.token=Ln,{token:Ln.token}}try{Dt.exchangeTokenPromise||(Dt.exchangeTokenPromise=Dt.provider.getToken().finally(()=>{Dt.exchangeTokenPromise=void 0}),Kn=!0),bn=yield je(kt).exchangeTokenPromise}catch(Ln){"appCheck/throttled"===Ln.code?Di.warn(Ln.message):Di.error(Ln),qn=Ln}return bn?qn?Qn=St(bn)?{token:bn.token,internalError:qn}:nn(qn):(Qn={token:bn.token},Dt.token=bn,yield Ii(kt,bn)):Qn=nn(qn),Kn&&function lt(We,He){const ut=je(We).tokenObservers;for(const kt of ut)try{"EXTERNAL"===kt.type&&null!=He.error?kt.error(He.error):kt.next(He)}catch{}}(kt,Qn),Qn})).apply(this,arguments)}function te(We,He){const ut=je(We),kt=ut.tokenObservers.filter(Dt=>Dt.next!==He);0===kt.length&&ut.tokenRefresher&&ut.tokenRefresher.isRunning()&&ut.tokenRefresher.stop(),ut.tokenObservers=kt}function Ne(We){const{app:He}=We,ut=je(He);let kt=ut.tokenRefresher;kt||(kt=function ue(We){const{app:He}=We;return new tn((0,Ve.Z)(function*(){let kt;if(kt=je(He).token?yield br(We,!0):yield br(We),kt.error)throw kt.error;if(kt.internalError)throw kt.internalError}),()=>!0,()=>{const ut=je(He);if(ut.token){let kt=ut.token.issuedAtTimeMillis+.5*(ut.token.expireTimeMillis-ut.token.issuedAtTimeMillis)+3e5;return kt=Math.min(kt,ut.token.expireTimeMillis-3e5),Math.max(0,kt-Date.now())}return 0},Vn.RETRIAL_MIN_WAIT,Vn.RETRIAL_MAX_WAIT)}(We),ut.tokenRefresher=kt),!kt.isRunning()&&ut.isTokenAutoRefreshEnabled&&kt.start()}function St(We){return We.expireTimeMillis-Date.now()>0}function nn(We){return{token:Mn(In),error:We}}class zn{constructor(He,ut){this.app=He,this.heartbeatServiceProvider=ut}_delete(){const{tokenObservers:He}=je(this.app);for(const ut of He)te(this.app,ut.next);return Promise.resolve()}}const Ei="app-check-internal";!function ts(){(0,rt.Xd)(new be.wA("app-check",We=>function yn(We,He){return new zn(We,He)}(We.getProvider("app").getImmediate(),We.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((We,He,ut)=>{We.getProvider(Ei).initialize()})),(0,rt.Xd)(new be.wA(Ei,We=>function lr(We){return{getToken:He=>br(We,He),getLimitedUseToken:()=>function Ke(We){return(de=de||(0,Ve.Z)(function*(He){const ut=He.app;Tn(ut);const{provider:kt}=je(ut);if(ot()){const Dt=yield Pt(),{token:bn}=yield Xn(Sn(ut,Dt),He.heartbeatServiceProvider);return{token:bn}}{const{token:Dt}=yield kt.getToken();return{token:Dt}}})).apply(this,arguments)}(We),addTokenListener:He=>function re(We,He,ut,kt){const{app:Dt}=We,bn=je(Dt);if(bn.tokenObservers=[...bn.tokenObservers,{next:ut,error:kt,type:He}],bn.token&&St(bn.token)){const Kn=bn.token;Promise.resolve().then(()=>{ut({token:Kn.token}),Ne(We)}).catch(()=>{})}bn.cachedTokenPromise.then(()=>Ne(We))}(We,"INTERNAL",He),removeTokenListener:He=>te(We.app,He)}}(We.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rt.KN)("@firebase/app-check","0.8.0")}();class Ir{constructor(){return(0,I.vb)("app-check")}}typeof window<"u"&&window},6796:(wn,gt,L)=>{"use strict";L.d(gt,{zQ:()=>mn,rT:()=>Ue,f7:()=>en,L6:()=>fe,_Q:()=>at,lh:()=>zt,Qv:()=>Fe,nw:()=>Xt});var I=L(5879),v=L(8645),ne=L(2096),he=L(5592),ke=L(2459),Pe=L(3019),Ie=L(3093),qe=L(4664),Je=L(7398),ye=L(4552);class ge extends v.x{constructor(_t=1/0,pe=1/0,Se=ye.l){super(),this._bufferSize=_t,this._windowTime=pe,this._timestampProvider=Se,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=pe===1/0,this._bufferSize=Math.max(1,_t),this._windowTime=Math.max(1,pe)}next(_t){const{isStopped:pe,_buffer:Se,_infiniteTimeWindow:$e,_timestampProvider:je,_windowTime:pt}=this;pe||(Se.push(_t),!$e&&Se.push(je.now()+pt)),this._trimBuffer(),super.next(_t)}_subscribe(_t){this._throwIfClosed(),this._trimBuffer();const pe=this._innerSubscribe(_t),{_infiniteTimeWindow:Se,_buffer:$e}=this,je=$e.slice();for(let pt=0;pt<je.length&&!_t.closed;pt+=Se?1:2)_t.next(je[pt]);return this._checkFinalizedStatuses(_t),pe}_trimBuffer(){const{_bufferSize:_t,_timestampProvider:pe,_buffer:Se,_infiniteTimeWindow:$e}=this,je=($e?1:2)*_t;if(_t<1/0&&je<Se.length&&Se.splice(0,Se.length-je),!$e){const pt=pe.now();let ht=0;for(let Bt=1;Bt<Se.length&&Se[Bt]<=pt;Bt+=2)ht=Bt;ht&&Se.splice(0,ht+1)}}}var Me=L(3020);function Ge(gn,_t,pe){let Se,$e=!1;return gn&&"object"==typeof gn?({bufferSize:Se=1/0,windowTime:_t=1/0,refCount:$e=!1,scheduler:pe}=gn):Se=gn??1/0,(0,Me.B)({connector:()=>new ge(Se,_t,pe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$e})}var ze=L(1374),nt=L(4674);function Ze(gn,_t){return(0,nt.m)(_t)?(0,qe.w)(()=>gn,_t):(0,qe.w)(()=>gn)}var Ye=L(5137),De=L(2181),Ee=L(2793),yt=L(6304),Ve=L(6814),rt=L(14);L(120);const Fe=new I.OlP("angularfire2.auth.use-emulator"),fe=new I.OlP("angularfire2.auth.settings"),at=new I.OlP("angularfire2.auth.tenant-id"),Ue=new I.OlP("angularfire2.auth.langugage-code"),zt=new I.OlP("angularfire2.auth.use-device-language"),en=new I.OlP("angularfire.auth.persistence"),Xt=(gn,_t,pe,Se,$e,je,pt,ht)=>(0,yt.cc)(`${gn.name}.auth`,"AngularFireAuth",gn.name,()=>{const Bt=_t.runOutsideAngular(()=>gn.auth());if(pe&&Bt.useEmulator(...pe),Se&&(Bt.tenantId=Se),Bt.languageCode=$e,je&&Bt.useDeviceLanguage(),pt)for(const[Ft,Qt]of Object.entries(pt))Bt.settings[Ft]=Qt;return ht&&Bt.setPersistence(ht),Bt},[pe,Se,$e,je,pt,ht]);let mn=(()=>{class gn{constructor(pe,Se,$e,je,pt,ht,Bt,Ft,Qt,st,Vn,Bn){const tn=new v.x,wt=(0,ne.of)(void 0).pipe((0,Ie.Q)(pt.outsideAngular),(0,qe.w)(()=>je.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,8977)))),(0,Je.U)(()=>(0,yt.on)(pe,je,Se)),(0,Je.U)(Rt=>Xt(Rt,je,ht,Ft,Qt,st,Bt,Vn)),Ge({bufferSize:1,refCount:!1}));if((0,Ve.PM)($e))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ne.of)(null);else{wt.pipe((0,ze.P)()).subscribe();const dt=wt.pipe((0,qe.w)(En=>En.getRedirectResult().then(vn=>vn,()=>null)),Ee.iC,Ge({bufferSize:1,refCount:!1})),Wt=wt.pipe((0,qe.w)(En=>new he.y(vn=>({unsubscribe:je.runOutsideAngular(()=>En.onAuthStateChanged(Xn=>vn.next(Xn),Xn=>vn.error(Xn),()=>vn.complete()))})))),Tn=wt.pipe((0,qe.w)(En=>new he.y(vn=>({unsubscribe:je.runOutsideAngular(()=>En.onIdTokenChanged(Xn=>vn.next(Xn),Xn=>vn.error(Xn),()=>vn.complete()))}))));this.authState=dt.pipe(Ze(Wt),(0,Ye.R)(pt.outsideAngular),(0,Ie.Q)(pt.insideAngular)),this.user=dt.pipe(Ze(Tn),(0,Ye.R)(pt.outsideAngular),(0,Ie.Q)(pt.insideAngular)),this.idToken=this.user.pipe((0,qe.w)(En=>En?(0,ke.D)(En.getIdToken()):(0,ne.of)(null))),this.idTokenResult=this.user.pipe((0,qe.w)(En=>En?(0,ke.D)(En.getIdTokenResult()):(0,ne.of)(null))),this.credential=(0,Pe.T)(dt,tn,this.authState.pipe((0,De.h)(En=>!En))).pipe((0,Je.U)(En=>En?.user?En:null),(0,Ye.R)(pt.outsideAngular),(0,Ie.Q)(pt.insideAngular))}return(0,yt.pX)(this,wt,je,{spy:{apply:(Rt,dt,Wt)=>{(Rt.startsWith("signIn")||Rt.startsWith("createUser"))&&Wt.then(Tn=>tn.next(Tn))}}})}}return gn.\u0275fac=function(pe){return new(pe||gn)(I.LFG(yt.Dh),I.LFG(yt.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(Ee.HU),I.LFG(Fe,8),I.LFG(fe,8),I.LFG(at,8),I.LFG(Ue,8),I.LFG(zt,8),I.LFG(en,8),I.LFG(rt.nm,8))},gn.\u0275prov=I.Yz7({token:gn,factory:gn.\u0275fac,providedIn:"any"}),gn})()},8022:(wn,gt,L)=>{"use strict";L.d(gt,{ST:()=>my,yb:()=>i_});var I=L(5879),v=L(6321),ne=L(5592),he=L(2459),ke=L(2096),Pe=L(2793),Ie=L(7921),qe=L(9360),Je=L(8251);function ye(){return(0,qe.e)((i,e)=>{let n,s=!1;i.subscribe((0,Je.x)(e,l=>{const f=n;n=l,s&&e.next([f,l]),s=!0}))})}var fe,ge=L(7398),Me=L(6699),Ge=L(3997),ze=L(2181),nt=L(6304),Ze=L(6814),De=(L(8977),L(3399)),Ee=L(5861),yt=L(7592),Ve=L(4537),rt=L(7879),be=L(9058),Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fe={},at=at||{},Ue=Xe||self;function zt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function en(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var mn="closure_uid_"+(1e9*Math.random()>>>0),de=0;function gn(i,e,n){return i.call.apply(i.bind,arguments)}function _t(i,e,n){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,s),i.apply(e,l)}}return function(){return i.apply(e,arguments)}}function pe(i,e,n){return(pe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?gn:_t).apply(null,arguments)}function Se(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function $e(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(s,l,f){for(var _=Array(arguments.length-2),M=2;M<arguments.length;M++)_[M-2]=arguments[M];return e.prototype[l].apply(s,_)}}function je(){this.s=this.s,this.o=this.o}je.prototype.s=!1,je.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Xt(i){Object.prototype.hasOwnProperty.call(i,mn)&&i[mn]||(i[mn]=++de)}(this)},je.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ht=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function Bt(i){const e=i.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=i[s];return n}return[]}function Ft(i,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(zt(s)){const l=i.length||0,f=s.length||0;i.length=l+f;for(let _=0;_<f;_++)i[l+_]=s[_]}else i.push(s)}}function Qt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Qt.prototype.h=function(){this.defaultPrevented=!0};var st=function(){if(!Ue.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Ue.addEventListener("test",()=>{},e),Ue.removeEventListener("test",()=>{},e)}catch{}return i}();function Vn(i){return/^[\s\xa0]*$/.test(i)}function Bn(){var i=Ue.navigator;return i&&(i=i.userAgent)?i:""}function tn(i){return-1!=Bn().indexOf(i)}function wt(i){return wt[" "](i),i}wt[" "]=function(){};var wr,i,dt=tn("Opera"),Wt=tn("Trident")||tn("MSIE"),Tn=tn("Edge"),En=Tn||Wt,vn=tn("Gecko")&&!(-1!=Bn().toLowerCase().indexOf("webkit")&&!tn("Edge"))&&!(tn("Trident")||tn("MSIE"))&&!tn("Edge"),Xn=-1!=Bn().toLowerCase().indexOf("webkit")&&!tn("Edge");function Jn(){var i=Ue.document;return i?i.documentMode:void 0}e:{var Sn="",Pn=(i=Bn(),vn?/rv:([^\);]+)(\)|;)/.exec(i):Tn?/Edge\/([\d\.]+)/.exec(i):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Xn?/WebKit\/(\S+)/.exec(i):dt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Pn&&(Sn=Pn?Pn[1]:""),Wt){var Un=Jn();if(null!=Un&&Un>parseFloat(Sn)){wr=String(Un);break e}}wr=Sn}var Br=Ue.document&&Wt&&(Jn()||parseInt(wr,10))||void 0;function Kt(i,e){if(Qt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(vn){e:{try{wt(e.nodeName);var l=!0;break e}catch{}l=!1}l||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:hr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Kt.$.h.call(this)}}$e(Kt,Qt);var hr={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),Cr=0;function _s(i,e,n,s,l){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=l,this.key=++Cr,this.fa=this.ia=!1}function or(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function bi(i,e,n){for(const s in i)e.call(n,i[s],s,i)}function Di(i){const e={};for(const n in i)e[n]=i[n];return e}const _i="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ii(i,e){let n,s;for(let l=1;l<arguments.length;l++){for(n in s=arguments[l],s)i[n]=s[n];for(let f=0;f<_i.length;f++)n=_i[f],Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])}}function jt(i){this.src=i,this.g={},this.h=0}function ot(i,e){var n=e.type;if(n in i.g){var f,s=i.g[n],l=ht(s,e);(f=0<=l)&&Array.prototype.splice.call(s,l,1),f&&(or(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Pt(i,e,n,s){for(var l=0;l<i.length;++l){var f=i[l];if(!f.fa&&f.listener==e&&f.capture==!!n&&f.la==s)return l}return-1}jt.prototype.add=function(i,e,n,s,l){var f=i.toString();(i=this.g[f])||(i=this.g[f]=[],this.h++);var _=Pt(i,e,s,l);return-1<_?(e=i[_],n||(e.ia=!1)):((e=new _s(e,this.src,f,!!s,l)).ia=n,i.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),In={};function Mn(i,e,n,s,l){if(s&&s.once)return re(i,e,n,s,l);if(Array.isArray(e)){for(var f=0;f<e.length;f++)Mn(i,e[f],n,s,l);return null}return n=zn(n),i&&i[an]?i.O(e,n,en(s)?!!s.capture:!!s,l):br(i,e,n,!1,s,l)}function br(i,e,n,s,l,f){if(!e)throw Error("Invalid event type");var _=en(l)?!!l.capture:!!l,M=St(i);if(M||(i[sn]=M=new jt(i)),(n=M.add(e,n,s,_,f)).proxy)return n;if(s=function Ke(){const e=lt;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=s,s.src=i,s.listener=n,i.addEventListener)st||(l=_),void 0===l&&(l=!1),i.addEventListener(e.toString(),s,l);else if(i.attachEvent)i.attachEvent(ue(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return n}function re(i,e,n,s,l){if(Array.isArray(e)){for(var f=0;f<e.length;f++)re(i,e[f],n,s,l);return null}return n=zn(n),i&&i[an]?i.P(e,n,en(s)?!!s.capture:!!s,l):br(i,e,n,!0,s,l)}function te(i,e,n,s,l){if(Array.isArray(e))for(var f=0;f<e.length;f++)te(i,e[f],n,s,l);else s=en(s)?!!s.capture:!!s,n=zn(n),i&&i[an]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Pt(f=i.g[e],n,s,l))&&(or(f[n]),Array.prototype.splice.call(f,n,1),0==f.length&&(delete i.g[e],i.h--))):i&&(i=St(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Pt(e,n,s,l)),(n=-1<i?e[i]:null)&&Ne(n))}function Ne(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[an])ot(e.i,i);else{var n=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(n,s,i.capture):e.detachEvent?e.detachEvent(ue(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=St(e))?(ot(n,i),0==n.h&&(n.src=null,e[sn]=null)):or(i)}}}function ue(i){return i in In?In[i]:In[i]="on"+i}function lt(i,e){if(i.fa)i=!0;else{e=new Kt(e,this);var n=i.listener,s=i.la||i.src;i.ia&&Ne(i),i=n.call(s,e)}return i}function St(i){return(i=i[sn])instanceof jt?i:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(i){return"function"==typeof i?i:(i[nn]||(i[nn]=function(e){return i.handleEvent(e)}),i[nn])}function yn(){je.call(this),this.i=new jt(this),this.S=this,this.J=null}function lr(i,e){var n,s=i.J;if(s)for(n=[];s;s=s.J)n.push(s);if(i=i.S,s=e.type||e,"string"==typeof e)e=new Qt(e,i);else if(e instanceof Qt)e.target=e.target||i;else{var l=e;Ii(e=new Qt(s,i),l)}if(l=!0,n)for(var f=n.length-1;0<=f;f--){var _=e.g=n[f];l=er(_,s,!0,e)&&l}if(l=er(_=e.g=i,s,!0,e)&&l,l=er(_,s,!1,e)&&l,n)for(f=0;f<n.length;f++)l=er(_=e.g=n[f],s,!1,e)&&l}function er(i,e,n,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var l=!0,f=0;f<e.length;++f){var _=e[f];if(_&&!_.fa&&_.capture==n){var M=_.listener,F=_.la||_.src;_.ia&&ot(i.i,_),l=!1!==M.call(F,s)&&l}}return l&&!s.defaultPrevented}$e(yn,je),yn.prototype[an]=!0,yn.prototype.removeEventListener=function(i,e,n,s){te(this,i,e,n,s)},yn.prototype.N=function(){if(yn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],s=0;s<n.length;s++)or(n[s]);delete i.g[e],i.h--}}this.J=null},yn.prototype.O=function(i,e,n,s){return this.i.add(String(i),e,!1,n,s)},yn.prototype.P=function(i,e,n,s){return this.i.add(String(i),e,!0,n,s)};var Zr=Ue.JSON.stringify;function Is(){var i=qr;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Bi=new class ei{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new zi,i=>i.reset());class zi{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function oi(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Pi(i){Ue.setTimeout(()=>{throw i},0)}let ur,Hr=!1,qr=new class Fs{constructor(){this.h=this.g=null}add(e,n){const s=Bi.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}},Ji=()=>{const i=Ue.Promise.resolve(void 0);ur=()=>{i.then(Mi)}};var Mi=()=>{for(var i;i=Is();){try{i.h.call(i.g)}catch(n){Pi(n)}var e=Bi;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Hr=!1};function ti(i,e){yn.call(this),this.h=i||1,this.g=e||Ue,this.j=pe(this.qb,this),this.l=Date.now()}function on(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function vi(i,e,n){if("function"==typeof i)n&&(i=pe(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=pe(i.handleEvent,i)}return 2147483647<Number(e)?-1:Ue.setTimeout(i,e||0)}function Ni(i){i.g=vi(()=>{i.g=null,i.i&&(i.i=!1,Ni(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}$e(ti,yn),(fe=ti.prototype).ga=!1,fe.T=null,fe.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),lr(this,"tick"),this.ga&&(on(this),this.start()))}},fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fe.N=function(){ti.$.N.call(this),on(this),delete this.g};class es extends je{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ni(this)}N(){super.N(),this.g&&(Ue.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(i){je.call(this),this.h=i,this.g={}}$e(Kr,je);var $r=[];function Bs(i,e,n,s){Array.isArray(n)||(n&&($r[0]=n.toString()),n=$r);for(var l=0;l<n.length;l++){var f=Mn(e,n[l],s||i.handleEvent,!1,i.h||i);if(!f)break;i.g[f.key]=f}}function Ys(i){bi(i.g,function(e,n){this.g.hasOwnProperty(n)&&Ne(e)},i),i.g={}}function Qi(){this.g=!0}function Gi(i,e,n,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ir(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var s=n[i];if(!(2>s.length)){var l=s[1];if(Array.isArray(l)&&!(1>l.length)){var f=l[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var _=1;_<l.length;_++)l[_]=""}}}return Zr(n)}catch{return e}}(i,n)+(s?" "+s:"")})}Kr.prototype.N=function(){Kr.$.N.call(this),Ys(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qi.prototype.Ea=function(){this.g=!1},Qi.prototype.info=function(){};var Dr={},as=null;function bt(){return as=as||new yn}function Cn(i){Qt.call(this,Dr.Ta,i)}function J(i){const e=bt();lr(e,new Cn(e))}function _e(i,e){Qt.call(this,Dr.STAT_EVENT,i),this.stat=e}function it(i){const e=bt();lr(e,new _e(e,i))}function ct(i,e){Qt.call(this,Dr.Ua,i),this.size=e}function At(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Ue.setTimeout(function(){i()},e)}Dr.Ta="serverreachability",$e(Cn,Qt),Dr.STAT_EVENT="statevent",$e(_e,Qt),Dr.Ua="timingevent",$e(ct,Qt);var It={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qt={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zt(){}function ln(){}Zt.prototype.h=null;var ut,Rn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function We(){Qt.call(this,"d")}function He(){Qt.call(this,"c")}function kt(){}function Dt(i,e,n,s){this.l=i,this.j=e,this.m=n,this.W=s||1,this.U=new Kr(this),this.P=qn,this.V=new ti(i=En?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bn}function bn(){this.i=null,this.g="",this.h=!1}$e(We,Qt),$e(He,Qt),$e(kt,Zt),kt.prototype.g=function(){return new XMLHttpRequest},kt.prototype.i=function(){return{}},ut=new kt;var qn=45e3,Kn={},Qn={};function Ln(i,e,n){i.L=1,i.v=xo(xi(e)),i.s=n,i.S=!0,wi(i,null)}function wi(i,e){i.G=Date.now(),zr(i),i.A=xi(i.v);var n=i.A,s=i.W;Array.isArray(s)||(s=[String(s)]),ri(n.i,"t",s),i.C=0,n=i.l.J,i.h=new bn,i.g=ba(i.l,n?e:null,!i.s),0<i.O&&(i.M=new es(pe(i.Pa,i,i.g),i.O)),Bs(i.U,i.g,"readystatechange",i.nb),e=i.I?Di(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),J(),function Ei(i,e,n,s,l,f){i.info(function(){if(i.g)if(f)for(var _="",M=f.split("&"),F=0;F<M.length;F++){var Q=M[F].split("=");if(1<Q.length){var ce=Q[0];Q=Q[1];var xe=ce.split("_");_=2<=xe.length&&"type"==xe[1]?_+(ce+"=")+Q+"&":_+(ce+"=redacted&")}}else _=null;else _=f;return"XMLHTTP REQ ("+s+") [attempt "+l+"]: "+e+"\n"+n+"\n"+_})}(i.j,i.u,i.A,i.m,i.W,i.s)}function Er(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function _o(i,e,n){let l,s=!0;for(;!i.J&&i.C<n.length;){if(l=ki(i,n),l==Qn){4==e&&(i.o=4,it(14),s=!1),Gi(i.j,i.m,null,"[Incomplete Response]");break}if(l==Kn){i.o=4,it(15),Gi(i.j,i.m,n,"[Invalid Chunk]"),s=!1;break}Gi(i.j,i.m,l,null),Vs(i,l)}Er(i)&&l!=Qn&&l!=Kn&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,it(16),s=!1),i.i=i.i&&s,s?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bo(e),e.M=!0,it(11))):(Gi(i.j,i.m,n,"[Invalid Chunked Response]"),Vr(i),Gn(i))}function ki(i,e){var n=i.C,s=e.indexOf("\n",n);return-1==s?Qn:(n=Number(e.substring(n,s)),isNaN(n)?Kn:(s+=1)+n>e.length?Qn:(e=e.slice(s,s+n),i.C=s+n,e))}function zr(i){i.Y=Date.now()+i.P,An(i,i.P)}function An(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=At(pe(i.lb,i),e)}function $n(i){i.B&&(Ue.clearTimeout(i.B),i.B=null)}function Gn(i){0==i.l.H||i.J||la(i.l,i)}function Vr(i){$n(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,on(i.V),Ys(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Vs(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||ws(n.i,i)))if(!i.K&&ws(n.i,i)&&3==n.H){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var l=s;if(0==l[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;yo(n),Ds(n)}Il(n),it(18)}}else n.Fa=l[1],0<n.Fa-n.V&&37500>l[2]&&n.G&&0==n.A&&!n.v&&(n.v=At(pe(n.ib,n),6e3));if(1>=Io(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ka(n,11)}else if((i.K||n.g==i)&&yo(n),!Vn(e))for(l=n.Ja.g.parse(e),e=0;e<l.length;e++){let Q=l[e];if(n.V=Q[0],Q=Q[1],2==n.H)if("c"==Q[0]){n.K=Q[1],n.pa=Q[2];const ce=Q[3];null!=ce&&(n.ra=ce,n.l.info("VER="+n.ra));const xe=Q[4];null!=xe&&(n.Ga=xe,n.l.info("SVER="+n.Ga));const mt=Q[5];null!=mt&&"number"==typeof mt&&0<mt&&(n.L=s=1.5*mt,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const Ct=i.g;if(Ct){const pn=Ct.g?Ct.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pn){var f=s.i;f.g||-1==pn.indexOf("spdy")&&-1==pn.indexOf("quic")&&-1==pn.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Cs(f,f.h),f.h=null))}if(s.F){const Fn=Ct.g?Ct.g.getResponseHeader("X-HTTP-Session-Id"):null;Fn&&(s.Da=Fn,ni(s.I,s.F,Fn))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var _=i;if((s=n).wa=ca(s,s.J?s.pa:null,s.Y),_.K){rs(s.i,_);var M=_,F=s.L;F&&M.setTimeout(F),M.B&&($n(M),zr(M)),s.g=_}else Zs(s);0<n.j.length&&oo(n)}else"stop"!=Q[0]&&"close"!=Q[0]||ka(n,7);else 3==n.H&&("stop"==Q[0]||"close"==Q[0]?"stop"==Q[0]?ka(n,7):bs(n):"noop"!=Q[0]&&n.h&&n.h.Aa(Q),n.A=0)}J()}catch{}}function Ci(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(zt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function ls(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(zt(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const s in i)e[n++]=s;return e}}}(i),s=function Ti(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(zt(i)){for(var e=[],n=i.length,s=0;s<n;s++)e.push(i[s]);return e}for(s in e=[],n=0,i)e[n++]=i[s];return e}(i),l=s.length,f=0;f<l;f++)e.call(void 0,s[f],n&&n[f],i)}(fe=Dt.prototype).setTimeout=function(i){this.P=i},fe.nb=function(i){i=i.target;const e=this.M;e&&3==ae(i)?e.l():this.Pa(i)},fe.Pa=function(i){try{if(i==this.g)e:{const ce=ae(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ce)&&(3!=ce||En||this.g&&(this.h.h||this.g.ja()||Nt(this.g)))){this.J||4!=ce||7==e||J(),$n(this);var n=this.g.da();this.ca=n;t:if(Er(this)){var s=Nt(this.g);i="";var l=s.length,f=4==ae(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vr(this),Gn(this);var _="";break t}this.h.i=new Ue.TextDecoder}for(e=0;e<l;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:f&&e==l-1});s.splice(0,l),this.h.g+=i,this.C=0,_=this.h.g}else _=this.g.ja();if(this.i=200==n,function ts(i,e,n,s,l,f,_){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+l+"]: "+e+"\n"+n+"\n"+f+" "+_})}(this.j,this.u,this.A,this.m,this.W,ce,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var M,F=this.g;if((M=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vn(M)){var Q=M;break t}}Q=null}if(!(n=Q)){this.i=!1,this.o=3,it(12),Vr(this),Gn(this);break e}Gi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vs(this,n)}this.S?(_o(this,ce,_),En&&this.i&&3==ce&&(Bs(this.U,this.V,"tick",this.mb),this.V.start())):(Gi(this.j,this.m,_,null),Vs(this,_)),4==ce&&Vr(this),this.i&&!this.J&&(4==ce?la(this.l,this):(this.i=!1,zr(this)))}else(function jn(i){const e={};i=(i.g&&2<=ae(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<i.length;s++){if(Vn(i[s]))continue;var n=oi(i[s]);const l=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const f=e[l]||[];e[l]=f,f.push(n)}!function Zi(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(s){return s.join(", ")})})(this.g),400==n&&0<_.indexOf("Unknown SID")?(this.o=3,it(12)):(this.o=0,it(13)),Vr(this),Gn(this)}}}catch{}},fe.mb=function(){if(this.g){var i=ae(this.g),e=this.g.ja();this.C<e.length&&($n(this),_o(this,i,e),this.i&&4!=i&&zr(this))}},fe.cancel=function(){this.J=!0,Vr(this)},fe.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function $s(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(J(),it(17)),Vr(this),this.o=2,Gn(this)):An(this,this.Y-i)};var Es=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ar(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ar){this.h=i.h,io(this,i.j),this.s=i.s,this.g=i.g,Wi(this,i.m),this.l=i.l;var e=i.i,n=new ps;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Fi(this,n),this.o=i.o}else i&&(e=String(i).match(Es))?(this.h=!1,io(this,e[1]||"",!0),this.s=fs(e[2]||""),this.g=fs(e[3]||"",!0),Wi(this,e[4]),this.l=fs(e[5]||"",!0),Fi(this,e[6]||"",!0),this.o=fs(e[7]||"")):(this.h=!1,this.i=new ps(null,this.h))}function xi(i){return new ar(i)}function io(i,e,n){i.j=n?fs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Wi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Fi(i,e,n){e instanceof ps?(i.i=e,function Hs(i,e){e&&!i.j&&(xs(i),i.i=null,i.g.forEach(function(n,s){var l=s.toLowerCase();s!=l&&(Rs(this,s),ri(this,l,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Us(e,mo)),i.i=new ps(e,i.h))}function ni(i,e,n){i.i.set(e,n)}function xo(i){return ni(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function fs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Us(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Ca),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ca(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ar.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Us(e,Ms,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Us(e,Ms,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Us(n,"/"==n.charAt(0)?js:Tr,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Us(n,kr)),i.join("")};var Ms=/[#\/\?@]/g,Tr=/[#\?:]/g,js=/[#\?]/g,mo=/[#\?@]/g,kr=/#/g;function ps(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function xs(i){i.g||(i.g=new Map,i.h=0,i.i&&function Mo(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var s=i[n].indexOf("="),l=null;if(0<=s){var f=i[n].substring(0,s);l=i[n].substring(s+1)}else f=i[n];e(f,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Rs(i,e){xs(i),e=Xi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function cs(i,e){return xs(i),e=Xi(i,e),i.g.has(e)}function ri(i,e,n){Rs(i,e),0<n.length&&(i.i=null,i.g.set(Xi(i,e),Bt(n)),i.h+=n.length)}function Xi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function qi(i){this.l=i||us,i=Ue.PerformanceNavigationTiming?0<(i=Ue.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Ue.g&&Ue.g.Ka&&Ue.g.Ka()&&Ue.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(fe=ps.prototype).add=function(i,e){xs(this),this.i=null,i=Xi(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},fe.forEach=function(i,e){xs(this),this.g.forEach(function(n,s){n.forEach(function(l){i.call(e,l,s,this)},this)},this)},fe.ta=function(){xs(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const l=i[s];for(let f=0;f<l.length;f++)n.push(e[s])}return n},fe.Z=function(i){xs(this);let e=[];if("string"==typeof i)cs(this,i)&&(e=e.concat(this.g.get(Xi(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},fe.set=function(i,e){return xs(this),this.i=null,cs(this,i=Xi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},fe.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const f=encodeURIComponent(String(s)),_=this.Z(s);for(s=0;s<_.length;s++){var l=f;""!==_[s]&&(l+="="+encodeURIComponent(String(_[s]))),i.push(l)}}return this.i=i.join("&")};var us=10;function ds(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Io(i){return i.h?1:i.g?i.g.size:0}function ws(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Cs(i,e){i.g?i.g.add(e):i.h=e}function rs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function so(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return Bt(i.i)}qi.prototype.cancel=function(){if(this.i=so(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var ol=class{stringify(i){return Ue.JSON.stringify(i,void 0)}parse(i){return Ue.JSON.parse(i,void 0)}};function qo(){this.g=new ol}function mi(i,e,n){const s=n||"";try{Ci(i,function(l,f){let _=l;en(l)&&(_=Zr(l)),e.push(s+f+"="+encodeURIComponent(_))})}catch(l){throw e.push(s+"type="+encodeURIComponent("_badmap")),l}}function Pa(i,e,n,s,l){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,l(s)}catch{}}function Eo(i){this.l=i.fc||null,this.j=i.ob||!1}function Ro(i,e){yn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=sa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$e(Eo,Zt),Eo.prototype.g=function(){return new Ro(this.l,this.j)},Eo.prototype.i=function(i){return function(){return i}}({}),$e(Ro,yn);var sa=0;function wo(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function ci(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Or(i)}function Or(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(fe=Ro.prototype).open=function(i,e){if(this.readyState!=sa)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Or(this)},fe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Ue).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ci(this)),this.readyState=sa},fe.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ue.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wo(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},fe.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ci(this):Or(this),3==this.readyState&&wo(this)}},fe.Za=function(i){this.g&&(this.response=this.responseText=i,ci(this))},fe.Ya=function(i){this.g&&(this.response=i,ci(this))},fe.ka=function(){this.g&&ci(this)},fe.setRequestHeader=function(i,e){this.v.append(i,e)},fe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},fe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(Ro.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Gl=Ue.JSON.parse;function z(i){yn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=V,this.L=this.M=!1}$e(z,yn);var V="",oe=/^https?$/i,Y=["POST","PUT"];function fn(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,E(i),C(i)}function E(i){i.F||(i.F=!0,lr(i,"complete"),lr(i,"error"))}function q(i){if(i.h&&typeof at<"u"&&(!i.C[1]||4!=ae(i)||2!=i.da()))if(i.v&&4==ae(i))vi(i.La,0,i);else if(lr(i,"readystatechange"),4==ae(i)){i.h=!1;try{const _=i.da();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=0===_){var l=String(i.I).match(Es)[1]||null;!l&&Ue.self&&Ue.self.location&&(l=Ue.self.location.protocol.slice(0,-1)),s=!oe.test(l?l.toLowerCase():"")}n=s}if(n)lr(i,"complete"),lr(i,"success");else{i.m=6;try{var f=2<ae(i)?i.g.statusText:""}catch{f=""}i.j=f+" ["+i.da()+"]",E(i)}}finally{C(i)}}}function C(i,e){if(i.g){j(i);const n=i.g,s=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||lr(i,"ready");try{n.onreadystatechange=s}catch{}}}function j(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Ue.clearTimeout(i.A),i.A=null)}function ae(i){return i.g?i.g.readyState:0}function Nt(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case V:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Wn(i){let e="";return bi(i,function(n,s){e+=s,e+=":",e+=n,e+="\r\n"}),e}function fr(i,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Wn(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):ni(i,e,n))}function pi(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Gr(i){this.Ga=0,this.j=[],this.l=new Qi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=pi("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=pi("baseRetryDelayMs",5e3,i),this.hb=pi("retryDelaySeedMs",1e4,i),this.eb=pi("forwardChannelMaxRetries",2,i),this.xa=pi("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new qi(i&&i.concurrentRequestLimit),this.Ja=new qo,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function bs(i){if(Lo(i),3==i.H){var e=i.W++,n=xi(i.I);if(ni(n,"SID",i.K),ni(n,"RID",e),ni(n,"TYPE","terminate"),ao(i,n),(e=new Dt(i,i.l,e)).L=2,e.v=xo(xi(n)),n=!1,Ue.navigator&&Ue.navigator.sendBeacon)try{n=Ue.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Ue.Image&&((new Image).src=e.v,n=!0),n||(e.g=ba(e.l,null),e.g.ha(e.v)),e.G=Date.now(),zr(e)}Za(i)}function Ds(i){i.g&&(Bo(i),i.g.cancel(),i.g=null)}function Lo(i){Ds(i),i.u&&(Ue.clearTimeout(i.u),i.u=null),yo(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Ue.clearTimeout(i.m),i.m=null)}function oo(i){if(!ds(i.i)&&!i.m){i.m=!0;var e=i.Na;ur||Ji(),Hr||(ur(),Hr=!0),qr.add(e,i),i.C=0}}function Na(i,e){var n;n=e?e.m:i.W++;const s=xi(i.I);ni(s,"SID",i.K),ni(s,"RID",n),ni(s,"AID",i.V),ao(i,s),i.o&&i.s&&fr(s,i.o,i.s),n=new Dt(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=aa(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Cs(i.i,n),Ln(n,s,e)}function ao(i,e){i.na&&bi(i.na,function(n,s){ni(e,s,n)}),i.h&&Ci({},function(n,s){ni(e,s,n)})}function aa(i,e,n){n=Math.min(i.j.length,n);var s=i.h?pe(i.h.Va,i.h,i):null;e:{var l=i.j;let f=-1;for(;;){const _=["count="+n];-1==f?0<n?(f=l[0].g,_.push("ofs="+f)):f=0:_.push("ofs="+f);let M=!0;for(let F=0;F<n;F++){let Q=l[F].g;const ce=l[F].map;if(Q-=f,0>Q)f=Math.max(0,l[F].g-100),M=!1;else try{mi(ce,_,"req"+Q+"_")}catch{s&&s(ce)}}if(M){s=_.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,s}function Zs(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;ur||Ji(),Hr||(ur(),Hr=!0),qr.add(e,i),i.A=0}}function Il(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=At(pe(i.Ma,i),al(i,i.A)),i.A++,0))}function Bo(i){null!=i.B&&(Ue.clearTimeout(i.B),i.B=null)}function Ts(i){i.g=new Dt(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=xi(i.wa);ni(e,"RID","rpc"),ni(e,"SID",i.K),ni(e,"AID",i.V),ni(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&ni(e,"TO",i.qa),ni(e,"TYPE","xmlhttp"),ao(i,e),i.o&&i.s&&fr(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=xo(xi(e)),n.s=null,n.S=!0,wi(n,i)}function yo(i){null!=i.v&&(Ue.clearTimeout(i.v),i.v=null)}function la(i,e){var n=null;if(i.g==e){yo(i),Bo(i),i.g=null;var s=2}else{if(!ws(i.i,e))return;n=e.F,rs(i.i,e),s=1}if(0!=i.H)if(e.i)if(1==s){n=e.s?e.s.length:0,e=Date.now()-e.G;var l=i.C;lr(s=bt(),new ct(s,n)),oo(i)}else Zs(i);else if(3==(l=e.o)||0==l&&0<e.ca||!(1==s&&function oa(i,e){return!(Io(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=At(pe(i.Na,i,e),al(i,i.C)),i.C++,0)))}(i,e)||2==s&&Il(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),l){case 1:ka(i,5);break;case 4:ka(i,10);break;case 3:ka(i,6);break;default:ka(i,2)}}function al(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function ka(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var s=pe(i.pb,i);n||(n=new ar("//www.google.com/images/cleardot.gif"),Ue.location&&"http"==Ue.location.protocol||io(n,"https"),xo(n)),function ia(i,e){const n=new Qi;if(Ue.Image){const s=new Image;s.onload=Se(Pa,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Se(Pa,n,s,"TestLoadImage: error",!1,e),s.onabort=Se(Pa,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Se(Pa,n,s,"TestLoadImage: timeout",!1,e),Ue.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(n.toString(),s)}else it(2);i.H=0,i.h&&i.h.za(e),Za(i),Lo(i)}function Za(i){if(i.H=0,i.ma=[],i.h){const e=so(i.i);(0!=e.length||0!=i.j.length)&&(Ft(i.ma,e),Ft(i.ma,i.j),i.i.i.length=0,Bt(i.j),i.j.length=0),i.h.ya()}}function ca(i,e,n){var s=n instanceof ar?xi(n):new ar(n);if(""!=s.g)e&&(s.g=e+"."+s.g),Wi(s,s.m);else{var l=Ue.location;s=l.protocol,e=e?e+"."+l.hostname:l.hostname,l=+l.port;var f=new ar(null);s&&io(f,s),e&&(f.g=e),l&&Wi(f,l),n&&(f.l=n),s=f}return e=i.Da,(n=i.F)&&e&&ni(s,n,e),ni(s,"VER",i.ra),ao(i,s),s}function ba(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new z(n&&i.Ha&&!i.va?new Eo({ob:!0}):i.va)).Oa(i.J),e}function Fa(){}function Oo(){if(Wt&&!(10<=Number(Br)))throw Error("Environmental error: no available transport.")}function Os(i,e){yn.call(this),this.g=new Gr(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Vn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vn(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new $o(this)}function ua(i){We.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Qa(){He.call(this),this.status=1}function $o(i){this.g=i}function lo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function co(i,e,n){n||(n=0);var s=Array(16);if("string"==typeof e)for(var l=0;16>l;++l)s[l]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(l=0;16>l;++l)s[l]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var f=i.g[3],_=(e=i.g[0])+(f^(n=i.g[1])&((l=i.g[2])^f))+s[0]+3614090360&4294967295;_=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=(n=(l=(f=(e=n+(_<<7&4294967295|_>>>25))+((_=f+(l^e&(n^l))+s[1]+3905402710&4294967295)<<12&4294967295|_>>>20))+((_=l+(n^f&(e^n))+s[2]+606105819&4294967295)<<17&4294967295|_>>>15))+((_=n+(e^l&(f^e))+s[3]+3250441966&4294967295)<<22&4294967295|_>>>10))+((_=e+(f^n&(l^f))+s[4]+4118548399&4294967295)<<7&4294967295|_>>>25))+((_=f+(l^e&(n^l))+s[5]+1200080426&4294967295)<<12&4294967295|_>>>20))+((_=l+(n^f&(e^n))+s[6]+2821735955&4294967295)<<17&4294967295|_>>>15))+((_=n+(e^l&(f^e))+s[7]+4249261313&4294967295)<<22&4294967295|_>>>10))+((_=e+(f^n&(l^f))+s[8]+1770035416&4294967295)<<7&4294967295|_>>>25))+((_=f+(l^e&(n^l))+s[9]+2336552879&4294967295)<<12&4294967295|_>>>20))+((_=l+(n^f&(e^n))+s[10]+4294925233&4294967295)<<17&4294967295|_>>>15))+((_=n+(e^l&(f^e))+s[11]+2304563134&4294967295)<<22&4294967295|_>>>10))+((_=e+(f^n&(l^f))+s[12]+1804603682&4294967295)<<7&4294967295|_>>>25))+((_=f+(l^e&(n^l))+s[13]+4254626195&4294967295)<<12&4294967295|_>>>20))+((_=l+(n^f&(e^n))+s[14]+2792965006&4294967295)<<17&4294967295|_>>>15))+((_=n+(e^l&(f^e))+s[15]+1236535329&4294967295)<<22&4294967295|_>>>10))+((_=e+(l^f&(n^l))+s[1]+4129170786&4294967295)<<5&4294967295|_>>>27))+((_=f+(n^l&(e^n))+s[6]+3225465664&4294967295)<<9&4294967295|_>>>23))+((_=l+(e^n&(f^e))+s[11]+643717713&4294967295)<<14&4294967295|_>>>18))+((_=n+(f^e&(l^f))+s[0]+3921069994&4294967295)<<20&4294967295|_>>>12))+((_=e+(l^f&(n^l))+s[5]+3593408605&4294967295)<<5&4294967295|_>>>27))+((_=f+(n^l&(e^n))+s[10]+38016083&4294967295)<<9&4294967295|_>>>23))+((_=l+(e^n&(f^e))+s[15]+3634488961&4294967295)<<14&4294967295|_>>>18))+((_=n+(f^e&(l^f))+s[4]+3889429448&4294967295)<<20&4294967295|_>>>12))+((_=e+(l^f&(n^l))+s[9]+568446438&4294967295)<<5&4294967295|_>>>27))+((_=f+(n^l&(e^n))+s[14]+3275163606&4294967295)<<9&4294967295|_>>>23))+((_=l+(e^n&(f^e))+s[3]+4107603335&4294967295)<<14&4294967295|_>>>18))+((_=n+(f^e&(l^f))+s[8]+1163531501&4294967295)<<20&4294967295|_>>>12))+((_=e+(l^f&(n^l))+s[13]+2850285829&4294967295)<<5&4294967295|_>>>27))+((_=f+(n^l&(e^n))+s[2]+4243563512&4294967295)<<9&4294967295|_>>>23))+((_=l+(e^n&(f^e))+s[7]+1735328473&4294967295)<<14&4294967295|_>>>18))+((_=n+(f^e&(l^f))+s[12]+2368359562&4294967295)<<20&4294967295|_>>>12))+((_=e+(n^l^f)+s[5]+4294588738&4294967295)<<4&4294967295|_>>>28))+((_=f+(e^n^l)+s[8]+2272392833&4294967295)<<11&4294967295|_>>>21))+((_=l+(f^e^n)+s[11]+1839030562&4294967295)<<16&4294967295|_>>>16))+((_=n+(l^f^e)+s[14]+4259657740&4294967295)<<23&4294967295|_>>>9))+((_=e+(n^l^f)+s[1]+2763975236&4294967295)<<4&4294967295|_>>>28))+((_=f+(e^n^l)+s[4]+1272893353&4294967295)<<11&4294967295|_>>>21))+((_=l+(f^e^n)+s[7]+4139469664&4294967295)<<16&4294967295|_>>>16))+((_=n+(l^f^e)+s[10]+3200236656&4294967295)<<23&4294967295|_>>>9))+((_=e+(n^l^f)+s[13]+681279174&4294967295)<<4&4294967295|_>>>28))+((_=f+(e^n^l)+s[0]+3936430074&4294967295)<<11&4294967295|_>>>21))+((_=l+(f^e^n)+s[3]+3572445317&4294967295)<<16&4294967295|_>>>16))+((_=n+(l^f^e)+s[6]+76029189&4294967295)<<23&4294967295|_>>>9))+((_=e+(n^l^f)+s[9]+3654602809&4294967295)<<4&4294967295|_>>>28))+((_=f+(e^n^l)+s[12]+3873151461&4294967295)<<11&4294967295|_>>>21))+((_=l+(f^e^n)+s[15]+530742520&4294967295)<<16&4294967295|_>>>16))+((_=n+(l^f^e)+s[2]+3299628645&4294967295)<<23&4294967295|_>>>9))+((_=e+(l^(n|~f))+s[0]+4096336452&4294967295)<<6&4294967295|_>>>26))+((_=f+(n^(e|~l))+s[7]+1126891415&4294967295)<<10&4294967295|_>>>22))+((_=l+(e^(f|~n))+s[14]+2878612391&4294967295)<<15&4294967295|_>>>17))+((_=n+(f^(l|~e))+s[5]+4237533241&4294967295)<<21&4294967295|_>>>11))+((_=e+(l^(n|~f))+s[12]+1700485571&4294967295)<<6&4294967295|_>>>26))+((_=f+(n^(e|~l))+s[3]+2399980690&4294967295)<<10&4294967295|_>>>22))+((_=l+(e^(f|~n))+s[10]+4293915773&4294967295)<<15&4294967295|_>>>17))+((_=n+(f^(l|~e))+s[1]+2240044497&4294967295)<<21&4294967295|_>>>11))+((_=e+(l^(n|~f))+s[8]+1873313359&4294967295)<<6&4294967295|_>>>26))+((_=f+(n^(e|~l))+s[15]+4264355552&4294967295)<<10&4294967295|_>>>22))+((_=l+(e^(f|~n))+s[6]+2734768916&4294967295)<<15&4294967295|_>>>17))+((_=n+(f^(l|~e))+s[13]+1309151649&4294967295)<<21&4294967295|_>>>11))+((f=(e=n+((_=e+(l^(n|~f))+s[4]+4149444226&4294967295)<<6&4294967295|_>>>26))+((_=f+(n^(e|~l))+s[11]+3174756917&4294967295)<<10&4294967295|_>>>22))^((l=f+((_=l+(e^(f|~n))+s[2]+718787259&4294967295)<<15&4294967295|_>>>17))|~e))+s[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(l+(_<<21&4294967295|_>>>11))&4294967295,i.g[2]=i.g[2]+l&4294967295,i.g[3]=i.g[3]+f&4294967295}function Yr(i,e){this.h=e;for(var n=[],s=!0,l=i.length-1;0<=l;l--){var f=0|i[l];s&&f==e||(n[l]=f,s=!1)}this.g=n}(fe=z.prototype).Oa=function(i){this.M=i},fe.ha=function(i,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ut.g(),this.C=function Ut(i){return i.h||(i.h=i.i())}(this.u?this.u:ut),this.g.onreadystatechange=pe(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(f){return void fn(this,f)}if(i=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var l in s)n.set(l,s[l]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const f of s.keys())n.set(f,s.get(f))}s=Array.from(n.keys()).find(f=>"content-type"==f.toLowerCase()),l=Ue.FormData&&i instanceof Ue.FormData,!(0<=ht(Y,e))||s||l||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,_]of n)this.g.setRequestHeader(f,_);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{j(this),0<this.B&&((this.L=function Te(i){return Wt&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pe(this.ua,this)):this.A=vi(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(f){fn(this,f)}},fe.ua=function(){typeof at<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lr(this,"timeout"),this.abort(8))},fe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,lr(this,"complete"),lr(this,"abort"),C(this))},fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),C(this,!0)),z.$.N.call(this)},fe.La=function(){this.s||(this.G||this.v||this.l?q(this):this.kb())},fe.kb=function(){q(this)},fe.isActive=function(){return!!this.g},fe.da=function(){try{return 2<ae(this)?this.g.status:-1}catch{return-1}},fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},fe.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Gl(e)}},fe.Ia=function(){return this.m},fe.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(fe=Gr.prototype).ra=8,fe.H=1,fe.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const l=new Dt(this,this.l,i);let f=this.s;if(this.U&&(f?(f=Di(f),Ii(f,this.U)):f=this.U),null!==this.o||this.O||(l.I=f,f=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var s=this.j[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=aa(this,l,e),ni(n=xi(this.I),"RID",i),ni(n,"CVER",22),this.F&&ni(n,"X-HTTP-Session-Id",this.F),ao(this,n),f&&(this.O?e="headers="+encodeURIComponent(String(Wn(f)))+"&"+e:this.o&&fr(n,this.o,f)),Cs(this.i,l),this.bb&&ni(n,"TYPE","init"),this.P?(ni(n,"$req",e),ni(n,"SID","null"),l.aa=!0,Ln(l,n,null)):Ln(l,n,e),this.H=2}}else 3==this.H&&(i?Na(this,i):0==this.j.length||ds(this.i)||Na(this))},fe.Ma=function(){if(this.u=null,Ts(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=At(pe(this.jb,this),i)}},fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,it(10),Ds(this),Ts(this))},fe.ib=function(){null!=this.v&&(this.v=null,Ds(this),Il(this),it(19))},fe.pb=function(i){i?(this.l.info("Successfully pinged google.com"),it(2)):(this.l.info("Failed to ping google.com"),it(1))},fe.isActive=function(){return!!this.h&&this.h.isActive(this)},(fe=Fa.prototype).Ba=function(){},fe.Aa=function(){},fe.za=function(){},fe.ya=function(){},fe.isActive=function(){return!0},fe.Va=function(){},Oo.prototype.g=function(i,e){return new Os(i,e)},$e(Os,yn),Os.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;it(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=ca(i,null,i.Y),oo(i)},Os.prototype.close=function(){bs(this.g)},Os.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Zr(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&oo(e)},Os.prototype.N=function(){this.g.h=null,delete this.j,bs(this.g),delete this.g,Os.$.N.call(this)},$e(ua,We),$e(Qa,He),$e($o,Fa),$o.prototype.Ba=function(){lr(this.g,"a")},$o.prototype.Aa=function(i){lr(this.g,new ua(i))},$o.prototype.za=function(i){lr(this.g,new Qa)},$o.prototype.ya=function(){lr(this.g,"b")},$e(lo,function Ps(){this.blockSize=-1}),lo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},lo.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,s=this.m,l=this.h,f=0;f<e;){if(0==l)for(;f<=n;)co(this,i,f),f+=this.blockSize;if("string"==typeof i){for(;f<e;)if(s[l++]=i.charCodeAt(f++),l==this.blockSize){co(this,s),l=0;break}}else for(;f<e;)if(s[l++]=i[f++],l==this.blockSize){co(this,s),l=0;break}}this.h=l,this.i+=e},lo.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)i[n++]=this.g[e]>>>s&255;return i};var A={};function G(i){return-128<=i&&128>i?function Rt(i,e){var n=A;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new Yr([0|e],0>e?-1:0)}):new Yr([0|i],0>i?-1:0)}function we(i){if(isNaN(i)||!isFinite(i))return tt;if(0>i)return Sr(we(-i));for(var e=[],n=1,s=0;i>=n;s++)e[s]=i/n|0,n*=me;return new Yr(e,0)}var me=4294967296,tt=G(0),$t=G(1),xn=G(16777216);function xr(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Pr(i){return-1==i.h}function Sr(i){for(var e=i.g.length,n=[],s=0;s<e;s++)n[s]=~i.g[s];return new Yr(n,~i.h).add($t)}function Wr(i,e){return i.add(Sr(e))}function Rr(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Ur(i,e){this.g=i,this.h=e}function $i(i,e){if(xr(e))throw Error("division by zero");if(xr(i))return new Ur(tt,tt);if(Pr(i))return e=$i(Sr(i),e),new Ur(Sr(e.g),Sr(e.h));if(Pr(e))return e=$i(i,Sr(e)),new Ur(Sr(e.g),e.h);if(30<i.g.length){if(Pr(i)||Pr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=$t,s=e;0>=s.X(i);)n=Co(n),s=Co(s);var l=Ns(n,1),f=Ns(s,1);for(s=Ns(s,2),n=Ns(n,2);!xr(s);){var _=f.add(s);0>=_.X(i)&&(l=l.add(n),f=_),s=Ns(s,1),n=Ns(n,1)}return e=Wr(i,l.R(e)),new Ur(l,e)}for(l=tt;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),_=(f=we(n)).R(e);Pr(_)||0<_.X(i);)_=(f=we(n-=s)).R(e);xr(f)&&(f=$t),l=l.add(f),i=Wr(i,_)}return new Ur(l,i)}function Co(i){for(var e=i.g.length+1,n=[],s=0;s<e;s++)n[s]=i.D(s)<<1|i.D(s-1)>>>31;return new Yr(n,i.h)}function Ns(i,e){var n=e>>5;e%=32;for(var s=i.g.length-n,l=[],f=0;f<s;f++)l[f]=0<e?i.D(f+n)>>>e|i.D(f+n+1)<<32-e:i.D(f+n);return new Yr(l,i.h)}(fe=Yr.prototype).ea=function(){if(Pr(this))return-Sr(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);i+=(0<=s?s:me+s)*e,e*=me}return i},fe.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(xr(this))return"0";if(Pr(this))return"-"+Sr(this).toString(i);for(var e=we(Math.pow(i,6)),n=this,s="";;){var l=$i(n,e).g,f=((0<(n=Wr(n,l.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(xr(n=l))return f+s;for(;6>f.length;)f="0"+f;s=f+s}},fe.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},fe.X=function(i){return Pr(i=Wr(this,i))?-1:xr(i)?0:1},fe.abs=function(){return Pr(this)?Sr(this):this},fe.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0,l=0;l<=e;l++){var f=s+(65535&this.D(l))+(65535&i.D(l)),_=(f>>>16)+(this.D(l)>>>16)+(i.D(l)>>>16);s=_>>>16,n[l]=(_&=65535)<<16|(f&=65535)}return new Yr(n,-2147483648&n[n.length-1]?-1:0)},fe.R=function(i){if(xr(this)||xr(i))return tt;if(Pr(this))return Pr(i)?Sr(this).R(Sr(i)):Sr(Sr(this).R(i));if(Pr(i))return Sr(this.R(Sr(i)));if(0>this.X(xn)&&0>i.X(xn))return we(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var l=0;l<i.g.length;l++){var f=this.D(s)>>>16,_=65535&this.D(s),M=i.D(l)>>>16,F=65535&i.D(l);n[2*s+2*l]+=_*F,Rr(n,2*s+2*l),n[2*s+2*l+1]+=f*F,Rr(n,2*s+2*l+1),n[2*s+2*l+1]+=_*M,Rr(n,2*s+2*l+1),n[2*s+2*l+2]+=f*M,Rr(n,2*s+2*l+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new Yr(n,0)},fe.gb=function(i){return $i(this,i).h},fe.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&i.D(s);return new Yr(n,this.h&i.h)},fe.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|i.D(s);return new Yr(n,this.h|i.h)},fe.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^i.D(s);return new Yr(n,this.h^i.h)},Oo.prototype.createWebChannel=Oo.prototype.g,Os.prototype.send=Os.prototype.u,Os.prototype.open=Os.prototype.m,Os.prototype.close=Os.prototype.close,It.NO_ERROR=0,It.TIMEOUT=8,It.HTTP_ERROR=6,qt.COMPLETE="complete",ln.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",yn.prototype.listen=yn.prototype.O,z.prototype.listenOnce=z.prototype.P,z.prototype.getLastError=z.prototype.Sa,z.prototype.getLastErrorCode=z.prototype.Ia,z.prototype.getStatus=z.prototype.da,z.prototype.getResponseJson=z.prototype.Wa,z.prototype.getResponseText=z.prototype.ja,z.prototype.send=z.prototype.ha,z.prototype.setWithCredentials=z.prototype.Oa,lo.prototype.digest=lo.prototype.l,lo.prototype.reset=lo.prototype.reset,lo.prototype.update=lo.prototype.j,Yr.prototype.add=Yr.prototype.add,Yr.prototype.multiply=Yr.prototype.R,Yr.prototype.modulo=Yr.prototype.gb,Yr.prototype.compare=Yr.prototype.X,Yr.prototype.toNumber=Yr.prototype.ea,Yr.prototype.toString=Yr.prototype.toString,Yr.prototype.getBits=Yr.prototype.D,Yr.fromNumber=we,Yr.fromString=function $(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Sr($(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=we(Math.pow(e,8)),s=tt,l=0;l<i.length;l+=8){var f=Math.min(8,i.length-l),_=parseInt(i.substring(l,l+f),e);8>f?(f=we(Math.pow(e,f)),s=s.R(f).add(we(_))):s=(s=s.R(n)).add(we(_))}return s};var Ja,Vo,od,pc,xl,ad,Du,La,Tu,Ba,Wl,Mr,ll,ql,cl,gc,Rl,El,Ko,mc,Ol,Kl,Yl,yc,dn,gi,wl,vc,Vi,ul,hs,Do,Gs,is,Zl,_c,Wc,To,$a,Ic,Cl,Uo,T,bo=Fe.createWebChannelTransport=function(){return new Oo},zs=Fe.getStatEventTarget=function(){return bt()},Ss=Fe.ErrorCode=It,Qs=Fe.EventType=qt,da=Fe.Event=Dr,Nr=Fe.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ml=Fe.FetchXmlHttpFactory=Eo,ha=Fe.WebChannel=ln,uo=Fe.XhrIo=z,Gc=Fe.Md5=lo,Xa=Fe.Integer=Yr;const R="@firebase/firestore";class N{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}N.UNAUTHENTICATED=new N(null),N.GOOGLE_CREDENTIALS=new N("google-credentials-uid"),N.FIRST_PARTY=new N("first-party-uid"),N.MOCK_USER=new N("mock-user");let x="9.23.0";const U=new rt.Yd("@firebase/firestore");function se(){return U.logLevel}function Be(i,...e){if(U.logLevel<=rt.in.DEBUG){const n=e.map(yr);U.debug(`Firestore (${x}): ${i}`,...n)}}function hn(i,...e){if(U.logLevel<=rt.in.ERROR){const n=e.map(yr);U.error(`Firestore (${x}): ${i}`,...n)}}function Lt(i,...e){if(U.logLevel<=rt.in.WARN){const n=e.map(yr);U.warn(`Firestore (${x}): ${i}`,...n)}}function yr(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function cn(i="Unexpected state"){const e=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: `+i;throw hn(e),new Error(e)}function Hn(i,e){i||cn()}function kn(i,e){return i}const Mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rn extends be.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class gs{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(N.UNAUTHENTICATED))}shutdown(){}}class ss{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qc{constructor(e){this.t=e,this.currentUser=N.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var s=this;let l=this.i;const f=Q=>this.i!==l?(l=this.i,n(Q)):Promise.resolve();let _=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),_.resolve(),_=new Ui,e.enqueueRetryable(()=>f(this.currentUser))};const M=()=>{const Q=_;e.enqueueRetryable((0,Ee.Z)(function*(){yield Q.promise,yield f(s.currentUser)}))},F=Q=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Q,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(Q=>F(Q)),setTimeout(()=>{if(!this.auth){const Q=this.t.getImmediate({optional:!0});Q?F(Q):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),_.resolve(),_=new Ui)}},0),M()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Hn("string"==typeof s.accessToken),new gs(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Hn(null===e||"string"==typeof e),new N(e)}}class zd{constructor(e,n,s){this.h=e,this.l=n,this.m=s,this.type="FirstParty",this.user=N.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Gd{constructor(e,n,s){this.h=e,this.l=n,this.m=s}getToken(){return Promise.resolve(new zd(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(N.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Su{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fa{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const s=f=>{null!=f.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const _=f.token!==this.T;return this.T=f.token,Be("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?n(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>s(f))};const l=f=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.I.onInit(f=>l(f)),setTimeout(()=>{if(!this.appCheck){const f=this.I.getImmediate({optional:!0});f?l(f):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Hn("string"==typeof n.token),this.T=n.token,new Su(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function pa(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Po{static A(){const n=62*Math.floor(256/62);let s="";for(;s.length<20;){const l=pa(40);for(let f=0;f<l.length;++f)s.length<20&&l[f]<n&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(l[f]%62))}return s}}function jr(i,e){return i<e?-1:i>e?1:0}function el(i,e,n){return i.length===e.length&&i.every((s,l)=>n(s,e[l]))}function No(i){return i+"\0"}class Ri{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new rn(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new rn(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new rn(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rn(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ri.fromMillis(Date.now())}static fromDate(e){return Ri.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Ri(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jr(this.nanoseconds,e.nanoseconds):jr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vr(e)}static min(){return new vr(new Ri(0,0))}static max(){return new vr(new Ri(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ql{constructor(e,n,s){void 0===n?n=0:n>e.length&&cn(),void 0===s?s=e.length-n:s>e.length-n&&cn(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return 0===Ql.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ql?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let l=0;l<s;l++){const f=e.get(l),_=n.get(l);if(f<_)return-1;if(f>_)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ii extends Ql{construct(e,n,s){return new ii(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new rn(Mt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new ii(n)}static emptyPath(){return new ii([])}}const Au=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Li extends Ql{construct(e,n,s){return new Li(e,n,s)}static isValidIdentifier(e){return Au.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Li(["__name__"])}static fromServerFormat(e){const n=[];let s="",l=0;const f=()=>{if(0===s.length)throw new rn(Mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let _=!1;for(;l<e.length;){const M=e[l];if("\\"===M){if(l+1===e.length)throw new rn(Mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const F=e[l+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new rn(Mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=F,l+=2}else"`"===M?(_=!_,l++):"."!==M||_?(s+=M,l++):(f(),l++)}if(f(),_)throw new rn(Mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Li(n)}static emptyPath(){return new Li([])}}class On{constructor(e){this.path=e}static fromPath(e){return new On(ii.fromString(e))}static fromName(e){return new On(ii.fromString(e).popFirst(5))}static empty(){return new On(ii.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ii.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ii.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new On(new ii(e.slice()))}}class Xl{constructor(e,n,s,l){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=l}}function cd(i){return i.fields.find(e=>2===e.kind)}function dl(i){return i.fields.filter(e=>2!==e.kind)}Xl.UNKNOWN_ID=-1;class Pl{constructor(e,n){this.fieldPath=e,this.kind=n}}class Jl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Jl(0,As.min())}}function dd(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,l=vr.fromTimestamp(1e9===s?new Ri(n+1,0):new Ri(n,s));return new As(l,On.empty(),e)}function Ec(i){return new As(i.readTime,i.key,-1)}class As{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new As(vr.min(),On.empty(),-1)}static max(){return new As(vr.max(),On.empty(),-1)}}function xu(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=On.comparator(i.documentKey,e.documentKey),0!==n?n:jr(i.largestBatchId,e.largestBatchId))}const tl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ga(i){return(Ja=Ja||(0,Ee.Z)(function*(e){if(e.code!==Mt.FAILED_PRECONDITION||e.message!==tl)throw e;Be("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class xt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&cn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xt((s,l)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(s,l)},this.catchCallback=f=>{this.wrapFailure(n,f).next(s,l)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof xt?n:xt.resolve(n)}catch(n){return xt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):xt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):xt.reject(n)}static resolve(e){return new xt((n,s)=>{n(e)})}static reject(e){return new xt((n,s)=>{s(e)})}static waitFor(e){return new xt((n,s)=>{let l=0,f=0,_=!1;e.forEach(M=>{++l,M.next(()=>{++f,_&&f===l&&n()},F=>s(F))}),_=!0,f===l&&n()})}static or(e){let n=xt.resolve(!1);for(const s of e)n=n.next(l=>l?xt.resolve(l):s());return n}static forEach(e,n){const s=[];return e.forEach((l,f)=>{s.push(n.call(this,l,f))}),this.waitFor(s)}static mapArray(e,n){return new xt((s,l)=>{const f=e.length,_=new Array(f);let M=0;for(let F=0;F<f;F++){const Q=F;n(e[Q]).next(ce=>{_[Q]=ce,++M,M===f&&s(_)},ce=>l(ce))}})}static doWhile(e,n){return new xt((s,l)=>{const f=()=>{!0===e()?n().next(()=>{f()},l):s()};f()})}}class wc{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new Ui,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new jo(e,n.error)):this.v.resolve()},this.transaction.onerror=s=>{const l=Ua(s.target.error);this.v.reject(new jo(e,l))}}static open(e,n,s,l){try{return new wc(n,e.transaction(l,s))}catch(f){throw new jo(n,f)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new ec(n)}}class Zo{constructor(e,n,s){this.name=e,this.version=n,this.V=s,12.2===Zo.S((0,be.z$)())&&hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Va(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,be.hl)())return!1;if(Zo.C())return!0;const e=(0,be.z$)(),n=Zo.S(e),s=0<n&&n<10,l=Zo.N(e),f=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||f)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const n=e.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var n=this;return(0,Ee.Z)(function*(){return n.db||(Be("SimpleDb","Opening database:",n.name),n.db=yield new Promise((s,l)=>{const f=indexedDB.open(n.name,n.version);f.onsuccess=_=>{s(_.target.result)},f.onblocked=()=>{l(new jo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=_=>{const M=_.target.error;l("VersionError"===M.name?new rn(Mt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new rn(Mt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new jo(e,M))},f.onupgradeneeded=_=>{Be("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',_.oldVersion),n.V.O(_.target.result,f.transaction,_.oldVersion,n.version).next(()=>{Be("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.F&&(n.db.onversionchange=s=>n.F(s)),n.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,s,l){var f=this;return(0,Ee.Z)(function*(){const _="readonly"===n;let M=0;for(;;){++M;try{f.db=yield f.$(e);const F=wc.open(f.db,e,_?"readonly":"readwrite",s),Q=l(F).next(ce=>(F.P(),ce)).catch(ce=>(F.abort(ce),xt.reject(ce))).toPromise();return Q.catch(()=>{}),yield F.R,Q}catch(F){const Q=F,ce="FirebaseError"!==Q.name&&M<3;if(Be("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",ce),f.close(),!ce)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class hd{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Va(this.L.delete())}}class jo extends rn{constructor(e,n){super(Mt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function hl(i){return"IndexedDbTransactionError"===i.name}class ec{constructor(e){this.store=e}put(e,n){let s;return void 0!==n?(Be("SimpleDb","PUT",this.store.name,e,n),s=this.store.put(n,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Va(s)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Va(this.store.add(e))}get(e){return Va(this.store.get(e)).next(n=>(void 0===n&&(n=null),Be("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Va(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Va(this.store.count())}j(e,n){const s=this.options(e,n);if(s.index||"function"!=typeof this.store.getAll){const l=this.cursor(s),f=[];return this.W(l,(_,M)=>{f.push(M)}).next(()=>f)}{const l=this.store.getAll(s.range);return new xt((f,_)=>{l.onerror=M=>{_(M.target.error)},l.onsuccess=M=>{f(M.target.result)}})}}H(e,n){const s=this.store.getAll(e,null===n?void 0:n);return new xt((l,f)=>{s.onerror=_=>{f(_.target.error)},s.onsuccess=_=>{l(_.target.result)}})}J(e,n){Be("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,n);s.Y=!1;const l=this.cursor(s);return this.W(l,(f,_,M)=>M.delete())}X(e,n){let s;n?s=e:(s={},n=e);const l=this.cursor(s);return this.W(l,n)}Z(e){const n=this.cursor({});return new xt((s,l)=>{n.onerror=f=>{const _=Ua(f.target.error);l(_)},n.onsuccess=f=>{const _=f.target.result;_?e(_.primaryKey,_.value).next(M=>{M?_.continue():s()}):s()}})}W(e,n){const s=[];return new xt((l,f)=>{e.onerror=_=>{f(_.target.error)},e.onsuccess=_=>{const M=_.target.result;if(!M)return void l();const F=new hd(M),Q=n(M.primaryKey,M.value,F);if(Q instanceof xt){const ce=Q.catch(xe=>(F.done(),xt.reject(xe)));s.push(ce)}F.isDone?l():null===F.K?M.continue():M.continue(F.K)}}).next(()=>xt.waitFor(s))}options(e,n){let s;return void 0!==e&&("string"==typeof e?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Va(i){return new xt((e,n)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const l=Ua(s.target.error);n(l)}})}let Nl=!1;function Ua(i){const e=Zo.S((0,be.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const s=new rn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nl||(Nl=!0,setTimeout(()=>{throw s},0)),s}}return i}class ja{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var n=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){n.task=null;try{Be("IndexBackiller",`Documents written: ${yield n.tt.nt()}`)}catch(s){hl(s)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield ga(s)}yield n.et(6e4)}))}}class Cc{constructor(e,n){this.localStore=e,this.persistence=n}nt(e=50){var n=this;return(0,Ee.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>n.st(s,e))})()}st(e,n){const s=new Set;let l=n,f=!0;return xt.doWhile(()=>!0===f&&l>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(_=>{if(null!==_&&!s.has(_))return Be("IndexBackiller",`Processing collection: ${_}`),this.it(e,_,l).next(M=>{l-=M,s.add(_)});f=!1})).next(()=>n-l)}it(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(l=>this.localStore.localDocuments.getNextDocuments(e,n,l,s).next(f=>{const _=f.changes;return this.localStore.indexManager.updateIndexEntries(e,_).next(()=>this.rt(l,f)).next(M=>(Be("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,n,M))).next(()=>_.size)}))}rt(e,n){let s=e;return n.changes.forEach((l,f)=>{const _=Ec(f);xu(_,s)>0&&(s=_)}),new As(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Xs=(()=>{class i{constructor(n,s){this.previousValue=n,s&&(s.sequenceNumberHandler=l=>this.ot(l),this.ut=l=>s.writeSequenceNumber(l))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return i.ct=-1,i})();function fl(i){return null==i}function Ha(i){return 0===i&&1/i==-1/0}function Yc(i){return"number"==typeof i&&Number.isInteger(i)&&!Ha(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function ko(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=nl(e)),e=bl(i.get(n),e);return nl(e)}function bl(i,e){let n=e;const s=i.length;for(let l=0;l<s;l++){const f=i.charAt(l);switch(f){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=f}}return n}function nl(i){return i+"\x01\x01"}function za(i){const e=i.length;if(Hn(e>=2),2===e)return Hn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ii.emptyPath();const n=e-2,s=[];let l="";for(let f=0;f<e;){const _=i.indexOf("\x01",f);switch((_<0||_>n)&&cn(),i.charAt(_+1)){case"\x01":const M=i.substring(f,_);let F;0===l.length?F=M:(l+=M,F=l,l=""),s.push(F);break;case"\x10":l+=i.substring(f,_),l+="\0";break;case"\x11":l+=i.substring(f,_+1);break;default:cn()}f=_+2}return new ii(s)}const Dl=["userId","batchId"];function tc(i,e){return[i,ko(e)]}function Tl(i,e,n){return[i,ko(e),n]}const Zc={},Ls=["prefixPath","collectionGroup","readTime","documentId"],fd=["prefixPath","collectionGroup","documentId"],Ta=["collectionGroup","readTime","prefixPath","documentId"],Qo=["canonicalId","targetId"],Qc=["targetId","path"],Ru=["path","targetId"],Xc=["collectionId","parent"],Sl=["indexId","uid"],pl=["uid","sequenceNumber"],B=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],H=["indexId","uid","orderedDocumentKey"],X=["userId","collectionPath","documentId"],ve=["userId","collectionPath","largestBatchId"],Qe=["userId","collectionGroup","largestBatchId"],vt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Vt=[...vt,"documentOverlays"],Yt=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dn=Yt,nr=[...Dn,"indexConfiguration","indexState","indexEntries"];class cr extends Kc{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function tr(i,e){const n=kn(i);return Zo.M(n.ht,e)}function si(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ki(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function ms(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class gr{constructor(e,n){this.comparator=e,this.root=n||dr.EMPTY}insert(e,n){return new gr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(0===l)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Js(this.root,e,this.comparator,!1)}getReverseIterator(){return new Js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Js(this.root,e,this.comparator,!0)}}class Js{constructor(e,n,s,l){this.isReverse=l,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=n?s(e.key,n):1,n&&l&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dr{constructor(e,n,s,l,f){this.key=e,this.value=n,this.color=s??dr.RED,this.left=l??dr.EMPTY,this.right=f??dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,l,f){return new dr(e??this.key,n??this.value,s??this.color,l??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const f=s(e,l.key);return l=f<0?l.copy(null,null,null,l.left.insert(e,n,s),null):0===f?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===n(e,l.key)){if(l.right.isEmpty())return dr.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw cn();const e=this.left.check();if(e!==this.right.check())throw cn();return e+(this.isRed()?0:1)}}dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1,dr.EMPTY=new class{constructor(){this.size=0}get key(){throw cn()}get value(){throw cn()}get color(){throw cn()}get left(){throw cn()}get right(){throw cn()}copy(i,e,n,s,l){return this}insert(i,e,n){return new dr(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yi{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let s;for(s=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ws(this.data.getIterator())}getIteratorFrom(e){return new Ws(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof yi)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,f=s.getNext().key;if(0!==this.comparator(l,f))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yi(this.comparator);return n.data=e,n}}class Ws{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ks(i){return i.hasNext()?i.getNext():void 0}class ma{constructor(e){this.fields=e,e.sort(Li.comparator)}static empty(){return new ma([])}unionWith(e){let n=new yi(Li.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ma(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,(n,s)=>n.isEqual(s))}}class Jc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vo{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Jc("Invalid base64 string: "+l):l}}(e);return new vo(n)}static fromUint8Array(e){const n=function(s){let l="";for(let f=0;f<s.length;++f)l+=String.fromCharCode(s[f]);return l}(e);return new vo(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vo.EMPTY_BYTE_STRING=new vo("");const Wd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Al(i){if(Hn(!!i),"string"==typeof i){let e=0;const n=Wd.exec(i);if(Hn(!!n),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:eo(i.seconds),nanos:eo(i.nanos)}}function eo(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ho(i){return"string"==typeof i?vo.fromBase64String(i):vo.fromUint8Array(i)}function eu(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gl(i){const e=i.mapValue.fields.__previous_value__;return eu(e)?gl(e):e}function Ou(i){const e=Al(i.mapValue.fields.__local_write_time__.timestampValue);return new Ri(e.seconds,e.nanos)}class kh{constructor(e,n,s,l,f,_,M,F,Q){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=f,this.forceLongPolling=_,this.autoDetectLongPolling=M,this.longPollingOptions=F,this.useFetchStreams=Q}}class Sa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Sa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sa&&e.projectId===this.projectId&&e.database===this.database}}const ya={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qd={nullValue:"NULL_VALUE"};function ml(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?eu(i)?4:Kd(i)?9007199254740991:10:cn()}function Aa(i,e){if(i===e)return!0;const n=ml(i);if(n!==ml(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ou(i).isEqual(Ou(e));case 3:return function(s,l){if("string"==typeof s.timestampValue&&"string"==typeof l.timestampValue&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const f=Al(s.timestampValue),_=Al(l.timestampValue);return f.seconds===_.seconds&&f.nanos===_.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,ho(i.bytesValue).isEqual(ho(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,l){return eo(s.geoPointValue.latitude)===eo(l.geoPointValue.latitude)&&eo(s.geoPointValue.longitude)===eo(l.geoPointValue.longitude)}(i,e);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return eo(s.integerValue)===eo(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const f=eo(s.doubleValue),_=eo(l.doubleValue);return f===_?Ha(f)===Ha(_):isNaN(f)&&isNaN(_)}return!1}(i,e);case 9:return el(i.arrayValue.values||[],e.arrayValue.values||[],Aa);case 10:return function(s,l){const f=s.mapValue.fields||{},_=l.mapValue.fields||{};if(si(f)!==si(_))return!1;for(const M in f)if(f.hasOwnProperty(M)&&(void 0===_[M]||!Aa(f[M],_[M])))return!1;return!0}(i,e);default:return cn()}var l}function tu(i,e){return void 0!==(i.values||[]).find(n=>Aa(n,e))}function Xo(i,e){if(i===e)return 0;const n=ml(i),s=ml(e);if(n!==s)return jr(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return jr(i.booleanValue,e.booleanValue);case 2:return function(l,f){const _=eo(l.integerValue||l.doubleValue),M=eo(f.integerValue||f.doubleValue);return _<M?-1:_>M?1:_===M?0:isNaN(_)?isNaN(M)?0:-1:1}(i,e);case 3:return nu(i.timestampValue,e.timestampValue);case 4:return nu(Ou(i),Ou(e));case 5:return jr(i.stringValue,e.stringValue);case 6:return function(l,f){const _=ho(l),M=ho(f);return _.compareTo(M)}(i.bytesValue,e.bytesValue);case 7:return function(l,f){const _=l.split("/"),M=f.split("/");for(let F=0;F<_.length&&F<M.length;F++){const Q=jr(_[F],M[F]);if(0!==Q)return Q}return jr(_.length,M.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,f){const _=jr(eo(l.latitude),eo(f.latitude));return 0!==_?_:jr(eo(l.longitude),eo(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,f){const _=l.values||[],M=f.values||[];for(let F=0;F<_.length&&F<M.length;++F){const Q=Xo(_[F],M[F]);if(Q)return Q}return jr(_.length,M.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,f){if(l===ya.mapValue&&f===ya.mapValue)return 0;if(l===ya.mapValue)return 1;if(f===ya.mapValue)return-1;const _=l.fields||{},M=Object.keys(_),F=f.fields||{},Q=Object.keys(F);M.sort(),Q.sort();for(let ce=0;ce<M.length&&ce<Q.length;++ce){const xe=jr(M[ce],Q[ce]);if(0!==xe)return xe;const mt=Xo(_[M[ce]],F[Q[ce]]);if(0!==mt)return mt}return jr(M.length,Q.length)}(i.mapValue,e.mapValue);default:throw cn()}}function nu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return jr(i,e);const n=Al(i),s=Al(e),l=jr(n.seconds,s.seconds);return 0!==l?l:jr(n.nanos,s.nanos)}function Ga(i){return Dc(i)}function Dc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const l=Al(s);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ho(i.bytesValue).toBase64():"referenceValue"in i?On.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let l="[",f=!0;for(const _ of s.values||[])f?f=!1:l+=",",l+=Dc(_);return l+"]"}(i.arrayValue):"mapValue"in i?function(s){const l=Object.keys(s.fields||{}).sort();let f="{",_=!0;for(const M of l)_?_=!1:f+=",",f+=`${M}:${Dc(s.fields[M])}`;return f+"}"}(i.mapValue):cn();var e}function Wa(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Nu(i){return!!i&&"integerValue"in i}function nc(i){return!!i&&"arrayValue"in i}function pd(i){return!!i&&"nullValue"in i}function ku(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Tc(i){return!!i&&"mapValue"in i}function Fu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ki(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Fu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fu(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Kd(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ru(i){return"nullValue"in i?qd:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Wa(Sa.empty(),On.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:cn()}function iu(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Wa(Sa.empty(),On.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ya:cn()}function gd(i,e){const n=Xo(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Yd(i,e){const n=Xo(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class So{constructor(e){this.value=e}static empty(){return new So({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fu(n)}setAll(e){let n=Li.emptyPath(),s={},l=[];e.forEach((_,M)=>{if(!n.isImmediateParentOf(M)){const F=this.getFieldsMap(n);this.applyChanges(F,s,l),s={},l=[],n=M.popLast()}_?s[M.lastSegment()]=Fu(_):l.push(M.lastSegment())});const f=this.getFieldsMap(n);this.applyChanges(f,s,l)}delete(e){const n=this.field(e.popLast());Tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Aa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=n.mapValue.fields[e.get(s)];Tc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,s){Ki(n,(l,f)=>e[l]=f);for(const l of s)delete e[l]}clone(){return new So(Fu(this.value))}}function Ho(i){const e=[];return Ki(i.fields,(n,s)=>{const l=new Li([n]);if(Tc(s)){const f=Ho(s.mapValue).fields;if(0===f.length)e.push(l);else for(const _ of f)e.push(l.child(_))}else e.push(l)}),new ma(e)}class os{constructor(e,n,s,l,f,_,M){this.key=e,this.documentType=n,this.version=s,this.readTime=l,this.createTime=f,this.data=_,this.documentState=M}static newInvalidDocument(e){return new os(e,0,vr.min(),vr.min(),vr.min(),So.empty(),0)}static newFoundDocument(e,n,s,l){return new os(e,1,n,vr.min(),s,l,0)}static newNoDocument(e,n){return new os(e,2,n,vr.min(),vr.min(),So.empty(),0)}static newUnknownDocument(e,n){return new os(e,3,n,vr.min(),vr.min(),So.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(vr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=So.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=So.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof os&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new os(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class va{constructor(e,n){this.position=e,this.inclusive=n}}function Lu(i,e,n){let s=0;for(let l=0;l<i.position.length;l++){const f=e[l],_=i.position[l];if(s=f.field.isKeyField()?On.comparator(On.fromName(_.referenceValue),n.key):Xo(_,n.data.field(f.field)),"desc"===f.dir&&(s*=-1),0!==s)break}return s}function Jo(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Aa(i.position[n],e.position[n]))return!1;return!0}class _a{constructor(e,n="asc"){this.field=e,this.dir=n}}function Zd(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Qd{}class Qr extends Qd{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,s):new md(e,n,s):"array-contains"===n?new Sf(e,s):"in"===n?new vd(e,s):"not-in"===n?new Sc(e,s):"array-contains-any"===n?new Ac(e,s):new Qr(e,n,s)}static createKeyFieldInFilter(e,n,s){return"in"===n?new yd(e,s):new Lh(e,s)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Xo(n,this.value)):null!==n&&ml(this.value)===ml(n)&&this.matchesComparison(Xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ys extends Qd{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new ys(e,n)}matches(e){return rc(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function rc(i){return"and"===i.op}function Xd(i){return"or"===i.op}function su(i){return Fh(i)&&rc(i)}function Fh(i){for(const e of i.filters)if(e instanceof ys)return!1;return!0}function Bu(i){if(i instanceof Qr)return i.field.canonicalString()+i.op.toString()+Ga(i.value);if(su(i))return i.filters.map(e=>Bu(e)).join(",");{const e=i.filters.map(n=>Bu(n)).join(",");return`${i.op}(${e})`}}function Tf(i,e){return i instanceof Qr?(n=i,(s=e)instanceof Qr&&n.op===s.op&&n.field.isEqual(s.field)&&Aa(n.value,s.value)):i instanceof ys?function(n,s){return s instanceof ys&&n.op===s.op&&n.filters.length===s.filters.length&&n.filters.reduce((l,f,_)=>l&&Tf(f,s.filters[_]),!0)}(i,e):void cn();var n,s}function $u(i,e){const n=i.filters.concat(e);return ys.create(n,i.op)}function ic(i){return i instanceof Qr?`${(e=i).field.canonicalString()} ${e.op} ${Ga(e.value)}`:i instanceof ys?function(e){return e.op.toString()+" {"+e.getFilters().map(ic).join(" ,")+"}"}(i):"Filter";var e}class md extends Qr{constructor(e,n,s){super(e,n,s),this.key=On.fromName(s.referenceValue)}matches(e){const n=On.comparator(e.key,this.key);return this.matchesComparison(n)}}class yd extends Qr{constructor(e,n){super(e,"in",n),this.keys=Bh(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Lh extends Qr{constructor(e,n){super(e,"not-in",n),this.keys=Bh(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Bh(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(s=>On.fromName(s.referenceValue))}class Sf extends Qr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nc(n)&&tu(n.arrayValue,this.value)}}class vd extends Qr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&tu(this.value.arrayValue,n)}}class Sc extends Qr{constructor(e,n){super(e,"not-in",n)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!tu(this.value.arrayValue,n)}}class Ac extends Qr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>tu(this.value.arrayValue,s))}}class qa{constructor(e,n=null,s=[],l=[],f=null,_=null,M=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=f,this.startAt=_,this.endAt=M,this.dt=null}}function Vu(i,e=null,n=[],s=[],l=null,f=null,_=null){return new qa(i,e,n,s,l,f,_)}function sc(i){const e=kn(i);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Bu(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>{return(l=s).field.canonicalString()+l.dir;var l}).join(","),fl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ga(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ga(s)).join(",")),e.dt=n}return e.dt}function to(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!Zd(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Tf(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Jo(i.startAt,e.startAt)&&Jo(i.endAt,e.endAt)}function kl(i){return On.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Mc(i,e){return i.filters.filter(n=>n instanceof Qr&&n.field.isEqual(e))}function Uu(i,e,n){let s=qd,l=!0;for(const f of Mc(i,e)){let _=qd,M=!0;switch(f.op){case"<":case"<=":_=ru(f.value);break;case"==":case"in":case">=":_=f.value;break;case">":_=f.value,M=!1;break;case"!=":case"not-in":_=qd}gd({value:s,inclusive:l},{value:_,inclusive:M})<0&&(s=_,l=M)}if(null!==n)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const _=n.position[f];gd({value:s,inclusive:l},{value:_,inclusive:n.inclusive})<0&&(s=_,l=n.inclusive);break}return{value:s,inclusive:l}}function xc(i,e,n){let s=ya,l=!0;for(const f of Mc(i,e)){let _=ya,M=!0;switch(f.op){case">=":case">":_=iu(f.value),M=!1;break;case"==":case"in":case"<=":_=f.value;break;case"<":_=f.value,M=!1;break;case"!=":case"not-in":_=ya}Yd({value:s,inclusive:l},{value:_,inclusive:M})>0&&(s=_,l=M)}if(null!==n)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const _=n.position[f];Yd({value:s,inclusive:l},{value:_,inclusive:n.inclusive})>0&&(s=_,l=n.inclusive);break}return{value:s,inclusive:l}}class rl{constructor(e,n=null,s=[],l=[],f=null,_="F",M=null,F=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=f,this.limitType=_,this.startAt=M,this.endAt=F,this.wt=null,this._t=null}}function Jd(i,e,n,s,l,f,_,M){return new rl(i,e,n,s,l,f,_,M)}function ou(i){return new rl(i)}function Fl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function ju(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function au(i){for(const e of i.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function eh(i){return null!==i.collectionGroup}function Rc(i){const e=kn(i);if(null===e.wt){e.wt=[];const n=au(e),s=ju(e);if(null!==n&&null===s)n.isKeyField()||e.wt.push(new _a(n)),e.wt.push(new _a(Li.keyField(),"asc"));else{let l=!1;for(const f of e.explicitOrderBy)e.wt.push(f),f.field.isKeyField()&&(l=!0);if(!l){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new _a(Li.keyField(),f))}}}return e.wt}function ea(i){const e=kn(i);if(!e._t)if("F"===e.limitType)e._t=Vu(e.path,e.collectionGroup,Rc(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const f of Rc(e))n.push(new _a(f.field,"desc"===f.dir?"asc":"desc"));const s=e.endAt?new va(e.endAt.position,e.endAt.inclusive):null,l=e.startAt?new va(e.startAt.position,e.startAt.inclusive):null;e._t=Vu(e.path,e.collectionGroup,n,e.filters,e.limit,s,l)}return e._t}function zo(i,e){e.getFirstInequalityField(),au(i);const n=i.filters.concat([e]);return new rl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function lu(i,e,n){return new rl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Hu(i,e){return to(ea(i),ea(e))&&i.limitType===e.limitType}function qs(i){return`${sc(ea(i))}|lt:${i.limitType}`}function Ll(i){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(s=>ic(s)).join(", ")}]`),fl(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(s=>{return`${(l=s).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ga(s)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ga(s)).join(",")),`Target(${n})`}(ea(i))}; limitType=${i.limitType})`}function Oc(i,e){return e.isFoundDocument()&&function(n,s){const l=s.key.path;return null!==n.collectionGroup?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):On.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)}(i,e)&&function(n,s){for(const l of Rc(n))if(!l.field.isKeyField()&&null===s.data.field(l.field))return!1;return!0}(i,e)&&function(n,s){for(const l of n.filters)if(!l.matches(s))return!1;return!0}(i,e)&&(s=e,!((n=i).startAt&&!function(l,f,_){const M=Lu(l,f,_);return l.inclusive?M<=0:M<0}(n.startAt,Rc(n),s)||n.endAt&&!function(l,f,_){const M=Lu(l,f,_);return l.inclusive?M>=0:M>0}(n.endAt,Rc(n),s)));var n,s}function Ia(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Go(i){return(e,n)=>{let s=!1;for(const l of Rc(i)){const f=Bl(l,e,n);if(0!==f)return f;s=s||l.field.isKeyField()}return 0}}function Bl(i,e,n){const s=i.field.isKeyField()?On.comparator(e.key,n.key):function(l,f,_){const M=f.data.field(l),F=_.data.field(l);return null!==M&&null!==F?Xo(M,F):cn()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return cn()}}class yl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0!==s)for(const[l,f]of s)if(this.equalsFn(l,e))return f}has(e){return void 0!==this.get(e)}set(e,n){const s=this.mapKeyFn(e),l=this.inner[s];if(void 0===l)return this.inner[s]=[[e,n]],void this.innerSize++;for(let f=0;f<l.length;f++)if(this.equalsFn(l[f][0],e))return void(l[f]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return 1===s.length?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ki(this.inner,(n,s)=>{for(const[l,f]of s)e(l,f)})}isEmpty(){return ms(this.inner)}size(){return this.innerSize}}const $h=new gr(On.comparator);function Ea(){return $h}const th=new gr(On.comparator);function P(...i){let e=th;for(const n of i)e=e.insert(n.key,n);return e}function g(i){let e=th;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function m(){return W()}function b(){return W()}function W(){return new yl(i=>i.toString(),(i,e)=>i.isEqual(e))}const ee=new gr(On.comparator),Ae=new yi(On.comparator);function Oe(...i){let e=Ae;for(const n of i)e=e.add(n);return e}const Tt=new yi(jr);function Ht(){return Tt}function ir(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(e)?"-0":e}}function Yn(i){return{integerValue:""+i}}function _r(i,e){return Yc(e)?Yn(e):ir(i,e)}class Xr{constructor(){this._=void 0}}function vs(i,e,n){return i instanceof vl?function(s,l){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&eu(l)&&(l=gl(l)),l&&(f.fields.__previous_value__=l),{mapValue:f}}(n,e):i instanceof $l?Pc(i,e):i instanceof oc?nh(i,e):function(s,l){const f=Fo(s,l),_=rh(f)+rh(s.gt);return Nu(f)&&Nu(s.gt)?Yn(_):ir(s.serializer,_)}(i,e)}function fo(i,e,n){return i instanceof $l?Pc(i,e):i instanceof oc?nh(i,e):n}function Fo(i,e){return i instanceof Vl?Nu(n=e)||(s=n)&&"doubleValue"in s?e:{integerValue:0}:null;var s,n}class vl extends Xr{}class $l extends Xr{constructor(e){super(),this.elements=e}}function Pc(i,e){const n=Vh(e);for(const s of i.elements)n.some(l=>Aa(l,s))||n.push(s);return{arrayValue:{values:n}}}class oc extends Xr{constructor(e){super(),this.elements=e}}function nh(i,e){let n=Vh(e);for(const s of i.elements)n=n.filter(l=>!Aa(l,s));return{arrayValue:{values:n}}}class Vl extends Xr{constructor(e,n){super(),this.serializer=e,this.gt=n}}function rh(i){return eo(i.integerValue||i.doubleValue)}function Vh(i){return nc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Nc{constructor(e,n){this.field=e,this.transform=n}}class Ul{constructor(e,n){this.version=e,this.transformResults=n}}class ui{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ta(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class cu{}function mp(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new uu(i.key,ui.none()):new Gu(i.key,i.data,ui.none());{const n=i.data,s=So.empty();let l=new yi(Li.comparator);for(let f of e.fields)if(!l.has(f)){let _=n.field(f);null===_&&f.length>1&&(f=f.popLast(),_=n.field(f)),null===_?s.delete(f):s.set(f,_),l=l.add(f)}return new kc(i.key,s,new ma(l.toArray()),ui.none())}}function Af(i,e,n){i instanceof Gu?function(s,l,f){const _=s.value.clone(),M=ih(s.fieldTransforms,l,f.transformResults);_.setAll(M),l.convertToFoundDocument(f.version,_).setHasCommittedMutations()}(i,e,n):i instanceof kc?function(s,l,f){if(!ta(s.precondition,l))return void l.convertToUnknownDocument(f.version);const _=ih(s.fieldTransforms,l,f.transformResults),M=l.data;M.setAll(xg(s)),M.setAll(_),l.convertToFoundDocument(f.version,M).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function _d(i,e,n,s){return i instanceof Gu?function(l,f,_,M){if(!ta(l.precondition,f))return _;const F=l.value.clone(),Q=Mf(l.fieldTransforms,M,f);return F.setAll(Q),f.convertToFoundDocument(f.version,F).setHasLocalMutations(),null}(i,e,n,s):i instanceof kc?function(l,f,_,M){if(!ta(l.precondition,f))return _;const F=Mf(l.fieldTransforms,M,f),Q=f.data;return Q.setAll(xg(l)),Q.setAll(F),f.convertToFoundDocument(f.version,Q).setHasLocalMutations(),null===_?null:_.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(ce=>ce.field))}(i,e,n,s):(_=n,ta(i.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):_);var f,_}function zu(i,e){let n=null;for(const s of i.fieldTransforms){const l=e.data.field(s.field),f=Fo(s.transform,l||null);null!=f&&(null===n&&(n=So.empty()),n.set(s.field,f))}return n||null}function ac(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===s||n&&s&&el(n,s,(l,f)=>function Uh(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(n=i.transform)instanceof $l&&s instanceof $l||n instanceof oc&&s instanceof oc?el(n.elements,s.elements,Aa):n instanceof Vl&&s instanceof Vl?Aa(n.gt,s.gt):n instanceof vl&&s instanceof vl);var n,s}(l,f))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var n,s}class Gu extends cu{constructor(e,n,s,l=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class kc extends cu{constructor(e,n,s,l,f=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function xg(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function ih(i,e,n){const s=new Map;Hn(i.length===n.length);for(let l=0;l<n.length;l++){const f=i[l],_=f.transform,M=e.data.field(f.field);s.set(f.field,fo(_,M,n[l]))}return s}function Mf(i,e,n){const s=new Map;for(const l of i){const f=l.transform,_=n.data.field(l.field);s.set(l.field,vs(f,_,e))}return s}class uu extends cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sh extends cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oh{constructor(e,n,s,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const f=this.mutations[l];f.key.isEqual(e.key)&&Af(f,e,s[l])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=_d(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=_d(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=b();return this.mutations.forEach(l=>{const f=e.get(l.key),_=f.overlayedDocument;let M=this.applyToLocalView(_,f.mutatedFields);M=n.has(l.key)?null:M;const F=mp(_,M);null!==F&&s.set(l.key,F),_.isValidDocument()||_.convertToNoDocument(vr.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,(n,s)=>ac(n,s))&&el(this.baseMutations,e.baseMutations,(n,s)=>ac(n,s))}}class Fc{constructor(e,n,s,l){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(e,n,s){Hn(e.mutations.length===s.length);let l=ee;const f=e.mutations;for(let _=0;_<f.length;_++)l=l.insert(f[_].key,s[_].version);return new Fc(e,n,s,l)}}class jh{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lh{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ao,Ai;function Id(i){switch(i){default:return cn();case Mt.CANCELLED:case Mt.UNKNOWN:case Mt.DEADLINE_EXCEEDED:case Mt.RESOURCE_EXHAUSTED:case Mt.INTERNAL:case Mt.UNAVAILABLE:case Mt.UNAUTHENTICATED:return!1;case Mt.INVALID_ARGUMENT:case Mt.NOT_FOUND:case Mt.ALREADY_EXISTS:case Mt.PERMISSION_DENIED:case Mt.FAILED_PRECONDITION:case Mt.ABORTED:case Mt.OUT_OF_RANGE:case Mt.UNIMPLEMENTED:case Mt.DATA_LOSS:return!0}}function Hh(i){if(void 0===i)return hn("GRPC error has no .code"),Mt.UNKNOWN;switch(i){case Ao.OK:return Mt.OK;case Ao.CANCELLED:return Mt.CANCELLED;case Ao.UNKNOWN:return Mt.UNKNOWN;case Ao.DEADLINE_EXCEEDED:return Mt.DEADLINE_EXCEEDED;case Ao.RESOURCE_EXHAUSTED:return Mt.RESOURCE_EXHAUSTED;case Ao.INTERNAL:return Mt.INTERNAL;case Ao.UNAVAILABLE:return Mt.UNAVAILABLE;case Ao.UNAUTHENTICATED:return Mt.UNAUTHENTICATED;case Ao.INVALID_ARGUMENT:return Mt.INVALID_ARGUMENT;case Ao.NOT_FOUND:return Mt.NOT_FOUND;case Ao.ALREADY_EXISTS:return Mt.ALREADY_EXISTS;case Ao.PERMISSION_DENIED:return Mt.PERMISSION_DENIED;case Ao.FAILED_PRECONDITION:return Mt.FAILED_PRECONDITION;case Ao.ABORTED:return Mt.ABORTED;case Ao.OUT_OF_RANGE:return Mt.OUT_OF_RANGE;case Ao.UNIMPLEMENTED:return Mt.UNIMPLEMENTED;case Ao.DATA_LOSS:return Mt.DATA_LOSS;default:return cn()}}(Ai=Ao||(Ao={}))[Ai.OK=0]="OK",Ai[Ai.CANCELLED=1]="CANCELLED",Ai[Ai.UNKNOWN=2]="UNKNOWN",Ai[Ai.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ai[Ai.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ai[Ai.NOT_FOUND=5]="NOT_FOUND",Ai[Ai.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ai[Ai.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ai[Ai.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ai[Ai.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ai[Ai.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ai[Ai.ABORTED=10]="ABORTED",Ai[Ai.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ai[Ai.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ai[Ai.INTERNAL=13]="INTERNAL",Ai[Ai.UNAVAILABLE=14]="UNAVAILABLE",Ai[Ai.DATA_LOSS=15]="DATA_LOSS";class ch{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return du}static getOrCreateInstance(){return null===du&&(du=new ch),du}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let du=null;function yp(){return new TextEncoder}const xf=new Xa([4294967295,4294967295],0);function vp(i){const e=yp().encode(i),n=new Gc;return n.update(e),new Uint8Array(n.digest())}function _p(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new Xa([n,s],0),new Xa([l,f],0)]}class zh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ed(`Invalid padding: ${n}`);if(s<0)throw new Ed(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new Ed(`Invalid hash count: ${s}`);if(0===e.length&&0!==n)throw new Ed(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Xa.fromNumber(this.It)}Et(e,n,s){let l=e.add(n.multiply(Xa.fromNumber(s)));return 1===l.compare(xf)&&(l=new Xa([l.getBits(0),l.getBits(1)],0)),l.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=vp(e),[s,l]=_p(n);for(let f=0;f<this.hashCount;f++){const _=this.Et(s,l,f);if(!this.At(_))return!1}return!0}static create(e,n,s){const l=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),_=new zh(f,l,n);return s.forEach(M=>_.insert(M)),_}insert(e){if(0===this.It)return;const n=vp(e),[s,l]=_p(n);for(let f=0;f<this.hashCount;f++){const _=this.Et(s,l,f);this.Rt(_)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wd{constructor(e,n,s,l,f){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const l=new Map;return l.set(e,hu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new wd(vr.min(),l,new gr(jr),Ea(),Oe())}}class hu{constructor(e,n,s,l,f){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new hu(s,n,Oe(),Oe(),Oe())}}class Cd{constructor(e,n,s,l){this.Pt=e,this.removedTargetIds=n,this.key=s,this.bt=l}}class Wu{constructor(e,n){this.targetId=e,this.Vt=n}}class Ip{constructor(e,n,s=vo.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=l}}class Ep{constructor(){this.St=0,this.Dt=c(),this.Ct=vo.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Oe(),n=Oe(),s=Oe();return this.Dt.forEach((l,f)=>{switch(f){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:cn()}}),new hu(this.Ct,this.xt,e,n,s)}Ft(){this.Nt=!1,this.Dt=c()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class E_{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ea(),this.zt=h(),this.Wt=new gr(jr)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const s=this.Zt(n);switch(e.state){case 0:this.te(n)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(n);break;case 3:this.te(n)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),s.$t(e.resumeToken));break;default:cn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((s,l)=>{this.te(l)&&n(l)})}ne(e){var n;const s=e.targetId,l=e.Vt.count,f=this.se(s);if(f){const _=f.target;if(kl(_))if(0===l){const M=new On(_.path);this.Yt(s,M,os.newNoDocument(M,vr.min()))}else Hn(1===l);else{const M=this.ie(s);if(M!==l){const F=this.re(e,M);0!==F&&(this.ee(s),this.Wt=this.Wt.insert(s,2===F?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=ch.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(Q,ce,xe){var mt,Ct,pn,Fn,Zn,Jr;const hi={localCacheCount:ce,existenceFilterCount:xe.count},Ar=xe.unchangedNames;return Ar&&(hi.bloomFilter={applied:0===Q,hashCount:null!==(mt=Ar?.hashCount)&&void 0!==mt?mt:0,bitmapLength:null!==(Fn=null===(pn=null===(Ct=Ar?.bits)||void 0===Ct?void 0:Ct.bitmap)||void 0===pn?void 0:pn.length)&&void 0!==Fn?Fn:0,padding:null!==(Jr=null===(Zn=Ar?.bits)||void 0===Zn?void 0:Zn.padding)&&void 0!==Jr?Jr:0}),hi}(F,M,e.Vt))}}}}re(e,n){const{unchangedNames:s,count:l}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:f="",padding:_=0},hashCount:M=0}=s;let F,Q;try{F=ho(f).toUint8Array()}catch(ce){if(ce instanceof Jc)return Lt("Decoding the base64 bloom filter in existence filter failed ("+ce.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ce}try{Q=new zh(F,_,M)}catch(ce){return Lt(ce instanceof Ed?"BloomFilter error: ":"Applying bloom filter failed: ",ce),1}return 0===Q.It?1:l!==n-this.oe(e.targetId,Q)?2:0}oe(e,n){const s=this.Gt.getRemoteKeysForTarget(e);let l=0;return s.forEach(f=>{const _=this.Gt.ue(),M=`projects/${_.projectId}/databases/${_.database}/documents/${f.path.canonicalString()}`;n.vt(M)||(this.Yt(e,f,null),l++)}),l}ce(e){const n=new Map;this.Qt.forEach((f,_)=>{const M=this.se(_);if(M){if(f.current&&kl(M.target)){const F=new On(M.target.path);null!==this.jt.get(F)||this.ae(_,F)||this.Yt(_,F,os.newNoDocument(F,e))}f.Mt&&(n.set(_,f.Ot()),f.Ft())}});let s=Oe();this.zt.forEach((f,_)=>{let M=!0;_.forEachWhile(F=>{const Q=this.se(F);return!Q||"TargetPurposeLimboResolution"===Q.purpose||(M=!1,!1)}),M&&(s=s.add(f))}),this.jt.forEach((f,_)=>_.setReadTime(e));const l=new wd(e,n,this.Wt,this.jt,s);return this.jt=Ea(),this.zt=h(),this.Wt=new gr(jr),l}Jt(e,n){if(!this.te(e))return;const s=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,s),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,s){if(!this.te(e))return;const l=this.Zt(e);this.ae(e,n)?l.Bt(n,1):l.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),s&&(this.jt=this.jt.insert(n,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new Ep,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new yi(jr),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||Be("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Ep),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function h(){return new gr(On.comparator)}function c(){return new gr(On.comparator)}const u={asc:"ASCENDING",desc:"DESCENDING"},y={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D={and:"AND",or:"OR"};class k{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function K(i,e){return i.useProto3Json||fl(e)?e:{value:e}}function le(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Re(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function et(i,e){return le(i,e.toTimestamp())}function Ot(i){return Hn(!!i),vr.fromTimestamp(function(e){const n=Al(e);return new Ri(n.seconds,n.nanos)}(i))}function Gt(i,e){return(n=i,new ii(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function un(i){const e=ii.fromString(i);return Hn(Cp(e)),e}function rr(i,e){return Gt(i.databaseId,e.path)}function mr(i,e){const n=un(e);if(n.get(1)!==i.databaseId.projectId)throw new rn(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new rn(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new On(Lc(n))}function di(i,e){return Gt(i.databaseId,e)}function po(i){const e=un(i);return 4===e.length?ii.emptyPath():Lc(e)}function il(i){return new ii(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Lc(i){return Hn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function bd(i,e,n){return{name:rr(i,e),fields:n.value.mapValue.fields}}function Rg(i,e,n){const s=mr(i,e.name),l=Ot(e.updateTime),f=e.createTime?Ot(e.createTime):vr.min(),_=new So({mapValue:{fields:e.fields}}),M=os.newFoundDocument(s,l,f,_);return n&&M.setHasCommittedMutations(),n?M.setHasCommittedMutations():M}function Gh(i,e){let n;if(e instanceof Gu)n={update:bd(i,e.key,e.value)};else if(e instanceof uu)n={delete:rr(i,e.key)};else if(e instanceof kc)n={update:bd(i,e.key,e.data),updateMask:Ng(e.fieldMask)};else{if(!(e instanceof sh))return cn();n={verify:rr(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(l,f){const _=f.transform;if(_ instanceof vl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof $l)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof oc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof Vl)return{fieldPath:f.field.canonicalString(),increment:_.gt};throw cn()}(0,s))),e.precondition.isNone||(n.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:et(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:cn()),n;var l}function Og(i,e){const n=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?ui.updateTime(Ot(l.updateTime)):void 0!==l.exists?ui.exists(l.exists):ui.none():ui.none(),s=e.updateTransforms?e.updateTransforms.map(l=>function(f,_){let M=null;"setToServerValue"in _?(Hn("REQUEST_TIME"===_.setToServerValue),M=new vl):"appendMissingElements"in _?M=new $l(_.appendMissingElements.values||[]):"removeAllFromArray"in _?M=new oc(_.removeAllFromArray.values||[]):"increment"in _?M=new Vl(f,_.increment):cn();const F=Li.fromServerFormat(_.fieldPath);return new Nc(F,M)}(i,l)):[];var l;if(e.update){const l=mr(i,e.update.name),f=new So({mapValue:{fields:e.update.fields}});if(e.updateMask){const _=new ma((e.updateMask.fieldPaths||[]).map(Q=>Li.fromServerFormat(Q)));return new kc(l,f,_,n,s)}return new Gu(l,f,n,s)}if(e.delete){const l=mr(i,e.delete);return new uu(l,n)}if(e.verify){const l=mr(i,e.verify);return new sh(l,n)}return cn()}function Ay(i,e){return{documents:[di(i,e.path)]}}function Pg(i,e){const n={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(n.parent=di(i,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=di(i,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const l=function(F){if(0!==F.length)return C_(ys.create(F,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const f=function(F){if(0!==F.length)return F.map(Q=>{return{field:uh((ce=Q).field),direction:My(ce.dir)};var ce})}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const _=K(i,e.limit);var M,F;return null!==_&&(n.structuredQuery.limit=_),e.startAt&&(n.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(n.structuredQuery.endAt={before:!(F=e.endAt).inclusive,values:F.position}),n}function wp(i){let e=po(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Hn(1===s);const ce=n.from[0];ce.allDescendants?l=ce.collectionId:e=e.child(ce.collectionId)}let f=[];n.where&&(f=function(ce){const xe=Wh(ce);return xe instanceof ys&&su(xe)?xe.getFilters():[xe]}(n.where));let _=[];n.orderBy&&(_=n.orderBy.map(ce=>{return new _a(Rf((xe=ce).field),function(mt){switch(mt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(xe.direction));var xe}));let M=null;n.limit&&(M=function(ce){let xe;return xe="object"==typeof ce?ce.value:ce,fl(xe)?null:xe}(n.limit));let F=null;var ce;n.startAt&&(F=new va((ce=n.startAt).values||[],!!ce.before));let Q=null;return n.endAt&&(Q=function(ce){return new va(ce.values||[],!ce.before)}(n.endAt)),Jd(e,l,_,f,M,"F",F,Q)}function Wh(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Rf(e.unaryFilter.field);return Qr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Rf(e.unaryFilter.field);return Qr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Rf(e.unaryFilter.field);return Qr.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Rf(e.unaryFilter.field);return Qr.create(f,"!=",{nullValue:"NULL_VALUE"});default:return cn()}}(i):void 0!==i.fieldFilter?Qr.create(Rf((e=i).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return ys.create(e.compositeFilter.filters.map(n=>Wh(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return cn()}}(e.compositeFilter.op))}(i):cn();var e}function My(i){return u[i]}function xy(i){return y[i]}function Ry(i){return D[i]}function uh(i){return{fieldPath:i.canonicalString()}}function Rf(i){return Li.fromServerFormat(i.fieldPath)}function C_(i){return i instanceof Qr?function(e){if("=="===e.op){if(ku(e.value))return{unaryFilter:{field:uh(e.field),op:"IS_NAN"}};if(pd(e.value))return{unaryFilter:{field:uh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ku(e.value))return{unaryFilter:{field:uh(e.field),op:"IS_NOT_NAN"}};if(pd(e.value))return{unaryFilter:{field:uh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uh(e.field),op:xy(e.op),value:e.value}}}(i):i instanceof ys?function(e){const n=e.getFilters().map(s=>C_(s));return 1===n.length?n[0]:{compositeFilter:{op:Ry(e.op),filters:n}}}(i):cn()}function Ng(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Cp(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Dd{constructor(e,n,s,l,f=vr.min(),_=vr.min(),M=vo.EMPTY_BYTE_STRING,F=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=M,this.expectedCount=F}withSequenceNumber(e){return new Dd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dd(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class b_{constructor(e){this.fe=e}}function Py(i,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:bp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:rr(l=i.fe,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:le(l,f.version.toTimestamp()),createTime:le(l,f.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:dh(e.version)};else{if(!e.isUnknownDocument())return cn();s.unknownDocument={path:n.path.toArray(),version:dh(e.version)}}var l,f;return s}function bp(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function dh(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hh(i){const e=new Ri(i.seconds,i.nanoseconds);return vr.fromTimestamp(e)}function Td(i,e){const n=(e.baseMutations||[]).map(f=>Og(i.fe,f));for(let f=0;f<e.mutations.length-1;++f)f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(e.mutations[f].updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f);const s=e.mutations.map(f=>Og(i.fe,f)),l=Ri.fromMillis(e.localWriteTimeMs);return new oh(e.batchId,l,n,s)}function Sd(i){const e=hh(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?hh(i.lastLimboFreeSnapshotVersion):vr.min();let s;var l;return void 0!==i.query.documents?(Hn(1===(l=i.query).documents.length),s=ea(ou(po(l.documents[0])))):s=ea(wp(i.query)),new Dd(s,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,vo.fromBase64String(i.resumeToken))}function Ny(i,e){const n=dh(e.snapshotVersion),s=dh(e.lastLimboFreeSnapshotVersion);let l;l=kl(e.target)?Ay(i.fe,e.target):Pg(i.fe,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sc(e.target),readTime:n,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:l}}function Of(i){const e=wp({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?lu(e,e.limit,"L"):e}function kg(i,e){return new jh(e.largestBatchId,Og(i.fe,e.overlayMutation))}function fh(i,e){const n=e.path.lastSegment();return[i,ko(e.path.popLast()),n]}function ky(i,e,n,s){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:dh(s.readTime),documentKey:ko(s.documentKey.path),largestBatchId:s.largestBatchId}}class D_{getBundleMetadata(e,n){return Fg(e).get(n).next(s=>{if(s)return{id:(l=s).bundleId,createTime:hh(l.createTime),version:l.version};var l})}saveBundleMetadata(e,n){return Fg(e).put({bundleId:(s=n).id,createTime:dh(Ot(s.createTime)),version:s.version});var s}getNamedQuery(e,n){return Lg(e).get(n).next(s=>{if(s)return{name:(l=s).name,query:Of(l.bundledQuery),readTime:hh(l.readTime)};var l})}saveNamedQuery(e,n){return Lg(e).put({name:(s=n).name,readTime:dh(Ot(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Fg(i){return tr(i,"bundles")}function Lg(i){return tr(i,"namedQueries")}class Dp{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){return new Dp(e,n.uid||"")}getOverlay(e,n){return Pf(e).get(fh(this.userId,n)).next(s=>s?kg(this.serializer,s):null)}getOverlays(e,n){const s=m();return xt.forEach(n,l=>this.getOverlay(e,l).next(f=>{null!==f&&s.set(l,f)})).next(()=>s)}saveOverlays(e,n,s){const l=[];return s.forEach((f,_)=>{const M=new jh(n,_);l.push(this.we(e,M))}),xt.waitFor(l)}removeOverlaysForBatchId(e,n,s){const l=new Set;n.forEach(_=>l.add(ko(_.getCollectionPath())));const f=[];return l.forEach(_=>{const M=IDBKeyRange.bound([this.userId,_,s],[this.userId,_,s+1],!1,!0);f.push(Pf(e).J("collectionPathOverlayIndex",M))}),xt.waitFor(f)}getOverlaysForCollection(e,n,s){const l=m(),f=ko(n),_=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,Number.POSITIVE_INFINITY],!0);return Pf(e).j("collectionPathOverlayIndex",_).next(M=>{for(const F of M){const Q=kg(this.serializer,F);l.set(Q.getKey(),Q)}return l})}getOverlaysForCollectionGroup(e,n,s,l){const f=m();let _;const M=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Pf(e).X({index:"collectionGroupOverlayIndex",range:M},(F,Q,ce)=>{const xe=kg(this.serializer,Q);f.size()<l||xe.largestBatchId===_?(f.set(xe.getKey(),xe),_=xe.largestBatchId):ce.done()}).next(()=>f)}we(e,n){return Pf(e).put(function(s,l,f){const[_,M,F]=fh(l,f.mutation.key);return{userId:l,collectionPath:M,documentId:F,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:Gh(s.fe,f.mutation)}}(this.serializer,this.userId,n))}}function Pf(i){return tr(i,"documentOverlays")}class ph{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(eo(e.integerValue));else if("doubleValue"in e){const s=eo(e.doubleValue);isNaN(s)?this.ye(n,13):(this.ye(n,15),Ha(s)?n.pe(0):n.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(n,20),"string"==typeof s?n.Ie(s):(n.Ie(`${s.seconds||""}`),n.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(ho(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(n,45),n.pe(s.latitude||0),n.pe(s.longitude||0)}else"mapValue"in e?Kd(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):cn()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const s=e.fields||{};this.ye(n,55);for(const l of Object.keys(s))this.Te(l,n),this.me(s[l],n)}Pe(e,n){const s=e.values||[];this.ye(n,50);for(const l of s)this.me(l,n)}ve(e,n){this.ye(n,37),On.fromName(e).path.forEach(s=>{this.ye(n,60),this.be(s,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}function T_(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Bg(i){const e=64-function(n){let s=0;for(let l=0;l<8;++l){const f=T_(255&n[l]);if(s+=f,8!==f)break}return s}(i);return Math.ceil(e/8)}ph.Ve=new ph;class PI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.De(s.value),s=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Ne(s.value),s=n.next();this.ke()}Me(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(n<"\ud800"||"\udbff"<n)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const l=n.codePointAt(0);this.De(240|l>>>18),this.De(128|63&l>>>12),this.De(128|63&l>>>6),this.De(128|63&l)}}this.Ce()}$e(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(n<"\ud800"||"\udbff"<n)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const l=n.codePointAt(0);this.Ne(240|l>>>18),this.Ne(128|63&l>>>12),this.Ne(128|63&l>>>6),this.Ne(128|63&l)}}this.ke()}Oe(e){const n=this.Fe(e),s=Bg(n);this.Be(1+s),this.buffer[this.position++]=255&s;for(let l=n.length-s;l<n.length;++l)this.buffer[this.position++]=255&n[l]}Le(e){const n=this.Fe(e),s=Bg(n);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let l=n.length-s;l<n.length;++l)this.buffer[this.position++]=~(255&n[l])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(l){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,l,!1),new Uint8Array(f.buffer)}(e),s=0!=(128&n[0]);n[0]^=s?255:128;for(let l=1;l<n.length;++l)n[l]^=s?255:0;return n}De(e){const n=255&e;0===n?(this.Ue(0),this.Ue(255)):255===n?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;0===n?(this.Ge(0),this.Ge(255)):255===n?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const l=new Uint8Array(s);l.set(this.buffer),this.buffer=l}}class NI{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Nf{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Yi{constructor(){this.je=new PI,this.ze=new NI(this.je),this.We=new Nf(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Bc{constructor(e,n,s,l){this.indexId=e,this.documentKey=n,this.arrayValue=s,this.directionalValue=l}Je(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(n);return s.set(this.directionalValue,0),n!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Bc(this.indexId,this.documentKey,this.arrayValue,s)}}function Ku(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=$g(i.arrayValue,e.arrayValue),0!==n?n:(n=$g(i.directionalValue,e.directionalValue),0!==n?n:On.comparator(i.documentKey,e.documentKey)))}function $g(i,e){for(let n=0;n<i.length&&n<e.length;++n){const s=i[n]-e[n];if(0!==s)return s}return i.length-e.length}class Vg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const s=n;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){Hn(e.collectionGroup===this.collectionId);const n=cd(e);if(void 0!==n&&!this.en(n))return!1;const s=dl(e);let l=new Set,f=0,_=0;for(;f<s.length&&this.en(s[f]);++f)l=l.add(s[f].fieldPath.canonicalString());if(f===s.length)return!0;if(void 0!==this.Ze){if(!l.has(this.Ze.field.canonicalString())){const M=s[f];if(!this.nn(this.Ze,M)||!this.sn(this.Ye[_++],M))return!1}++f}for(;f<s.length;++f)if(_>=this.Ye.length||!this.sn(this.Ye[_++],s[f]))return!1;return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Ug(i){var e,n;if(Hn(i instanceof Qr||i instanceof ys),i instanceof Qr){if(i instanceof vd){const l=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(f=>Qr.create(i.field,"==",f)))||[];return ys.create(l,"or")}return i}const s=i.filters.map(l=>Ug(l));return ys.create(s,i.op)}function S_(i){if(0===i.getFilters().length)return[];const e=Fy(Ug(i));return Hn(kf(e)),Tp(e)||Sp(e)?[e]:e.getFilters()}function Tp(i){return i instanceof Qr}function Sp(i){return i instanceof ys&&su(i)}function kf(i){return Tp(i)||Sp(i)||function(e){if(e instanceof ys&&Xd(e)){for(const n of e.getFilters())if(!Tp(n)&&!Sp(n))return!1;return!0}return!1}(i)}function Fy(i){if(Hn(i instanceof Qr||i instanceof ys),i instanceof Qr)return i;if(1===i.filters.length)return Fy(i.filters[0]);const e=i.filters.map(s=>Fy(s));let n=ys.create(e,i.op);return n=qh(n),kf(n)?n:(Hn(n instanceof ys),Hn(rc(n)),Hn(n.filters.length>1),n.filters.reduce((s,l)=>Ff(s,l)))}function Ff(i,e){let n;return Hn(i instanceof Qr||i instanceof ys),Hn(e instanceof Qr||e instanceof ys),n=i instanceof Qr?e instanceof Qr?ys.create([i,e],"and"):Ly(i,e):e instanceof Qr?Ly(e,i):function(s,l){if(Hn(s.filters.length>0&&l.filters.length>0),rc(s)&&rc(l))return $u(s,l.getFilters());const f=Xd(s)?s:l,_=Xd(s)?l:s,M=f.filters.map(F=>Ff(F,_));return ys.create(M,"or")}(i,e),qh(n)}function Ly(i,e){if(rc(e))return $u(e,i.getFilters());{const n=e.filters.map(s=>Ff(i,s));return ys.create(n,"or")}}function qh(i){if(Hn(i instanceof Qr||i instanceof ys),i instanceof Qr)return i;const e=i.getFilters();if(1===e.length)return qh(e[0]);if(Fh(i))return i;const n=e.map(l=>qh(l)),s=[];return n.forEach(l=>{l instanceof Qr?s.push(l):l instanceof ys&&(l.op===i.op?s.push(...l.filters):s.push(l))}),1===s.length?s[0]:ys.create(s,i.op)}class By{constructor(){this.rn=new Ap}addToCollectionParentIndex(e,n){return this.rn.add(n),xt.resolve()}getCollectionParents(e,n){return xt.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return xt.resolve()}deleteFieldIndex(e,n){return xt.resolve()}getDocumentsMatchingTarget(e,n){return xt.resolve(null)}getIndexType(e,n){return xt.resolve(0)}getFieldIndexes(e,n){return xt.resolve([])}getNextCollectionGroupToUpdate(e){return xt.resolve(null)}getMinOffset(e,n){return xt.resolve(As.min())}getMinOffsetFromCollectionGroup(e,n){return xt.resolve(As.min())}updateCollectionGroup(e,n,s){return xt.resolve()}updateIndexEntries(e,n){return xt.resolve()}}class Ap{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n]||new yi(ii.comparator),f=!l.has(s);return this.index[n]=l.add(s),f}has(e){const n=e.lastSegment(),s=e.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(e){return(this.index[e]||new yi(ii.comparator)).toArray()}}const fu=new Uint8Array(0);class A_{constructor(e,n){this.user=e,this.databaseId=n,this.on=new Ap,this.un=new yl(s=>sc(s),(s,l)=>to(s,l)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const s=n.lastSegment(),l=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const f={collectionId:s,parent:ko(l)};return Mp(e).put(f)}return xt.resolve()}getCollectionParents(e,n){const s=[],l=IDBKeyRange.bound([n,""],[No(n),""],!1,!0);return Mp(e).j(l).next(f=>{for(const _ of f){if(_.collectionId!==n)break;s.push(za(_.parent))}return s})}addFieldIndex(e,n){const s=xp(e),l={indexId:(_=n).indexId,collectionGroup:_.collectionGroup,fields:_.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var _;delete l.indexId;const f=s.add(l);if(n.indexState){const _=gh(e);return f.next(M=>{_.put(ky(M,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return f.next()}deleteFieldIndex(e,n){const s=xp(e),l=gh(e),f=Ad(e);return s.delete(n.indexId).next(()=>l.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const s=Ad(e);let l=!0;const f=new Map;return xt.forEach(this.cn(n),_=>this.an(e,_).next(M=>{l&&(l=!!M),f.set(_,M)})).next(()=>{if(l){let _=Oe();const M=[];return xt.forEach(f,(F,Q)=>{var ce;Be("IndexedDbIndexManager",`Using index ${ce=F,`id=${ce.indexId}|cg=${ce.collectionGroup}|f=${ce.fields.map(Ar=>`${Ar.fieldPath}:${Ar.kind}`).join(",")}`} to execute ${sc(n)}`);const xe=function(Ar,fi){const Hi=cd(fi);if(void 0===Hi)return null;for(const ro of Mc(Ar,Hi.fieldPath))switch(ro.op){case"array-contains-any":return ro.value.arrayValue.values||[];case"array-contains":return[ro.value]}return null}(Q,F),mt=function(Ar,fi){const Hi=new Map;for(const ro of dl(fi))for(const Ya of Mc(Ar,ro.fieldPath))switch(Ya.op){case"==":case"in":Hi.set(ro.fieldPath.canonicalString(),Ya.value);break;case"not-in":case"!=":return Hi.set(ro.fieldPath.canonicalString(),Ya.value),Array.from(Hi.values())}return null}(Q,F),Ct=function(Ar,fi){const Hi=[];let ro=!0;for(const Ya of dl(fi)){const zc=0===Ya.kind?Uu(Ar,Ya.fieldPath,Ar.startAt):xc(Ar,Ya.fieldPath,Ar.startAt);Hi.push(zc.value),ro&&(ro=zc.inclusive)}return new va(Hi,ro)}(Q,F),pn=function(Ar,fi){const Hi=[];let ro=!0;for(const Ya of dl(fi)){const zc=0===Ya.kind?xc(Ar,Ya.fieldPath,Ar.endAt):Uu(Ar,Ya.fieldPath,Ar.endAt);Hi.push(zc.value),ro&&(ro=zc.inclusive)}return new va(Hi,ro)}(Q,F),Fn=this.hn(F,Q,Ct),Zn=this.hn(F,Q,pn),Jr=this.ln(F,Q,mt),hi=this.fn(F.indexId,xe,Fn,Ct.inclusive,Zn,pn.inclusive,Jr);return xt.forEach(hi,Ar=>s.H(Ar,n.limit).next(fi=>{fi.forEach(Hi=>{const ro=On.fromSegments(Hi.documentKey);_.has(ro)||(_=_.add(ro),M.push(ro))})}))}).next(()=>M)}return xt.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:S_(ys.create(e.filters,"and")).map(s=>Vu(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,s,l,f,_,M){const F=(null!=n?n.length:1)*Math.max(s.length,f.length),Q=F/(null!=n?n.length:1),ce=[];for(let xe=0;xe<F;++xe){const mt=n?this.dn(n[xe/Q]):fu,Ct=this.wn(e,mt,s[xe%Q],l),pn=this._n(e,mt,f[xe%Q],_),Fn=M.map(Zn=>this.wn(e,mt,Zn,!0));ce.push(...this.createRange(Ct,pn,Fn))}return ce}wn(e,n,s,l){const f=new Bc(e,On.empty(),n,s);return l?f:f.Je()}_n(e,n,s,l){const f=new Bc(e,On.empty(),n,s);return l?f.Je():f}an(e,n){const s=new Vg(n),l=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,l).next(f=>{let _=null;for(const M of f)s.tn(M)&&(!_||M.fields.length>_.fields.length)&&(_=M);return _})}getIndexType(e,n){let s=2;const l=this.cn(n);return xt.forEach(l,f=>this.an(e,f).next(_=>{_?0!==s&&_.fields.length<function(M){let F=new yi(Li.comparator),Q=!1;for(const ce of M.filters)for(const xe of ce.getFlattenedFilters())xe.field.isKeyField()||("array-contains"===xe.op||"array-contains-any"===xe.op?Q=!0:F=F.add(xe.field));for(const ce of M.orderBy)ce.field.isKeyField()||(F=F.add(ce.field));return F.size+(Q?1:0)}(f)&&(s=1):s=0})).next(()=>null!==n.limit&&l.length>1&&2===s?1:s)}mn(e,n){const s=new Yi;for(const l of dl(e)){const f=n.data.field(l.fieldPath);if(null==f)return null;const _=s.He(l.kind);ph.Ve._e(f,_)}return s.Qe()}dn(e){const n=new Yi;return ph.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const s=new Yi;return ph.Ve._e(Wa(this.databaseId,n),s.He(function(l){const f=dl(l);return 0===f.length?0:f[f.length-1].kind}(e))),s.Qe()}ln(e,n,s){if(null===s)return[];let l=[];l.push(new Yi);let f=0;for(const _ of dl(e)){const M=s[f++];for(const F of l)if(this.yn(n,_.fieldPath)&&nc(M))l=this.pn(l,_,M);else{const Q=F.He(_.kind);ph.Ve._e(M,Q)}}return this.In(l)}hn(e,n,s){return this.ln(e,n,s.position)}In(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].Qe();return n}pn(e,n,s){const l=[...e],f=[];for(const _ of s.arrayValue.values||[])for(const M of l){const F=new Yi;F.seed(M.Qe()),ph.Ve._e(_,F.He(n.kind)),f.push(F)}return f}yn(e,n){return!!e.filters.find(s=>s instanceof Qr&&s.field.isEqual(n)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,n){const s=xp(e),l=gh(e);return(n?s.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):s.j()).next(f=>{const _=[];return xt.forEach(f,M=>l.get([M.indexId,this.uid]).next(F=>{_.push(function(Q,ce){const xe=ce?new Jl(ce.sequenceNumber,new As(hh(ce.readTime),new On(za(ce.documentKey)),ce.largestBatchId)):Jl.empty(),mt=Q.fields.map(([Ct,pn])=>new Pl(Li.fromServerFormat(Ct),pn));return new Xl(Q.indexId,Q.collectionGroup,mt,xe)}(M,F))})).next(()=>_)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((s,l)=>{const f=s.indexState.sequenceNumber-l.indexState.sequenceNumber;return 0!==f?f:jr(s.collectionGroup,l.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const l=xp(e),f=gh(e);return this.Tn(e).next(_=>l.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(M=>xt.forEach(M,F=>f.put(ky(F.indexId,this.user,_,s)))))}updateIndexEntries(e,n){const s=new Map;return xt.forEach(n,(l,f)=>{const _=s.get(l.collectionGroup);return(_?xt.resolve(_):this.getFieldIndexes(e,l.collectionGroup)).next(M=>(s.set(l.collectionGroup,M),xt.forEach(M,F=>this.En(e,l,F).next(Q=>{const ce=this.An(f,F);return Q.isEqual(ce)?xt.resolve():this.vn(e,f,F,Q,ce)}))))})}Rn(e,n,s,l){return Ad(e).put({indexId:l.indexId,uid:this.uid,arrayValue:l.arrayValue,directionalValue:l.directionalValue,orderedDocumentKey:this.gn(s,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,s,l){return Ad(e).delete([l.indexId,this.uid,l.arrayValue,l.directionalValue,this.gn(s,n.key),n.key.path.toArray()])}En(e,n,s){const l=Ad(e);let f=new yi(Ku);return l.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,n)])},(_,M)=>{f=f.add(new Bc(s.indexId,n,M.arrayValue,M.directionalValue))}).next(()=>f)}An(e,n){let s=new yi(Ku);const l=this.mn(n,e);if(null==l)return s;const f=cd(n);if(null!=f){const _=e.data.field(f.fieldPath);if(nc(_))for(const M of _.arrayValue.values||[])s=s.add(new Bc(n.indexId,e.key,this.dn(M),l))}else s=s.add(new Bc(n.indexId,e.key,fu,l));return s}vn(e,n,s,l,f){Be("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const _=[];return function(M,F,Q,ce,xe){const mt=M.getIterator(),Ct=F.getIterator();let pn=ks(mt),Fn=ks(Ct);for(;pn||Fn;){let Zn=!1,Jr=!1;if(pn&&Fn){const hi=Q(pn,Fn);hi<0?Jr=!0:hi>0&&(Zn=!0)}else null!=pn?Jr=!0:Zn=!0;Zn?(ce(Fn),Fn=ks(Ct)):Jr?(xe(pn),pn=ks(mt)):(pn=ks(mt),Fn=ks(Ct))}}(l,f,Ku,M=>{_.push(this.Rn(e,n,s,M))},M=>{_.push(this.Pn(e,n,s,M))}),xt.waitFor(_)}Tn(e){let n=1;return gh(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,l,f)=>{f.done(),n=l.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((_,M)=>Ku(_,M)).filter((_,M,F)=>!M||0!==Ku(_,F[M-1]));const l=[];l.push(e);for(const _ of s){const M=Ku(_,e),F=Ku(_,n);if(0===M)l[0]=e.Je();else if(M>0&&F<0)l.push(_),l.push(_.Je());else if(F>0)break}l.push(n);const f=[];for(let _=0;_<l.length;_+=2){if(this.bn(l[_],l[_+1]))return[];f.push(IDBKeyRange.bound([l[_].indexId,this.uid,l[_].arrayValue,l[_].directionalValue,fu,[]],[l[_+1].indexId,this.uid,l[_+1].arrayValue,l[_+1].directionalValue,fu,[]]))}return f}bn(e,n){return Ku(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Lf)}getMinOffset(e,n){return xt.mapArray(this.cn(n),s=>this.an(e,s).next(l=>l||cn())).next(Lf)}}function Mp(i){return tr(i,"collectionParents")}function Ad(i){return tr(i,"indexEntries")}function xp(i){return tr(i,"indexConfiguration")}function gh(i){return tr(i,"indexState")}function Lf(i){Hn(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<i.length;s++){const l=i[s].indexState.offset;xu(l,e)<0&&(e=l),n<l.largestBatchId&&(n=l.largestBatchId)}return new As(e.readTime,e.documentKey,n)}const $c={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wa{constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new wa(e,wa.DEFAULT_COLLECTION_PERCENTILE,wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Rp(i,e,n){const s=i.store("mutations"),l=i.store("documentMutations"),f=[],_=IDBKeyRange.only(n.batchId);let M=0;const F=s.X({range:_},(ce,xe,mt)=>(M++,mt.delete()));f.push(F.next(()=>{Hn(1===M)}));const Q=[];for(const ce of n.mutations){const xe=Tl(e,ce.key.path,n.batchId);f.push(l.delete(xe)),Q.push(ce.key)}return xt.waitFor(f).next(()=>Q)}function Op(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw cn();e=i.noDocument}return JSON.stringify(e).length}wa.DEFAULT_COLLECTION_PERCENTILE=10,wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wa.DEFAULT=new wa(41943040,wa.DEFAULT_COLLECTION_PERCENTILE,wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wa.DISABLED=new wa(-1,0,0);class Pp{constructor(e,n,s,l){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=l,this.Vn={}}static de(e,n,s,l){Hn(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new Pp(f,n,s,l)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jl(e).X({index:"userMutationsIndex",range:s},(l,f,_)=>{n=!1,_.done()}).next(()=>n)}addMutationBatch(e,n,s,l){const f=Kh(e),_=jl(e);return _.add({}).next(M=>{Hn("number"==typeof M);const F=new oh(M,n,s,l),Q=function(mt,Ct,pn){const Fn=pn.baseMutations.map(Jr=>Gh(mt.fe,Jr)),Zn=pn.mutations.map(Jr=>Gh(mt.fe,Jr));return{userId:Ct,batchId:pn.batchId,localWriteTimeMs:pn.localWriteTime.toMillis(),baseMutations:Fn,mutations:Zn}}(this.serializer,this.userId,F),ce=[];let xe=new yi((mt,Ct)=>jr(mt.canonicalString(),Ct.canonicalString()));for(const mt of l){const Ct=Tl(this.userId,mt.key.path,M);xe=xe.add(mt.key.path.popLast()),ce.push(_.put(Q)),ce.push(f.put(Ct,Zc))}return xe.forEach(mt=>{ce.push(this.indexManager.addToCollectionParentIndex(e,mt))}),e.addOnCommittedListener(()=>{this.Vn[M]=F.keys()}),xt.waitFor(ce).next(()=>F)})}lookupMutationBatch(e,n){return jl(e).get(n).next(s=>s?(Hn(s.userId===this.userId),Td(this.serializer,s)):null)}Sn(e,n){return this.Vn[n]?xt.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const l=s.keys();return this.Vn[n]=l,l}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,l=IDBKeyRange.lowerBound([this.userId,s]);let f=null;return jl(e).X({index:"userMutationsIndex",range:l},(_,M,F)=>{M.userId===this.userId&&(Hn(M.batchId>=s),f=Td(this.serializer,M)),F.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return jl(e).X({index:"userMutationsIndex",range:n,reverse:!0},(l,f,_)=>{s=f.batchId,_.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jl(e).j("userMutationsIndex",n).next(s=>s.map(l=>Td(this.serializer,l)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=tc(this.userId,n.path),l=IDBKeyRange.lowerBound(s),f=[];return Kh(e).X({range:l},(_,M,F)=>{const[Q,ce,xe]=_,mt=za(ce);if(Q===this.userId&&n.path.isEqual(mt))return jl(e).get(xe).next(Ct=>{if(!Ct)throw cn();Hn(Ct.userId===this.userId),f.push(Td(this.serializer,Ct))});F.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new yi(jr);const l=[];return n.forEach(f=>{const _=tc(this.userId,f.path),M=IDBKeyRange.lowerBound(_),F=Kh(e).X({range:M},(Q,ce,xe)=>{const[mt,Ct,pn]=Q,Fn=za(Ct);mt===this.userId&&f.path.isEqual(Fn)?s=s.add(pn):xe.done()});l.push(F)}),xt.waitFor(l).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1,f=tc(this.userId,s),_=IDBKeyRange.lowerBound(f);let M=new yi(jr);return Kh(e).X({range:_},(F,Q,ce)=>{const[xe,mt,Ct]=F,pn=za(mt);xe===this.userId&&s.isPrefixOf(pn)?pn.length===l&&(M=M.add(Ct)):ce.done()}).next(()=>this.Dn(e,M))}Dn(e,n){const s=[],l=[];return n.forEach(f=>{l.push(jl(e).get(f).next(_=>{if(null===_)throw cn();Hn(_.userId===this.userId),s.push(Td(this.serializer,_))}))}),xt.waitFor(l).next(()=>s)}removeMutationBatch(e,n){return Rp(e.ht,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),xt.forEach(s,l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return xt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),l=[];return Kh(e).X({range:s},(f,_,M)=>{if(f[0]===this.userId){const F=za(f[1]);l.push(F)}else M.done()}).next(()=>{Hn(0===l.length)})})}containsKey(e,n){return jg(e,this.userId,n)}xn(e){return $y(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jg(i,e,n){const s=tc(e,n.path),l=s[1],f=IDBKeyRange.lowerBound(s);let _=!1;return Kh(i).X({range:f,Y:!0},(M,F,Q)=>{const[ce,xe,mt]=M;ce===e&&xe===l&&(_=!0),Q.done()}).next(()=>_)}function jl(i){return tr(i,"mutations")}function Kh(i){return tr(i,"documentMutations")}function $y(i){return tr(i,"mutationQueues")}class mh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new mh(0)}static Mn(){return new mh(-1)}}class Hg{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const s=new mh(n.highestTargetId);return n.highestTargetId=s.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>vr.fromTimestamp(new Ri(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.$n(e).next(l=>(l.highestListenSequenceNumber=n,s&&(l.lastRemoteSnapshotVersion=s.toTimestamp()),n>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=n),this.On(e,l)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(n,s),this.On(e,s))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>yh(e).delete(n.targetId)).next(()=>this.$n(e)).next(s=>(Hn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,n,s){let l=0;const f=[];return yh(e).X((_,M)=>{const F=Sd(M);F.sequenceNumber<=n&&null===s.get(F.targetId)&&(l++,f.push(this.removeTargetData(e,F)))}).next(()=>xt.waitFor(f)).next(()=>l)}forEachTarget(e,n){return yh(e).X((s,l)=>{const f=Sd(l);n(f)})}$n(e){return Vy(e).get("targetGlobalKey").next(n=>(Hn(null!==n),n))}On(e,n){return Vy(e).put("targetGlobalKey",n)}Fn(e,n){return yh(e).put(Ny(this.serializer,n))}Bn(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const s=sc(n),l=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let f=null;return yh(e).X({range:l,index:"queryTargetsIndex"},(_,M,F)=>{const Q=Sd(M);to(n,Q.target)&&(f=Q,F.done())}).next(()=>f)}addMatchingKeys(e,n,s){const l=[],f=Yu(e);return n.forEach(_=>{const M=ko(_.path);l.push(f.put({targetId:s,path:M})),l.push(this.referenceDelegate.addReference(e,s,_))}),xt.waitFor(l)}removeMatchingKeys(e,n,s){const l=Yu(e);return xt.forEach(n,f=>{const _=ko(f.path);return xt.waitFor([l.delete([s,_]),this.referenceDelegate.removeReference(e,s,f)])})}removeMatchingKeysForTargetId(e,n){const s=Yu(e),l=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(l)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),l=Yu(e);let f=Oe();return l.X({range:s,Y:!0},(_,M,F)=>{const Q=za(_[1]),ce=new On(Q);f=f.add(ce)}).next(()=>f)}containsKey(e,n){const s=ko(n.path),l=IDBKeyRange.bound([s],[No(s)],!1,!0);let f=0;return Yu(e).X({index:"documentTargetsIndex",Y:!0,range:l},([_,M],F,Q)=>{0!==_&&(f++,Q.done())}).next(()=>f>0)}le(e,n){return yh(e).get(n).next(s=>s?Sd(s):null)}}function yh(i){return tr(i,"targets")}function Vy(i){return tr(i,"targetGlobal")}function Yu(i){return tr(i,"targetDocuments")}function Np([i,e],[n,s]){const l=jr(i,n);return 0===l?jr(e,s):l}class kI{constructor(e){this.Ln=e,this.buffer=new yi(Np),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Np(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class M_{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var n=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(s){hl(s)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ga(s)}yield n.Qn(3e5)}))}}class x_{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(0===n)return xt.resolve(Xs.ct);const s=new kI(n);return this.jn.forEachTarget(e,l=>s.Kn(l.sequenceNumber)).next(()=>this.jn.Wn(e,l=>s.Kn(l))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.jn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve($c)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$c):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let s,l,f,_,M,F,Q;const ce=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(xe=>(xe>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${xe}`),l=this.params.maximumSequenceNumbersToCollect):l=xe,_=Date.now(),this.nthSequenceNumber(e,l))).next(xe=>(s=xe,M=Date.now(),this.removeTargets(e,s,n))).next(xe=>(f=xe,F=Date.now(),this.removeOrphanedDocuments(e,s))).next(xe=>(Q=Date.now(),se()<=rt.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${_-ce}ms\n\tDetermined least recently used ${l} in `+(M-_)+`ms\n\tRemoved ${f} targets in `+(F-M)+`ms\n\tRemoved ${xe} documents in `+(Q-F)+`ms\nTotal Duration: ${Q-ce}ms`),xt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:f,documentsRemoved:xe})))}}class FI{constructor(e,n){this.db=e,this.garbageCollector=function Uy(i,e){return new x_(i,e)}(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(l=>s+l))}Jn(e){let n=0;return this.Wn(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(s,l)=>n(l))}addReference(e,n,s){return zg(e,s)}removeReference(e,n,s){return zg(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return zg(e,n)}Xn(e,n){return function(s,l){let f=!1;return $y(s).Z(_=>jg(s,_,l).next(M=>(M&&(f=!0),xt.resolve(!M)))).next(()=>f)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let f=0;return this.Yn(e,(_,M)=>{if(M<=n){const F=this.Xn(e,_).next(Q=>{if(!Q)return f++,s.getEntry(e,_).next(()=>(s.removeEntry(_,vr.min()),Yu(e).delete([0,ko(_.path)])))});l.push(F)}}).next(()=>xt.waitFor(l)).next(()=>s.apply(e)).next(()=>f)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return zg(e,n)}Yn(e,n){const s=Yu(e);let l,f=Xs.ct;return s.X({index:"documentTargetsIndex"},([_,M],{path:F,sequenceNumber:Q})=>{0===_?(f!==Xs.ct&&n(new On(za(l)),f),f=Q,l=F):f=Xs.ct}).next(()=>{f!==Xs.ct&&n(new On(za(l)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zg(i,e){return Yu(i).put((s=i.currentSequenceNumber,{targetId:0,path:ko(e.path),sequenceNumber:s}));var s}class Bf{constructor(){this.changes=new yl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,os.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return void 0!==s?xt.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class R_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Zu(e).put(s)}removeEntry(e,n,s){return Zu(e).delete(function(l,f){const _=l.path.toArray();return[_.slice(0,_.length-2),_[_.length-2],bp(f),_[_.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.Zn(e,s)))}getEntry(e,n){let s=os.newInvalidDocument(n);return Zu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_h(n))},(l,f)=>{s=this.ts(n,f)}).next(()=>s)}es(e,n){let s={size:0,document:os.newInvalidDocument(n)};return Zu(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_h(n))},(l,f)=>{s={document:this.ts(n,f),size:Op(f)}}).next(()=>s)}getEntries(e,n){let s=Ea();return this.ns(e,n,(l,f)=>{const _=this.ts(l,f);s=s.insert(l,_)}).next(()=>s)}ss(e,n){let s=Ea(),l=new gr(On.comparator);return this.ns(e,n,(f,_)=>{const M=this.ts(f,_);s=s.insert(f,M),l=l.insert(f,Op(_))}).next(()=>({documents:s,rs:l}))}ns(e,n,s){if(n.isEmpty())return xt.resolve();let l=new yi($f);n.forEach(F=>l=l.add(F));const f=IDBKeyRange.bound(_h(l.first()),_h(l.last())),_=l.getIterator();let M=_.getNext();return Zu(e).X({index:"documentKeyIndex",range:f},(F,Q,ce)=>{const xe=On.fromSegments([...Q.prefixPath,Q.collectionGroup,Q.documentId]);for(;M&&$f(M,xe)<0;)s(M,null),M=_.getNext();M&&M.isEqual(xe)&&(s(M,Q),M=_.hasNext()?_.getNext():null),M?ce.G(_h(M)):ce.done()}).next(()=>{for(;M;)s(M,null),M=_.hasNext()?_.getNext():null})}getDocumentsMatchingQuery(e,n,s,l){const f=n.path,_=[f.popLast().toArray(),f.lastSegment(),bp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],M=[f.popLast().toArray(),f.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zu(e).j(IDBKeyRange.bound(_,M,!0)).next(F=>{let Q=Ea();for(const ce of F){const xe=this.ts(On.fromSegments(ce.prefixPath.concat(ce.collectionGroup,ce.documentId)),ce);xe.isFoundDocument()&&(Oc(n,xe)||l.has(xe.key))&&(Q=Q.insert(xe.key,xe))}return Q})}getAllFromCollectionGroup(e,n,s,l){let f=Ea();const _=Yh(n,s),M=Yh(n,As.max());return Zu(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(_,M,!0)},(F,Q,ce)=>{const xe=this.ts(On.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);f=f.insert(xe.key,xe),f.size===l&&ce.done()}).next(()=>f)}newChangeBuffer(e){return new Gg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return vh(e).get("remoteDocumentGlobalKey").next(n=>(Hn(!!n),n))}Zn(e,n){return vh(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const s=function Oy(i,e){let n;if(e.document)n=Rg(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=On.fromSegments(e.noDocument.path),l=hh(e.noDocument.readTime);n=os.newNoDocument(s,l),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return cn();{const s=On.fromSegments(e.unknownDocument.path),l=hh(e.unknownDocument.version);n=os.newUnknownDocument(s,l)}}return e.readTime&&n.setReadTime(function(s){const l=new Ri(s[0],s[1]);return vr.fromTimestamp(l)}(e.readTime)),n}(this.serializer,n);if(!s.isNoDocument()||!s.version.isEqual(vr.min()))return s}return os.newInvalidDocument(e)}}function kp(i){return new R_(i)}class Gg extends Bf{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new yl(s=>s.toString(),(s,l)=>s.isEqual(l))}applyChanges(e){const n=[];let s=0,l=new yi((f,_)=>jr(f.canonicalString(),_.canonicalString()));return this.changes.forEach((f,_)=>{const M=this.us.get(f);if(n.push(this.os.removeEntry(e,f,M.readTime)),_.isValidDocument()){const F=Py(this.os.serializer,_);l=l.add(f.path.popLast());const Q=Op(F);s+=Q-M.size,n.push(this.os.addEntry(e,f,F))}else if(s-=M.size,this.trackRemovals){const F=Py(this.os.serializer,_.convertToNoDocument(vr.min()));n.push(this.os.addEntry(e,f,F))}}),l.forEach(f=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,f))}),n.push(this.os.updateMetadata(e,s)),xt.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(s=>(this.us.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:s,rs:l})=>(l.forEach((f,_)=>{this.us.set(f,{size:_,readTime:s.get(f).readTime})}),s))}}function vh(i){return tr(i,"remoteDocumentGlobal")}function Zu(i){return tr(i,"remoteDocumentsV14")}function _h(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Yh(i,e){const n=e.documentKey.path.toArray();return[i,bp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $f(i,e){const n=i.path.toArray(),s=e.path.toArray();let l=0;for(let f=0;f<n.length-2&&f<s.length-2;++f)if(l=jr(n[f],s[f]),l)return l;return l=jr(n.length,s.length),l||(l=jr(n[n.length-2],s[s.length-2]),l||jr(n[n.length-1],s[s.length-1]))}class Zh{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Fp{constructor(e,n,s,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(e,n))).next(l=>(null!==s&&_d(s.mutation,l,ma.empty(),Ri.now()),l))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Oe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Oe()){const l=m();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,s).next(f=>{let _=P();return f.forEach((M,F)=>{_=_.insert(M,F.overlayedDocument)}),_}))}getOverlayedDocuments(e,n){const s=m();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Oe()))}populateOverlays(e,n,s){const l=[];return s.forEach(f=>{n.has(f)||l.push(f)}),this.documentOverlayCache.getOverlays(e,l).next(f=>{f.forEach((_,M)=>{n.set(_,M)})})}computeViews(e,n,s,l){let f=Ea();const _=W(),M=W();return n.forEach((F,Q)=>{const ce=s.get(Q.key);l.has(Q.key)&&(void 0===ce||ce.mutation instanceof kc)?f=f.insert(Q.key,Q):void 0!==ce?(_.set(Q.key,ce.mutation.getFieldMask()),_d(ce.mutation,Q,ce.mutation.getFieldMask(),Ri.now())):_.set(Q.key,ma.empty())}),this.recalculateAndSaveOverlays(e,f).next(F=>(F.forEach((Q,ce)=>_.set(Q,ce)),n.forEach((Q,ce)=>{var xe;return M.set(Q,new Zh(ce,null!==(xe=_.get(Q))&&void 0!==xe?xe:null))}),M))}recalculateAndSaveOverlays(e,n){const s=W();let l=new gr((_,M)=>_-M),f=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(_=>{for(const M of _)M.keys().forEach(F=>{const Q=n.get(F);if(null===Q)return;let ce=s.get(F)||ma.empty();ce=M.applyToLocalView(Q,ce),s.set(F,ce);const xe=(l.get(M.batchId)||Oe()).add(F);l=l.insert(M.batchId,xe)})}).next(()=>{const _=[],M=l.getReverseIterator();for(;M.hasNext();){const F=M.getNext(),Q=F.key,ce=F.value,xe=b();ce.forEach(mt=>{if(!f.has(mt)){const Ct=mp(n.get(mt),s.get(mt));null!==Ct&&xe.set(mt,Ct),f=f.add(mt)}}),_.push(this.documentOverlayCache.saveOverlays(e,Q,xe))}return xt.waitFor(_)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return On.isDocumentKey((l=n).path)&&null===l.collectionGroup&&0===l.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):eh(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s);var l}getNextDocuments(e,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,l).next(f=>{const _=l-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,l-f.size):xt.resolve(m());let M=-1,F=f;return _.next(Q=>xt.forEach(Q,(ce,xe)=>(M<xe.largestBatchId&&(M=xe.largestBatchId),f.get(ce)?xt.resolve():this.remoteDocumentCache.getEntry(e,ce).next(mt=>{F=F.insert(ce,mt)}))).next(()=>this.populateOverlays(e,Q,f)).next(()=>this.computeViews(e,F,Q,Oe())).next(ce=>({batchId:M,changes:g(ce)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new On(n)).next(s=>{let l=P();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const l=n.collectionGroup;let f=P();return this.indexManager.getCollectionParents(e,l).next(_=>xt.forEach(_,M=>{const F=(Q=n,ce=M.child(l),new rl(ce,null,Q.explicitOrderBy.slice(),Q.filters.slice(),Q.limit,Q.limitType,Q.startAt,Q.endAt));var Q,ce;return this.getDocumentsMatchingCollectionQuery(e,F,s).next(Q=>{Q.forEach((ce,xe)=>{f=f.insert(ce,xe)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(l=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,l))).next(f=>{l.forEach((M,F)=>{const Q=F.getKey();null===f.get(Q)&&(f=f.insert(Q,os.newInvalidDocument(Q)))});let _=P();return f.forEach((M,F)=>{const Q=l.get(M);void 0!==Q&&_d(Q.mutation,F,ma.empty(),Ri.now()),Oc(n,F)&&(_=_.insert(M,F))}),_})}}class Wg{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return xt.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var s;return this.cs.set(n.id,{id:(s=n).id,version:s.version,createTime:Ot(s.createTime)}),xt.resolve()}getNamedQuery(e,n){return xt.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(s=n).name,query:Of(s.bundledQuery),readTime:Ot(s.readTime)}),xt.resolve();var s}}class Lp{constructor(){this.overlays=new gr(On.comparator),this.ls=new Map}getOverlay(e,n){return xt.resolve(this.overlays.get(n))}getOverlays(e,n){const s=m();return xt.forEach(n,l=>this.getOverlay(e,l).next(f=>{null!==f&&s.set(l,f)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((l,f)=>{this.we(e,n,f)}),xt.resolve()}removeOverlaysForBatchId(e,n,s){const l=this.ls.get(s);return void 0!==l&&(l.forEach(f=>this.overlays=this.overlays.remove(f)),this.ls.delete(s)),xt.resolve()}getOverlaysForCollection(e,n,s){const l=m(),f=n.length+1,_=new On(n.child("")),M=this.overlays.getIteratorFrom(_);for(;M.hasNext();){const F=M.getNext().value,Q=F.getKey();if(!n.isPrefixOf(Q.path))break;Q.path.length===f&&F.largestBatchId>s&&l.set(F.getKey(),F)}return xt.resolve(l)}getOverlaysForCollectionGroup(e,n,s,l){let f=new gr((Q,ce)=>Q-ce);const _=this.overlays.getIterator();for(;_.hasNext();){const Q=_.getNext().value;if(Q.getKey().getCollectionGroup()===n&&Q.largestBatchId>s){let ce=f.get(Q.largestBatchId);null===ce&&(ce=m(),f=f.insert(Q.largestBatchId,ce)),ce.set(Q.getKey(),Q)}}const M=m(),F=f.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((Q,ce)=>M.set(Q,ce)),!(M.size()>=l)););return xt.resolve(M)}we(e,n,s){const l=this.overlays.get(s.key);if(null!==l){const _=this.ls.get(l.largestBatchId).delete(s.key);this.ls.set(l.largestBatchId,_)}this.overlays=this.overlays.insert(s.key,new jh(n,s));let f=this.ls.get(n);void 0===f&&(f=Oe(),this.ls.set(n,f)),this.ls.set(n,f.add(s.key))}}class jy{constructor(){this.fs=new yi(na.ds),this.ws=new yi(na._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const s=new na(e,n);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.ys(new na(e,n))}ps(e,n){e.forEach(s=>this.removeReference(s,n))}Is(e){const n=new On(new ii([])),s=new na(n,e),l=new na(n,e+1),f=[];return this.ws.forEachInRange([s,l],_=>{this.ys(_),f.push(_.key)}),f}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new On(new ii([])),s=new na(n,e),l=new na(n,e+1);let f=Oe();return this.ws.forEachInRange([s,l],_=>{f=f.add(_.key)}),f}containsKey(e){const n=new na(e,0),s=this.fs.firstAfterOrEqual(n);return null!==s&&e.isEqual(s.key)}}class na{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return On.comparator(e.key,n.key)||jr(e.As,n.As)}static _s(e,n){return jr(e.As,n.As)||On.comparator(e.key,n.key)}}class Vf{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new yi(na.ds)}checkEmpty(e){return xt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,s,l){const f=this.vs;this.vs++;const _=new oh(f,n,s,l);this.mutationQueue.push(_);for(const M of l)this.Rs=this.Rs.add(new na(M.key,f)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return xt.resolve(_)}lookupMutationBatch(e,n){return xt.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const l=this.bs(n+1),f=l<0?0:l;return xt.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return xt.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new na(n,0),l=new na(n,Number.POSITIVE_INFINITY),f=[];return this.Rs.forEachInRange([s,l],_=>{const M=this.Ps(_.As);f.push(M)}),xt.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new yi(jr);return n.forEach(l=>{const f=new na(l,0),_=new na(l,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([f,_],M=>{s=s.add(M.As)})}),xt.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,l=s.length+1;let f=s;On.isDocumentKey(f)||(f=f.child(""));const _=new na(new On(f),0);let M=new yi(jr);return this.Rs.forEachWhile(F=>{const Q=F.key.path;return!!s.isPrefixOf(Q)&&(Q.length===l&&(M=M.add(F.As)),!0)},_),xt.resolve(this.Vs(M))}Vs(e){const n=[];return e.forEach(s=>{const l=this.Ps(s);null!==l&&n.push(l)}),n}removeMutationBatch(e,n){Hn(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return xt.forEach(n.mutations,l=>{const f=new na(l.key,n.batchId);return s=s.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,n){const s=new na(n,0),l=this.Rs.firstAfterOrEqual(s);return xt.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return xt.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class O_{constructor(e){this.Ds=e,this.docs=new gr(On.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,l=this.docs.get(s),f=l?l.size:0,_=this.Ds(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:_}),this.size+=_-f,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return xt.resolve(s?s.document.mutableCopy():os.newInvalidDocument(n))}getEntries(e,n){let s=Ea();return n.forEach(l=>{const f=this.docs.get(l);s=s.insert(l,f?f.document.mutableCopy():os.newInvalidDocument(l))}),xt.resolve(s)}getDocumentsMatchingQuery(e,n,s,l){let f=Ea();const _=n.path,M=new On(_.child("")),F=this.docs.getIteratorFrom(M);for(;F.hasNext();){const{key:Q,value:{document:ce}}=F.getNext();if(!_.isPrefixOf(Q.path))break;Q.path.length>_.length+1||xu(Ec(ce),s)<=0||(l.has(ce.key)||Oc(n,ce))&&(f=f.insert(ce.key,ce.mutableCopy()))}return xt.resolve(f)}getAllFromCollectionGroup(e,n,s,l){cn()}Cs(e,n){return xt.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Hy(this)}getSize(e){return xt.resolve(this.size)}}class Hy extends Bf{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.os.addEntry(e,l)):this.os.removeEntry(s)}),xt.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class P_{constructor(e){this.persistence=e,this.xs=new yl(n=>sc(n),to),this.lastRemoteSnapshotVersion=vr.min(),this.highestTargetId=0,this.Ns=0,this.ks=new jy,this.targetCount=0,this.Ms=mh.kn()}forEachTarget(e,n){return this.xs.forEach((s,l)=>n(l)),xt.resolve()}getLastRemoteSnapshotVersion(e){return xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xt.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),xt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Ns&&(this.Ns=n),xt.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new mh(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,xt.resolve()}updateTargetData(e,n){return this.Fn(n),xt.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,xt.resolve()}removeTargets(e,n,s){let l=0;const f=[];return this.xs.forEach((_,M)=>{M.sequenceNumber<=n&&null===s.get(M.targetId)&&(this.xs.delete(_),f.push(this.removeMatchingKeysForTargetId(e,M.targetId)),l++)}),xt.waitFor(f).next(()=>l)}getTargetCount(e){return xt.resolve(this.targetCount)}getTargetData(e,n){const s=this.xs.get(n)||null;return xt.resolve(s)}addMatchingKeys(e,n,s){return this.ks.gs(n,s),xt.resolve()}removeMatchingKeys(e,n,s){this.ks.ps(n,s);const l=this.persistence.referenceDelegate,f=[];return l&&n.forEach(_=>{f.push(l.markPotentiallyOrphaned(e,_))}),xt.waitFor(f)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),xt.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ks.Es(n);return xt.resolve(s)}containsKey(e,n){return xt.resolve(this.ks.containsKey(n))}}class qg{constructor(e,n){this.$s={},this.overlays={},this.Os=new Xs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new P_(this),this.indexManager=new By,this.remoteDocumentCache=new O_(s=>this.referenceDelegate.Ls(s)),this.serializer=new b_(n),this.qs=new Wg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Lp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.$s[e.toKey()];return s||(s=new Vf(n,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,s){Be("MemoryPersistence","Starting transaction:",e);const l=new Kg(this.Os.next());return this.referenceDelegate.Us(),s(l).next(f=>this.referenceDelegate.Ks(l).next(()=>f)).toPromise().then(f=>(l.raiseOnCommittedEvent(),f))}Gs(e,n){return xt.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,n)))}}class Kg extends Kc{constructor(e){super(),this.currentSequenceNumber=e}}class Uf{constructor(e){this.persistence=e,this.Qs=new jy,this.js=null}static zs(e){return new Uf(e)}get Ws(){if(this.js)return this.js;throw cn()}addReference(e,n,s){return this.Qs.addReference(s,n),this.Ws.delete(s.toString()),xt.resolve()}removeReference(e,n,s){return this.Qs.removeReference(s,n),this.Ws.add(s.toString()),xt.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),xt.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(l=>this.Ws.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(l=>{l.forEach(f=>this.Ws.add(f.toString()))}).next(()=>s.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xt.forEach(this.Ws,s=>{const l=On.fromPath(s);return this.Hs(e,l).next(f=>{f||n.removeEntry(l,vr.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(s=>{s?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return xt.or([()=>xt.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class N_{constructor(e){this.serializer=e}O(e,n,s,l){const f=new wc("createOrUpgrade",n);var M;s<1&&l>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dl,{unique:!0}),M.createObjectStore("documentMutations"),k_(e),function(M){M.createObjectStore("remoteDocuments")}(e));let _=xt.resolve();return s<3&&l>=3&&(0!==s&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),k_(e)),_=_.next(()=>function(M){const F=M.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vr.min().toTimestamp(),targetCount:0};return F.put("targetGlobalKey",Q)}(f))),s<4&&l>=4&&(0!==s&&(_=_.next(()=>function(M,F){return F.store("mutations").j().next(Q=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dl,{unique:!0});const ce=F.store("mutations"),xe=Q.map(mt=>ce.put(mt));return xt.waitFor(xe)})}(e,f))),_=_.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&l>=5&&(_=_.next(()=>this.Ys(f))),s<6&&l>=6&&(_=_.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(f)))),s<7&&l>=7&&(_=_.next(()=>this.Zs(f))),s<8&&l>=8&&(_=_.next(()=>this.ti(e,f))),s<9&&l>=9&&(_=_.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&l>=10&&(_=_.next(()=>this.ei(f))),s<11&&l>=11&&(_=_.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&l>=12&&(_=_.next(()=>{!function(M){const F=M.createObjectStore("documentOverlays",{keyPath:X});F.createIndex("collectionPathOverlayIndex",ve,{unique:!1}),F.createIndex("collectionGroupOverlayIndex",Qe,{unique:!1})}(e)})),s<13&&l>=13&&(_=_.next(()=>function(M){const F=M.createObjectStore("remoteDocumentsV14",{keyPath:Ls});F.createIndex("documentKeyIndex",fd),F.createIndex("collectionGroupIndex",Ta)}(e)).next(()=>this.ni(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&l>=14&&(_=_.next(()=>this.si(e,f))),s<15&&l>=15&&(_=_.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:Sl}).createIndex("sequenceNumberIndex",pl,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:B}).createIndex("documentKeyIndex",H,{unique:!1})}(e))),_}Xs(e){let n=0;return e.store("remoteDocuments").X((s,l)=>{n+=Op(l)}).next(()=>{const s={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const n=e.store("mutationQueues"),s=e.store("mutations");return n.j().next(l=>xt.forEach(l,f=>{const _=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",_).next(M=>xt.forEach(M,F=>{Hn(F.userId===f.userId);const Q=Td(this.serializer,F);return Rp(e,f.userId,Q).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(l=>{const f=[];return s.X((_,M)=>{const F=new ii(_),Q=[0,ko(F)];f.push(n.get(Q).next(ce=>ce?xt.resolve():n.put({targetId:0,path:ko(F),sequenceNumber:l.highestListenSequenceNumber})))}).next(()=>xt.waitFor(f))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:Xc});const s=n.store("collectionParents"),l=new Ap,f=_=>{if(l.add(_)){const M=_.lastSegment(),F=_.popLast();return s.put({collectionId:M,parent:ko(F)})}};return n.store("remoteDocuments").X({Y:!0},(_,M)=>{const F=new ii(_);return f(F.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([_,M,F],Q)=>{const ce=za(M);return f(ce.popLast())}))}ei(e){const n=e.store("targets");return n.X((s,l)=>{const f=Sd(l),_=Ny(this.serializer,f);return n.put(_)})}ni(e,n){const s=n.store("remoteDocuments"),l=[];return s.X((f,_)=>{const M=n.store("remoteDocumentsV14"),F=(Q=_,Q.document?new On(ii.fromString(Q.document.name).popFirst(5)):Q.noDocument?On.fromSegments(Q.noDocument.path):Q.unknownDocument?On.fromSegments(Q.unknownDocument.path):cn()).path.toArray();var Q;const ce={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:_.readTime||[0,0],unknownDocument:_.unknownDocument,noDocument:_.noDocument,document:_.document,hasCommittedMutations:!!_.hasCommittedMutations};l.push(M.put(ce))}).next(()=>xt.waitFor(l))}si(e,n){const s=n.store("mutations"),l=kp(this.serializer),f=new qg(Uf.zs,this.serializer.fe);return s.j().next(_=>{const M=new Map;return _.forEach(F=>{var Q;let ce=null!==(Q=M.get(F.userId))&&void 0!==Q?Q:Oe();Td(this.serializer,F).keys().forEach(xe=>ce=ce.add(xe)),M.set(F.userId,ce)}),xt.forEach(M,(F,Q)=>{const ce=new N(Q),xe=Dp.de(this.serializer,ce),mt=f.getIndexManager(ce),Ct=Pp.de(ce,this.serializer,mt,f.referenceDelegate);return new Fp(l,Ct,xe,mt).recalculateAndSaveOverlaysForDocumentKeys(new cr(n,Xs.ct),F).next()})})}}function k_(i){i.createObjectStore("targetDocuments",{keyPath:Qc}).createIndex("documentTargetsIndex",Ru,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qo,{unique:!0}),i.createObjectStore("targetGlobal")}const Yg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qh{constructor(e,n,s,l,f,_,M,F,Q,ce,xe=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.ii=f,this.window=_,this.document=M,this.ri=Q,this.oi=ce,this.ui=xe,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=mt=>Promise.resolve(),!Qh.D())throw new rn(Mt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FI(this,l),this.di=n+"main",this.serializer=new b_(F),this.wi=new Zo(this.di,this.ui,new N_(this.serializer)),this.Bs=new Hg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kp(this.serializer),this.qs=new D_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ce&&hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new rn(Mt.FAILED_PRECONDITION,Yg);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Xs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var s,n=this;return this.fi=function(l){return(s=s||(0,Ee.Z)(function*(f){if(n.started)return e(f)})).apply(this,arguments)},e(this.isPrimary)}setDatabaseDeletedListener(e){var n;this.wi.B(function(s){return(n=n||(0,Ee.Z)(function*(l){null===l.newVersion&&(yield e())})).apply(this,arguments)})}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ee.Z)(function*(){n.started&&(yield n.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$p(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(hl(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Ih(e).get("owner").next(n=>xt.resolve(this.Ri(n)))}Pi(e){return $p(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const l=tr(s,"clientMetadata");return l.j().next(f=>{const _=e.Si(f,18e5),M=f.filter(F=>-1===_.indexOf(F));return xt.forEach(M,F=>l.delete(F.clientId)).next(()=>M)})}).catch(()=>[]);if(e._i)for(const s of n)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?xt.resolve(!0):Ih(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new rn(Mt.FAILED_PRECONDITION,Yg);return!1}}return!(!this.networkEnabled||!this.inForeground)||$p(e).j().next(s=>void 0===this.Si(s,5e3).find(l=>!(this.clientId===l.clientId||!(!this.networkEnabled&&l.networkEnabled||!this.inForeground&&l.inForeground&&this.networkEnabled===l.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Be("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const s=new cr(n,Xs.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,n){return e.filter(s=>this.Vi(s.updateTimeMs,n)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>$p(e).j().next(n=>this.Si(n,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return Pp.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new A_(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Dp.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,s){Be("IndexedDbPersistence","Starting transaction:",e);const l="readonly"===n?"readonly":"readwrite",f=15===(_=this.ui)?nr:14===_?Dn:13===_?Yt:12===_?Vt:11===_?vt:void cn();var _;let M;return this.wi.runTransaction(e,l,f,F=>(M=new cr(F,this.Os?this.Os.next():Xs.ct),"readwrite-primary"===n?this.Ti(M).next(Q=>!!Q||this.Ei(M)).next(Q=>{if(!Q)throw hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new rn(Mt.FAILED_PRECONDITION,tl);return s(M)}).next(Q=>this.vi(M).next(()=>Q)):this.Oi(M).next(()=>s(M)))).then(F=>(M.raiseOnCommittedEvent(),F))}Oi(e){return Ih(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new rn(Mt.FAILED_PRECONDITION,Yg)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ih(e).put("owner",n)}static D(){return Zo.D()}Ai(e){const n=Ih(e);return n.get("owner").next(s=>this.Ri(s)?(Be("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):xt.resolve())}Vi(e,n){const s=Date.now();return!(e<s-n||e>s&&(hn(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,be.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const s=null!==(null===(n=this._i)||void 0===n?void 0:n.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return hn("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){hn("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ih(i){return tr(i,"owner")}function $p(i){return tr(i,"clientMetadata")}function Vp(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class jf{constructor(e,n,s,l){this.targetId=e,this.fromCache=n,this.Fi=s,this.Bi=l}static Li(e,n){let s=Oe(),l=Oe();for(const f of n.docChanges)switch(f.type){case 0:s=s.add(f.doc.key);break;case 1:l=l.add(f.doc.key)}return new jf(e,n.fromCache,s,l)}}class Hf{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,s,l){return this.Ki(e,n).next(f=>f||this.Gi(e,n,l,s)).next(f=>f||this.Qi(e,n))}Ki(e,n){if(Fl(n))return xt.resolve(null);let s=ea(n);return this.indexManager.getIndexType(e,s).next(l=>0===l?null:(null!==n.limit&&1===l&&(n=lu(n,null,"F"),s=ea(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(f=>{const _=Oe(...f);return this.Ui.getDocuments(e,_).next(M=>this.indexManager.getMinOffset(e,s).next(F=>{const Q=this.ji(n,M);return this.zi(n,Q,_,F.readTime)?this.Ki(e,lu(n,null,"F")):this.Wi(e,Q,n,F)}))})))}Gi(e,n,s,l){return Fl(n)||l.isEqual(vr.min())?this.Qi(e,n):this.Ui.getDocuments(e,s).next(f=>{const _=this.ji(n,f);return this.zi(n,_,s,l)?this.Qi(e,n):(se()<=rt.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ll(n)),this.Wi(e,_,n,dd(l,-1)))})}ji(e,n){let s=new yi(Go(e));return n.forEach((l,f)=>{Oc(e,f)&&(s=s.add(f))}),s}zi(e,n,s,l){if(null===e.limit)return!1;if(s.size!==n.size)return!0;const f="F"===e.limitType?n.last():n.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(l)>0)}Qi(e,n){return se()<=rt.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Ll(n)),this.Ui.getDocumentsMatchingQuery(e,n,As.min())}Wi(e,n,s,l){return this.Ui.getDocumentsMatchingQuery(e,s,l).next(f=>(n.forEach(_=>{f=f.insert(_.key,_)}),f))}}class F_{constructor(e,n,s,l){this.persistence=e,this.Hi=n,this.serializer=l,this.Ji=new gr(jr),this.Yi=new yl(f=>sc(f),to),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fp(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function Zg(i,e,n,s){return new F_(i,e,n,s)}function zy(i,e){return(Vo=Vo||(0,Ee.Z)(function*(n,s){const l=kn(n);return yield l.persistence.runTransaction("Handle user change","readonly",f=>{let _;return l.mutationQueue.getAllMutationBatches(f).next(M=>(_=M,l.tr(s),l.mutationQueue.getAllMutationBatches(f))).next(M=>{const F=[],Q=[];let ce=Oe();for(const xe of _){F.push(xe.batchId);for(const mt of xe.mutations)ce=ce.add(mt.key)}for(const xe of M){Q.push(xe.batchId);for(const mt of xe.mutations)ce=ce.add(mt.key)}return l.localDocuments.getDocuments(f,ce).next(xe=>({er:xe,removedBatchIds:F,addedBatchIds:Q}))})})})).apply(this,arguments)}function L_(i){const e=kn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function zf(i,e,n){let s=Oe(),l=Oe();return n.forEach(f=>s=s.add(f)),e.getEntries(i,s).next(f=>{let _=Ea();return n.forEach((M,F)=>{const Q=f.get(M);F.isFoundDocument()!==Q.isFoundDocument()&&(l=l.add(M)),F.isNoDocument()&&F.version.isEqual(vr.min())?(e.removeEntry(M,F.readTime),_=_.insert(M,F)):!Q.isValidDocument()||F.version.compareTo(Q.version)>0||0===F.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(F),_=_.insert(M,F)):Be("LocalStore","Ignoring outdated watch update for ",M,". Current version:",Q.version," Watch version:",F.version)}),{nr:_,sr:l}})}function $_(i,e){const n=kn(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Vc(i,e){const n=kn(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.Bs.getTargetData(s,e).next(f=>f?(l=f,xt.resolve(l)):n.Bs.allocateTargetId(s).next(_=>(l=new Dd(e,_,"TargetPurposeListen",s.currentSequenceNumber),n.Bs.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.Ji.get(s.targetId);return(null===l||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(s.targetId,s),n.Yi.set(e,s.targetId)),s})}function pu(i,e,n){return(od=od||(0,Ee.Z)(function*(s,l,f){const _=kn(s),M=_.Ji.get(l),F=f?"readwrite":"readwrite-primary";try{f||(yield _.persistence.runTransaction("Release target",F,Q=>_.persistence.referenceDelegate.removeTarget(Q,M)))}catch(Q){if(!hl(Q))throw Q;Be("LocalStore",`Failed to update sequence numbers for target ${l}: ${Q}`)}_.Ji=_.Ji.remove(l),_.Yi.delete(M.target)})).apply(this,arguments)}function Up(i,e,n){const s=kn(i);let l=vr.min(),f=Oe();return s.persistence.runTransaction("Execute query","readonly",_=>function(M,F,Q){const ce=kn(M),xe=ce.Yi.get(Q);return void 0!==xe?xt.resolve(ce.Ji.get(xe)):ce.Bs.getTargetData(F,Q)}(s,_,ea(e)).next(M=>{if(M)return l=M.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(_,M.targetId).next(F=>{f=F})}).next(()=>s.Hi.getDocumentsMatchingQuery(_,e,n?l:vr.min(),n?f:Oe())).next(M=>(qy(s,Ia(e),M),{documents:M,ir:f})))}function Qg(i,e){const n=kn(i),s=kn(n.Bs),l=n.Ji.get(e);return l?Promise.resolve(l.target):n.persistence.runTransaction("Get target data","readonly",f=>s.le(f,e).next(_=>_?_.target:null))}function Wy(i,e){const n=kn(i),s=n.Xi.get(e)||vr.min();return n.persistence.runTransaction("Get new document changes","readonly",l=>n.Zi.getAllFromCollectionGroup(l,e,dd(s,-1),Number.MAX_SAFE_INTEGER)).then(l=>(qy(n,e,l),l))}function qy(i,e,n){let s=i.Xi.get(e)||vr.min();n.forEach((l,f)=>{f.readTime.compareTo(s)>0&&(s=f.readTime)}),i.Xi.set(e,s)}function Ky(i,e){return(xl=xl||(0,Ee.Z)(function*(n,s,l=Oe()){const f=yield Vc(n,ea(Of(s.bundledQuery))),_=kn(n);return _.persistence.runTransaction("Save named query","readwrite",M=>{const F=Ot(s.readTime);if(f.snapshotVersion.compareTo(F)>=0)return _.qs.saveNamedQuery(M,s);const Q=f.withResumeToken(vo.EMPTY_BYTE_STRING,F);return _.Ji=_.Ji.insert(Q.targetId,Q),_.Bs.updateTargetData(M,Q).next(()=>_.Bs.removeMatchingKeysForTargetId(M,f.targetId)).next(()=>_.Bs.addMatchingKeys(M,l,f.targetId)).next(()=>_.qs.saveNamedQuery(M,s))})})).apply(this,arguments)}function Xg(i,e){return`firestore_clients_${i}_${e}`}function jp(i,e,n){let s=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Yy(i,e){return`firestore_targets_${i}_${e}`}class Xh{constructor(e,n,s,l){this.user=e,this.batchId=n,this.state=s,this.error=l}static ar(e,n,s){const l=JSON.parse(s);let f,_="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return _&&l.error&&(_="string"==typeof l.error.message&&"string"==typeof l.error.code,_&&(f=new rn(l.error.code,l.error.message))),_?new Xh(e,n,l.state,f):(hn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jh{constructor(e,n,s){this.targetId=e,this.state=n,this.error=s}static ar(e,n){const s=JSON.parse(n);let l,f="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return f&&s.error&&(f="string"==typeof s.error.message&&"string"==typeof s.error.code,f&&(l=new rn(s.error.code,s.error.message))),f?new Jh(e,s.state,l):(hn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const s=JSON.parse(n);let l="object"==typeof s&&s.activeTargetIds instanceof Array,f=Ht();for(let _=0;l&&_<s.activeTargetIds.length;++_)l=Yc(s.activeTargetIds[_]),f=f.add(s.activeTargetIds[_]);return l?new Hp(e,f):(hn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Jg{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Jg(n.clientId,n.onlineState):(hn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zp{constructor(){this.activeTargetIds=Ht()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class em{constructor(e,n,s,l,f){this.window=e,this.ii=n,this.persistenceKey=s,this.wr=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new gr(jr),this.started=!1,this.yr=[];const _=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.pr=Xg(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new zp),this.Tr=new RegExp(`^firestore_clients_${_}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${_}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${_}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const n=yield e.syncEngine.$i();for(const l of n){if(l===e.wr)continue;const f=e.getItem(Xg(e.persistenceKey,l));if(f){const _=Hp.ar(l,f);_&&(e.gr=e.gr.insert(_.clientId,_))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const l=e.br(s);l&&e.Vr(l)}for(const l of e.yr)e.mr(l);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((s,l)=>{l.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,s){this.Dr(e,n,s),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Yy(this.persistenceKey,e));if(s){const l=Jh.ar(e,s);l&&(n=l.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yy(this.persistenceKey,e))}updateQueryState(e,n,s){this.kr(e,n,s)}handleUserChange(e,n,s){n.forEach(l=>{this.Cr(l)}),this.currentUser=e,s.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Be("SharedClientState","READ",e,n),n}setItem(e,n){Be("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var n=this;const s=e;if(s.storageArea===this.storage){if(Be("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(n.started){if(null!==s.key)if(n.Tr.test(s.key)){if(null==s.newValue){const l=n.Or(s.key);return n.Fr(l,null)}{const l=n.Br(s.key,s.newValue);if(l)return n.Fr(l.clientId,l)}}else if(n.Er.test(s.key)){if(null!==s.newValue){const l=n.Lr(s.key,s.newValue);if(l)return n.qr(l)}}else if(n.Ar.test(s.key)){if(null!==s.newValue){const l=n.Ur(s.key,s.newValue);if(l)return n.Kr(l)}}else if(s.key===n.vr){if(null!==s.newValue){const l=n.br(s.newValue);if(l)return n.Vr(l)}}else if(s.key===n.Ir){const l=function(f){let _=Xs.ct;if(null!=f)try{const M=JSON.parse(f);Hn("number"==typeof M),_=M}catch(M){hn("SharedClientState","Failed to read sequence number from WebStorage",M)}return _}(s.newValue);l!==Xs.ct&&n.sequenceNumberHandler(l)}else if(s.key===n.Rr){const l=n.Gr(s.newValue);yield Promise.all(l.map(f=>n.syncEngine.Qr(f)))}}else n.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,s){const l=new Xh(this.currentUser,e,n,s),f=jp(this.persistenceKey,this.currentUser,e);this.setItem(f,l.hr())}Cr(e){const n=jp(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,n,s){const l=Yy(this.persistenceKey,e),f=new Jh(e,n,s);this.setItem(l,f.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const s=this.Or(e);return Hp.ar(s,n)}Lr(e,n){const s=this.Er.exec(e),l=Number(s[1]);return Xh.ar(new N(void 0!==s[2]?s[2]:null),l,n)}Ur(e,n){const s=this.Ar.exec(e),l=Number(s[1]);return Jh.ar(l,n)}br(e){return Jg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var n=this;return(0,Ee.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const s=n?this.gr.insert(e,n):this.gr.remove(e),l=this.Sr(this.gr),f=this.Sr(s),_=[],M=[];return f.forEach(F=>{l.has(F)||_.push(F)}),l.forEach(F=>{f.has(F)||M.push(F)}),this.syncEngine.Wr(_,M).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=Ht();return e.forEach((s,l)=>{n=n.unionWith(l.activeTargetIds)}),n}}class tm{constructor(){this.Hr=new zp,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,s){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new zp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class U_{Yr(e){}shutdown(){}}class Zy{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nm=null;function Gp(){return null===nm?nm=268435456+Math.round(2147483648*Math.random()):nm++,"0x"+nm.toString(16)}const Qy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Uc{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ma="WebChannelConnection";class j_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,s,l,f){const _=Gp(),M=this.To(e,n);Be("RestConnection",`Sending RPC '${e}' ${_}:`,M,s);const F={};return this.Eo(F,l,f),this.Ao(e,M,F,s).then(Q=>(Be("RestConnection",`Received RPC '${e}' ${_}: `,Q),Q),Q=>{throw Lt("RestConnection",`RPC '${e}' ${_} failed with error: `,Q,"url: ",M,"request:",s),Q})}vo(e,n,s,l,f,_){return this.Io(e,n,s,l,f)}Eo(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+x,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,f)=>e[f]=l),s&&s.headers.forEach((l,f)=>e[f]=l)}To(e,n){return`${this.mo}/v1/${n}:${Qy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,s,l){const f=Gp();return new Promise((_,M)=>{const F=new uo;F.setWithCredentials(!0),F.listenOnce(Qs.COMPLETE,()=>{try{switch(F.getLastErrorCode()){case Ss.NO_ERROR:const ce=F.getResponseJson();Be(Ma,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(ce)),_(ce);break;case Ss.TIMEOUT:Be(Ma,`RPC '${e}' ${f} timed out`),M(new rn(Mt.DEADLINE_EXCEEDED,"Request time out"));break;case Ss.HTTP_ERROR:const xe=F.getStatus();if(Be(Ma,`RPC '${e}' ${f} failed with status:`,xe,"response text:",F.getResponseText()),xe>0){let mt=F.getResponseJson();Array.isArray(mt)&&(mt=mt[0]);const Ct=mt?.error;if(Ct&&Ct.status&&Ct.message){const pn=function(Fn){const Zn=Fn.toLowerCase().replace(/_/g,"-");return Object.values(Mt).indexOf(Zn)>=0?Zn:Mt.UNKNOWN}(Ct.status);M(new rn(pn,Ct.message))}else M(new rn(Mt.UNKNOWN,"Server responded with status "+F.getStatus()))}else M(new rn(Mt.UNAVAILABLE,"Connection failed."));break;default:cn()}}finally{Be(Ma,`RPC '${e}' ${f} completed.`)}});const Q=JSON.stringify(l);Be(Ma,`RPC '${e}' ${f} sending request:`,l),F.send(n,"POST",Q,s,15)})}Ro(e,n,s){const l=Gp(),f=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=bo(),M=zs(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Q=this.longPollingOptions.timeoutSeconds;void 0!==Q&&(F.longPollingTimeout=Math.round(1e3*Q)),this.useFetchStreams&&(F.xmlHttpFactory=new Ml({})),this.Eo(F.initMessageHeaders,n,s),F.encodeInitMessageHeaders=!0;const ce=f.join("");Be(Ma,`Creating RPC '${e}' stream ${l}: ${ce}`,F);const xe=_.createWebChannel(ce,F);let mt=!1,Ct=!1;const pn=new Uc({ro:Zn=>{Ct?Be(Ma,`Not sending because RPC '${e}' stream ${l} is closed:`,Zn):(mt||(Be(Ma,`Opening RPC '${e}' stream ${l} transport.`),xe.open(),mt=!0),Be(Ma,`RPC '${e}' stream ${l} sending:`,Zn),xe.send(Zn))},oo:()=>xe.close()}),Fn=(Zn,Jr,hi)=>{Zn.listen(Jr,Ar=>{try{hi(Ar)}catch(fi){setTimeout(()=>{throw fi},0)}})};return Fn(xe,ha.EventType.OPEN,()=>{Ct||Be(Ma,`RPC '${e}' stream ${l} transport opened.`)}),Fn(xe,ha.EventType.CLOSE,()=>{Ct||(Ct=!0,Be(Ma,`RPC '${e}' stream ${l} transport closed`),pn.wo())}),Fn(xe,ha.EventType.ERROR,Zn=>{Ct||(Ct=!0,Lt(Ma,`RPC '${e}' stream ${l} transport errored:`,Zn),pn.wo(new rn(Mt.UNAVAILABLE,"The operation could not be completed")))}),Fn(xe,ha.EventType.MESSAGE,Zn=>{var Jr;if(!Ct){const hi=Zn.data[0];Hn(!!hi);const fi=hi.error||(null===(Jr=hi[0])||void 0===Jr?void 0:Jr.error);if(fi){Be(Ma,`RPC '${e}' stream ${l} received error:`,fi);const Hi=fi.status;let ro=function(zc){const sd=Ao[zc];if(void 0!==sd)return Hh(sd)}(Hi),Ya=fi.message;void 0===ro&&(ro=Mt.INTERNAL,Ya="Unknown error status: "+Hi+" with message "+fi.message),Ct=!0,pn.wo(new rn(ro,Ya)),xe.close()}else Be(Ma,`RPC '${e}' stream ${l} received:`,hi),pn._o(hi)}}),Fn(M,da.STAT_EVENT,Zn=>{Zn.stat===Nr.PROXY?Be(Ma,`RPC '${e}' stream ${l} detected buffering proxy`):Zn.stat===Nr.NOPROXY&&Be(Ma,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{pn.fo()},0),pn}}function H_(){return typeof window<"u"?window:null}function Wp(){return typeof document<"u"?document:null}function Eh(i){return new k(i,!0)}class lc{constructor(e,n,s=1e3,l=1.5,f=6e4){this.ii=e,this.timerId=n,this.Po=s,this.bo=l,this.Vo=f,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),l=Math.max(0,n-s);l>0&&Be("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,l,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class rm{constructor(e,n,s,l,f,_,M,F){this.ii=e,this.$o=s,this.Oo=l,this.connection=f,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=M,this.listener=F,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new lc(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var s=this;return(0,Ee.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():n&&n.code===Mt.RESOURCE_EXHAUSTED?(hn(n.toString()),hn("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):n&&n.code===Mt.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.Fo===n&&this.Zo(s,l)},s=>{e(()=>{const l=new rn(Mt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(l)})})}Zo(e,n){const s=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(l=>{s(()=>this.tu(l))}),this.stream.onMessage(l=>{s(()=>this.onMessage(l))})}Go(){var e=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z_ extends rm{constructor(e,n,s,l,f,_){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,_),this.serializer=f}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function OI(i,e){let n;if("targetChange"in e){const s="NO_CHANGE"===(F=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===F?1:"REMOVE"===F?2:"CURRENT"===F?3:"RESET"===F?4:cn(),l=e.targetChange.targetIds||[],f=function(F,Q){return F.useProto3Json?(Hn(void 0===Q||"string"==typeof Q),vo.fromBase64String(Q||"")):(Hn(void 0===Q||Q instanceof Uint8Array),vo.fromUint8Array(Q||new Uint8Array))}(i,e.targetChange.resumeToken),_=e.targetChange.cause,M=_&&function(F){const Q=void 0===F.code?Mt.UNKNOWN:Hh(F.code);return new rn(Q,F.message||"")}(_);n=new Ip(s,l,f,M||null)}else if("documentChange"in e){const s=e.documentChange,l=mr(i,s.document.name),f=Ot(s.document.updateTime),_=s.document.createTime?Ot(s.document.createTime):vr.min(),M=new So({mapValue:{fields:s.document.fields}}),F=os.newFoundDocument(l,f,_,M);n=new Cd(s.targetIds||[],s.removedTargetIds||[],F.key,F)}else if("documentDelete"in e){const s=e.documentDelete,l=mr(i,s.document),f=s.readTime?Ot(s.readTime):vr.min(),_=os.newNoDocument(l,f);n=new Cd([],s.removedTargetIds||[],_.key,_)}else if("documentRemove"in e){const s=e.documentRemove,l=mr(i,s.document);n=new Cd([],s.removedTargetIds||[],l,null)}else{if(!("filter"in e))return cn();{const s=e.filter,{count:l=0,unchangedNames:f}=s,_=new lh(l,f);n=new Wu(s.targetId,_)}}var F;return n}(this.serializer,e),s=function(l){if(!("targetChange"in l))return vr.min();const f=l.targetChange;return f.targetIds&&f.targetIds.length?vr.min():f.readTime?Ot(f.readTime):vr.min()}(e);return this.listener.nu(n,s)}su(e){const n={};n.database=il(this.serializer),n.addTarget=function(l,f){let _;const M=f.target;if(_=kl(M)?{documents:Ay(l,M)}:{query:Pg(l,M)},_.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){_.resumeToken=Re(l,f.resumeToken);const F=K(l,f.expectedCount);null!==F&&(_.expectedCount=F)}else if(f.snapshotVersion.compareTo(vr.min())>0){_.readTime=le(l,f.snapshotVersion.toTimestamp());const F=K(l,f.expectedCount);null!==F&&(_.expectedCount=F)}return _}(this.serializer,e);const s=function qu(i,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return cn()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);s&&(n.labels=s),this.Wo(n)}iu(e){const n={};n.database=il(this.serializer),n.removeTarget=e,this.Wo(n)}}class LI extends rm{constructor(e,n,s,l,f,_){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,_),this.serializer=f,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Hn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function w_(i,e){return i&&i.length>0?(Hn(void 0!==e),i.map(n=>function(s,l){let f=Ot(s.updateTime?s.updateTime:l);return f.isEqual(vr.min())&&(f=Ot(l)),new Ul(f,s.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),s=Ot(e.commitTime);return this.listener.cu(s,n)}return Hn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=il(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Gh(this.serializer,s))};this.Wo(n)}}class xa extends class{}{constructor(e,n,s,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.lu=!1}fu(){if(this.lu)throw new rn(Mt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.Io(e,n,s,l,f)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new rn(Mt.UNKNOWN,l.toString())})}vo(e,n,s,l){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,_])=>this.connection.vo(e,n,s,f,_,l)).catch(f=>{throw"FirebaseError"===f.name?(f.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new rn(Mt.UNKNOWN,f.toString())})}terminate(){this.lu=!0}}class im{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(hn(n),this.mu=!1):Be("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class W_{constructor(e,n,s,l,f){var _=this;this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=f,this.Pu.Yr(M=>{s.enqueueAndForget((0,Ee.Z)(function*(){var F;xd(_)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield function(Q){return(F=F||(0,Ee.Z)(function*(ce){const xe=kn(ce);xe.vu.add(4),yield Md(xe),xe.bu.set("Unknown"),xe.vu.delete(4),yield Gf(xe)})).apply(this,arguments)}(_))}))}),this.bu=new im(s,l)}}function Gf(i){return(ad=ad||(0,Ee.Z)(function*(e){if(xd(e))for(const n of e.Ru)yield n(!0)})).apply(this,arguments)}function Md(i){return(Du=Du||(0,Ee.Z)(function*(e){for(const n of e.Ru)yield n(!1)})).apply(this,arguments)}function Wf(i,e){const n=kn(i);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),am(n)?qp(n):af(n).Ko()&&sm(n,e))}function ef(i,e){const n=kn(i),s=af(n);n.Au.delete(e),s.Ko()&&om(n,e),0===n.Au.size&&(s.Ko()?s.jo():xd(n)&&n.bu.set("Unknown"))}function sm(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vr.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}af(i).su(e)}function om(i,e){i.Vu.qt(e),af(i).iu(e)}function qp(i){i.Vu=new E_({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),af(i).start(),i.bu.gu()}function am(i){return xd(i)&&!af(i).Uo()&&i.Au.size>0}function xd(i){return 0===kn(i).vu.size}function Xy(i){i.Vu=void 0}function Jy(i){return(La=La||(0,Ee.Z)(function*(e){e.Au.forEach((n,s)=>{sm(e,n)})})).apply(this,arguments)}function tf(i,e){return(Tu=Tu||(0,Ee.Z)(function*(n,s){Xy(n),am(n)?(n.bu.Iu(s),qp(n)):n.bu.set("Unknown")})).apply(this,arguments)}function Qu(i,e,n){return(Ba=Ba||(0,Ee.Z)(function*(s,l,f){if(s.bu.set("Online"),l instanceof Ip&&2===l.state&&l.cause)try{var _;yield function(M,F){return(_=_||(0,Ee.Z)(function*(Q,ce){const xe=ce.cause;for(const mt of ce.targetIds)Q.Au.has(mt)&&(yield Q.remoteSyncer.rejectListen(mt,xe),Q.Au.delete(mt),Q.Vu.removeTarget(mt))})).apply(this,arguments)}(s,l)}catch(M){Be("RemoteStore","Failed to remove targets %s: %s ",l.targetIds.join(","),M),yield Xu(s,M)}else if(l instanceof Cd?s.Vu.Ht(l):l instanceof Wu?s.Vu.ne(l):s.Vu.Xt(l),!f.isEqual(vr.min()))try{const M=yield L_(s.localStore);f.compareTo(M)>=0&&(yield function(F,Q){const ce=F.Vu.ce(Q);return ce.targetChanges.forEach((xe,mt)=>{if(xe.resumeToken.approximateByteSize()>0){const Ct=F.Au.get(mt);Ct&&F.Au.set(mt,Ct.withResumeToken(xe.resumeToken,Q))}}),ce.targetMismatches.forEach((xe,mt)=>{const Ct=F.Au.get(xe);if(!Ct)return;F.Au.set(xe,Ct.withResumeToken(vo.EMPTY_BYTE_STRING,Ct.snapshotVersion)),om(F,xe);const pn=new Dd(Ct.target,xe,mt,Ct.sequenceNumber);sm(F,pn)}),F.remoteSyncer.applyRemoteEvent(ce)}(s,f))}catch(M){Be("RemoteStore","Failed to raise snapshot:",M),yield Xu(s,M)}})).apply(this,arguments)}function Xu(i,e,n){return(Wl=Wl||(0,Ee.Z)(function*(s,l,f){if(!hl(l))throw l;s.vu.add(1),yield Md(s),s.bu.set("Offline"),f||(f=()=>L_(s.localStore)),s.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield f(),s.vu.delete(1),yield Gf(s)}))})).apply(this,arguments)}function ev(i,e){return e().catch(n=>Xu(i,n,e))}function nf(i){return(Mr=Mr||(0,Ee.Z)(function*(e){const n=kn(e),s=Rd(n);let l=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;for(;tv(n);)try{const f=yield $_(n.localStore,l);if(null===f){0===n.Eu.length&&s.jo();break}l=f.batchId,lm(n,f)}catch(f){yield Xu(n,f)}rf(n)&&cm(n)})).apply(this,arguments)}function tv(i){return xd(i)&&i.Eu.length<10}function lm(i,e){i.Eu.push(e);const n=Rd(i);n.Ko()&&n.ou&&n.uu(e.mutations)}function rf(i){return xd(i)&&!Rd(i).Uo()&&i.Eu.length>0}function cm(i){Rd(i).start()}function BI(i){return(ll=ll||(0,Ee.Z)(function*(e){Rd(e).hu()})).apply(this,arguments)}function um(i){return(ql=ql||(0,Ee.Z)(function*(e){const n=Rd(e);for(const s of e.Eu)n.uu(s.mutations)})).apply(this,arguments)}function sf(i,e,n){return(cl=cl||(0,Ee.Z)(function*(s,l,f){const _=s.Eu.shift(),M=Fc.from(_,l,f);yield ev(s,()=>s.remoteSyncer.applySuccessfulWrite(M)),yield nf(s)})).apply(this,arguments)}function Kp(i,e){return(gc=gc||(0,Ee.Z)(function*(n,s){var l;s&&Rd(n).ou&&(yield function(f,_){return(l=l||(0,Ee.Z)(function*(M,F){if(Id(Q=F.code)&&Q!==Mt.ABORTED){const ce=M.Eu.shift();Rd(M).Qo(),yield ev(M,()=>M.remoteSyncer.rejectFailedWrite(ce.batchId,F)),yield nf(M)}var Q})).apply(this,arguments)}(n,s)),rf(n)&&cm(n)})).apply(this,arguments)}function dm(i,e){return(Rl=Rl||(0,Ee.Z)(function*(n,s){const l=kn(n);l.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const f=xd(l);l.vu.add(3),yield Md(l),f&&l.bu.set("Unknown"),yield l.remoteSyncer.handleCredentialChange(s),l.vu.delete(3),yield Gf(l)})).apply(this,arguments)}function Yp(i,e){return(El=El||(0,Ee.Z)(function*(n,s){const l=kn(n);s?(l.vu.delete(2),yield Gf(l)):s||(l.vu.add(2),yield Md(l),l.bu.set("Unknown"))})).apply(this,arguments)}function af(i){var e;return i.Su||(i.Su=function(n,s,l){const f=kn(n);return f.fu(),new z_(s,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,l)}(i.datastore,i.asyncQueue,{uo:Jy.bind(null,i),ao:tf.bind(null,i),nu:Qu.bind(null,i)}),i.Ru.push(function(n){return(e=e||(0,Ee.Z)(function*(s){s?(i.Su.Qo(),am(i)?qp(i):i.bu.set("Unknown")):(yield i.Su.stop(),Xy(i))})).apply(this,arguments)})),i.Su}function Rd(i){var e;return i.Du||(i.Du=function(n,s,l){const f=kn(n);return f.fu(),new LI(s,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,l)}(i.datastore,i.asyncQueue,{uo:BI.bind(null,i),ao:Kp.bind(null,i),au:um.bind(null,i),cu:sf.bind(null,i)}),i.Ru.push(function(n){return(e=e||(0,Ee.Z)(function*(s){s?(i.Du.Qo(),yield nf(i)):(yield i.Du.stop(),i.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))})).apply(this,arguments)})),i.Du}class hm{constructor(e,n,s,l,f){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=f,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(_=>{})}static createAndSchedule(e,n,s,l,f){const _=Date.now()+s,M=new hm(e,n,_,l,f);return M.start(s),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rn(Mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lf(i,e){if(hn("AsyncQueue",`${e}: ${i}`),hl(i))return new rn(Mt.UNAVAILABLE,`${e}: ${i}`);throw i}class wh{constructor(e){this.comparator=e?(n,s)=>e(n,s)||On.comparator(n.key,s.key):(n,s)=>On.comparator(n.key,s.key),this.keyedMap=P(),this.sortedSet=new gr(this.comparator)}static emptySet(e){return new wh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,f=s.getNext().key;if(!l.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const s=new wh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class q_{constructor(){this.Cu=new gr(On.comparator)}track(e){const n=e.doc.key,s=this.Cu.get(n);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(n,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(n):1===e.type&&2===s.type?this.Cu=this.Cu.insert(n,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):cn():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,s)=>{e.push(s)}),e}}class cf{constructor(e,n,s,l,f,_,M,F,Q){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=f,this.fromCache=_,this.syncStateChanged=M,this.excludesMetadataChanges=F,this.hasCachedResults=Q}static fromInitialDocuments(e,n,s,l,f){const _=[];return n.forEach(M=>{_.push({type:0,doc:M})}),new cf(e,n,wh.emptySet(n),_,s,l,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}class $I{constructor(){this.Nu=void 0,this.listeners=[]}}class VI{constructor(){this.queries=new yl(e=>qs(e),Hu),this.onlineState="Unknown",this.ku=new Set}}function Zp(i,e){return(Ko=Ko||(0,Ee.Z)(function*(n,s){const l=kn(n),f=s.query;let _=!1,M=l.queries.get(f);if(M||(_=!0,M=new $I),_)try{M.Nu=yield l.onListen(f)}catch(F){const Q=lf(F,`Initialization of query '${Ll(s.query)}' failed`);return void s.onError(Q)}l.queries.set(f,M),M.listeners.push(s),s.Mu(l.onlineState),M.Nu&&s.$u(M.Nu)&&nv(l)})).apply(this,arguments)}function Qp(i,e){return(mc=mc||(0,Ee.Z)(function*(n,s){const l=kn(n),f=s.query;let _=!1;const M=l.queries.get(f);if(M){const F=M.listeners.indexOf(s);F>=0&&(M.listeners.splice(F,1),_=0===M.listeners.length)}if(_)return l.queries.delete(f),l.onUnlisten(f)})).apply(this,arguments)}function UI(i,e){const n=kn(i);let s=!1;for(const l of e){const _=n.queries.get(l.query);if(_){for(const M of _.listeners)M.$u(l)&&(s=!0);_.Nu=l}}s&&nv(n)}function Xp(i,e,n){const s=kn(i),l=s.queries.get(e);if(l)for(const f of l.listeners)f.onError(n);s.queries.delete(e)}function nv(i){i.ku.forEach(e=>{e.next()})}class Jp{constructor(e,n,s){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)3!==l.type&&s.push(l);e=new cf(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=cf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class rv{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}class iv{constructor(e){this.serializer=e}rr(e){return mr(this.serializer,e)}ur(e){return e.metadata.exists?Rg(this.serializer,e.document,!1):os.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ot(e)}}class sv{constructor(e,n,s){this.ju=e,this.localStore=n,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fm(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const s=ii.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,s=new iv(this.serializer);for(const l of e)if(l.metadata.queries){const f=s.rr(l.metadata.name);for(const _ of l.metadata.queries){const M=(n.get(_)||Oe()).add(f);n.set(_,M)}}return n}complete(){var e=this;return(0,Ee.Z)(function*(){const n=yield function V_(i,e,n,s){return(pc=pc||(0,Ee.Z)(function*(l,f,_,M){const F=kn(l);let Q=Oe(),ce=Ea();for(const Ct of _){const pn=f.rr(Ct.metadata.name);Ct.document&&(Q=Q.add(pn));const Fn=f.ur(Ct);Fn.setReadTime(f.cr(Ct.metadata.readTime)),ce=ce.insert(pn,Fn)}const xe=F.Zi.newChangeBuffer({trackRemovals:!0}),mt=yield Vc(F,(Ct=M,ea(ou(ii.fromString(`__bundle__/docs/${Ct}`)))));var Ct;return F.persistence.runTransaction("Apply bundle documents","readwrite",Ct=>zf(Ct,xe,ce).next(pn=>(xe.apply(Ct),pn)).next(pn=>F.Bs.removeMatchingKeysForTargetId(Ct,mt.targetId).next(()=>F.Bs.addMatchingKeys(Ct,Q,mt.targetId)).next(()=>F.localDocuments.getLocalViewOfDocuments(Ct,pn.nr,pn.sr)).next(()=>pn.nr)))})).apply(this,arguments)}(e.localStore,new iv(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const l of e.queries)yield Ky(e.localStore,l,s.get(l.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:n}})()}}function fm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class ai{constructor(e){this.key=e}}class pm{constructor(e){this.key=e}}class gm{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Oe(),this.mutatedKeys=Oe(),this.tc=Go(e),this.ec=new wh(this.tc)}get nc(){return this.Yu}sc(e,n){const s=n?n.ic:new q_,l=n?n.ec:this.ec;let f=n?n.mutatedKeys:this.mutatedKeys,_=l,M=!1;const F="F"===this.query.limitType&&l.size===this.query.limit?l.last():null,Q="L"===this.query.limitType&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((ce,xe)=>{const mt=l.get(ce),Ct=Oc(this.query,xe)?xe:null,pn=!!mt&&this.mutatedKeys.has(mt.key),Fn=!!Ct&&(Ct.hasLocalMutations||this.mutatedKeys.has(Ct.key)&&Ct.hasCommittedMutations);let Zn=!1;mt&&Ct?mt.data.isEqual(Ct.data)?pn!==Fn&&(s.track({type:3,doc:Ct}),Zn=!0):this.rc(mt,Ct)||(s.track({type:2,doc:Ct}),Zn=!0,(F&&this.tc(Ct,F)>0||Q&&this.tc(Ct,Q)<0)&&(M=!0)):!mt&&Ct?(s.track({type:0,doc:Ct}),Zn=!0):mt&&!Ct&&(s.track({type:1,doc:mt}),Zn=!0,(F||Q)&&(M=!0)),Zn&&(Ct?(_=_.add(Ct),f=Fn?f.add(ce):f.delete(ce)):(_=_.delete(ce),f=f.delete(ce)))}),null!==this.query.limit)for(;_.size>this.query.limit;){const ce="F"===this.query.limitType?_.last():_.first();_=_.delete(ce.key),f=f.delete(ce.key),s.track({type:1,doc:ce})}return{ec:_,ic:s,zi:M,mutatedKeys:f}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const l=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const f=e.ic.xu();f.sort((Q,ce)=>function(xe,mt){const Ct=pn=>{switch(pn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cn()}};return Ct(xe)-Ct(mt)}(Q.type,ce.type)||this.tc(Q.doc,ce.doc)),this.oc(s);const _=n?this.uc():[],M=0===this.Zu.size&&this.current?1:0,F=M!==this.Xu;return this.Xu=M,0!==f.length||F?{snapshot:new cf(this.query,e.ec,l,f,e.mutatedKeys,0===M,F,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:_}:{cc:_}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new q_,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Oe(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const n=[];return e.forEach(s=>{this.Zu.has(s)||n.push(new pm(s))}),this.Zu.forEach(s=>{e.has(s)||n.push(new ai(s))}),n}hc(e){this.Yu=e.ir,this.Zu=Oe();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return cf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class uf{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class ov{constructor(e){this.key=e,this.fc=!1}}class K_{constructor(e,n,s,l,f,_){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=f,this.maxConcurrentLimboResolutions=_,this.dc={},this.wc=new yl(M=>qs(M),Hu),this._c=new Map,this.mc=new Set,this.gc=new gr(On.comparator),this.yc=new Map,this.Ic=new jy,this.Tc={},this.Ec=new Map,this.Ac=mh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function eg(i,e){return(Ol=Ol||(0,Ee.Z)(function*(n,s){const l=Sm(n);let f,_;const M=l.wc.get(s);if(M)f=M.targetId,l.sharedClientState.addLocalQueryTarget(f),_=M.view.lc();else{const F=yield Vc(l.localStore,ea(s)),Q=l.sharedClientState.addLocalQueryTarget(F.targetId);f=F.targetId,_=yield Od(l,s,f,"current"===Q,F.resumeToken),l.isPrimaryClient&&Wf(l.remoteStore,F)}return _})).apply(this,arguments)}function Od(i,e,n,s,l){return(Kl=Kl||(0,Ee.Z)(function*(f,_,M,F,Q){f.Rc=(Zn,Jr,hi)=>{var Ar;return function(fi,Hi,ro,Ya){return(Ar=Ar||(0,Ee.Z)(function*(zc,sd,W0,s_){let wg=sd.view.sc(W0);wg.zi&&(wg=yield Up(zc.localStore,sd.query,!1).then(({documents:o_})=>sd.view.sc(o_,wg)));const q0=s_&&s_.targetChanges.get(sd.targetId),yy=sd.view.applyChanges(wg,zc.isPrimaryClient,q0);return bm(zc,sd.targetId,yy.cc),yy.snapshot})).apply(this,arguments)}(f,Zn,Jr,hi)};const ce=yield Up(f.localStore,_,!0),xe=new gm(_,ce.ir),mt=xe.sc(ce.documents),Ct=hu.createSynthesizedTargetChangeForCurrentChange(M,F&&"Offline"!==f.onlineState,Q),pn=xe.applyChanges(mt,f.isPrimaryClient,Ct);bm(f,M,pn.cc);const Fn=new uf(_,M,xe);return f.wc.set(_,Fn),f._c.has(M)?f._c.get(M).push(_):f._c.set(M,[_]),pn.snapshot})).apply(this,arguments)}function mm(i,e){return(Yl=Yl||(0,Ee.Z)(function*(n,s){const l=kn(n),f=l.wc.get(s),_=l._c.get(f.targetId);if(_.length>1)return l._c.set(f.targetId,_.filter(M=>!Hu(M,s))),void l.wc.delete(s);l.isPrimaryClient?(l.sharedClientState.removeLocalQueryTarget(f.targetId),l.sharedClientState.isActiveQueryTarget(f.targetId)||(yield pu(l.localStore,f.targetId,!1).then(()=>{l.sharedClientState.clearQueryState(f.targetId),ef(l.remoteStore,f.targetId),df(l,f.targetId)}).catch(ga))):(df(l,f.targetId),yield pu(l.localStore,f.targetId,!0))})).apply(this,arguments)}function ym(i,e){return(dn=dn||(0,Ee.Z)(function*(n,s){const l=kn(n);try{const f=yield function B_(i,e){const n=kn(i),s=e.snapshotVersion;let l=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const _=n.Zi.newChangeBuffer({trackRemovals:!0});l=n.Ji;const M=[];e.targetChanges.forEach((ce,xe)=>{const mt=l.get(xe);if(!mt)return;M.push(n.Bs.removeMatchingKeys(f,ce.removedDocuments,xe).next(()=>n.Bs.addMatchingKeys(f,ce.addedDocuments,xe)));let Ct=mt.withSequenceNumber(f.currentSequenceNumber);var pn,Fn,Zn;null!==e.targetMismatches.get(xe)?Ct=Ct.withResumeToken(vo.EMPTY_BYTE_STRING,vr.min()).withLastLimboFreeSnapshotVersion(vr.min()):ce.resumeToken.approximateByteSize()>0&&(Ct=Ct.withResumeToken(ce.resumeToken,s)),l=l.insert(xe,Ct),Fn=Ct,Zn=ce,(0===(pn=mt).resumeToken.approximateByteSize()||Fn.snapshotVersion.toMicroseconds()-pn.snapshotVersion.toMicroseconds()>=3e8||Zn.addedDocuments.size+Zn.modifiedDocuments.size+Zn.removedDocuments.size>0)&&M.push(n.Bs.updateTargetData(f,Ct))});let F=Ea(),Q=Oe();if(e.documentUpdates.forEach(ce=>{e.resolvedLimboDocuments.has(ce)&&M.push(n.persistence.referenceDelegate.updateLimboDocument(f,ce))}),M.push(zf(f,_,e.documentUpdates).next(ce=>{F=ce.nr,Q=ce.sr})),!s.isEqual(vr.min())){const ce=n.Bs.getLastRemoteSnapshotVersion(f).next(xe=>n.Bs.setTargetsMetadata(f,f.currentSequenceNumber,s));M.push(ce)}return xt.waitFor(M).next(()=>_.apply(f)).next(()=>n.localDocuments.getLocalViewOfDocuments(f,F,Q)).next(()=>F)}).then(f=>(n.Ji=l,f))}(l.localStore,s);s.targetChanges.forEach((_,M)=>{const F=l.yc.get(M);F&&(Hn(_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size<=1),_.addedDocuments.size>0?F.fc=!0:_.modifiedDocuments.size>0?Hn(F.fc):_.removedDocuments.size>0&&(Hn(F.fc),F.fc=!1))}),yield Ju(l,f,s)}catch(f){yield ga(f)}})).apply(this,arguments)}function tg(i,e,n){const s=kn(i);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const l=[];s.wc.forEach((f,_)=>{const M=_.view.Mu(e);M.snapshot&&l.push(M.snapshot)}),function(f,_){const M=kn(f);M.onlineState=_;let F=!1;M.queries.forEach((Q,ce)=>{for(const xe of ce.listeners)xe.Mu(_)&&(F=!0)}),F&&nv(M)}(s.eventManager,e),l.length&&s.dc.nu(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function vm(i,e,n){return(gi=gi||(0,Ee.Z)(function*(s,l,f){const _=kn(s);_.sharedClientState.updateQueryState(l,"rejected",f);const M=_.yc.get(l),F=M&&M.key;if(F){let Q=new gr(On.comparator);Q=Q.insert(F,os.newNoDocument(F,vr.min()));const ce=Oe().add(F),xe=new wd(vr.min(),new Map,new gr(jr),Q,ce);yield ym(_,xe),_.gc=_.gc.remove(F),_.yc.delete(l),Dm(_)}else yield pu(_.localStore,l,!1).then(()=>df(_,l,f)).catch(ga)})).apply(this,arguments)}function _m(i,e){return(wl=wl||(0,Ee.Z)(function*(n,s){const l=kn(n),f=s.batch.batchId;try{const _=yield function Gy(i,e){const n=kn(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=e.batch.keys(),f=n.Zi.newChangeBuffer({trackRemovals:!0});return function(_,M,F,Q){const ce=F.batch,xe=ce.keys();let mt=xt.resolve();return xe.forEach(Ct=>{mt=mt.next(()=>Q.getEntry(M,Ct)).next(pn=>{const Fn=F.docVersions.get(Ct);Hn(null!==Fn),pn.version.compareTo(Fn)<0&&(ce.applyToRemoteDocument(pn,F),pn.isValidDocument()&&(pn.setReadTime(F.commitVersion),Q.addEntry(pn)))})}),mt.next(()=>_.mutationQueue.removeMutationBatch(M,ce))}(n,s,e,f).next(()=>f.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(_){let M=Oe();for(let F=0;F<_.mutationResults.length;++F)_.mutationResults[F].transformResults.length>0&&(M=M.add(_.batch.mutations[F].key));return M}(e))).next(()=>n.localDocuments.getDocuments(s,l))})}(l.localStore,s);wm(l,f,null),Em(l,f),l.sharedClientState.updateMutationState(f,"acknowledged"),yield Ju(l,_)}catch(_){yield ga(_)}})).apply(this,arguments)}function av(i,e,n){return(vc=vc||(0,Ee.Z)(function*(s,l,f){const _=kn(s);try{const M=yield function(F,Q){const ce=kn(F);return ce.persistence.runTransaction("Reject batch","readwrite-primary",xe=>{let mt;return ce.mutationQueue.lookupMutationBatch(xe,Q).next(Ct=>(Hn(null!==Ct),mt=Ct.keys(),ce.mutationQueue.removeMutationBatch(xe,Ct))).next(()=>ce.mutationQueue.performConsistencyCheck(xe)).next(()=>ce.documentOverlayCache.removeOverlaysForBatchId(xe,mt,Q)).next(()=>ce.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(xe,mt)).next(()=>ce.localDocuments.getDocuments(xe,mt))})}(_.localStore,l);wm(_,l,f),Em(_,l),_.sharedClientState.updateMutationState(l,"rejected",f),yield Ju(_,M)}catch(M){yield ga(M)}})).apply(this,arguments)}function Em(i,e){(i.Ec.get(e)||[]).forEach(n=>{n.resolve()}),i.Ec.delete(e)}function wm(i,e,n){const s=kn(i);let l=s.Tc[s.currentUser.toKey()];if(l){const f=l.get(e);f&&(n?f.reject(n):f.resolve(),l=l.remove(e)),s.Tc[s.currentUser.toKey()]=l}}function df(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i._c.get(e))i.wc.delete(s),n&&i.dc.Pc(s,n);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(s=>{i.Ic.containsKey(s)||Cm(i,s)})}function Cm(i,e){i.mc.delete(e.path.canonicalString());const n=i.gc.get(e);null!==n&&(ef(i.remoteStore,n),i.gc=i.gc.remove(e),i.yc.delete(n),Dm(i))}function bm(i,e,n){for(const s of n)s instanceof ai?(i.Ic.addReference(s.key,e),Y_(i,s)):s instanceof pm?(Be("SyncEngine","Document no longer in limbo: "+s.key),i.Ic.removeReference(s.key,e),i.Ic.containsKey(s.key)||Cm(i,s.key)):cn()}function Y_(i,e){const n=e.key,s=n.path.canonicalString();i.gc.get(n)||i.mc.has(s)||(Be("SyncEngine","New document in limbo: "+n),i.mc.add(s),Dm(i))}function Dm(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const n=new On(ii.fromString(e)),s=i.Ac.next();i.yc.set(s,new ov(n)),i.gc=i.gc.insert(n,s),Wf(i.remoteStore,new Dd(ea(ou(n.path)),s,"TargetPurposeLimboResolution",Xs.ct))}}function Ju(i,e,n){return(ul=ul||(0,Ee.Z)(function*(s,l,f){var _;const M=kn(s),F=[],Q=[],ce=[];M.wc.isEmpty()||(M.wc.forEach((xe,mt)=>{ce.push(M.Rc(mt,l,f).then(Ct=>{if((Ct||f)&&M.isPrimaryClient&&M.sharedClientState.updateQueryState(mt.targetId,Ct?.fromCache?"not-current":"current"),Ct){F.push(Ct);const pn=jf.Li(mt.targetId,Ct);Q.push(pn)}}))}),yield Promise.all(ce),M.dc.nu(F),yield function(xe,mt){return(_=_||(0,Ee.Z)(function*(Ct,pn){const Fn=kn(Ct);try{yield Fn.persistence.runTransaction("notifyLocalViewChanges","readwrite",Zn=>xt.forEach(pn,Jr=>xt.forEach(Jr.Fi,hi=>Fn.persistence.referenceDelegate.addReference(Zn,Jr.targetId,hi)).next(()=>xt.forEach(Jr.Bi,hi=>Fn.persistence.referenceDelegate.removeReference(Zn,Jr.targetId,hi)))))}catch(Zn){if(!hl(Zn))throw Zn;Be("LocalStore","Failed to update sequence numbers: "+Zn)}for(const Zn of pn){const Jr=Zn.targetId;if(!Zn.fromCache){const hi=Fn.Ji.get(Jr),fi=hi.withLastLimboFreeSnapshotVersion(hi.snapshotVersion);Fn.Ji=Fn.Ji.insert(Jr,fi)}}})).apply(this,arguments)}(M.localStore,Q))})).apply(this,arguments)}function lv(i,e){return(hs=hs||(0,Ee.Z)(function*(n,s){const l=kn(n);if(!l.currentUser.isEqual(s)){Be("SyncEngine","User change. New user:",s.toKey());const f=yield zy(l.localStore,s);l.currentUser=s,(_=l).Ec.forEach(F=>{F.forEach(Q=>{Q.reject(new rn(Mt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),_.Ec.clear(),l.sharedClientState.handleUserChange(s,f.removedBatchIds,f.addedBatchIds),yield Ju(l,f.er)}var _})).apply(this,arguments)}function cv(i,e){const n=kn(i),s=n.yc.get(e);if(s&&s.fc)return Oe().add(s.key);{let l=Oe();const f=n._c.get(e);if(!f)return l;for(const _ of f){const M=n.wc.get(_);l=l.unionWith(M.view.nc)}return l}}function Z_(i,e){return(Do=Do||(0,Ee.Z)(function*(n,s){const l=kn(n),f=yield Up(l.localStore,s.query,!0),_=s.view.hc(f);return l.isPrimaryClient&&bm(l,s.targetId,_.cc),_})).apply(this,arguments)}function Q_(i,e){return(Gs=Gs||(0,Ee.Z)(function*(n,s){const l=kn(n);return Wy(l.localStore,s).then(f=>Ju(l,f))})).apply(this,arguments)}function Hl(i,e,n,s){return(is=is||(0,Ee.Z)(function*(l,f,_,M){const F=kn(l),Q=yield function(ce,xe){const mt=kn(ce),Ct=kn(mt.mutationQueue);return mt.persistence.runTransaction("Lookup mutation documents","readonly",pn=>Ct.Sn(pn,xe).next(Fn=>Fn?mt.localDocuments.getDocuments(pn,Fn):xt.resolve(null)))}(F.localStore,f);var xe;null!==Q?("pending"===_?yield nf(F.remoteStore):"acknowledged"===_||"rejected"===_?(wm(F,f,M||null),Em(F,f),xe=f,kn(kn(F.localStore).mutationQueue).Cn(xe)):cn(),yield Ju(F,Q)):Be("SyncEngine","Cannot apply mutation batch with id: "+f)})).apply(this,arguments)}function uv(i,e,n){return(_c=_c||(0,Ee.Z)(function*(s,l,f){const _=kn(s),M=[],F=[];for(const Q of l){let ce;const xe=_._c.get(Q);if(xe&&0!==xe.length){ce=yield Vc(_.localStore,ea(xe[0]));for(const mt of xe){const Ct=_.wc.get(mt),pn=yield Z_(_,Ct);pn.snapshot&&F.push(pn.snapshot)}}else{const mt=yield Qg(_.localStore,Q);ce=yield Vc(_.localStore,mt),yield Od(_,J_(mt),Q,!1,ce.resumeToken)}M.push(ce)}return _.dc.nu(F),M})).apply(this,arguments)}function J_(i){return Jd(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Tm(i){const e=kn(i);return kn(kn(e.localStore).persistence).$i()}function dv(i,e,n,s){return(Wc=Wc||(0,Ee.Z)(function*(l,f,_,M){const F=kn(l);if(F.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const Q=F._c.get(f);if(Q&&Q.length>0)switch(_){case"current":case"not-current":{const ce=yield Wy(F.localStore,Ia(Q[0])),xe=wd.createSynthesizedRemoteEventForCurrentChange(f,"current"===_,vo.EMPTY_BYTE_STRING);yield Ju(F,ce,xe);break}case"rejected":yield pu(F.localStore,f,!0),df(F,f,M);break;default:cn()}})).apply(this,arguments)}function e0(i,e,n){return(To=To||(0,Ee.Z)(function*(s,l,f){const _=Sm(s);if(_.vc){for(const M of l){if(_._c.has(M)){Be("SyncEngine","Adding an already active target "+M);continue}const F=yield Qg(_.localStore,M),Q=yield Vc(_.localStore,F);yield Od(_,J_(F),Q.targetId,!1,Q.resumeToken),Wf(_.remoteStore,Q)}for(const M of f)_._c.has(M)&&(yield pu(_.localStore,M,!1).then(()=>{ef(_.remoteStore,M),df(_,M)}).catch(ga))}})).apply(this,arguments)}function Sm(i){const e=kn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ym.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vm.bind(null,e),e.dc.nu=UI.bind(null,e.eventManager),e.dc.Pc=Xp.bind(null,e.eventManager),e}function Am(i){const e=kn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_m.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=av.bind(null,e),e}class Kf{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Ee.Z)(function*(){n.serializer=Eh(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Zg(this.persistence,new Hf,e.initialUser,this.serializer)}createPersistence(e){return new qg(Uf.zs,this.serializer)}createSharedClientState(e){return new tm}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Yf extends Kf{constructor(e,n,s){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){yield n().call(s,e),yield s.Vc.initialize(s,e),yield Am(s.Vc.syncEngine),yield nf(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Zg(this.persistence,new Hf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new M_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const s=new Cc(n,this.persistence);return new ja(e.asyncQueue,s)}createPersistence(e){const n=Vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?wa.withCacheSize(this.cacheSizeBytes):wa.DEFAULT;return new Qh(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,H_(),Wp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tm}}class fv extends Yf{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){var l;yield n().call(s,e);const f=s.Vc.syncEngine;s.sharedClientState instanceof em&&(s.sharedClientState.syncEngine={jr:Hl.bind(null,f),zr:dv.bind(null,f),Wr:e0.bind(null,f),$i:Tm.bind(null,f),Qr:Q_.bind(null,f)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(_){return(l=l||(0,Ee.Z)(function*(M){yield function X_(i,e){return(Zl=Zl||(0,Ee.Z)(function*(n,s){const l=kn(n);if(Sm(l),Am(l),!0===s&&!0!==l.vc){const f=l.sharedClientState.getAllActiveQueryTargets(),_=yield uv(l,f.toArray());l.vc=!0,yield Yp(l.remoteStore,!0);for(const M of _)Wf(l.remoteStore,M)}else if(!1===s&&!1!==l.vc){const f=[];let _=Promise.resolve();l._c.forEach((M,F)=>{l.sharedClientState.isLocalQueryTarget(F)?f.push(F):_=_.then(()=>(df(l,F),pu(l.localStore,F,!0))),ef(l.remoteStore,F)}),yield _,yield uv(l,f),function(M){const F=kn(M);F.yc.forEach((Q,ce)=>{ef(F.remoteStore,ce)}),F.Ic.Ts(),F.yc=new Map,F.gc=new gr(On.comparator)}(l),l.vc=!1,yield Yp(l.remoteStore,!1)}})).apply(this,arguments)}(s.Vc.syncEngine,M),s.gcScheduler&&(M&&!s.gcScheduler.started?s.gcScheduler.start():M||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(M&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():M||s.indexBackfillerScheduler.stop())})).apply(this,arguments)})})()}createSharedClientState(e){const n=H_();if(!em.D(n))throw new rn(Mt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Vp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new em(n,e.asyncQueue,s,e.clientId,e.initialUser)}}class hf{initialize(e,n){var s=this;return(0,Ee.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(n),s.remoteStore=s.createRemoteStore(n),s.eventManager=s.createEventManager(n),s.syncEngine=s.createSyncEngine(n,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=l=>tg(s.syncEngine,l,1),s.remoteStore.remoteSyncer.handleCredentialChange=lv.bind(null,s.syncEngine),yield Yp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new VI}createDatastore(e){const n=Eh(e.databaseInfo.databaseId),s=new j_(e.databaseInfo);return new xa(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,l=e.asyncQueue,f=M=>tg(this.syncEngine,M,0),_=Zy.D()?new Zy:new U_,new W_(n,s,l,f,_);var n,s,l,f,_}createSyncEngine(e,n){return function(s,l,f,_,M,F,Q){const ce=new K_(s,l,f,_,M,F);return Q&&(ce.vc=!0),ce}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e;return function(n){return(e=e||(0,Ee.Z)(function*(s){const l=kn(s);Be("RemoteStore","RemoteStore shutting down."),l.vu.add(5),yield Md(l),l.Pu.shutdown(),l.bu.set("Unknown")})).apply(this,arguments)}(this.remoteStore)}}function pv(i,e=10240){let n=0;return{read:()=>(0,Ee.Z)(function*(){if(n<i.byteLength){const s={value:i.slice(n,n+e),done:!1};return n+=e,s}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ng{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):hn("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class n0{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new Ui,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ee.Z)(function*(){const n=yield e.kc();if(null===n)return null;const s=e.xc.decode(n),l=Number(s);isNaN(l)&&e.Mc(`length string (${s}) is not valid number`);const f=yield e.$c(l);return new rv(JSON.parse(f),n.length+l)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const n=e.Oc();n<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),s})()}$c(e){var n=this;return(0,Ee.Z)(function*(){for(;n.buffer.length<e;)(yield n.Fc())&&n.Mc("Reached the end of bundle when more is expected.");const s=n.xc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ee.Z)(function*(){const n=yield e.Cc.read();if(!n.done){const s=new Uint8Array(e.buffer.length+n.value.length);s.set(e.buffer),s.set(n.value,e.buffer.length),e.buffer=s}return n.done})()}}class gu{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Ee.Z)(function*(){var s;if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new rn(Mt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const l=yield function(f,_){return(s=s||(0,Ee.Z)(function*(M,F){const Q=kn(M),ce=il(Q.serializer)+"/documents",xe={documents:F.map(Fn=>rr(Q.serializer,Fn))},mt=yield Q.vo("BatchGetDocuments",ce,xe,F.length),Ct=new Map;mt.forEach(Fn=>{const Zn=function RI(i,e){return"found"in e?function(n,s){Hn(!!s.found);const l=mr(n,s.found.name),f=Ot(s.found.updateTime),_=s.found.createTime?Ot(s.found.createTime):vr.min(),M=new So({mapValue:{fields:s.found.fields}});return os.newFoundDocument(l,f,_,M)}(i,e):"missing"in e?function(n,s){Hn(!!s.missing),Hn(!!s.readTime);const l=mr(n,s.missing),f=Ot(s.readTime);return os.newNoDocument(l,f)}(i,e):cn()}(Q.serializer,Fn);Ct.set(Zn.key.toString(),Zn)});const pn=[];return F.forEach(Fn=>{const Zn=Ct.get(Fn.toString());Hn(!!Zn),pn.push(Zn)}),pn})).apply(this,arguments)}(n.datastore,e);return l.forEach(f=>n.recordVersion(f)),l})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new uu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){var n;if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const s=e.readVersions;e.mutations.forEach(l=>{s.delete(l.key.toString())}),s.forEach((l,f)=>{const _=On.fromPath(f);e.mutations.push(new sh(_,e.precondition(_)))}),yield function(l,f){return(n=n||(0,Ee.Z)(function*(_,M){const F=kn(_),Q=il(F.serializer)+"/documents",ce={writes:M.map(xe=>Gh(F.serializer,xe))};yield F.Io("Commit",Q,ce)})).apply(this,arguments)}(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw cn();n=vr.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new rn(Mt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(vr.min())?ui.exists(!1):ui.updateTime(n):ui.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(vr.min()))throw new rn(Mt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ui.updateTime(n)}return ui.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Mm{constructor(e,n,s,l,f){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=l,this.deferred=f,this.Bc=s.maxAttempts,this.qo=new lc(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ee.Z)(function*(){const n=new gu(e.datastore),s=e.qc(n);s&&s.then(l=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(l)}).catch(f=>{e.Uc(f)}))}).catch(l=>{e.Uc(l)})}))}qc(e){try{const n=this.updateFunction(e);return!fl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Id(n)}return!1}}class r0{constructor(e,n,s,l){var _,f=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=N.UNAUTHENTICATED,this.clientId=Po.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(M){return(_=_||(0,Ee.Z)(function*(F){Be("FirestoreClient","Received user=",F.uid),yield f.authCredentialListener(F),f.user=F})).apply(this,arguments)}),this.appCheckCredentials.start(s,M=>(Be("FirestoreClient","Received new app check token=",M),this.appCheckCredentialListener(M,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new rn(Mt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(s){const l=lf(s,"Failed to shutdown persistence");n.reject(l)}})),n.promise}}function Zf(i,e){return($a=$a||(0,Ee.Z)(function*(n,s){var l;n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const f=yield n.getConfiguration();yield s.initialize(f);let _=f.initialUser;n.setCredentialChangeListener(function(M){return(l=l||(0,Ee.Z)(function*(F){_.isEqual(F)||(yield zy(s.localStore,F),_=F)})).apply(this,arguments)}),s.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=s})).apply(this,arguments)}function xm(i,e){return(Ic=Ic||(0,Ee.Z)(function*(n,s){n.asyncQueue.verifyOperationInProgress();const l=yield rg(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const f=yield n.getConfiguration();yield s.initialize(l,f),n.setCredentialChangeListener(_=>dm(s.remoteStore,_)),n.setAppCheckTokenChangeListener((_,M)=>dm(s.remoteStore,M)),n._onlineComponents=s})).apply(this,arguments)}function Rm(i){return"FirebaseError"===i.name?i.code===Mt.FAILED_PRECONDITION||i.code===Mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function rg(i){return(Cl=Cl||(0,Ee.Z)(function*(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Zf(e,e._uninitializedComponentsProvider._offline)}catch(n){const s=n;if(!Rm(s))throw s;Lt("Error using user provided cache. Falling back to memory cache: "+s),yield Zf(e,new Kf)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield Zf(e,new Kf);return e._offlineComponents})).apply(this,arguments)}function Ch(i){return(Uo=Uo||(0,Ee.Z)(function*(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield xm(e,e._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield xm(e,new hf))),e._onlineComponents})).apply(this,arguments)}function ig(i){return rg(i).then(e=>e.persistence)}function Om(i){return rg(i).then(e=>e.localStore)}function Pm(i){return Ch(i).then(e=>e.remoteStore)}function sg(i){return Ch(i).then(e=>e.syncEngine)}function bh(i){return(T=T||(0,Ee.Z)(function*(e){const n=yield Ch(e),s=n.eventManager;return s.onListen=eg.bind(null,n.syncEngine),s.onUnlisten=mm.bind(null,n.syncEngine),s})).apply(this,arguments)}function gv(i,e,n={}){const s=new Ui;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(l,f,_,M,F){const Q=new ng({next:xe=>{f.enqueueAndForget(()=>Qp(l,ce));const mt=xe.docs.has(_);!mt&&xe.fromCache?F.reject(new rn(Mt.UNAVAILABLE,"Failed to get document because the client is offline.")):mt&&xe.fromCache&&M&&"server"===M.source?F.reject(new rn(Mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):F.resolve(xe)},error:xe=>F.reject(xe)}),ce=new Jp(ou(_.path),Q,{includeMetadataChanges:!0,Ku:!0});return Zp(l,ce)}(yield bh(i),i.asyncQueue,e,n,s)})),s.promise}function mv(i,e,n={}){const s=new Ui;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(l,f,_,M,F){const Q=new ng({next:xe=>{f.enqueueAndForget(()=>Qp(l,ce)),xe.fromCache&&"server"===M.source?F.reject(new rn(Mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):F.resolve(xe)},error:xe=>F.reject(xe)}),ce=new Jp(_,Q,{includeMetadataChanges:!0,Ku:!0});return Zp(l,ce)}(yield bh(i),i.asyncQueue,e,n,s)})),s.promise}function Lm(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Xf=new Map;function vv(i,e,n){if(!n)throw new rn(Mt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function _v(i,e,n,s){if(!0===e&&!0===s)throw new rn(Mt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Bm(i){if(!On.isDocumentKey(i))throw new rn(Mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function $m(i){if(On.isDocumentKey(i))throw new rn(Mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ag(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":cn()}function ji(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new rn(Mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ag(i);throw new rn(Mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Vm(i,e){if(e<=0)throw new rn(Mt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Um{constructor(e){var n,s;if(void 0===e.host){if(void 0!==e.ssl)throw new rn(Mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new rn(Mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_v("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Lm(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(l){if(void 0!==l.timeoutSeconds){if(isNaN(l.timeoutSeconds))throw new rn(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new rn(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new rn(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class td{constructor(e,n,s,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new rn(Mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new rn(Mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Yo;switch(n.type){case"firstParty":return new Gd(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new rn(Mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Xf.get(e);n&&(Be("ComponentProvider","Removing Datastore"),Xf.delete(e),n.terminate())}(this),Promise.resolve()}}class no{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new no(this.firestore,e,this._key)}}class Ra{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ra(this.firestore,e,this._query)}}class mu extends Ra{constructor(e,n,s){super(e,n,ou(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new no(this.firestore,null,new On(e))}withConverter(e){return new mu(this.firestore,e,this._path)}}function Ev(i,e,...n){if(i=(0,be.m9)(i),vv("collection","path",e),i instanceof td){const s=ii.fromString(e,...n);return $m(s),new mu(i,null,s)}{if(!(i instanceof no||i instanceof mu))throw new rn(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ii.fromString(e,...n));return $m(s),new mu(i.firestore,null,s)}}function lg(i,e,...n){if(i=(0,be.m9)(i),1===arguments.length&&(e=Po.A()),vv("doc","path",e),i instanceof td){const s=ii.fromString(e,...n);return Bm(s),new no(i,null,new On(s))}{if(!(i instanceof no||i instanceof mu))throw new rn(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ii.fromString(e,...n));return Bm(s),new no(i.firestore,i instanceof mu?i.converter:null,new On(s))}}function wv(i,e){return i=(0,be.m9)(i),e=(0,be.m9)(e),(i instanceof no||i instanceof mu)&&(e instanceof no||e instanceof mu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function jm(i,e){return i=(0,be.m9)(i),e=(0,be.m9)(e),i instanceof Ra&&e instanceof Ra&&i.firestore===e.firestore&&Hu(i._query,e._query)&&i.converter===e.converter}class a0{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new lc(this,"async_queue_retry"),this.Xc=()=>{const n=Wp();n&&Be("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Wp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Wp();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Ui;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!hl(n))throw n;Be("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,hn("INTERNAL UNHANDLED ERROR: ",function(f){let _=f.message||"";return f.stack&&(_=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),_}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=n,n}enqueueAfterDelay(e,n,s){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const l=hm.createAndSchedule(this,e,n,s,f=>this.na(f));return this.zc.push(l),l}Zc(){this.Wc&&cn()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ee.Z)(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function Hm(i){return function(e,n){if("object"!=typeof e||null===e)return!1;const s=e;for(const l of["next","error","complete"])if(l in s&&"function"==typeof s[l])return!0;return!1}(i)}class l0{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,s){this._progressObserver={next:e,error:n,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class go extends td{constructor(e,n,s,l){super(e,n,s,l),this.type="firestore",this._queue=new a0,this._persistenceKey=l?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ep(this),this._firestoreClient.terminate()}}function Wo(i){return i._firestoreClient||ep(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function ep(i){var e,n,s;const l=i._freezeSettings(),f=(M=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new kh(i._databaseId,M,i._persistenceKey,(Q=l).host,Q.ssl,Q.experimentalForceLongPolling,Q.experimentalAutoDetectLongPolling,Lm(Q.experimentalLongPollingOptions),Q.useFetchStreams));var M,Q;i._firestoreClient=new r0(i._authCredentials,i._appCheckCredentials,i._queue,f),null!==(n=l.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(s=l.cache)&&void 0!==s&&s._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:l.cache.kind,_offline:l.cache._offlineComponentProvider,_online:l.cache._onlineComponentProvider})}function bv(i,e,n){const s=new Ui;return i.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield Zf(i,n),yield xm(i,e),s.resolve()}catch(l){const f=l;if(!Rm(f))throw f;Lt("Error enabling indexeddb cache. Falling back to memory cache: "+f),s.reject(f)}})).then(()=>s.promise)}function _0(i){if(i._initialized||i._terminated)throw new rn(Mt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nd(vo.fromBase64String(e))}catch(n){throw new rn(Mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nd(vo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cc{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new rn(Mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dh{constructor(e){this._methodName=e}}class pf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new rn(Mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new rn(Mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jr(this._lat,e._lat)||jr(this._long,e._long)}}const I0=/^__.*__$/;class yu{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return null!==this.fieldMask?new kc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gu(e,this.data,n,this.fieldTransforms)}}class gf{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new kc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ka(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cn()}}class vu{constructor(e,n,s,l,f,_){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,void 0===f&&this.ua(),this.fieldTransforms=f||[],this.fieldMask=_||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new vu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(e),l=this.aa({path:s,la:!1});return l.fa(e),l}da(e){var n;const s=null===(n=this.path)||void 0===n?void 0:n.child(e),l=this.aa({path:s,la:!1});return l.ua(),l}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return np(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ka(this.ca)&&I0.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class cg{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Eh(e)}ya(e,n,s,l=!1){return new vu({ca:e,methodName:n,ga:s,path:Li.emptyPath(),la:!1,ma:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oa(i){const e=i._freezeSettings(),n=Eh(i._databaseId);return new cg(i._databaseId,!!e.ignoreUndefinedProperties,n)}function mf(i,e,n,s,l,f={}){const _=i.ya(f.merge||f.mergeFields?2:0,e,n,l);ug("Data must be an object, but it was:",_,s);const M=zm(s,_);let F,Q;if(f.merge)F=new ma(_.fieldMask),Q=_.fieldTransforms;else if(f.mergeFields){const ce=[];for(const xe of f.mergeFields){const mt=If(e,xe,n);if(!_.contains(mt))throw new rn(Mt.INVALID_ARGUMENT,`Field '${mt}' is specified in your field mask but missing from your input data.`);Wm(ce,mt)||ce.push(mt)}F=new ma(ce),Q=_.fieldTransforms.filter(xe=>F.covers(xe.field))}else F=null,Q=_.fieldTransforms;return new yu(new So(M),F,Q)}class _u extends Dh{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _u}}function Th(i,e,n){return new vu({ca:3,ga:e.settings.ga,methodName:i._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Pd extends Dh{_toFieldTransform(e){return new Nc(e.path,new vl)}isEqual(e){return e instanceof Pd}}class yf extends Dh{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=Th(this,e,!0),s=this.pa.map(f=>Fd(f,n)),l=new $l(s);return new Nc(e.path,l)}isEqual(e){return this===e}}class vf extends Dh{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=Th(this,e,!0),s=this.pa.map(f=>Fd(f,n)),l=new oc(s);return new Nc(e.path,l)}isEqual(e){return this===e}}class _f extends Dh{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new Vl(e.serializer,_r(e.serializer,this.Ia));return new Nc(e.path,n)}isEqual(e){return this===e}}function Nd(i,e,n,s){const l=i.ya(1,e,n);ug("Data must be an object, but it was:",l,s);const f=[],_=So.empty();Ki(s,(F,Q)=>{const ce=tp(e,F,n);Q=(0,be.m9)(Q);const xe=l.da(ce);if(Q instanceof _u)f.push(ce);else{const mt=Fd(Q,xe);null!=mt&&(f.push(ce),_.set(ce,mt))}});const M=new ma(f);return new gf(_,M,l.fieldTransforms)}function kd(i,e,n,s,l,f){const _=i.ya(1,e,n),M=[If(e,s,n)],F=[l];if(f.length%2!=0)throw new rn(Mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let mt=0;mt<f.length;mt+=2)M.push(If(e,f[mt])),F.push(f[mt+1]);const Q=[],ce=So.empty();for(let mt=M.length-1;mt>=0;--mt)if(!Wm(Q,M[mt])){const Ct=M[mt];let pn=F[mt];pn=(0,be.m9)(pn);const Fn=_.da(Ct);if(pn instanceof _u)Q.push(Ct);else{const Zn=Fd(pn,Fn);null!=Zn&&(Q.push(Ct),ce.set(Ct,Zn))}}const xe=new ma(Q);return new gf(ce,xe,_.fieldTransforms)}function Sh(i,e,n,s=!1){return Fd(n,i.ya(s?4:3,e))}function Fd(i,e){if(Gm(i=(0,be.m9)(i)))return ug("Unsupported field value:",e,i),zm(i,e);if(i instanceof Dh)return function(n,s){if(!Ka(s.ca))throw s._a(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,s){const l=[];let f=0;for(const _ of n){let M=Fd(_,s.wa(f));null==M&&(M={nullValue:"NULL_VALUE"}),l.push(M),f++}return{arrayValue:{values:l}}}(i,e)}return function(n,s){if(null===(n=(0,be.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return _r(s.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const l=Ri.fromDate(n);return{timestampValue:le(s.serializer,l)}}if(n instanceof Ri){const l=new Ri(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:le(s.serializer,l)}}if(n instanceof pf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof nd)return{bytesValue:Re(s.serializer,n._byteString)};if(n instanceof no){const l=s.databaseId,f=n.firestore._databaseId;if(!f.isEqual(l))throw s._a(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gt(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s._a(`Unsupported field value: ${ag(n)}`)}(i,e)}function zm(i,e){const n={};return ms(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ki(i,(s,l)=>{const f=Fd(l,e.ha(s));null!=f&&(n[s]=f)}),{mapValue:{fields:n}}}function Gm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ri||i instanceof pf||i instanceof nd||i instanceof no||i instanceof Dh)}function ug(i,e,n){if(!Gm(n)||"object"!=typeof(s=n)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=ag(n);throw e._a("an object"===s?i+" a custom object":i+" "+s)}var s}function If(i,e,n){if((e=(0,be.m9)(e))instanceof cc)return e._internalPath;if("string"==typeof e)return tp(i,e);throw np("Field path arguments must be of type string or ",i,!1,void 0,n)}const Sv=new RegExp("[~\\*/\\[\\]]");function tp(i,e,n){if(e.search(Sv)>=0)throw np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new cc(...e.split("."))._internalPath}catch{throw np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function np(i,e,n,s,l){const f=s&&!s.isEmpty(),_=void 0!==l;let M=`Function ${e}() called with invalid data`;n&&(M+=" (via `toFirestore()`)"),M+=". ";let F="";return(f||_)&&(F+=" (found",f&&(F+=` in field ${s}`),_&&(F+=` in document ${l}`),F+=")"),new rn(Mt.INVALID_ARGUMENT,M+i+F)}function Wm(i,e){return i.some(n=>n.isEqual(e))}class Ah{constructor(e,n,s,l,f){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=l,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new no(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new E0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class E0 extends Ah{data(){return super.data()}}function qm(i,e){return"string"==typeof e?tp(i,e):e instanceof cc?e._internalPath:e._delegate._internalPath}function w0(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new rn(Mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Km{}class rp extends Km{}function Mh(i,e,...n){let s=[];e instanceof Km&&s.push(e),s=s.concat(n),function(l){const f=l.filter(M=>M instanceof Ef).length,_=l.filter(M=>M instanceof ip).length;if(f>1||f>0&&_>0)throw new rn(Mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const l of s)i=l._apply(i);return i}class ip extends rp{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new ip(e,n,s)}_apply(e){const n=this._parse(e);return ap(e._query,n),new Ra(e.firestore,e.converter,zo(e._query,n))}_parse(e){const n=Oa(e.firestore);return function(l,f,_,M,F,Q,ce){let xe;if(F.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new rn(Mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){hg(ce,Q);const mt=[];for(const Ct of ce)mt.push(Rv(M,l,Ct));xe={arrayValue:{values:mt}}}else xe=Rv(M,l,ce)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||hg(ce,Q),xe=Sh(_,"where",ce,"in"===Q||"not-in"===Q);return Qr.create(F,Q,xe)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ef extends Km{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ef(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===n.length?n[0]:ys.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(s,l){let f=s;const _=l.getFlattenedFilters();for(const M of _)ap(f,M),f=zo(f,M)}(e._query,n),new Ra(e.firestore,e.converter,zo(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sp extends rp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new sp(e,n)}_apply(e){const n=function(s,l,f){if(null!==s.startAt)throw new rn(Mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new rn(Mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const _=new _a(l,f);return function(M,F){if(null===ju(M)){const Q=au(M);null!==Q&&lp(0,Q,F.field)}}(s,_),_}(e._query,this._field,this._direction);return new Ra(e.firestore,e.converter,function(s,l){const f=s.explicitOrderBy.concat([l]);return new rl(s.path,s.collectionGroup,f,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}class wf extends rp{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new wf(e,n,s)}_apply(e){return new Ra(e.firestore,e.converter,lu(e._query,this._limit,this._limitType))}}class Ld extends rp{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new Ld(e,n,s)}_apply(e){const n=xv(e,this.type,this._docOrFields,this._inclusive);return new Ra(e.firestore,e.converter,(l=n,new rl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,l,s.endAt)));var s,l}}class Bd extends rp{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new Bd(e,n,s)}_apply(e){const n=xv(e,this.type,this._docOrFields,this._inclusive);return new Ra(e.firestore,e.converter,(l=n,new rl((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,l)));var s,l}}function xv(i,e,n,s){if(n[0]=(0,be.m9)(n[0]),n[0]instanceof Ah)return function(l,f,_,M,F){if(!M)throw new rn(Mt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${_}().`);const Q=[];for(const ce of Rc(l))if(ce.field.isKeyField())Q.push(Wa(f,M.key));else{const xe=M.data.field(ce.field);if(eu(xe))throw new rn(Mt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ce.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===xe){const mt=ce.field.canonicalString();throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${mt}' (used as the orderBy) does not exist.`)}Q.push(xe)}return new va(Q,F)}(i._query,i.firestore._databaseId,e,n[0]._document,s);{const l=Oa(i.firestore);return function(f,_,M,F,Q,ce){const xe=f.explicitOrderBy;if(Q.length>xe.length)throw new rn(Mt.INVALID_ARGUMENT,`Too many arguments provided to ${F}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const mt=[];for(let Ct=0;Ct<Q.length;Ct++){const pn=Q[Ct];if(xe[Ct].field.isKeyField()){if("string"!=typeof pn)throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${F}(), but got a ${typeof pn}`);if(!eh(f)&&-1!==pn.indexOf("/"))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${F}() must be a plain document ID, but '${pn}' contains a slash.`);const Fn=f.path.child(ii.fromString(pn));if(!On.isDocumentKey(Fn))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${F}() must result in a valid document path, but '${Fn}' is not because it contains an odd number of segments.`);const Zn=new On(Fn);mt.push(Wa(_,Zn))}else{const Fn=Sh(M,F,pn);mt.push(Fn)}}return new va(mt,ce)}(i._query,i.firestore._databaseId,l,e,n,s)}}function Rv(i,e,n){if("string"==typeof(n=(0,be.m9)(n))){if(""===n)throw new rn(Mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eh(e)&&-1!==n.indexOf("/"))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ii.fromString(n));if(!On.isDocumentKey(s))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Wa(i,new On(s))}if(n instanceof no)return Wa(i,n._key);throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ag(n)}.`)}function hg(i,e){if(!Array.isArray(i)||0===i.length)throw new rn(Mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ap(i,e){if(e.isInequality()){const s=au(i),l=e.field;if(null!==s&&!s.isEqual(l))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${l.toString()}'`);const f=ju(i);null!==f&&lp(0,l,f)}const n=function(s,l){for(const f of s)for(const _ of f.getFlattenedFilters())if(l.indexOf(_.op)>=0)return _.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new rn(Mt.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function lp(i,e,n){if(!n.isEqual(e))throw new rn(Mt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Ym{convertValue(e,n="none"){switch(ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return eo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw cn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ki(e,(l,f)=>{s[l]=this.convertValue(f,n)}),s}convertGeoPoint(e){return new pf(eo(e.latitude),eo(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=gl(e);return null==s?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){const n=Al(e);return new Ri(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ii.fromString(e);Hn(Cp(s));const l=new Sa(s.get(1),s.get(3)),f=new On(s.popFirst(5));return l.isEqual(n)||hn(`Document ${f} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),f}}function fg(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class Zm extends Ym{constructor(e){super(),this.firestore=e}convertBytes(e){return new nd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new no(this.firestore,null,n)}}class $d{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Iu extends Ah{constructor(e,n,s,l,f,_){super(e,n,s,l,_),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(qm("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class cp extends Iu{data(e={}){return super.data(e)}}class Vd{constructor(e,n,s,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new $d(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new cp(this._firestore,this._userDataWriter,s.key,s,new $d(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new rn(Mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let f=0;return s._snapshot.docChanges.map(_=>({type:"added",doc:new cp(s._firestore,s._userDataWriter,_.doc.key,_.doc,new $d(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:f++}))}{let f=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(_=>l||3!==_.type).map(_=>{const M=new cp(s._firestore,s._userDataWriter,_.doc.key,_.doc,new $d(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter);let F=-1,Q=-1;return 0!==_.type&&(F=f.indexOf(_.doc.key),f=f.delete(_.doc.key)),1!==_.type&&(f=f.add(_.doc),Q=f.indexOf(_.doc.key)),{type:x0(_.type),doc:M,oldIndex:F,newIndex:Q}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function x0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cn()}}function Ov(i,e){return i instanceof Iu&&e instanceof Iu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Vd&&e instanceof Vd&&i._firestore===e._firestore&&jm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Eu extends Ym{constructor(e){super(),this.firestore=e}convertBytes(e){return new nd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new no(this.firestore,null,n)}}function Nv(i,e,n){i=ji(i,no);const s=ji(i.firestore,go),l=fg(i.converter,e,n);return xh(s,[mf(Oa(s),"setDoc",i._key,l,null!==i.converter,n).toMutation(i._key,ui.none())])}function kv(i,e,n,...s){i=ji(i,no);const l=ji(i.firestore,go),f=Oa(l);let _;return _="string"==typeof(e=(0,be.m9)(e))||e instanceof cc?kd(f,"updateDoc",i._key,e,n,s):Nd(f,"updateDoc",i._key,e),xh(l,[_.toMutation(i._key,ui.exists(!0))])}function mg(i,...e){var n,s,l;i=(0,be.m9)(i);let f={includeMetadataChanges:!1},_=0;"object"!=typeof e[_]||Hm(e[_])||(f=e[_],_++);const M={includeMetadataChanges:f.includeMetadataChanges};if(Hm(e[_])){const xe=e[_];e[_]=null===(n=xe.next)||void 0===n?void 0:n.bind(xe),e[_+1]=null===(s=xe.error)||void 0===s?void 0:s.bind(xe),e[_+2]=null===(l=xe.complete)||void 0===l?void 0:l.bind(xe)}let F,Q,ce;if(i instanceof no)Q=ji(i.firestore,go),ce=ou(i._key.path),F={next:xe=>{e[_]&&e[_](ty(Q,i,xe))},error:e[_+1],complete:e[_+2]};else{const xe=ji(i,Ra);Q=ji(xe.firestore,go),ce=xe._query;const mt=new Eu(Q);F={next:Ct=>{e[_]&&e[_](new Vd(Q,mt,xe,Ct))},error:e[_+1],complete:e[_+2]},w0(i._query)}return function(xe,mt,Ct,pn){const Fn=new ng(pn),Zn=new Jp(mt,Fn,Ct);return xe.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Zp(yield bh(xe),Zn)})),()=>{Fn.Dc(),xe.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Qp(yield bh(xe),Zn)}))}}(Wo(Q),ce,M,F)}function xh(i,e){return function(n,s){const l=new Ui;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function qf(i,e,n){return(yc=yc||(0,Ee.Z)(function*(s,l,f){const _=Am(s);try{const M=yield function(F,Q){const ce=kn(F),xe=Ri.now(),mt=Q.reduce((Fn,Zn)=>Fn.add(Zn.key),Oe());let Ct,pn;return ce.persistence.runTransaction("Locally write mutations","readwrite",Fn=>{let Zn=Ea(),Jr=Oe();return ce.Zi.getEntries(Fn,mt).next(hi=>{Zn=hi,Zn.forEach((Ar,fi)=>{fi.isValidDocument()||(Jr=Jr.add(Ar))})}).next(()=>ce.localDocuments.getOverlayedDocuments(Fn,Zn)).next(hi=>{Ct=hi;const Ar=[];for(const fi of Q){const Hi=zu(fi,Ct.get(fi.key).overlayedDocument);null!=Hi&&Ar.push(new kc(fi.key,Hi,Ho(Hi.value.mapValue),ui.exists(!0)))}return ce.mutationQueue.addMutationBatch(Fn,xe,Ar,Q)}).next(hi=>{pn=hi;const Ar=hi.applyToLocalDocumentSet(Ct,Jr);return ce.documentOverlayCache.saveOverlays(Fn,hi.batchId,Ar)})}).then(()=>({batchId:pn.batchId,changes:g(Ct)}))}(_.localStore,l);_.sharedClientState.addPendingMutation(M.batchId),function(F,Q,ce){let xe=F.Tc[F.currentUser.toKey()];xe||(xe=new gr(jr)),xe=xe.insert(Q,ce),F.Tc[F.currentUser.toKey()]=xe}(_,M.batchId,f),yield Ju(_,M.changes),yield nf(_.remoteStore)}catch(M){const F=lf(M,"Failed to persist write");f.reject(F)}})).apply(this,arguments)}(yield sg(n),s,l)})),l.promise}(Wo(i),e)}function ty(i,e,n){const s=n.docs.get(e._key),l=new Eu(i);return new Iu(i,l,e._key,s,new $d(n.hasPendingWrites,n.fromCache),e.converter)}const iy={maxAttempts:5};class yg{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Oa(e)}set(e,n,s){this._verifyNotCommitted();const l=rd(e,this._firestore),f=fg(l.converter,n,s),_=mf(this._dataReader,"WriteBatch.set",l._key,f,null!==l.converter,s);return this._mutations.push(_.toMutation(l._key,ui.none())),this}update(e,n,s,...l){this._verifyNotCommitted();const f=rd(e,this._firestore);let _;return _="string"==typeof(n=(0,be.m9)(n))||n instanceof cc?kd(this._dataReader,"WriteBatch.update",f._key,n,s,l):Nd(this._dataReader,"WriteBatch.update",f._key,n),this._mutations.push(_.toMutation(f._key,ui.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=rd(e,this._firestore);return this._mutations=this._mutations.concat(new uu(n._key,ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new rn(Mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rd(i,e){if((i=(0,be.m9)(i)).firestore!==e)throw new rn(Mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Uv extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Oa(e)}get(e){const n=rd(e,this._firestore),s=new Zm(this._firestore);return this._transaction.lookup([n._key]).then(l=>{if(!l||1!==l.length)return cn();const f=l[0];if(f.isFoundDocument())return new Ah(this._firestore,s,f.key,f,n.converter);if(f.isNoDocument())return new Ah(this._firestore,s,n._key,null,n.converter);throw cn()})}set(e,n,s){const l=rd(e,this._firestore),f=fg(l.converter,n,s),_=mf(this._dataReader,"Transaction.set",l._key,f,null!==l.converter,s);return this._transaction.set(l._key,_),this}update(e,n,s,...l){const f=rd(e,this._firestore);let _;return _="string"==typeof(n=(0,be.m9)(n))||n instanceof cc?kd(this._dataReader,"Transaction.update",f._key,n,s,l):Nd(this._dataReader,"Transaction.update",f._key,n),this._transaction.update(f._key,_),this}delete(e){const n=rd(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=rd(e,this._firestore),s=new Eu(this._firestore);return super.get(e).then(l=>new Iu(this._firestore,s,n._key,l._document,new $d(!1,!1),n.converter))}}function id(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new rn("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function vg(){if(typeof Uint8Array>"u")throw new rn("unimplemented","Uint8Arrays are not available in this environment.")}function Yv(){if(!function bc(){return typeof atob<"u"}())throw new rn("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){x=yt.SDK_VERSION,(0,yt._registerComponent)(new Ve.wA("firestore",(n,{instanceIdentifier:s,options:l})=>{const f=n.getProvider("app").getImmediate(),_=new go(new qc(n.getProvider("auth-internal")),new fa(n.getProvider("app-check-internal")),function(M,F){if(!Object.prototype.hasOwnProperty.apply(M.options,["projectId"]))throw new rn(Mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sa(M.options.projectId,F)}(f,s),f);return l=Object.assign({useFetchStreams:e},l),_._setSettings(l),_},"PUBLIC").setMultipleInstances(!0)),(0,yt.registerVersion)(R,"3.13.0",i),(0,yt.registerVersion)(R,"3.13.0","esm2017")}();class Oh{constructor(e){this._delegate=e}static fromBase64String(e){return Yv(),new Oh(nd.fromBase64String(e))}static fromUint8Array(e){return vg(),new Oh(nd.fromUint8Array(e))}toBase64(){return Yv(),this._delegate.toBase64()}toUint8Array(){return vg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Zv(i){return function ZI(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const s of e)if(s in n&&"function"==typeof n[s])return!0;return!1}(i,["next","error","complete"])}class $0{enableIndexedDbPersistence(e,n){return function d0(i,e){_0(i=ji(i,go));const n=Wo(i);if(n._uninitializedComponentsProvider)throw new rn(Mt.FAILED_PRECONDITION,"SDK cache is already specified.");Lt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),l=new hf;return bv(n,l,new Yf(l,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function h0(i){_0(i=ji(i,go));const e=Wo(i);if(e._uninitializedComponentsProvider)throw new rn(Mt.FAILED_PRECONDITION,"SDK cache is already specified.");Lt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),s=new hf;return bv(e,s,new fv(s,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function f0(i){if(i._initialized&&!i._terminated)throw new rn(Mt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ui;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{var n;yield function(s){return(n=n||(0,Ee.Z)(function*(l){if(!Zo.D())return Promise.resolve();const f=l+"main";yield Zo.delete(f)})).apply(this,arguments)}(Vp(i._databaseId,i._persistenceKey)),e.resolve()}catch(s){e.reject(s)}})),e.promise}(e._delegate)}}class Qv{constructor(e,n,s){this._delegate=n,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Lt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,s={}){!function Iv(i,e,n,s={}){var l;const f=(i=ji(i,td))._getSettings(),_=`${e}:${n}`;if("firestore.googleapis.com"!==f.host&&f.host!==_&&Lt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},f),{host:_,ssl:!1})),s.mockUserToken){let M,F;if("string"==typeof s.mockUserToken)M=s.mockUserToken,F=N.MOCK_USER;else{M=(0,be.Sg)(s.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const Q=s.mockUserToken.sub||s.mockUserToken.user_id;if(!Q)throw new rn(Mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new N(Q)}i._authCredentials=new ss(new gs(M,F))}}(this._delegate,e,n,s)}enableNetwork(){return function g0(i){return function km(i){return i.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield ig(i),n=yield Pm(i);return e.setNetworkEnabled(!0),function(s){const l=kn(s);return l.vu.delete(0),Gf(l)}(n)}))}(Wo(i=ji(i,go)))}(this._delegate)}disableNetwork(){return function m0(i){return function ed(i){return i.asyncQueue.enqueue((0,Ee.Z)(function*(){var e;const n=yield ig(i),s=yield Pm(i);return n.setNetworkEnabled(!1),function(l){return(e=e||(0,Ee.Z)(function*(f){const _=kn(f);_.vu.add(0),yield Md(_),_.bu.set("Offline")})).apply(this,arguments)}(s)}))}(Wo(i=ji(i,go)))}(this._delegate)}enablePersistence(e){let n=!1,s=!1;return e&&(n=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,_v("synchronizeTabs",n,"experimentalForceOwningTab",s)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function p0(i){return function(e){const n=new Ui;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function Im(i,e){return(Vi=Vi||(0,Ee.Z)(function*(n,s){const l=kn(n);xd(l.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const f=yield function(M){const F=kn(M);return F.persistence.runTransaction("Get highest unacknowledged batch id","readonly",Q=>F.mutationQueue.getHighestUnacknowledgedBatchId(Q))}(l.localStore);if(-1===f)return void s.resolve();const _=l.Ec.get(f)||[];_.push(s),l.Ec.set(f,_)}catch(f){const _=lf(f,"Initialization of waitForPendingWrites() operation failed");s.reject(_)}})).apply(this,arguments)}(yield sg(e),n)})),n.promise}(Wo(i=ji(i,go)))}(this._delegate)}onSnapshotsInSync(e){return function ey(i,e){return function yv(i,e){const n=new ng(e);return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return s=yield bh(i),l=n,kn(s).ku.add(l),void l.next();var s,l})),()=>{n.Dc(),i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return s=yield bh(i),l=n,void kn(s).ku.delete(l);var s,l}))}}(Wo(i=ji(i,go)),Hm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new rn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bf(this,Ev(this._delegate,e))}catch(n){throw sl(n,"collection()","Firestore.collection()")}}doc(e){try{return new uc(this,lg(this._delegate,e))}catch(n){throw sl(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _l(this,function Jf(i,e){if(i=ji(i,td),vv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new rn(Mt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ra(i,null,(n=e,new rl(ii.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw sl(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function jv(i,e,n){i=ji(i,go);const s=Object.assign(Object.assign({},iy),n);return function(l){if(l.maxAttempts<1)throw new rn(Mt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(l,f,_){const M=new Ui;return l.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const F=yield function Nm(i){return Ch(i).then(e=>e.datastore)}(l);new Mm(l.asyncQueue,F,_,f,M).run()})),M.promise}(Wo(i),l=>e(new Uv(i,l)),s)}(this._delegate,n=>e(new ra(this,n)))}batch(){return Wo(this._delegate),new ay(new yg(this._delegate,e=>xh(this._delegate,e)))}loadBundle(e){return function Dv(i,e){const n=Wo(i=ji(i,go)),s=new l0;return function o0(i,e,n,s){const l=function(f,_){let M;return M="string"==typeof f?yp().encode(f):f,F=function(F,Q){if(F instanceof Uint8Array)return pv(F,Q);if(F instanceof ArrayBuffer)return pv(new Uint8Array(F),Q);if(F instanceof ReadableStream)return F.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new n0(F,_);var F}(n,Eh(e));i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function hv(i,e,n){var s;const l=kn(i);(function(f,_,M){return(s=s||(0,Ee.Z)(function*(F,Q,ce){try{const xe=yield Q.getMetadata();if(yield function(Fn,Zn){const Jr=kn(Fn),hi=Ot(Zn.createTime);return Jr.persistence.runTransaction("hasNewerBundle","readonly",Ar=>Jr.qs.getBundleMetadata(Ar,Zn.id)).then(Ar=>!!Ar&&Ar.createTime.compareTo(hi)>=0)}(F.localStore,xe))return yield Q.close(),ce._completeWith({taskState:"Success",documentsLoaded:(Fn=xe).totalDocuments,bytesLoaded:Fn.totalBytes,totalDocuments:Fn.totalDocuments,totalBytes:Fn.totalBytes}),Promise.resolve(new Set);ce._updateProgress(fm(xe));const mt=new sv(xe,F.localStore,Q.serializer);let Ct=yield Q.bc();for(;Ct;){const Fn=yield mt.zu(Ct);Fn&&ce._updateProgress(Fn),Ct=yield Q.bc()}const pn=yield mt.complete();return yield Ju(F,pn.Ju,void 0),yield function(Fn,Zn){const Jr=kn(Fn);return Jr.persistence.runTransaction("Save bundle","readwrite",hi=>Jr.qs.saveBundleMetadata(hi,Zn))}(F.localStore,xe),ce._completeWith(pn.progress),Promise.resolve(pn.Hu)}catch(xe){return Lt("SyncEngine",`Loading bundle failed with ${xe}`),ce._failWith(xe),Promise.resolve(new Set)}var Fn})).apply(this,arguments)})(l,e,n).then(f=>{l.sharedClientState.notifyBundleLoaded(f)})}(yield sg(i),l,s)}))}(n,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function v0(i,e){return function og(i,e){return i.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(n,s){const l=kn(n);return l.persistence.runTransaction("Get named query","readonly",f=>l.qs.getNamedQuery(f,s))}(yield Om(i),e)}))}(Wo(i=ji(i,go)),e).then(n=>n?new Ra(i,null,n.query):null)}(this._delegate,e).then(n=>n?new _l(this,n):null)}}class up extends Ym{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oh(new nd(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return uc.forKey(n,this.firestore,null)}}class ra{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new up(e)}get(e){const n=Ud(e);return this._delegate.get(n).then(s=>new Cf(this._firestore,new Iu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,n.converter)))}set(e,n,s){const l=Ud(e);return s?(id("Transaction.set",s),this._delegate.set(l,n,s)):this._delegate.set(l,n),this}update(e,n,s,...l){const f=Ud(e);return 2===arguments.length?this._delegate.update(f,n):this._delegate.update(f,n,s,...l),this}delete(e){const n=Ud(e);return this._delegate.delete(n),this}}class ay{constructor(e){this._delegate=e}set(e,n,s){const l=Ud(e);return s?(id("WriteBatch.set",s),this._delegate.set(l,n,s)):this._delegate.set(l,n),this}update(e,n,s,...l){const f=Ud(e);return 2===arguments.length?this._delegate.update(f,n):this._delegate.update(f,n,s,...l),this}delete(e){const n=Ud(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ph{constructor(e,n,s){this._firestore=e,this._userDataWriter=n,this._delegate=s}fromFirestore(e,n){const s=new cp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wu(this._firestore,s),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const s=Ph.INSTANCES;let l=s.get(e);l||(l=new WeakMap,s.set(e,l));let f=l.get(n);return f||(f=new Ph(e,new up(e),n),l.set(n,f)),f}}Ph.INSTANCES=new WeakMap;class uc{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new up(e)}static forPath(e,n,s){if(e.length%2!=0)throw new rn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new uc(n,new no(n._delegate,s,new On(e)))}static forKey(e,n,s){return new uc(n,new no(n._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new bf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bf(this.firestore,Ev(this._delegate,e))}catch(n){throw sl(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,be.m9)(e))instanceof no&&wv(this._delegate,e)}set(e,n){n=id("DocumentReference.set",n);try{return n?Nv(this._delegate,e,n):Nv(this._delegate,e)}catch(s){throw sl(s,"setDoc()","DocumentReference.set()")}}update(e,n,...s){try{return 1===arguments.length?kv(this._delegate,e):kv(this._delegate,e,n,...s)}catch(l){throw sl(l,"updateDoc()","DocumentReference.update()")}}delete(){return function O0(i){return xh(ji(i.firestore,go),[new uu(i._key,ui.none())])}(this._delegate)}onSnapshot(...e){const n=Xv(e),s=ly(e,l=>new Cf(this.firestore,new Iu(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return mg(this._delegate,n,s)}get(e){let n;return n="cache"===e?.source?function R0(i){i=ji(i,no);const e=ji(i.firestore,go),n=Wo(e),s=new Eu(e);return function s0(i,e){const n=new Ui;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){var s;return function(l,f,_){return(s=s||(0,Ee.Z)(function*(M,F,Q){try{const ce=yield function(xe,mt){const Ct=kn(xe);return Ct.persistence.runTransaction("read document","readonly",pn=>Ct.localDocuments.getDocument(pn,mt))}(M,F);ce.isFoundDocument()?Q.resolve(ce):ce.isNoDocument()?Q.resolve(null):Q.reject(new rn(Mt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(ce){const xe=lf(ce,`Failed to get document '${F} from cache`);Q.reject(xe)}})).apply(this,arguments)}(yield Om(i),e,n)})),n.promise}(n,i._key).then(l=>new Iu(e,s,i._key,l,new $d(null!==l&&l.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function pg(i){i=ji(i,no);const e=ji(i.firestore,go);return gv(Wo(e),i._key,{source:"server"}).then(n=>ty(e,i,n))}(this._delegate):function Qm(i){i=ji(i,no);const e=ji(i.firestore,go);return gv(Wo(e),i._key).then(n=>ty(e,i,n))}(this._delegate),n.then(s=>new Cf(this.firestore,new Iu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new uc(this.firestore,this._delegate.withConverter(e?Ph.getInstance(this.firestore,e):null))}}function sl(i,e,n){return i.message=i.message.replace(e,n),i}function Xv(i){for(const e of i)if("object"==typeof e&&!Zv(e))return e;return{}}function ly(i,e){var n,s;let l;return l=Zv(i[0])?i[0]:Zv(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:f=>{l.next&&l.next(e(f))},error:null===(n=l.error)||void 0===n?void 0:n.bind(l),complete:null===(s=l.complete)||void 0===s?void 0:s.bind(l)}}class Cf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new uc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Ov(this._delegate,e._delegate)}}class wu extends Cf{data(e){const n=this._delegate.data(e);return function Si(i,e){i||cn()}(void 0!==n),n}}class _l{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new up(e)}where(e,n,s){try{return new _l(this.firestore,Mh(this._delegate,function HI(i,e,n){const s=e,l=qm("where",i);return ip._create(l,s,n)}(e,n,s)))}catch(l){throw sl(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new _l(this.firestore,Mh(this._delegate,function op(i,e="asc"){const n=e,s=qm("orderBy",i);return sp._create(s,n)}(e,n)))}catch(s){throw sl(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _l(this.firestore,Mh(this._delegate,function dg(i){return Vm("limit",i),wf._create("limit",i,"F")}(e)))}catch(n){throw sl(n,"limit()","Query.limit()")}}limitToLast(e){try{return new _l(this.firestore,Mh(this._delegate,function Av(i){return Vm("limitToLast",i),wf._create("limitToLast",i,"L")}(e)))}catch(n){throw sl(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _l(this.firestore,Mh(this._delegate,function Mv(...i){return Ld._create("startAt",i,!0)}(...e)))}catch(n){throw sl(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _l(this.firestore,Mh(this._delegate,function C0(...i){return Ld._create("startAfter",i,!1)}(...e)))}catch(n){throw sl(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _l(this.firestore,Mh(this._delegate,function b0(...i){return Bd._create("endBefore",i,!1)}(...e)))}catch(n){throw sl(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _l(this.firestore,Mh(this._delegate,function D0(...i){return Bd._create("endAt",i,!0)}(...e)))}catch(n){throw sl(n,"endAt()","Query.endAt()")}}isEqual(e){return jm(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function Xm(i){i=ji(i,Ra);const e=ji(i.firestore,go),n=Wo(e),s=new Eu(e);return function Fm(i,e){const n=new Ui;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){var s;return function(l,f,_){return(s=s||(0,Ee.Z)(function*(M,F,Q){try{const ce=yield Up(M,F,!0),xe=new gm(F,ce.ir),mt=xe.sc(ce.documents),Ct=xe.applyChanges(mt,!1);Q.resolve(Ct.snapshot)}catch(ce){const xe=lf(ce,`Failed to execute query '${F} against cache`);Q.reject(xe)}})).apply(this,arguments)}(yield Om(i),e,n)})),n.promise}(n,i._query).then(l=>new Vd(e,s,i,l))}(this._delegate):"server"===e?.source?function Pv(i){i=ji(i,Ra);const e=ji(i.firestore,go),n=Wo(e),s=new Eu(e);return mv(n,i._query,{source:"server"}).then(l=>new Vd(e,s,i,l))}(this._delegate):function gg(i){i=ji(i,Ra);const e=ji(i.firestore,go),n=Wo(e),s=new Eu(e);return w0(i._query),mv(n,i._query).then(l=>new Vd(e,s,i,l))}(this._delegate),n.then(s=>new _g(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const n=Xv(e),s=ly(e,l=>new _g(this.firestore,new Vd(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return mg(this._delegate,n,s)}withConverter(e){return new _l(this.firestore,this._delegate.withConverter(e?Ph.getInstance(this.firestore,e):null))}}class U0{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new wu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _g{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new _l(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new wu(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new U0(this._firestore,n))}forEach(e,n){this._delegate.forEach(s=>{e.call(n,new wu(this._firestore,s))})}isEqual(e){return Ov(this._delegate,e._delegate)}}class bf extends _l{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new uc(this.firestore,e):null}doc(e){try{return new uc(this.firestore,void 0===e?lg(this._delegate):lg(this._delegate,e))}catch(n){throw sl(n,"doc()","CollectionReference.doc()")}}add(e){return function Jm(i,e){const n=ji(i.firestore,go),s=lg(i),l=fg(i.converter,e);return xh(n,[mf(Oa(i.firestore),"addDoc",s._key,l,null!==i.converter,{}).toMutation(s._key,ui.exists(!1))]).then(()=>s)}(this._delegate,e).then(n=>new uc(this.firestore,n))}isEqual(e){return wv(this._delegate,e._delegate)}withConverter(e){return new bf(this.firestore,this._delegate.withConverter(e?Ph.getInstance(this.firestore,e):null))}}function Ud(i){return ji(i,no)}class Jv{constructor(...e){this._delegate=new cc(...e)}static documentId(){return new Jv(Li.keyField().canonicalString())}isEqual(e){return(e=(0,be.m9)(e))instanceof cc&&this._delegate._internalPath.isEqual(e._internalPath)}}class jd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function zv(){return new Pd("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new jd(e)}static delete(){const e=function Hv(){return new _u("deleteField")}();return e._methodName="FieldValue.delete",new jd(e)}static arrayUnion(...e){const n=function Gv(...i){return new yf("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new jd(n)}static arrayRemove(...e){const n=function Wv(...i){return new vf("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new jd(n)}static increment(e){const n=function qv(i){return new _f("increment",i)}(e);return n._methodName="FieldValue.increment",new jd(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cy={Firestore:Qv,GeoPoint:pf,Timestamp:Ri,Blob:Oh,Transaction:ra,WriteBatch:ay,DocumentReference:uc,DocumentSnapshot:Cf,Query:_l,QueryDocumentSnapshot:wu,QuerySnapshot:_g,CollectionReference:bf,FieldPath:Jv,FieldValue:jd,setLogLevel:function V0(i){!function Ce(i){U.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function j0(i){(function Cu(i,e){i.INTERNAL.registerComponent(new Ve.wA("firestore-compat",n=>{const s=n.getProvider("app-compat").getImmediate(),l=n.getProvider("firestore").getImmediate();return e(s,l)},"PUBLIC").setServiceProps(Object.assign({},cy)))})(i,(e,n)=>new Qv(e,n,new $0)),i.registerVersion("@firebase/firestore-compat","0.3.12")}(De.Z);var Hd=L(6796),bu=L(14),jc=L(120);function uy(i,e){return function Hc(i,e=v.z){return new ne.y(n=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},n)}):s=i.onSnapshot({includeMetadataChanges:!0},n),()=>{s?.()}})}(i,e)}function dy(i,e){return uy(i,e).pipe((0,ge.U)(n=>({payload:n,type:"query"})))}function Ig(i,e){return dy(i,e).pipe((0,Ie.O)(void 0),ye(),(0,ge.U)(([n,s])=>{const l=s.payload.docChanges(),f=l.map(_=>({type:_.type,payload:_}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((_,M)=>{const F=l.find(ce=>ce.doc.ref.isEqual(_.ref)),Q=n?.payload.docs.find(ce=>ce.ref.isEqual(_.ref));F&&JSON.stringify(F.doc.metadata)===JSON.stringify(_.metadata)||!F&&Q&&JSON.stringify(Q.metadata)===JSON.stringify(_.metadata)||f.push({type:"modified",payload:{oldIndex:M,newIndex:M,type:"modified",doc:_}})}),f}))}function t_(i,e,n){return Ig(i,n).pipe((0,Me.R)((s,l)=>function H0(i,e,n){return e.forEach(s=>{n.indexOf(s.type)>-1&&(i=function hp(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return dp(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return dp(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dp(i,e.oldIndex,1)}return i}(i,s))}),i}(s,l.map(f=>f.payload),e),[]),(0,Ge.x)(),(0,ge.U)(s=>s.map(l=>({type:l.type,payload:l}))))}function dp(i,e,n,...s){const l=i.slice();return l.splice(e,n,...s),l}function n_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class hy{constructor(e,n,s){this.ref=e,this.query=n,this.afs=s}stateChanges(e){let n=Ig(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,ge.U)(s=>s.filter(l=>e.indexOf(l.type)>-1)))),n.pipe((0,Ie.O)(void 0),ye(),(0,ze.h)(([s,l])=>l.length>0||!s),(0,ge.U)(([s,l])=>l),Pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Me.R)((n,s)=>[...n,...s],[]))}snapshotChanges(e){const n=n_(e);return t_(this.query,n,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return dy(this.query,this.afs.schedulers.outsideAngular).pipe((0,ge.U)(n=>n.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Pe.iC)}get(e){return(0,he.D)(this.query.get(e)).pipe(Pe.iC)}add(e){return this.ref.add(e)}doc(e){return new r_(this.ref.doc(e),this.afs)}}class r_{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const s=this.ref.collection(e),{ref:l,query:f}=gy(s,n);return new hy(l,f,this.afs)}snapshotChanges(){return function e_(i,e){return uy(i,e).pipe((0,Ie.O)(void 0),ye(),(0,ge.U)(([n,s])=>s.exists?n?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ge.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,he.D)(this.ref.get(e)).pipe(Pe.iC)}}class z0{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Ig(this.query,this.afs.schedulers.outsideAngular).pipe((0,ge.U)(n=>n.filter(s=>e.indexOf(s.type)>-1)),(0,ze.h)(n=>n.length>0),Pe.iC):Ig(this.query,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Me.R)((n,s)=>[...n,...s],[]))}snapshotChanges(e){const n=n_(e);return t_(this.query,n,this.afs.schedulers.outsideAngular).pipe(Pe.iC)}valueChanges(e={}){return dy(this.query,this.afs.schedulers.outsideAngular).pipe((0,ge.U)(s=>s.payload.docs.map(l=>e.idField?Object.assign({[e.idField]:l.id},l.data()):l.data())),Pe.iC)}get(e){return(0,he.D)(this.query.get(e)).pipe(Pe.iC)}}const fy=new I.OlP("angularfire2.enableFirestorePersistence"),py=new I.OlP("angularfire2.firestore.persistenceSettings"),Eg=new I.OlP("angularfire2.firestore.settings"),G0=new I.OlP("angularfire2.firestore.use-emulator");function gy(i,e=(n=>n)){return{query:e(i),ref:i}}let my=(()=>{class i{constructor(n,s,l,f,_,M,F,Q,ce,xe,mt,Ct,pn,Fn,Zn,Jr,hi){this.schedulers=F;const Ar=(0,nt.on)(n,M,s),fi=ce;xe&&(0,Hd.nw)(Ar,M,mt,pn,Fn,Zn,Ct,Jr),[this.firestore,this.persistenceEnabled$]=(0,nt.cc)(`${Ar.name}.firestore`,"AngularFirestore",Ar.name,()=>{const Hi=M.runOutsideAngular(()=>Ar.firestore());if(f&&Hi.settings(f),fi&&Hi.useEmulator(...fi),l&&!(0,Ze.PM)(_)){const ro=()=>{try{return(0,he.D)(Hi.enablePersistence(Q||void 0).then(()=>!0,()=>!1))}catch(Ya){return typeof console<"u"&&console.warn(Ya),(0,ke.of)(!1)}};return[Hi,M.runOutsideAngular(ro)]}return[Hi,(0,ke.of)(!1)]},[f,fi,l])}collection(n,s){let l;l="string"==typeof n?this.firestore.collection(n):n;const{ref:f,query:_}=gy(l,s),M=this.schedulers.ngZone.run(()=>f);return new hy(M,_,this)}collectionGroup(n,s){const l=s||(_=>_),f=this.firestore.collectionGroup(n);return new z0(l(f),this)}doc(n){let s;s="string"==typeof n?this.firestore.doc(n):n;const l=this.schedulers.ngZone.run(()=>s);return new r_(l,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(n){return new(n||i)(I.LFG(nt.Dh),I.LFG(nt.xv,8),I.LFG(fy,8),I.LFG(Eg,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(Pe.HU),I.LFG(py,8),I.LFG(G0,8),I.LFG(Hd.zQ,8),I.LFG(Hd.Qv,8),I.LFG(Hd.L6,8),I.LFG(Hd._Q,8),I.LFG(Hd.rT,8),I.LFG(Hd.lh,8),I.LFG(Hd.f7,8),I.LFG(bu.nm,8))},i.\u0275prov=I.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),i_=(()=>{class i{constructor(){jc.Z.registerVersion("angularfire",Pe.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:fy,useValue:!0},{provide:py,useValue:n}]}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=I.oAB({type:i}),i.\u0275inj=I.cJS({providers:[my]}),i})()},6304:(wn,gt,L)=>{"use strict";L.d(gt,{Dh:()=>qe,GT:()=>Pe,cc:()=>ze,hO:()=>Ge,on:()=>ye,pX:()=>ke,xv:()=>Je});var I=L(5879),v=L(120),ne=L(2793);wn=L.hmd(wn);const he=["ngOnDestroy"],ke=(De,Ee,yt,Ve={})=>new Proxy(De,{get:(rt,be)=>yt.runOutsideAngular(()=>{var Xe;if(De[be])return!(null===(Xe=Ve?.spy)||void 0===Xe)&&Xe.get&&Ve.spy.get(be,De[be]),De[be];if(he.indexOf(be)>-1)return()=>{};const Fe=Ee.toPromise().then(fe=>{const at=fe&&fe[be];return"function"==typeof at?at.bind(fe):at&&at.then?at.then(Ue=>yt.run(()=>Ue)):yt.run(()=>at)});return new Proxy(()=>{},{get:(fe,at)=>Fe[at],apply:(fe,at,Ue)=>Fe.then(zt=>{var en;const Xt=zt&&zt(...Ue);return!(null===(en=Ve?.spy)||void 0===en)&&en.apply&&Ve.spy.apply(be,Ue,Xt),Xt})})})}),Pe=(De,Ee)=>{Ee.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(Ve=>{Object.defineProperty(De.prototype,Ve,Object.getOwnPropertyDescriptor(yt.prototype||yt,Ve))})})};class Ie{constructor(Ee){return Ee}}const qe=new I.OlP("angularfire2.app.options"),Je=new I.OlP("angularfire2.app.name");function ye(De,Ee,yt){const rt="object"==typeof yt&&yt||{};rt.name=rt.name||"string"==typeof yt&&yt||"[DEFAULT]";const Xe=v.Z.apps.filter(Fe=>Fe&&Fe.name===rt.name)[0]||Ee.runOutsideAngular(()=>v.Z.initializeApp(De,rt));try{JSON.stringify(De)!==JSON.stringify(Xe.options)&&ge("error",`${Xe.name} Firebase App already initialized with different options${wn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(Xe)}const ge=(De,...Ee)=>{(0,I.X6Q)()&&typeof console<"u"&&console[De](...Ee)},Me={provide:Ie,useFactory:ye,deps:[qe,I.R0b,[new I.FiY,Je]]};let Ge=(()=>{class De{constructor(yt){v.Z.registerVersion("angularfire",ne.q4.full,"core"),v.Z.registerVersion("angularfire",ne.q4.full,"app-compat"),v.Z.registerVersion("angular",I.q4F.full,yt.toString())}static initializeApp(yt,Ve){return{ngModule:De,providers:[{provide:qe,useValue:yt},{provide:Je,useValue:Ve}]}}}return De.\u0275fac=function(yt){return new(yt||De)(I.LFG(I.Lbi))},De.\u0275mod=I.oAB({type:De}),De.\u0275inj=I.cJS({providers:[Me]}),De})();function ze(De,Ee,yt,Ve,rt){const[,be,Xe]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===De)||[];if(be)return function nt(De,Ee){try{return De.toString()===Ee.toString()}catch{return De===Ee}}(rt,Xe)||(Ye("error",`${Ee} was already initialized on the ${yt} Firebase App with different settings.${Ze?" You may need to reload as Firebase is not HMR aware.":""}`),Ye("warn",{is:rt,was:Xe})),be;{const Fe=Ve();return globalThis.\u0275AngularfireInstanceCache.push([De,Fe,rt]),Fe}}const Ze=!!wn.hot,Ye=(De,...Ee)=>{(0,I.X6Q)()&&typeof console<"u"&&console[De](...Ee)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(wn,gt,L)=>{"use strict";L.d(gt,{q4:()=>Va,iC:()=>Ru,HU:()=>Zc,vb:()=>za,JM:()=>nl});var I=L(5879),v=L(4097),ne=L(5861),he=L(4303),ke=L(9058),Pe=L(4537),Ie=L(7879);const qe=(B,H)=>H.some(X=>B instanceof X);let Je,ye;const Ge=new WeakMap,ze=new WeakMap,nt=new WeakMap,Ze=new WeakMap,Ye=new WeakMap;let yt={get(B,H,X){if(B instanceof IDBTransaction){if("done"===H)return ze.get(B);if("objectStoreNames"===H)return B.objectStoreNames||nt.get(B);if("store"===H)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Xe(B[H])},set:(B,H,X)=>(B[H]=X,!0),has:(B,H)=>B instanceof IDBTransaction&&("done"===H||"store"===H)||H in B};function be(B){return"function"==typeof B?function rt(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...H){return B.apply(Fe(this),H),Xe(Ge.get(this))}:function(...H){return Xe(B.apply(Fe(this),H))}:function(H,...X){const ve=B.call(Fe(this),H,...X);return nt.set(ve,H.sort?H.sort():[H]),Xe(ve)}}(B):(B instanceof IDBTransaction&&function Ee(B){if(ze.has(B))return;const H=new Promise((X,ve)=>{const Qe=()=>{B.removeEventListener("complete",vt),B.removeEventListener("error",Vt),B.removeEventListener("abort",Vt)},vt=()=>{X(),Qe()},Vt=()=>{ve(B.error||new DOMException("AbortError","AbortError")),Qe()};B.addEventListener("complete",vt),B.addEventListener("error",Vt),B.addEventListener("abort",Vt)});ze.set(B,H)}(B),qe(B,function ge(){return Je||(Je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,yt):B)}function Xe(B){if(B instanceof IDBRequest)return function De(B){const H=new Promise((X,ve)=>{const Qe=()=>{B.removeEventListener("success",vt),B.removeEventListener("error",Vt)},vt=()=>{X(Xe(B.result)),Qe()},Vt=()=>{ve(B.error),Qe()};B.addEventListener("success",vt),B.addEventListener("error",Vt)});return H.then(X=>{X instanceof IDBCursor&&Ge.set(X,B)}).catch(()=>{}),Ye.set(H,B),H}(B);if(Ze.has(B))return Ze.get(B);const H=be(B);return H!==B&&(Ze.set(B,H),Ye.set(H,B)),H}const Fe=B=>Ye.get(B),Ue=["get","getKey","getAll","getAllKeys","count"],zt=["put","add","delete","clear"],en=new Map;function Xt(B,H){var X;if(!(B instanceof IDBDatabase)||H in B||"string"!=typeof H)return;if(en.get(H))return en.get(H);const ve=H.replace(/FromIndex$/,""),Qe=H!==ve,vt=zt.includes(ve);if(!(ve in(Qe?IDBIndex:IDBObjectStore).prototype)||!vt&&!Ue.includes(ve))return;const Vt=function(Dn){return(X=X||(0,ne.Z)(function*(nr,...cr){const tr=this.transaction(nr,vt?"readwrite":"readonly");let si=tr.store;return Qe&&(si=si.index(cr.shift())),(yield Promise.all([si[ve](...cr),vt&&tr.done]))[0]})).apply(this,arguments)};return en.set(H,Vt),Vt}var mn,de,gn,_t,pe,Se,$e,je,pt,ht,Bt,Ft,Qt,st,Vn,Bn;!function Ve(B){yt=B(yt)}(B=>({...B,get:(H,X,ve)=>Xt(H,X)||B.get(H,X,ve),has:(H,X)=>!!Xt(H,X)||B.has(H,X)}));const Rt="@firebase/installations",dt="0.6.4",Wt=1e4,Tn=`w:${dt}`,En="FIS_v2",vn="https://firebaseinstallations.googleapis.com/v1",Xn=36e5,Pn=new ke.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Un(B){return B instanceof ke.ZR&&B.code.includes("request-failed")}function pr({projectId:B}){return`${vn}/projects/${B}/installations`}function Lr(B){return{token:B.token,requestStatus:2,expiresIn:Cr(B.expiresIn),creationTime:Date.now()}}function Br(B,H){return(mn=mn||(0,ne.Z)(function*(X,ve){const vt=(yield ve.json()).error;return Pn.create("request-failed",{requestName:X,serverCode:vt.code,serverMessage:vt.message,serverStatus:vt.status})})).apply(this,arguments)}function Kt({apiKey:B}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":B})}function an(B){return(de=de||(0,ne.Z)(function*(H){const X=yield H();return X.status>=500&&X.status<600?H():X})).apply(this,arguments)}function Cr(B){return Number(B.replace("s","000"))}function bi(B){return new Promise(H=>{setTimeout(H,B)})}const Di=/^[cdef][\w-]{21}$/,_i="";function Ii(){try{const B=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(B),B[0]=112+B[0]%16;const X=function jt(B){return function Zi(B){return btoa(String.fromCharCode(...B)).replace(/\+/g,"-").replace(/\//g,"_")}(B).substr(0,22)}(B);return Di.test(X)?X:_i}catch{return _i}}function ot(B){return`${B.appName}!${B.appId}`}const Pt=new Map;function sn(B,H){const X=ot(B);br(X,H),function Ke(B,H){const X=function te(){return!re&&"BroadcastChannel"in self&&(re=new BroadcastChannel("[Firebase] FID Change"),re.onmessage=B=>{br(B.data.key,B.data.fid)}),re}();X&&X.postMessage({key:B,fid:H}),function Ne(){0===Pt.size&&re&&(re.close(),re=null)}()}(X,H)}function br(B,H){const X=Pt.get(B);if(X)for(const ve of X)ve(H)}let re=null;const ue="firebase-installations-database",lt=1,St="firebase-installations-store";let nn=null;function zn(){return nn||(nn=function fe(B,H,{blocked:X,upgrade:ve,blocking:Qe,terminated:vt}={}){const Vt=indexedDB.open(B,H),Yt=Xe(Vt);return ve&&Vt.addEventListener("upgradeneeded",Dn=>{ve(Xe(Vt.result),Dn.oldVersion,Dn.newVersion,Xe(Vt.transaction))}),X&&Vt.addEventListener("blocked",()=>X()),Yt.then(Dn=>{vt&&Dn.addEventListener("close",()=>vt()),Qe&&Dn.addEventListener("versionchange",()=>Qe())}).catch(()=>{}),Yt}(ue,lt,{upgrade:(B,H)=>{0===H&&B.createObjectStore(St)}})),nn}function yn(B,H){return(_t=_t||(0,ne.Z)(function*(X,ve){const Qe=ot(X),Vt=(yield zn()).transaction(St,"readwrite"),Yt=Vt.objectStore(St),Dn=yield Yt.get(Qe);return yield Yt.put(ve,Qe),yield Vt.done,(!Dn||Dn.fid!==ve.fid)&&sn(X,ve.fid),ve})).apply(this,arguments)}function lr(B){return(pe=pe||(0,ne.Z)(function*(H){const X=ot(H),Qe=(yield zn()).transaction(St,"readwrite");yield Qe.objectStore(St).delete(X),yield Qe.done})).apply(this,arguments)}function er(B,H){return(Se=Se||(0,ne.Z)(function*(X,ve){const Qe=ot(X),Vt=(yield zn()).transaction(St,"readwrite"),Yt=Vt.objectStore(St),Dn=yield Yt.get(Qe),nr=ve(Dn);return void 0===nr?yield Yt.delete(Qe):yield Yt.put(nr,Qe),yield Vt.done,nr&&(!Dn||Dn.fid!==nr.fid)&&sn(X,nr.fid),nr})).apply(this,arguments)}function Zr(B){return($e=$e||(0,ne.Z)(function*(H){let X;const ve=yield er(H.appConfig,Qe=>{const vt=function ei(B){return oi(B||{fid:Ii(),registrationStatus:0})}(Qe),Vt=function Is(B,H){if(0===H.registrationStatus){if(!navigator.onLine)return{installationEntry:H,registrationPromise:Promise.reject(Pn.create("app-offline"))};const X={fid:H.fid,registrationStatus:1,registrationTime:Date.now()},ve=function Fs(B,H){return(je=je||(0,ne.Z)(function*(X,ve){try{const Qe=yield function or(B,H){return(gn=gn||(0,ne.Z)(function*({appConfig:X,heartbeatServiceProvider:ve},{fid:Qe}){const vt=pr(X),Vt=Kt(X),Yt=ve.getImmediate({optional:!0});if(Yt){const tr=yield Yt.getHeartbeatsHeader();tr&&Vt.append("x-firebase-client",tr)}const nr={method:"POST",headers:Vt,body:JSON.stringify({fid:Qe,authVersion:En,appId:X.appId,sdkVersion:Tn})},cr=yield an(()=>fetch(vt,nr));if(cr.ok){const tr=yield cr.json();return{fid:tr.fid||Qe,registrationStatus:2,refreshToken:tr.refreshToken,authToken:Lr(tr.authToken)}}throw yield Br("Create Installation",cr)})).apply(this,arguments)}(X,ve);return yn(X.appConfig,Qe)}catch(Qe){throw Un(Qe)&&409===Qe.customData.serverCode?yield lr(X.appConfig):yield yn(X.appConfig,{fid:ve.fid,registrationStatus:0}),Qe}})).apply(this,arguments)}(B,X);return{installationEntry:X,registrationPromise:ve}}return 1===H.registrationStatus?{installationEntry:H,registrationPromise:Bi(B)}:{installationEntry:H}}(H,vt);return X=Vt.registrationPromise,Vt.installationEntry});return ve.fid===_i?{installationEntry:yield X}:{installationEntry:ve,registrationPromise:X}})).apply(this,arguments)}function Bi(B){return(pt=pt||(0,ne.Z)(function*(H){let X=yield zi(H.appConfig);for(;1===X.registrationStatus;)yield bi(100),X=yield zi(H.appConfig);if(0===X.registrationStatus){const{installationEntry:ve,registrationPromise:Qe}=yield Zr(H);return Qe||ve}return X})).apply(this,arguments)}function zi(B){return er(B,H=>{if(!H)throw Pn.create("installation-not-found");return oi(H)})}function oi(B){return function Pi(B){return 1===B.registrationStatus&&B.registrationTime+Wt<Date.now()}(B)?{fid:B.fid,registrationStatus:0}:B}function ur(B,H){return(ht=ht||(0,ne.Z)(function*({appConfig:X,heartbeatServiceProvider:ve},Qe){const vt=function Hr(B,{fid:H}){return`${pr(B)}/${H}/authTokens:generate`}(X,Qe),Vt=function hr(B,{refreshToken:H}){const X=Kt(B);return X.append("Authorization",function _s(B){return`${En} ${B}`}(H)),X}(X,Qe),Yt=ve.getImmediate({optional:!0});if(Yt){const tr=yield Yt.getHeartbeatsHeader();tr&&Vt.append("x-firebase-client",tr)}const nr={method:"POST",headers:Vt,body:JSON.stringify({installation:{sdkVersion:Tn,appId:X.appId}})},cr=yield an(()=>fetch(vt,nr));if(cr.ok)return Lr(yield cr.json());throw yield Br("Generate Auth Token",cr)})).apply(this,arguments)}function qr(B){return(Bt=Bt||(0,ne.Z)(function*(H,X=!1){let ve;const Qe=yield er(H.appConfig,Vt=>{if(!on(Vt))throw Pn.create("not-registered");const Yt=Vt.authToken;if(!X&&function vi(B){return 2===B.requestStatus&&!function Ni(B){const H=Date.now();return H<B.creationTime||B.creationTime+B.expiresIn<H+Xn}(B)}(Yt))return Vt;if(1===Yt.requestStatus)return ve=function Ji(B,H){return(Ft=Ft||(0,ne.Z)(function*(X,ve){let Qe=yield Mi(X.appConfig);for(;1===Qe.authToken.requestStatus;)yield bi(100),Qe=yield Mi(X.appConfig);const vt=Qe.authToken;return 0===vt.requestStatus?qr(X,ve):vt})).apply(this,arguments)}(H,X),Vt;{if(!navigator.onLine)throw Pn.create("app-offline");const Dn=function es(B){const H={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},B),{authToken:H})}(Vt);return ve=function ti(B,H){return(Qt=Qt||(0,ne.Z)(function*(X,ve){try{const Qe=yield ur(X,ve),vt=Object.assign(Object.assign({},ve),{authToken:Qe});return yield yn(X.appConfig,vt),Qe}catch(Qe){if(!Un(Qe)||401!==Qe.customData.serverCode&&404!==Qe.customData.serverCode){const vt=Object.assign(Object.assign({},ve),{authToken:{requestStatus:0}});yield yn(X.appConfig,vt)}else yield lr(X.appConfig);throw Qe}})).apply(this,arguments)}(H,Dn),Dn}});return ve?yield ve:Qe.authToken})).apply(this,arguments)}function Mi(B){return er(B,H=>{if(!on(H))throw Pn.create("not-registered");return function Kr(B){return 1===B.requestStatus&&B.requestTime+Wt<Date.now()}(H.authToken)?Object.assign(Object.assign({},H),{authToken:{requestStatus:0}}):H})}function on(B){return void 0!==B&&2===B.registrationStatus}function Dr(B){return Pn.create("missing-app-config-values",{valueName:B})}const as="installations",Cn=B=>{const H=B.getProvider("app").getImmediate(),X=function Ir(B){if(!B||!B.options)throw Dr("App Configuration");if(!B.name)throw Dr("App Name");const H=["projectId","apiKey","appId"];for(const X of H)if(!B.options[X])throw Dr(X);return{appName:B.name,projectId:B.options.projectId,apiKey:B.options.apiKey,appId:B.options.appId}}(H);return{app:H,appConfig:X,heartbeatServiceProvider:(0,he.qX)(H,"heartbeat"),_delete:()=>Promise.resolve()}},J=B=>{const H=B.getProvider("app").getImmediate(),X=(0,he.qX)(H,as).getImmediate();return{getId:()=>function $r(B){return(st=st||(0,ne.Z)(function*(H){const X=H,{installationEntry:ve,registrationPromise:Qe}=yield Zr(X);return Qe?Qe.catch(console.error):qr(X).catch(console.error),ve.fid})).apply(this,arguments)}(X),getToken:Qe=>function Bs(B){return(Vn=Vn||(0,ne.Z)(function*(H,X=!1){const ve=H;return yield function Ys(B){return(Bn=Bn||(0,ne.Z)(function*(H){const{registrationPromise:X}=yield Zr(H);X&&(yield X)})).apply(this,arguments)}(ve),(yield qr(ve,X)).token})).apply(this,arguments)}(X,Qe)}};var It;(function _e(){(0,he.Xd)(new Pe.wA(as,Cn,"PUBLIC")),(0,he.Xd)(new Pe.wA("installations-internal",J,"PRIVATE"))})(),(0,he.KN)(Rt,dt),(0,he.KN)(Rt,dt,"esm2017");const qt="@firebase/remote-config",We=new ke.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vr{constructor(H,X,ve,Qe){this.client=H,this.storage=X,this.storageCache=ve,this.logger=Qe}isCachedDataFresh(H,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ve=Date.now()-X,Qe=ve<=H;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ve}. Cache max age millis (minimumFetchIntervalMillis setting): ${H}. Is cache hit: ${Qe}.`),Qe}fetch(H){var X=this;return(0,ne.Z)(function*(){const[ve,Qe]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if(Qe&&X.isCachedDataFresh(H.cacheMaxAgeMillis,ve))return Qe;H.eTag=Qe&&Qe.eTag;const vt=yield X.client.fetch(H),Vt=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===vt.status&&Vt.push(X.storage.setLastSuccessfulFetchResponse(vt)),yield Promise.all(Vt),vt})()}}function Vs(B=navigator){return B.languages&&B.languages[0]||B.language}class Ti{constructor(H,X,ve,Qe,vt,Vt){this.firebaseInstallations=H,this.sdkVersion=X,this.namespace=ve,this.projectId=Qe,this.apiKey=vt,this.appId=Vt}fetch(H){var X=this;return(0,ne.Z)(function*(){const[ve,Qe]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),Vt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,Yt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":H.eTag||"*"},Dn={sdk_version:X.sdkVersion,app_instance_id:ve,app_instance_id_token:Qe,app_id:X.appId,language_code:Vs()},nr={method:"POST",headers:Yt,body:JSON.stringify(Dn)},cr=fetch(Vt,nr),tr=new Promise((dr,yi)=>{H.signal.addEventListener(()=>{const Ws=new Error("The operation was aborted.");Ws.name="AbortError",yi(Ws)})});let si;try{yield Promise.race([cr,tr]),si=yield cr}catch(dr){let yi="fetch-client-network";throw"AbortError"===dr?.name&&(yi="fetch-timeout"),We.create(yi,{originalErrorMessage:dr?.message})}let Ki=si.status;const ms=si.headers.get("ETag")||void 0;let gr,Js;if(200===si.status){let dr;try{dr=yield si.json()}catch(yi){throw We.create("fetch-client-parse",{originalErrorMessage:yi?.message})}gr=dr.entries,Js=dr.state}if("INSTANCE_STATE_UNSPECIFIED"===Js?Ki=500:"NO_CHANGE"===Js?Ki=304:("NO_TEMPLATE"===Js||"EMPTY_CONFIG"===Js)&&(gr={}),304!==Ki&&200!==Ki)throw We.create("fetch-status",{httpStatus:Ki});return{status:Ki,eTag:ms,config:gr}})()}}class Es{constructor(H,X){this.client=H,this.storage=X}fetch(H){var X=this;return(0,ne.Z)(function*(){const ve=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch(H,ve)})()}attemptFetch(H,{throttleEndTimeMillis:X,backoffCount:ve}){var Qe=this;return(0,ne.Z)(function*(){yield function ls(B,H){return new Promise((X,ve)=>{const Qe=Math.max(H-Date.now(),0),vt=setTimeout(X,Qe);B.addEventListener(()=>{clearTimeout(vt),ve(We.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(H.signal,X);try{const vt=yield Qe.client.fetch(H);return yield Qe.storage.deleteThrottleMetadata(),vt}catch(vt){if(!function Ci(B){if(!(B instanceof ke.ZR&&B.customData))return!1;const H=Number(B.customData.httpStatus);return 429===H||500===H||503===H||504===H}(vt))throw vt;const Vt={throttleEndTimeMillis:Date.now()+(0,ke.$s)(ve),backoffCount:ve+1};return yield Qe.storage.setThrottleMetadata(Vt),Qe.attemptFetch(H,Vt)}})()}}class xi{constructor(H,X,ve,Qe,vt){this.app=H,this._client=X,this._storageCache=ve,this._storage=Qe,this._logger=vt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function io(B,H){const X=B.target.error||void 0;return We.create(H,{originalErrorMessage:X&&X?.message})}const Wi="app_namespace_store";class fs{constructor(H,X,ve,Qe=function xo(){return new Promise((B,H)=>{try{const X=indexedDB.open("firebase_remote_config",1);X.onerror=ve=>{H(io(ve,"storage-open"))},X.onsuccess=ve=>{B(ve.target.result)},X.onupgradeneeded=ve=>{0===ve.oldVersion&&ve.target.result.createObjectStore(Wi,{keyPath:"compositeKey"})}}catch(X){H(We.create("storage-open",{originalErrorMessage:X?.message}))}})}()){this.appId=H,this.appName=X,this.namespace=ve,this.openDbPromise=Qe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(H){return this.set("last_fetch_status",H)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(H){return this.set("last_successful_fetch_timestamp_millis",H)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(H){return this.set("last_successful_fetch_response",H)}getActiveConfig(){return this.get("active_config")}setActiveConfig(H){return this.set("active_config",H)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(H){return this.set("active_config_etag",H)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(H){return this.set("throttle_metadata",H)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(H){var X=this;return(0,ne.Z)(function*(){const ve=yield X.openDbPromise;return new Promise((Qe,vt)=>{const Yt=ve.transaction([Wi],"readonly").objectStore(Wi),Dn=X.createCompositeKey(H);try{const nr=Yt.get(Dn);nr.onerror=cr=>{vt(io(cr,"storage-get"))},nr.onsuccess=cr=>{const tr=cr.target.result;Qe(tr?tr.value:void 0)}}catch(nr){vt(We.create("storage-get",{originalErrorMessage:nr?.message}))}})})()}set(H,X){var ve=this;return(0,ne.Z)(function*(){const Qe=yield ve.openDbPromise;return new Promise((vt,Vt)=>{const Dn=Qe.transaction([Wi],"readwrite").objectStore(Wi),nr=ve.createCompositeKey(H);try{const cr=Dn.put({compositeKey:nr,value:X});cr.onerror=tr=>{Vt(io(tr,"storage-set"))},cr.onsuccess=()=>{vt()}}catch(cr){Vt(We.create("storage-set",{originalErrorMessage:cr?.message}))}})})()}delete(H){var X=this;return(0,ne.Z)(function*(){const ve=yield X.openDbPromise;return new Promise((Qe,vt)=>{const Yt=ve.transaction([Wi],"readwrite").objectStore(Wi),Dn=X.createCompositeKey(H);try{const nr=Yt.delete(Dn);nr.onerror=cr=>{vt(io(cr,"storage-delete"))},nr.onsuccess=()=>{Qe()}}catch(nr){vt(We.create("storage-delete",{originalErrorMessage:nr?.message}))}})})()}createCompositeKey(H){return[this.appId,this.appName,this.namespace,H].join()}}class Us{constructor(H){this.storage=H}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var H=this;return(0,ne.Z)(function*(){const X=H.storage.getLastFetchStatus(),ve=H.storage.getLastSuccessfulFetchTimestampMillis(),Qe=H.storage.getActiveConfig(),vt=yield X;vt&&(H.lastFetchStatus=vt);const Vt=yield ve;Vt&&(H.lastSuccessfulFetchTimestampMillis=Vt);const Yt=yield Qe;Yt&&(H.activeConfig=Yt)})()}setLastFetchStatus(H){return this.lastFetchStatus=H,this.storage.setLastFetchStatus(H)}setLastSuccessfulFetchTimestampMillis(H){return this.lastSuccessfulFetchTimestampMillis=H,this.storage.setLastSuccessfulFetchTimestampMillis(H)}setActiveConfig(H){return this.activeConfig=H,this.storage.setActiveConfig(H)}}function Tr(){return(It=It||(0,ne.Z)(function*(){if(!(0,ke.hl)())return!1;try{return yield(0,ke.eu)()}catch{return!1}})).apply(this,arguments)}!function Ca(){(0,he.Xd)(new Pe.wA("remote-config",function B(H,{instanceIdentifier:X}){const ve=H.getProvider("app").getImmediate(),Qe=H.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw We.create("registration-window");if(!(0,ke.hl)())throw We.create("indexed-db-unavailable");const{projectId:vt,apiKey:Vt,appId:Yt}=ve.options;if(!vt)throw We.create("registration-project-id");if(!Vt)throw We.create("registration-api-key");if(!Yt)throw We.create("registration-app-id");const Dn=new fs(Yt,ve.name,X=X||"firebase"),nr=new Us(Dn),cr=new Ie.Yd(qt);cr.logLevel=Ie.in.ERROR;const tr=new Ti(Qe,he.Jn,X,vt,Vt,Yt),si=new Es(tr,Dn),Ki=new Vr(si,Dn,nr,cr),ms=new xi(ve,Ki,nr,Dn,cr);return function Ln(B){const H=(0,ke.m9)(B);H._initializePromise||(H._initializePromise=H._storageCache.loadFromStorage().then(()=>{H._isInitializationComplete=!0}))}(ms),ms},"PUBLIC").setMultipleInstances(!0)),(0,he.KN)(qt,"0.4.4"),(0,he.KN)(qt,"0.4.4","esm2017")}();const js=(B,H)=>H.some(X=>B instanceof X);let mo,kr;const Rs=new WeakMap,cs=new WeakMap,ri=new WeakMap,Xi=new WeakMap,Hs=new WeakMap;let us={get(B,H,X){if(B instanceof IDBTransaction){if("done"===H)return cs.get(B);if("objectStoreNames"===H)return B.objectStoreNames||ri.get(B);if("store"===H)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Cs(B[H])},set:(B,H,X)=>(B[H]=X,!0),has:(B,H)=>B instanceof IDBTransaction&&("done"===H||"store"===H)||H in B};function ws(B){return"function"==typeof B?function Io(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xs(){return kr||(kr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...H){return B.apply(rs(this),H),Cs(Rs.get(this))}:function(...H){return Cs(B.apply(rs(this),H))}:function(H,...X){const ve=B.call(rs(this),H,...X);return ri.set(ve,H.sort?H.sort():[H]),Cs(ve)}}(B):(B instanceof IDBTransaction&&function qi(B){if(cs.has(B))return;const H=new Promise((X,ve)=>{const Qe=()=>{B.removeEventListener("complete",vt),B.removeEventListener("error",Vt),B.removeEventListener("abort",Vt)},vt=()=>{X(),Qe()},Vt=()=>{ve(B.error||new DOMException("AbortError","AbortError")),Qe()};B.addEventListener("complete",vt),B.addEventListener("error",Vt),B.addEventListener("abort",Vt)});cs.set(B,H)}(B),js(B,function ps(){return mo||(mo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,us):B)}function Cs(B){if(B instanceof IDBRequest)return function ns(B){const H=new Promise((X,ve)=>{const Qe=()=>{B.removeEventListener("success",vt),B.removeEventListener("error",Vt)},vt=()=>{X(Cs(B.result)),Qe()},Vt=()=>{ve(B.error),Qe()};B.addEventListener("success",vt),B.addEventListener("error",Vt)});return H.then(X=>{X instanceof IDBCursor&&Rs.set(X,B)}).catch(()=>{}),Hs.set(H,B),H}(B);if(Xi.has(B))return Xi.get(B);const H=ws(B);return H!==B&&(Xi.set(B,H),Hs.set(H,B)),H}const rs=B=>Hs.get(B);function so(B,H,{blocked:X,upgrade:ve,blocking:Qe,terminated:vt}={}){const Vt=indexedDB.open(B,H),Yt=Cs(Vt);return ve&&Vt.addEventListener("upgradeneeded",Dn=>{ve(Cs(Vt.result),Dn.oldVersion,Dn.newVersion,Cs(Vt.transaction))}),X&&Vt.addEventListener("blocked",()=>X()),Yt.then(Dn=>{vt&&Dn.addEventListener("close",()=>vt()),Qe&&Dn.addEventListener("versionchange",()=>Qe())}).catch(()=>{}),Yt}function ol(B,{blocked:H}={}){const X=indexedDB.deleteDatabase(B);return H&&X.addEventListener("blocked",()=>H()),Cs(X).then(()=>{})}const qo=["get","getKey","getAll","getAllKeys","count"],mi=["put","add","delete","clear"],ia=new Map;function Pa(B,H){var X;if(!(B instanceof IDBDatabase)||H in B||"string"!=typeof H)return;if(ia.get(H))return ia.get(H);const ve=H.replace(/FromIndex$/,""),Qe=H!==ve,vt=mi.includes(ve);if(!(ve in(Qe?IDBIndex:IDBObjectStore).prototype)||!vt&&!qo.includes(ve))return;const Vt=function(Dn){return(X=X||(0,ne.Z)(function*(nr,...cr){const tr=this.transaction(nr,vt?"readwrite":"readonly");let si=tr.store;return Qe&&(si=si.index(cr.shift())),(yield Promise.all([si[ve](...cr),vt&&tr.done]))[0]})).apply(this,arguments)};return ia.set(H,Vt),Vt}var Eo,Ro,sa,wo,ci,Or,Gl,z,V,oe,Y,Te,fn,E,q,C,j,ae,Nt,jn;!function ds(B){us=B(us)}(B=>({...B,get:(H,X,ve)=>Pa(H,X)||B.get(H,X,ve),has:(H,X)=>!!Pa(H,X)||B.has(H,X)}));const pi="/firebase-messaging-sw.js",Gr="/firebase-cloud-messaging-push-scope",bs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ds="https://fcmregistrations.googleapis.com/v1",Lo="google.c.a.c_id",oo="google.c.a.c_l",oa="google.c.a.ts";var aa=function(B){return B.PUSH_RECEIVED="push-received",B.NOTIFICATION_CLICKED="notification-clicked",B}(aa||{});function Zs(B){const H=new Uint8Array(B);return btoa(String.fromCharCode(...H)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Il(B){const X=(B+"=".repeat((4-B.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ve=atob(X),Qe=new Uint8Array(ve.length);for(let vt=0;vt<ve.length;++vt)Qe[vt]=ve.charCodeAt(vt);return Qe}const Bo="fcm_token_details_db",Ts=5,yo="fcm_token_object_Store",ka="firebase-messaging-database",Za=1,ca="firebase-messaging-store";let ba=null;function Fa(){return ba||(ba=so(ka,Za,{upgrade:(B,H)=>{0===H&&B.createObjectStore(ca)}})),ba}function Oo(B){return(Ro=Ro||(0,ne.Z)(function*(H){const X=Qa(H),Qe=yield(yield Fa()).transaction(ca).objectStore(ca).get(X);if(Qe)return Qe;{const vt=yield function la(B){return(Eo=Eo||(0,ne.Z)(function*(H){var X;if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Yt=>Yt.name).includes(Bo))return null;let ve=null;return(yield so(Bo,Ts,{upgrade:function(Vt,Yt,Dn,nr){return(X=X||(0,ne.Z)(function*(cr,tr,si,Ki){var ms;if(tr<2||!cr.objectStoreNames.contains(yo))return;const gr=Ki.objectStore(yo),Js=yield gr.index("fcmSenderId").get(H);if(yield gr.clear(),Js)if(2===tr){const dr=Js;if(!dr.auth||!dr.p256dh||!dr.endpoint)return;ve={token:dr.fcmToken,createTime:null!==(ms=dr.createTime)&&void 0!==ms?ms:Date.now(),subscriptionOptions:{auth:dr.auth,p256dh:dr.p256dh,endpoint:dr.endpoint,swScope:dr.swScope,vapidKey:"string"==typeof dr.vapidKey?dr.vapidKey:Zs(dr.vapidKey)}}}else if(3===tr){const dr=Js;ve={token:dr.fcmToken,createTime:dr.createTime,subscriptionOptions:{auth:Zs(dr.auth),p256dh:Zs(dr.p256dh),endpoint:dr.endpoint,swScope:dr.swScope,vapidKey:Zs(dr.vapidKey)}}}else if(4===tr){const dr=Js;ve={token:dr.fcmToken,createTime:dr.createTime,subscriptionOptions:{auth:Zs(dr.auth),p256dh:Zs(dr.p256dh),endpoint:dr.endpoint,swScope:dr.swScope,vapidKey:Zs(dr.vapidKey)}}}})).apply(this,arguments)}})).close(),yield ol(Bo),yield ol("fcm_vapid_details_db"),yield ol("undefined"),function al(B){if(!B||!B.subscriptionOptions)return!1;const{subscriptionOptions:H}=B;return"number"==typeof B.createTime&&B.createTime>0&&"string"==typeof B.token&&B.token.length>0&&"string"==typeof H.auth&&H.auth.length>0&&"string"==typeof H.p256dh&&H.p256dh.length>0&&"string"==typeof H.endpoint&&H.endpoint.length>0&&"string"==typeof H.swScope&&H.swScope.length>0&&"string"==typeof H.vapidKey&&H.vapidKey.length>0}(ve)?ve:null})).apply(this,arguments)}(H.appConfig.senderId);if(vt)return yield Os(H,vt),vt}})).apply(this,arguments)}function Os(B,H){return(sa=sa||(0,ne.Z)(function*(X,ve){const Qe=Qa(X),Vt=(yield Fa()).transaction(ca,"readwrite");return yield Vt.objectStore(ca).put(ve,Qe),yield Vt.done,ve})).apply(this,arguments)}function Qa({appConfig:B}){return B.appId}const Ps=new ke.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function lo(B,H){return(ci=ci||(0,ne.Z)(function*(X,ve){const Qe=yield G(X),vt=we(ve),Vt={method:"POST",headers:Qe,body:JSON.stringify(vt)};let Yt;try{Yt=yield(yield fetch(A(X.appConfig),Vt)).json()}catch(Dn){throw Ps.create("token-subscribe-failed",{errorInfo:Dn?.toString()})}if(Yt.error)throw Ps.create("token-subscribe-failed",{errorInfo:Yt.error.message});if(!Yt.token)throw Ps.create("token-subscribe-no-token");return Yt.token})).apply(this,arguments)}function Yr(B,H){return(Gl=Gl||(0,ne.Z)(function*(X,ve){const vt={method:"DELETE",headers:yield G(X)};try{const Yt=yield(yield fetch(`${A(X.appConfig)}/${ve}`,vt)).json();if(Yt.error)throw Ps.create("token-unsubscribe-failed",{errorInfo:Yt.error.message})}catch(Vt){throw Ps.create("token-unsubscribe-failed",{errorInfo:Vt?.toString()})}})).apply(this,arguments)}function A({projectId:B}){return`${Ds}/projects/${B}/registrations`}function G(B){return(z=z||(0,ne.Z)(function*({appConfig:H,installations:X}){const ve=yield X.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":H.apiKey,"x-goog-firebase-installations-auth":`FIS ${ve}`})})).apply(this,arguments)}function we({p256dh:B,auth:H,endpoint:X,vapidKey:ve}){const Qe={web:{endpoint:X,auth:H,p256dh:B}};return ve!==bs&&(Qe.web.applicationPubKey=ve),Qe}const $=6048e5;function me(B){return(V=V||(0,ne.Z)(function*(H){const X=yield function xr(B,H){return(fn=fn||(0,ne.Z)(function*(X,ve){return(yield X.pushManager.getSubscription())||X.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Il(ve)})})).apply(this,arguments)}(H.swRegistration,H.vapidKey),ve={vapidKey:H.vapidKey,swScope:H.swRegistration.scope,endpoint:X.endpoint,auth:Zs(X.getKey("auth")),p256dh:Zs(X.getKey("p256dh"))},Qe=yield Oo(H.firebaseDependencies);if(Qe){if(function Pr(B,H){return H.vapidKey===B.vapidKey&&H.endpoint===B.endpoint&&H.auth===B.auth&&H.p256dh===B.p256dh}(Qe.subscriptionOptions,ve))return Date.now()>=Qe.createTime+$?function $t(B,H){return(Y=Y||(0,ne.Z)(function*(X,ve){try{const Qe=yield function co(B,H){return(Or=Or||(0,ne.Z)(function*(X,ve){const Qe=yield G(X),vt=we(ve.subscriptionOptions),Vt={method:"PATCH",headers:Qe,body:JSON.stringify(vt)};let Yt;try{Yt=yield(yield fetch(`${A(X.appConfig)}/${ve.token}`,Vt)).json()}catch(Dn){throw Ps.create("token-update-failed",{errorInfo:Dn?.toString()})}if(Yt.error)throw Ps.create("token-update-failed",{errorInfo:Yt.error.message});if(!Yt.token)throw Ps.create("token-update-no-token");return Yt.token})).apply(this,arguments)}(X.firebaseDependencies,ve),vt=Object.assign(Object.assign({},ve),{token:Qe,createTime:Date.now()});return yield Os(X.firebaseDependencies,vt),Qe}catch(Qe){throw yield function tt(B){return(oe=oe||(0,ne.Z)(function*(H){const X=yield Oo(H.firebaseDependencies);X&&(yield Yr(H.firebaseDependencies,X.token),yield function ua(B){return(wo=wo||(0,ne.Z)(function*(H){const X=Qa(H),Qe=(yield Fa()).transaction(ca,"readwrite");yield Qe.objectStore(ca).delete(X),yield Qe.done})).apply(this,arguments)}(H.firebaseDependencies));const ve=yield H.swRegistration.pushManager.getSubscription();return!ve||ve.unsubscribe()})).apply(this,arguments)}(X),Qe}})).apply(this,arguments)}(H,{token:Qe.token,createTime:Date.now(),subscriptionOptions:ve}):Qe.token;try{yield Yr(H.firebaseDependencies,Qe.token)}catch(vt){console.warn(vt)}return xn(H.firebaseDependencies,ve)}return xn(H.firebaseDependencies,ve)})).apply(this,arguments)}function xn(B,H){return(Te=Te||(0,ne.Z)(function*(X,ve){const vt={token:yield lo(X,ve),createTime:Date.now(),subscriptionOptions:ve};return yield Os(X,vt),vt.token})).apply(this,arguments)}function Sr(B){const H={from:B.from,collapseKey:B.collapse_key,messageId:B.fcmMessageId};return function Wr(B,H){if(!H.notification)return;B.notification={};const X=H.notification.title;X&&(B.notification.title=X);const ve=H.notification.body;ve&&(B.notification.body=ve);const Qe=H.notification.image;Qe&&(B.notification.image=Qe);const vt=H.notification.icon;vt&&(B.notification.icon=vt)}(H,B),function Rr(B,H){H.data&&(B.data=H.data)}(H,B),function Ur(B,H){var X,ve,Qe,vt,Vt;if(!(H.fcmOptions||null!==(X=H.notification)&&void 0!==X&&X.click_action))return;B.fcmOptions={};const Yt=null!==(Qe=null===(ve=H.fcmOptions)||void 0===ve?void 0:ve.link)&&void 0!==Qe?Qe:null===(vt=H.notification)||void 0===vt?void 0:vt.click_action;Yt&&(B.fcmOptions.link=Yt);const Dn=null===(Vt=H.fcmOptions)||void 0===Vt?void 0:Vt.analytics_label;Dn&&(B.fcmOptions.analyticsLabel=Dn)}(H,B),H}function Co(B,H){const X=[];for(let ve=0;ve<B.length;ve++)X.push(B.charAt(ve)),ve<H.length&&X.push(H.charAt(ve));return X.join("")}function bo(B){return Ps.create("missing-app-config-values",{valueName:B})}Co("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Co("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zs{constructor(H,X,ve){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Qe=function Ns(B){if(!B||!B.options)throw bo("App Configuration Object");if(!B.name)throw bo("App Name");const H=["projectId","apiKey","appId","messagingSenderId"],{options:X}=B;for(const ve of H)if(!X[ve])throw bo(ve);return{appName:B.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}(H);this.firebaseDependencies={app:H,appConfig:Qe,installations:X,analyticsProvider:ve}}_delete(){return Promise.resolve()}}function Nr(B,H){return(j=j||(0,ne.Z)(function*(X,ve){if(!navigator)throw Ps.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ps.create("permission-blocked");return yield function da(B,H){return(C=C||(0,ne.Z)(function*(X,ve){ve?X.vapidKey=ve:X.vapidKey||(X.vapidKey=bs)})).apply(this,arguments)}(X,ve?.vapidKey),yield function Qs(B,H){return(q=q||(0,ne.Z)(function*(X,ve){if(!ve&&!X.swRegistration&&(yield function Ss(B){return(E=E||(0,ne.Z)(function*(H){try{H.swRegistration=yield navigator.serviceWorker.register(pi,{scope:Gr}),H.swRegistration.update().catch(()=>{})}catch(X){throw Ps.create("failed-service-worker-registration",{browserErrorMessage:X?.message})}})).apply(this,arguments)}(X)),ve||!X.swRegistration){if(!(ve instanceof ServiceWorkerRegistration))throw Ps.create("invalid-sw-registration");X.swRegistration=ve}})).apply(this,arguments)}(X,ve?.serviceWorkerRegistration),me(X)})).apply(this,arguments)}function uo(B,H){return(Nt=Nt||(0,ne.Z)(function*(X,ve){const Qe=ve.data;if(!Qe.isFirebaseMessaging)return;X.onMessageHandler&&Qe.messageType===aa.PUSH_RECEIVED&&("function"==typeof X.onMessageHandler?X.onMessageHandler(Sr(Qe)):X.onMessageHandler.next(Sr(Qe)));const vt=Qe.data;(function $i(B){return"object"==typeof B&&!!B&&Lo in B})(vt)&&"1"===vt["google.c.a.e"]&&(yield function Ml(B,H,X){return(ae=ae||(0,ne.Z)(function*(ve,Qe,vt){const Vt=function ha(B){switch(B){case aa.NOTIFICATION_CLICKED:return"notification_open";case aa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(Qe);(yield ve.firebaseDependencies.analyticsProvider.get()).logEvent(Vt,{message_id:vt[Lo],message_name:vt[oo],message_time:vt[oa],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}(X,Qe.messageType,vt))})).apply(this,arguments)}const Gc="@firebase/messaging",Ja=B=>{const H=new zs(B.getProvider("app").getImmediate(),B.getProvider("installations-internal").getImmediate(),B.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>uo(H,X)),H},Vo=B=>{const H=B.getProvider("messaging").getImmediate();return{getToken:ve=>Nr(H,ve)}};function pc(){return(jn=jn||(0,ne.Z)(function*(){try{yield(0,ke.eu)()}catch{return!1}return typeof window<"u"&&(0,ke.hl)()&&(0,ke.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}var Ba,Wl,Mr,ll,ql,cl,Ol,Kl,Yl;!function od(){(0,he.Xd)(new Pe.wA("messaging",Ja,"PUBLIC")),(0,he.Xd)(new Pe.wA("messaging-internal",Vo,"PRIVATE")),(0,he.KN)(Gc,"0.12.4"),(0,he.KN)(Gc,"0.12.4","esm2017")}();const dn="analytics",gi="firebase_id",wl="origin",vc=6e4,Vi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ul="https://www.googletagmanager.com/gtag/js",hs=new Ie.Yd("@firebase/analytics"),Gs=new ke.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function is(B){if(!B.startsWith(ul)){const H=Gs.create("invalid-gtag-resource",{gtagURL:B});return hs.warn(H.message),""}return B}function Zl(B){return Promise.all(B.map(H=>H.catch(X=>X)))}const R=30,U=new class x{constructor(H={},X=1e3){this.throttleMetadata=H,this.intervalMillis=X}getThrottleMetadata(H){return this.throttleMetadata[H]}setThrottleMetadata(H,X){this.throttleMetadata[H]=X}deleteThrottleMetadata(H){delete this.throttleMetadata[H]}};function se(B){return new Headers({Accept:"application/json","x-goog-api-key":B})}function Be(B){return(ll=ll||(0,ne.Z)(function*(H,X=U,ve){const{appId:Qe,apiKey:vt,measurementId:Vt}=H.options;if(!Qe)throw Gs.create("no-app-id");if(!vt){if(Vt)return{measurementId:Vt,appId:Qe};throw Gs.create("no-api-key")}const Yt=X.getThrottleMetadata(Qe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Dn=new cn;return setTimeout((0,ne.Z)(function*(){Dn.abort()}),void 0!==ve?ve:vc),hn({appId:Qe,apiKey:vt,measurementId:Vt},Yt,Dn,X)})).apply(this,arguments)}function hn(B,H,X){return(ql=ql||(0,ne.Z)(function*(ve,{throttleEndTimeMillis:Qe,backoffCount:vt},Vt,Yt=U){var Dn;const{appId:nr,measurementId:cr}=ve;try{yield function Lt(B,H){return new Promise((X,ve)=>{const Qe=Math.max(H-Date.now(),0),vt=setTimeout(X,Qe);B.addEventListener(()=>{clearTimeout(vt),ve(Gs.create("fetch-throttle",{throttleEndTimeMillis:H}))})})}(Vt,Qe)}catch(tr){if(cr)return hs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${cr} provided in the "measurementId" field in the local Firebase config. [${tr?.message}]`),{appId:nr,measurementId:cr};throw tr}try{const tr=yield function Ce(B){return(Mr=Mr||(0,ne.Z)(function*(H){var X;const{appId:ve,apiKey:Qe}=H,vt={method:"GET",headers:se(Qe)},Vt=Vi.replace("{app-id}",ve),Yt=yield fetch(Vt,vt);if(200!==Yt.status&&304!==Yt.status){let Dn="";try{const nr=yield Yt.json();null!==(X=nr.error)&&void 0!==X&&X.message&&(Dn=nr.error.message)}catch{}throw Gs.create("config-fetch-failed",{httpStatus:Yt.status,responseMessage:Dn})}return Yt.json()})).apply(this,arguments)}(ve);return Yt.deleteThrottleMetadata(nr),tr}catch(tr){const si=tr;if(!function yr(B){if(!(B instanceof ke.ZR&&B.customData))return!1;const H=Number(B.customData.httpStatus);return 429===H||500===H||503===H||504===H}(si)){if(Yt.deleteThrottleMetadata(nr),cr)return hs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${cr} provided in the "measurementId" field in the local Firebase config. [${si?.message}]`),{appId:nr,measurementId:cr};throw tr}const Ki=503===Number(null===(Dn=si?.customData)||void 0===Dn?void 0:Dn.httpStatus)?(0,ke.$s)(vt,Yt.intervalMillis,R):(0,ke.$s)(vt,Yt.intervalMillis),ms={throttleEndTimeMillis:Date.now()+Ki,backoffCount:vt+1};return Yt.setThrottleMetadata(nr,ms),hs.debug(`Calling attemptFetch again in ${Ki} millis`),hn(ve,ms,Vt,Yt)}})).apply(this,arguments)}class cn{constructor(){this.listeners=[]}addEventListener(H){this.listeners.push(H)}abort(){this.listeners.forEach(H=>H())}}let Hn,Yo;function Gd(B,H,X,ve,Qe,vt,Vt){return(Kl=Kl||(0,ne.Z)(function*(Yt,Dn,nr,cr,tr,si,Ki){var ms;const gr=Be(Yt);gr.then(ks=>{nr[ks.measurementId]=ks.appId,Yt.options.measurementId&&ks.measurementId!==Yt.options.measurementId&&hs.warn(`The measurement ID in the local Firebase config (${Yt.options.measurementId}) does not match the measurement ID fetched from the server (${ks.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ks=>hs.error(ks)),Dn.push(gr);const Js=function zd(){return(Ol=Ol||(0,ne.Z)(function*(){if(!(0,ke.hl)())return hs.warn(Gs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ke.eu)()}catch(B){return hs.warn(Gs.create("indexeddb-unavailable",{errorInfo:B?.toString()}).message),!1}return!0})).apply(this,arguments)}().then(ks=>{if(ks)return cr.getId()}),[dr,yi]=yield Promise.all([gr,Js]);(function T(B){const H=window.document.getElementsByTagName("script");for(const X of Object.values(H))if(X.src&&X.src.includes(ul)&&X.src.includes(B))return X;return null})(si)||function Wc(B,H){const X=function _c(B,H){let X;return window.trustedTypes&&(X=window.trustedTypes.createPolicy(B,H)),X}("firebase-js-sdk-policy",{createScriptURL:is}),ve=document.createElement("script"),Qe=`${ul}?l=${B}&id=${H}`;ve.src=X?X?.createScriptURL(Qe):Qe,ve.async=!0,document.head.appendChild(ve)}(si,dr.measurementId),Yo&&(tr("consent","default",Yo),function ss(B){Yo=B}(void 0)),tr("js",new Date);const Ws=null!==(ms=Ki?.config)&&void 0!==ms?ms:{};return Ws[wl]="firebase",Ws.update=!0,null!=yi&&(Ws[gi]=yi),tr("config",dr.measurementId,Ws),Hn&&(tr("set",Hn),function qc(B){Hn=B}(void 0)),dr.measurementId})).apply(this,arguments)}class Su{constructor(H){this.app=H}_delete(){return delete fa[this.app.options.appId],Promise.resolve()}}let fa={},ld=[];const pa={};let el,No,Po="dataLayer",Ri=!1;function ii(B,H,X){!function Ql(){const B=[];if((0,ke.ru)()&&B.push("This is a browser extension environment."),(0,ke.zI)()||B.push("Cookies are not available."),B.length>0){const H=B.map((ve,Qe)=>`(${Qe+1}) ${ve}`).join(" "),X=Gs.create("invalid-analytics-context",{errorInfo:H});hs.warn(X.message)}}();const ve=B.options.appId;if(!ve)throw Gs.create("no-app-id");if(!B.options.apiKey){if(!B.options.measurementId)throw Gs.create("no-api-key");hs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${B.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fa[ve])throw Gs.create("already-exists",{id:ve});if(!Ri){!function To(B){let H=[];Array.isArray(window[B])?H=window[B]:window[B]=H}(Po);const{wrappedGtag:vt,gtagCore:Vt}=function Uo(B,H,X,ve,Qe){let vt=function(...Vt){window[ve].push(arguments)};return window[Qe]&&"function"==typeof window[Qe]&&(vt=window[Qe]),window[Qe]=function Cl(B,H,X,ve){var Qe;return function vt(Vt){return(Qe=Qe||(0,ne.Z)(function*(Yt,...Dn){try{if("event"===Yt){const[nr,cr]=Dn;yield function Ic(B,H,X,ve,Qe){return(Wl=Wl||(0,ne.Z)(function*(vt,Vt,Yt,Dn,nr){try{let cr=[];if(nr&&nr.send_to){let tr=nr.send_to;Array.isArray(tr)||(tr=[tr]);const si=yield Zl(Yt);for(const Ki of tr){const ms=si.find(Js=>Js.measurementId===Ki),gr=ms&&Vt[ms.appId];if(!gr){cr=[];break}cr.push(gr)}}0===cr.length&&(cr=Object.values(Vt)),yield Promise.all(cr),vt("event",Dn,nr||{})}catch(cr){hs.error(cr)}})).apply(this,arguments)}(B,H,X,nr,cr)}else if("config"===Yt){const[nr,cr]=Dn;yield function $a(B,H,X,ve,Qe,vt){return(Ba=Ba||(0,ne.Z)(function*(Vt,Yt,Dn,nr,cr,tr){const si=nr[cr];try{if(si)yield Yt[si];else{const ms=(yield Zl(Dn)).find(gr=>gr.measurementId===cr);ms&&(yield Yt[ms.appId])}}catch(Ki){hs.error(Ki)}Vt("config",cr,tr)})).apply(this,arguments)}(B,H,X,ve,nr,cr)}else if("consent"===Yt){const[nr]=Dn;B("consent","update",nr)}else if("get"===Yt){const[nr,cr,tr]=Dn;B("get",nr,cr,tr)}else if("set"===Yt){const[nr]=Dn;B("set",nr)}else B(Yt,...Dn)}catch(nr){hs.error(nr)}})).apply(this,arguments)}}(vt,B,H,X),{gtagCore:vt,wrappedGtag:window[Qe]}}(fa,ld,pa,Po,"gtag");No=vt,el=Vt,Ri=!0}return fa[ve]=Gd(B,ld,pa,H,el,Po,X),new Su(B)}function On(){return(Yl=Yl||(0,ne.Z)(function*(){if((0,ke.ru)()||!(0,ke.zI)()||!(0,ke.hl)())return!1;try{return yield(0,ke.eu)()}catch{return!1}})).apply(this,arguments)}const Ec="@firebase/analytics";!function xu(){(0,he.Xd)(new Pe.wA(dn,(H,{options:X})=>ii(H.getProvider("app").getImmediate(),H.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,he.Xd)(new Pe.wA("analytics-internal",function B(H){try{const X=H.getProvider(dn).getImmediate();return{logEvent:(ve,Qe,vt)=>function Jl(B,H,X,ve){B=(0,ke.m9)(B),function Si(B,H,X,ve,Qe){return(cl=cl||(0,ne.Z)(function*(vt,Vt,Yt,Dn,nr){if(nr&&nr.global)vt("event",Yt,Dn);else{const cr=yield Vt;vt("event",Yt,Object.assign(Object.assign({},Dn),{send_to:cr}))}})).apply(this,arguments)}(No,fa[B.app.options.appId],H,X,ve).catch(Qe=>hs.error(Qe))}(X,ve,Qe,vt)}}catch(X){throw Gs.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,he.KN)(Ec,"0.10.0"),(0,he.KN)(Ec,"0.10.0","esm2017")}();var tl=L(1954),ga=L(2631);const wc=new class xt extends ga.v{}(class Kc extends tl.o{constructor(H,X){super(H,X),this.scheduler=H,this.work=X}schedule(H,X=0){return X>0?super.schedule(H,X):(this.delay=X,this.state=H,this.scheduler.flush(this),this)}execute(H,X){return X>0||this.closed?super.execute(H,X):this._execute(H,X)}requestAsyncId(H,X,ve=0){return null!=ve&&ve>0||null==ve&&this.delay>0?super.requestAsyncId(H,X,ve):(H.flush(this),0)}});var hd=L(6321),jo=L(9397),hl=L(5137),ec=L(3093);const Va=new I.GfV("7.6.1"),Nl="__angularfire_symbol__analyticsIsSupportedValue",Ua="__angularfire_symbol__analyticsIsSupported",ja="__angularfire_symbol__remoteConfigIsSupportedValue",Cc="__angularfire_symbol__remoteConfigIsSupported",Xs="__angularfire_symbol__messagingIsSupportedValue",fl="__angularfire_symbol__messagingIsSupported";function nl(B,H,X){if(H){if(1===H.length)return H[0];const vt=H.filter(Vt=>Vt.app===X);if(1===vt.length)return vt[0]}return X.container.getProvider(B).getImmediate({optional:!0})}globalThis[Ua]||(globalThis[Ua]=On().then(B=>globalThis[Nl]=B).catch(()=>globalThis[Nl]=!1)),globalThis[fl]||(globalThis[fl]=pc().then(B=>globalThis[Xs]=B).catch(()=>globalThis[Xs]=!1)),globalThis[Cc]||(globalThis[Cc]=Tr().then(B=>globalThis[ja]=B).catch(()=>globalThis[ja]=!1));const za=(B,H)=>{const X=H?[H]:(0,v.C6)(),ve=[];return X.forEach(Qe=>{Qe.container.getProvider(B).instances.forEach(Vt=>{ve.includes(Vt)||ve.push(Vt)})}),ve};function Dl(){}class tc{constructor(H,X=wc){this.zone=H,this.delegate=X}now(){return this.delegate.now()}schedule(H,X,ve){const Qe=this.zone;return this.delegate.schedule(function(Vt){Qe.runGuarded(()=>{H.apply(this,[Vt])})},X,ve)}}class Tl{constructor(H){this.zone=H,this.task=null}call(H,X){const ve=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dl,{},Dl,Dl)),X.pipe((0,jo.b)({next:ve,complete:ve,error:ve})).subscribe(H).add(ve)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zc=(()=>{class B{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new tc(Zone.current)),this.insideAngular=X.run(()=>new tc(Zone.current,hd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return B.\u0275fac=function(X){return new(X||B)(I.LFG(I.R0b))},B.\u0275prov=I.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})();function Ls(){const B=globalThis.\u0275AngularFireScheduler;if(!B)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return B}function Ru(B){return Ls(),function Xc(B){return function(X){return(X=X.lift(new Tl(B.ngZone))).pipe((0,hl.R)(B.outsideAngular),(0,ec.Q)(B.insideAngular))}}(Ls())(B)}},9058:(wn,gt,L)=>{"use strict";L.d(gt,{$s:()=>sn,BH:()=>be,DV:()=>Wt,Dv:()=>an,G6:()=>_t,GJ:()=>Rt,L:()=>Je,LL:()=>ht,Pz:()=>rt,Sg:()=>Xe,UG:()=>at,UI:()=>En,US:()=>Pe,Wj:()=>or,Wl:()=>st,Yr:()=>gn,ZB:()=>Me,ZR:()=>pt,aH:()=>Ve,b$:()=>en,cI:()=>Qt,dS:()=>Zi,eu:()=>Se,g5:()=>ne,gK:()=>Cr,gQ:()=>Un,h$:()=>qe,hl:()=>pe,hu:()=>v,jU:()=>Ue,lb:()=>bi,m9:()=>br,ne:()=>pr,p$:()=>ge,pd:()=>Pn,r3:()=>dt,ru:()=>zt,tV:()=>ye,uI:()=>fe,ug:()=>Di,vZ:()=>vn,w1:()=>mn,w9:()=>wt,xO:()=>wr,xb:()=>Tn,z$:()=>Fe,zI:()=>$e,zd:()=>Sn});const I={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},v=function(Ke,re){if(!Ke)throw ne(re)},ne=function(Ke){return new Error("Firebase Database ("+I.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Ke)},he=function(Ke){const re=[];let te=0;for(let Ne=0;Ne<Ke.length;Ne++){let ue=Ke.charCodeAt(Ne);ue<128?re[te++]=ue:ue<2048?(re[te++]=ue>>6|192,re[te++]=63&ue|128):55296==(64512&ue)&&Ne+1<Ke.length&&56320==(64512&Ke.charCodeAt(Ne+1))?(ue=65536+((1023&ue)<<10)+(1023&Ke.charCodeAt(++Ne)),re[te++]=ue>>18|240,re[te++]=ue>>12&63|128,re[te++]=ue>>6&63|128,re[te++]=63&ue|128):(re[te++]=ue>>12|224,re[te++]=ue>>6&63|128,re[te++]=63&ue|128)}return re},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ke,re){if(!Array.isArray(Ke))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=re?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ne=[];for(let ue=0;ue<Ke.length;ue+=3){const lt=Ke[ue],St=ue+1<Ke.length,nn=St?Ke[ue+1]:0,zn=ue+2<Ke.length,yn=zn?Ke[ue+2]:0;let Zr=(15&nn)<<2|yn>>6,ei=63&yn;zn||(ei=64,St||(Zr=64)),Ne.push(te[lt>>2],te[(3&lt)<<4|nn>>4],te[Zr],te[ei])}return Ne.join("")},encodeString(Ke,re){return this.HAS_NATIVE_SUPPORT&&!re?btoa(Ke):this.encodeByteArray(he(Ke),re)},decodeString(Ke,re){return this.HAS_NATIVE_SUPPORT&&!re?atob(Ke):function(Ke){const re=[];let te=0,Ne=0;for(;te<Ke.length;){const ue=Ke[te++];if(ue<128)re[Ne++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const lt=Ke[te++];re[Ne++]=String.fromCharCode((31&ue)<<6|63&lt)}else if(ue>239&&ue<365){const zn=((7&ue)<<18|(63&Ke[te++])<<12|(63&Ke[te++])<<6|63&Ke[te++])-65536;re[Ne++]=String.fromCharCode(55296+(zn>>10)),re[Ne++]=String.fromCharCode(56320+(1023&zn))}else{const lt=Ke[te++],St=Ke[te++];re[Ne++]=String.fromCharCode((15&ue)<<12|(63&lt)<<6|63&St)}}return re.join("")}(this.decodeStringToByteArray(Ke,re))},decodeStringToByteArray(Ke,re){this.init_();const te=re?this.charToByteMapWebSafe_:this.charToByteMap_,Ne=[];for(let ue=0;ue<Ke.length;){const lt=te[Ke.charAt(ue++)],nn=ue<Ke.length?te[Ke.charAt(ue)]:0;++ue;const yn=ue<Ke.length?te[Ke.charAt(ue)]:64;++ue;const er=ue<Ke.length?te[Ke.charAt(ue)]:64;if(++ue,null==lt||null==nn||null==yn||null==er)throw new Ie;Ne.push(lt<<2|nn>>4),64!==yn&&(Ne.push(nn<<4&240|yn>>2),64!==er&&Ne.push(yn<<6&192|er))}return Ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ke=0;Ke<this.ENCODED_VALS.length;Ke++)this.byteToCharMap_[Ke]=this.ENCODED_VALS.charAt(Ke),this.charToByteMap_[this.byteToCharMap_[Ke]]=Ke,this.byteToCharMapWebSafe_[Ke]=this.ENCODED_VALS_WEBSAFE.charAt(Ke),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ke]]=Ke,Ke>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ke)]=Ke,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ke)]=Ke)}}};class Ie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qe=function(Ke){const re=he(Ke);return Pe.encodeByteArray(re,!0)},Je=function(Ke){return qe(Ke).replace(/\./g,"")},ye=function(Ke){try{return Pe.decodeString(Ke,!0)}catch(re){console.error("base64Decode failed: ",re)}return null};function ge(Ke){return Me(void 0,Ke)}function Me(Ke,re){if(!(re instanceof Object))return re;switch(re.constructor){case Date:return new Date(re.getTime());case Object:void 0===Ke&&(Ke={});break;case Array:Ke=[];break;default:return re}for(const te in re)!re.hasOwnProperty(te)||!Ge(te)||(Ke[te]=Me(Ke[te],re[te]));return Ke}function Ge(Ke){return"__proto__"!==Ke}const De=()=>{try{return function ze(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Ke=process.env.__FIREBASE_DEFAULTS__;return Ke?JSON.parse(Ke):void 0})()||(()=>{if(typeof document>"u")return;let Ke;try{Ke=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const re=Ke&&ye(Ke[1]);return re&&JSON.parse(re)})()}catch(Ke){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ke}`)}},Ve=()=>{var Ke;return null===(Ke=De())||void 0===Ke?void 0:Ke.config},rt=Ke=>{var re;return null===(re=De())||void 0===re?void 0:re[`_${Ke}`]};class be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((re,te)=>{this.resolve=re,this.reject=te})}wrapCallback(re){return(te,Ne)=>{te?this.reject(te):this.resolve(Ne),"function"==typeof re&&(this.promise.catch(()=>{}),1===re.length?re(te):re(te,Ne))}}}function Xe(Ke,re){if(Ke.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ne=re||"demo-project",ue=Ke.iat||0,lt=Ke.sub||Ke.user_id;if(!lt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const St=Object.assign({iss:`https://securetoken.google.com/${Ne}`,aud:Ne,iat:ue,exp:ue+3600,auth_time:ue,sub:lt,user_id:lt,firebase:{sign_in_provider:"custom",identities:{}}},Ke);return[Je(JSON.stringify({alg:"none",type:"JWT"})),Je(JSON.stringify(St)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function at(){var Ke;const re=null===(Ke=De())||void 0===Ke?void 0:Ke.forceEnvironment;if("node"===re)return!0;if("browser"===re)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return"object"==typeof self&&self.self===self}function zt(){const Ke="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ke&&void 0!==Ke.id}function en(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mn(){const Ke=Fe();return Ke.indexOf("MSIE ")>=0||Ke.indexOf("Trident/")>=0}function gn(){return!0===I.NODE_CLIENT||!0===I.NODE_ADMIN}function _t(){return!at()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){try{return"object"==typeof indexedDB}catch{return!1}}function Se(){return new Promise((Ke,re)=>{try{let te=!0;const Ne="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(Ne);ue.onsuccess=()=>{ue.result.close(),te||self.indexedDB.deleteDatabase(Ne),Ke(!0)},ue.onupgradeneeded=()=>{te=!1},ue.onerror=()=>{var lt;re((null===(lt=ue.error)||void 0===lt?void 0:lt.message)||"")}}catch(te){re(te)}})}function $e(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class pt extends Error{constructor(re,te,Ne){super(te),this.code=re,this.customData=Ne,this.name="FirebaseError",Object.setPrototypeOf(this,pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ht.prototype.create)}}class ht{constructor(re,te,Ne){this.service=re,this.serviceName=te,this.errors=Ne}create(re,...te){const Ne=te[0]||{},ue=`${this.service}/${re}`,lt=this.errors[re],St=lt?function Bt(Ke,re){return Ke.replace(Ft,(te,Ne)=>{const ue=re[Ne];return null!=ue?String(ue):`<${Ne}?>`})}(lt,Ne):"Error";return new pt(ue,`${this.serviceName}: ${St} (${ue}).`,Ne)}}const Ft=/\{\$([^}]+)}/g;function Qt(Ke){return JSON.parse(Ke)}function st(Ke){return JSON.stringify(Ke)}const Vn=function(Ke){let re={},te={},Ne={},ue="";try{const lt=Ke.split(".");re=Qt(ye(lt[0])||""),te=Qt(ye(lt[1])||""),ue=lt[2],Ne=te.d||{},delete te.d}catch{}return{header:re,claims:te,data:Ne,signature:ue}},wt=function(Ke){const te=Vn(Ke).claims;return!!te&&"object"==typeof te&&te.hasOwnProperty("iat")},Rt=function(Ke){const re=Vn(Ke).claims;return"object"==typeof re&&!0===re.admin};function dt(Ke,re){return Object.prototype.hasOwnProperty.call(Ke,re)}function Wt(Ke,re){if(Object.prototype.hasOwnProperty.call(Ke,re))return Ke[re]}function Tn(Ke){for(const re in Ke)if(Object.prototype.hasOwnProperty.call(Ke,re))return!1;return!0}function En(Ke,re,te){const Ne={};for(const ue in Ke)Object.prototype.hasOwnProperty.call(Ke,ue)&&(Ne[ue]=re.call(te,Ke[ue],ue,Ke));return Ne}function vn(Ke,re){if(Ke===re)return!0;const te=Object.keys(Ke),Ne=Object.keys(re);for(const ue of te){if(!Ne.includes(ue))return!1;const lt=Ke[ue],St=re[ue];if(Xn(lt)&&Xn(St)){if(!vn(lt,St))return!1}else if(lt!==St)return!1}for(const ue of Ne)if(!te.includes(ue))return!1;return!0}function Xn(Ke){return null!==Ke&&"object"==typeof Ke}function wr(Ke){const re=[];for(const[te,Ne]of Object.entries(Ke))Array.isArray(Ne)?Ne.forEach(ue=>{re.push(encodeURIComponent(te)+"="+encodeURIComponent(ue))}):re.push(encodeURIComponent(te)+"="+encodeURIComponent(Ne));return re.length?"&"+re.join("&"):""}function Sn(Ke){const re={};return Ke.replace(/^\?/,"").split("&").forEach(Ne=>{if(Ne){const[ue,lt]=Ne.split("=");re[decodeURIComponent(ue)]=decodeURIComponent(lt)}}),re}function Pn(Ke){const re=Ke.indexOf("?");if(!re)return"";const te=Ke.indexOf("#",re);return Ke.substring(re,te>0?te:void 0)}class Un{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let re=1;re<this.blockSize;++re)this.pad_[re]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(re,te){te||(te=0);const Ne=this.W_;if("string"==typeof re)for(let er=0;er<16;er++)Ne[er]=re.charCodeAt(te)<<24|re.charCodeAt(te+1)<<16|re.charCodeAt(te+2)<<8|re.charCodeAt(te+3),te+=4;else for(let er=0;er<16;er++)Ne[er]=re[te]<<24|re[te+1]<<16|re[te+2]<<8|re[te+3],te+=4;for(let er=16;er<80;er++){const Zr=Ne[er-3]^Ne[er-8]^Ne[er-14]^Ne[er-16];Ne[er]=4294967295&(Zr<<1|Zr>>>31)}let yn,lr,ue=this.chain_[0],lt=this.chain_[1],St=this.chain_[2],nn=this.chain_[3],zn=this.chain_[4];for(let er=0;er<80;er++){er<40?er<20?(yn=nn^lt&(St^nn),lr=1518500249):(yn=lt^St^nn,lr=1859775393):er<60?(yn=lt&St|nn&(lt|St),lr=2400959708):(yn=lt^St^nn,lr=3395469782);const Zr=(ue<<5|ue>>>27)+yn+zn+lr+Ne[er]&4294967295;zn=nn,nn=St,St=4294967295&(lt<<30|lt>>>2),lt=ue,ue=Zr}this.chain_[0]=this.chain_[0]+ue&4294967295,this.chain_[1]=this.chain_[1]+lt&4294967295,this.chain_[2]=this.chain_[2]+St&4294967295,this.chain_[3]=this.chain_[3]+nn&4294967295,this.chain_[4]=this.chain_[4]+zn&4294967295}update(re,te){if(null==re)return;void 0===te&&(te=re.length);const Ne=te-this.blockSize;let ue=0;const lt=this.buf_;let St=this.inbuf_;for(;ue<te;){if(0===St)for(;ue<=Ne;)this.compress_(re,ue),ue+=this.blockSize;if("string"==typeof re){for(;ue<te;)if(lt[St]=re.charCodeAt(ue),++St,++ue,St===this.blockSize){this.compress_(lt),St=0;break}}else for(;ue<te;)if(lt[St]=re[ue],++St,++ue,St===this.blockSize){this.compress_(lt),St=0;break}}this.inbuf_=St,this.total_+=te}digest(){const re=[];let te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ue=this.blockSize-1;ue>=56;ue--)this.buf_[ue]=255&te,te/=256;this.compress_(this.buf_);let Ne=0;for(let ue=0;ue<5;ue++)for(let lt=24;lt>=0;lt-=8)re[Ne]=this.chain_[ue]>>lt&255,++Ne;return re}}function pr(Ke,re){const te=new Lr(Ke,re);return te.subscribe.bind(te)}class Lr{constructor(re,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{re(this)}).catch(Ne=>{this.error(Ne)})}next(re){this.forEachObserver(te=>{te.next(re)})}error(re){this.forEachObserver(te=>{te.error(re)}),this.close(re)}complete(){this.forEachObserver(re=>{re.complete()}),this.close()}subscribe(re,te,Ne){let ue;if(void 0===re&&void 0===te&&void 0===Ne)throw new Error("Missing Observer.");ue=function Kt(Ke,re){if("object"!=typeof Ke||null===Ke)return!1;for(const te of re)if(te in Ke&&"function"==typeof Ke[te])return!0;return!1}(re,["next","error","complete"])?re:{next:re,error:te,complete:Ne},void 0===ue.next&&(ue.next=hr),void 0===ue.error&&(ue.error=hr),void 0===ue.complete&&(ue.complete=hr);const lt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch{}}),this.observers.push(ue),lt}unsubscribeOne(re){void 0===this.observers||void 0===this.observers[re]||(delete this.observers[re],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(re){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,re)}sendOne(re,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[re])try{te(this.observers[re])}catch(Ne){typeof console<"u"&&console.error&&console.error(Ne)}})}close(re){this.finalized||(this.finalized=!0,void 0!==re&&(this.finalError=re),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hr(){}const an=function(Ke,re,te,Ne){let ue;if(Ne<re?ue="at least "+re:Ne>te&&(ue=0===te?"none":"no more than "+te),ue)throw new Error(Ke+" failed: Was called with "+Ne+(1===Ne?" argument.":" arguments.")+" Expects "+ue+".")};function Cr(Ke,re){return`${Ke} failed: ${re} argument `}function or(Ke,re,te,Ne){if((!Ne||te)&&"function"!=typeof te)throw new Error(Cr(Ke,re)+"must be a valid function.")}function bi(Ke,re,te,Ne){if((!Ne||te)&&("object"!=typeof te||null===te))throw new Error(Cr(Ke,re)+"must be a valid context object.")}const Zi=function(Ke){const re=[];let te=0;for(let Ne=0;Ne<Ke.length;Ne++){let ue=Ke.charCodeAt(Ne);if(ue>=55296&&ue<=56319){const lt=ue-55296;Ne++,v(Ne<Ke.length,"Surrogate pair missing trail surrogate."),ue=65536+(lt<<10)+(Ke.charCodeAt(Ne)-56320)}ue<128?re[te++]=ue:ue<2048?(re[te++]=ue>>6|192,re[te++]=63&ue|128):ue<65536?(re[te++]=ue>>12|224,re[te++]=ue>>6&63|128,re[te++]=63&ue|128):(re[te++]=ue>>18|240,re[te++]=ue>>12&63|128,re[te++]=ue>>6&63|128,re[te++]=63&ue|128)}return re},Di=function(Ke){let re=0;for(let te=0;te<Ke.length;te++){const Ne=Ke.charCodeAt(te);Ne<128?re++:Ne<2048?re+=2:Ne>=55296&&Ne<=56319?(re+=4,te++):re+=3}return re},Ii=1e3,jt=2,ot=144e5,Pt=.5;function sn(Ke,re=Ii,te=jt){const Ne=re*Math.pow(te,Ke),ue=Math.round(Pt*Ne*(Math.random()-.5)*2);return Math.min(ot,Ne+ue)}function br(Ke){return Ke&&Ke._delegate?Ke._delegate:Ke}},1774:(wn,gt,L)=>{"use strict";L.d(gt,{c:()=>Ze});var I=L(6225),v=L(839);let ne;const ke=Ye=>Ye.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Pe=Ye=>(void 0===ne&&(ne=void 0===Ye.style.animationName&&void 0!==Ye.style.webkitAnimationName?"-webkit-":""),ne),Ie=(Ye,De,Ee)=>{const yt=De.startsWith("animation")?Pe(Ye):"";Ye.style.setProperty(yt+De,Ee)},qe=(Ye,De)=>{const Ee=De.startsWith("animation")?Pe(Ye):"";Ye.style.removeProperty(Ee+De)},ge=[],nt=(Ye=[],De)=>{if(void 0!==De){const Ee=Array.isArray(De)?De:[De];return[...Ye,...Ee]}return Ye},Ze=Ye=>{let De,Ee,yt,Ve,rt,be,Ue,pe,Se,$e,je,Ft,Qt,Xe=[],Fe=[],fe=[],at=!1,zt={},en=[],Xt=[],mn={},de=0,gn=!1,_t=!1,pt=!0,ht=!1,Bt=!0,st=!1;const Vn=Ye,Bn=[],tn=[],wt=[],Rt=[],dt=[],Wt=[],Tn=[],En=[],vn=[],Xn=[],Jn="function"==typeof AnimationEffect||void 0!==I.w&&"function"==typeof I.w.AnimationEffect,wr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Jn,Pn=()=>Xn,Kt=(bt,Cn)=>((Cn?.oneTimeCallback?tn:Bn).push({c:bt,o:Cn}),Qt),an=()=>{if(wr)Xn.forEach(bt=>{bt.cancel()}),Xn.length=0;else{const bt=wt.slice();(0,v.r)(()=>{bt.forEach(Cn=>{qe(Cn,"animation-name"),qe(Cn,"animation-duration"),qe(Cn,"animation-timing-function"),qe(Cn,"animation-iteration-count"),qe(Cn,"animation-delay"),qe(Cn,"animation-play-state"),qe(Cn,"animation-fill-mode"),qe(Cn,"animation-direction")})})}},Cr=()=>{dt.forEach(bt=>{bt?.parentNode&&bt.parentNode.removeChild(bt)}),dt.length=0},Mn=()=>void 0!==rt?rt:Ue?Ue.getFill():"both",br=()=>void 0!==Se?Se:void 0!==be?be:Ue?Ue.getDirection():"normal",Ke=()=>gn?"linear":void 0!==yt?yt:Ue?Ue.getEasing():"linear",re=()=>_t?0:void 0!==$e?$e:void 0!==Ee?Ee:Ue?Ue.getDuration():0,te=()=>void 0!==Ve?Ve:Ue?Ue.getIterations():1,Ne=()=>void 0!==je?je:void 0!==De?De:Ue?Ue.getDelay():0,oi=()=>{0!==de&&(de--,0===de&&((()=>{Bs(),En.forEach(it=>it()),vn.forEach(it=>it());const bt=pt?1:0,Cn=en,J=Xt,_e=mn;wt.forEach(it=>{const ct=it.classList;Cn.forEach(At=>ct.add(At)),J.forEach(At=>ct.remove(At));for(const At in _e)_e.hasOwnProperty(At)&&Ie(it,At,_e[At])}),Bn.forEach(it=>it.c(bt,Qt)),tn.forEach(it=>it.c(bt,Qt)),tn.length=0,Bt=!0,pt&&(ht=!0),pt=!0})(),Ue&&Ue.animationFinish()))},Pi=(bt=!0)=>{Cr();const Cn=(Ye=>(Ye.forEach(De=>{for(const Ee in De)if(De.hasOwnProperty(Ee)){const yt=De[Ee];if("easing"===Ee)De["animation-timing-function"]=yt,delete De[Ee];else{const Ve=ke(Ee);Ve!==Ee&&(De[Ve]=yt,delete De[Ee])}}}),Ye))(Xe);wt.forEach(J=>{if(Cn.length>0){const _e=((Ye=[])=>Ye.map(De=>{const Ee=De.offset,yt=[];for(const Ve in De)De.hasOwnProperty(Ve)&&"offset"!==Ve&&yt.push(`${Ve}: ${De[Ve]};`);return`${100*Ee}% { ${yt.join(" ")} }`}).join(" "))(Cn);Ft=void 0!==Ye?Ye:(Ye=>{let De=ge.indexOf(Ye);return De<0&&(De=ge.push(Ye)-1),`ion-animation-${De}`})(_e);const it=((Ye,De,Ee)=>{var yt;const Ve=(Ye=>{const De=void 0!==Ye.getRootNode?Ye.getRootNode():Ye;return De.head||De})(Ee),rt=Pe(Ee),be=Ve.querySelector("#"+Ye);if(be)return be;const Xe=(null!==(yt=Ee.ownerDocument)&&void 0!==yt?yt:document).createElement("style");return Xe.id=Ye,Xe.textContent=`@${rt}keyframes ${Ye} { ${De} } @${rt}keyframes ${Ye}-alt { ${De} }`,Ve.appendChild(Xe),Xe})(Ft,_e,J);dt.push(it),Ie(J,"animation-duration",`${re()}ms`),Ie(J,"animation-timing-function",Ke()),Ie(J,"animation-delay",`${Ne()}ms`),Ie(J,"animation-fill-mode",Mn()),Ie(J,"animation-direction",br());const ct=te()===1/0?"infinite":te().toString();Ie(J,"animation-iteration-count",ct),Ie(J,"animation-play-state","paused"),bt&&Ie(J,"animation-name",`${it.id}-alt`),(0,v.r)(()=>{Ie(J,"animation-name",it.id||null)})}})},Hr=(bt=!0)=>{(()=>{Wt.forEach(_e=>_e()),Tn.forEach(_e=>_e());const bt=Fe,Cn=fe,J=zt;wt.forEach(_e=>{const it=_e.classList;bt.forEach(ct=>it.add(ct)),Cn.forEach(ct=>it.remove(ct));for(const ct in J)J.hasOwnProperty(ct)&&Ie(_e,ct,J[ct])})})(),Xe.length>0&&(wr?(wt.forEach(bt=>{const Cn=bt.animate(Xe,{id:Vn,delay:Ne(),duration:re(),easing:Ke(),iterations:te(),fill:Mn(),direction:br()});Cn.pause(),Xn.push(Cn)}),Xn.length>0&&(Xn[0].onfinish=()=>{oi()})):Pi(bt)),at=!0},qr=bt=>{if(bt=Math.min(Math.max(bt,0),.9999),wr)Xn.forEach(Cn=>{Cn.currentTime=Cn.effect.getComputedTiming().delay+re()*bt,Cn.pause()});else{const Cn=`-${re()*bt}ms`;wt.forEach(J=>{Xe.length>0&&(Ie(J,"animation-delay",Cn),Ie(J,"animation-play-state","paused"))})}},Ji=bt=>{Xn.forEach(Cn=>{Cn.effect.updateTiming({delay:Ne(),duration:re(),easing:Ke(),iterations:te(),fill:Mn(),direction:br()})}),void 0!==bt&&qr(bt)},Mi=(bt=!0,Cn)=>{(0,v.r)(()=>{wt.forEach(J=>{Ie(J,"animation-name",Ft||null),Ie(J,"animation-duration",`${re()}ms`),Ie(J,"animation-timing-function",Ke()),Ie(J,"animation-delay",void 0!==Cn?`-${Cn*re()}ms`:`${Ne()}ms`),Ie(J,"animation-fill-mode",Mn()||null),Ie(J,"animation-direction",br()||null);const _e=te()===1/0?"infinite":te().toString();Ie(J,"animation-iteration-count",_e),bt&&Ie(J,"animation-name",`${Ft}-alt`),(0,v.r)(()=>{Ie(J,"animation-name",Ft||null)})})})},ti=(bt=!1,Cn=!0,J)=>(bt&&Rt.forEach(_e=>{_e.update(bt,Cn,J)}),wr?Ji(J):Mi(Cn,J),Qt),es=()=>{at&&(wr?Xn.forEach(bt=>{bt.pause()}):wt.forEach(bt=>{Ie(bt,"animation-play-state","paused")}),st=!0)},$r=()=>{pe=void 0,oi()},Bs=()=>{pe&&clearTimeout(pe)},Gi=bt=>new Promise(Cn=>{bt?.sync&&(_t=!0,Kt(()=>_t=!1,{oneTimeCallback:!0})),at||Hr(),ht&&(wr?(qr(0),Ji()):Mi(),ht=!1),Bt&&(de=Rt.length+1,Bt=!1),Kt(()=>Cn(),{oneTimeCallback:!0}),Rt.forEach(J=>{J.play()}),wr?(Xn.forEach(bt=>{bt.play()}),(0===Xe.length||0===wt.length)&&oi()):(()=>{if(Bs(),(0,v.r)(()=>{wt.forEach(bt=>{Xe.length>0&&Ie(bt,"animation-play-state","running")})}),0===Xe.length||0===wt.length)oi();else{const bt=Ne()||0,Cn=re()||0,J=te()||1;isFinite(J)&&(pe=setTimeout($r,bt+Cn*J+100)),((Ye,De)=>{let Ee;const yt={passive:!0},rt=be=>{Ye===be.target&&(Ee&&Ee(),Bs(),(0,v.r)(()=>{wt.forEach(bt=>{qe(bt,"animation-duration"),qe(bt,"animation-delay"),qe(bt,"animation-play-state")}),(0,v.r)(oi)}))};Ye&&(Ye.addEventListener("webkitAnimationEnd",rt,yt),Ye.addEventListener("animationend",rt,yt),Ee=()=>{Ye.removeEventListener("webkitAnimationEnd",rt,yt),Ye.removeEventListener("animationend",rt,yt)})})(wt[0])}})(),st=!1}),Ir=(bt,Cn)=>{const J=Xe[0];return void 0===J||void 0!==J.offset&&0!==J.offset?Xe=[{offset:0,[bt]:Cn},...Xe]:J[bt]=Cn,Qt};return Qt={parentAnimation:Ue,elements:wt,childAnimations:Rt,id:Vn,animationFinish:oi,from:Ir,to:(bt,Cn)=>{const J=Xe[Xe.length-1];return void 0===J||void 0!==J.offset&&1!==J.offset?Xe=[...Xe,{offset:1,[bt]:Cn}]:J[bt]=Cn,Qt},fromTo:(bt,Cn,J)=>Ir(bt,Cn).to(bt,J),parent:bt=>(Ue=bt,Qt),play:Gi,pause:()=>(Rt.forEach(bt=>{bt.pause()}),es(),Qt),stop:()=>{Rt.forEach(bt=>{bt.stop()}),at&&(an(),at=!1),gn=!1,_t=!1,Bt=!0,Se=void 0,$e=void 0,je=void 0,de=0,ht=!1,pt=!0,st=!1},destroy:bt=>(Rt.forEach(Cn=>{Cn.destroy(bt)}),(bt=>{an(),bt&&Cr()})(bt),wt.length=0,Rt.length=0,Xe.length=0,Bn.length=0,tn.length=0,at=!1,Bt=!0,Qt),keyframes:bt=>{const Cn=Xe!==bt;return Xe=bt,Cn&&(bt=>{wr?Pn().forEach(Cn=>{if(Cn.effect.setKeyframes)Cn.effect.setKeyframes(bt);else{const J=new KeyframeEffect(Cn.effect.target,bt,Cn.effect.getTiming());Cn.effect=J}}):Pi()})(Xe),Qt},addAnimation:bt=>{if(null!=bt)if(Array.isArray(bt))for(const Cn of bt)Cn.parent(Qt),Rt.push(Cn);else bt.parent(Qt),Rt.push(bt);return Qt},addElement:bt=>{if(null!=bt)if(1===bt.nodeType)wt.push(bt);else if(bt.length>=0)for(let Cn=0;Cn<bt.length;Cn++)wt.push(bt[Cn]);else console.error("Invalid addElement value");return Qt},update:ti,fill:bt=>(rt=bt,ti(!0),Qt),direction:bt=>(be=bt,ti(!0),Qt),iterations:bt=>(Ve=bt,ti(!0),Qt),duration:bt=>(!wr&&0===bt&&(bt=1),Ee=bt,ti(!0),Qt),easing:bt=>(yt=bt,ti(!0),Qt),delay:bt=>(De=bt,ti(!0),Qt),getWebAnimations:Pn,getKeyframes:()=>Xe,getFill:Mn,getDirection:br,getDelay:Ne,getIterations:te,getEasing:Ke,getDuration:re,afterAddRead:bt=>(En.push(bt),Qt),afterAddWrite:bt=>(vn.push(bt),Qt),afterClearStyles:(bt=[])=>{for(const Cn of bt)mn[Cn]="";return Qt},afterStyles:(bt={})=>(mn=bt,Qt),afterRemoveClass:bt=>(Xt=nt(Xt,bt),Qt),afterAddClass:bt=>(en=nt(en,bt),Qt),beforeAddRead:bt=>(Wt.push(bt),Qt),beforeAddWrite:bt=>(Tn.push(bt),Qt),beforeClearStyles:(bt=[])=>{for(const Cn of bt)zt[Cn]="";return Qt},beforeStyles:(bt={})=>(zt=bt,Qt),beforeRemoveClass:bt=>(fe=nt(fe,bt),Qt),beforeAddClass:bt=>(Fe=nt(Fe,bt),Qt),onFinish:Kt,isRunning:()=>0!==de&&!st,progressStart:(bt=!1,Cn)=>(Rt.forEach(J=>{J.progressStart(bt,Cn)}),es(),gn=bt,at||Hr(),ti(!1,!0,Cn),Qt),progressStep:bt=>(Rt.forEach(Cn=>{Cn.progressStep(bt)}),qr(bt),Qt),progressEnd:(bt,Cn,J)=>(gn=!1,Rt.forEach(_e=>{_e.progressEnd(bt,Cn,J)}),void 0!==J&&($e=J),ht=!1,pt=!0,0===bt?(Se="reverse"===br()?"normal":"reverse","reverse"===Se&&(pt=!1),wr?(ti(),qr(1-Cn)):(je=(1-Cn)*re()*-1,ti(!1,!1))):1===bt&&(wr?(ti(),qr(Cn)):(je=Cn*re()*-1,ti(!1,!1))),void 0!==bt&&(Kt(()=>{$e=void 0,Se=void 0,je=void 0},{oneTimeCallback:!0}),Ue||Gi()),Qt)}}},3365:(wn,gt,L)=>{"use strict";L.d(gt,{E:()=>ye,a:()=>I,s:()=>qe});const I=ge=>{try{if(ge instanceof Ie)return ge.value;if(!he()||"string"!=typeof ge||""===ge)return ge;if(ge.includes("onload="))return"";const Me=document.createDocumentFragment(),Ge=document.createElement("div");Me.appendChild(Ge),Ge.innerHTML=ge,Pe.forEach(Ye=>{const De=Me.querySelectorAll(Ye);for(let Ee=De.length-1;Ee>=0;Ee--){const yt=De[Ee];yt.parentNode?yt.parentNode.removeChild(yt):Me.removeChild(yt);const Ve=ne(yt);for(let rt=0;rt<Ve.length;rt++)v(Ve[rt])}});const ze=ne(Me);for(let Ye=0;Ye<ze.length;Ye++)v(ze[Ye]);const nt=document.createElement("div");nt.appendChild(Me);const Ze=nt.querySelector("div");return null!==Ze?Ze.innerHTML:nt.innerHTML}catch(Me){return console.error(Me),""}},v=ge=>{if(ge.nodeType&&1!==ge.nodeType)return;if(typeof NamedNodeMap<"u"&&!(ge.attributes instanceof NamedNodeMap))return void ge.remove();for(let Ge=ge.attributes.length-1;Ge>=0;Ge--){const ze=ge.attributes.item(Ge),nt=ze.name;if(!ke.includes(nt.toLowerCase())){ge.removeAttribute(nt);continue}const Ze=ze.value,Ye=ge[nt];(null!=Ze&&Ze.toLowerCase().includes("javascript:")||null!=Ye&&Ye.toLowerCase().includes("javascript:"))&&ge.removeAttribute(nt)}const Me=ne(ge);for(let Ge=0;Ge<Me.length;Ge++)v(Me[Ge])},ne=ge=>null!=ge.children?ge.children:ge.childNodes,he=()=>{var ge;const Me=window,Ge=null===(ge=Me?.Ionic)||void 0===ge?void 0:ge.config;return!Ge||(Ge.get?Ge.get("sanitizerEnabled",!0):!0===Ge.sanitizerEnabled||void 0===Ge.sanitizerEnabled)},ke=["class","id","href","src","name","slot"],Pe=["script","style","iframe","meta","link","object","embed"];class Ie{constructor(Me){this.value=Me}}const qe=ge=>{const Me=window,Ge=Me.Ionic;if(!Ge||!Ge.config||"Object"===Ge.config.constructor.name)return Me.Ionic=Me.Ionic||{},Me.Ionic.config=Object.assign(Object.assign({},Me.Ionic.config),ge),Me.Ionic.config},ye=!1},6559:(wn,gt,L)=>{"use strict";L.d(gt,{C:()=>Pe,a:()=>he,d:()=>ke});var ne,I=L(5861),v=L(839);const he=function(qe,Je,ye,ge,Me,Ge){return(ne=ne||(0,I.Z)(function*(ze,nt,Ze,Ye,De,Ee){var yt;if(ze)return ze.attachViewToDom(nt,Ze,De,Ye);if(!(Ee||"string"==typeof Ze||Ze instanceof HTMLElement))throw new Error("framework delegate is missing");const Ve="string"==typeof Ze?null===(yt=nt.ownerDocument)||void 0===yt?void 0:yt.createElement(Ze):Ze;return Ye&&Ye.forEach(rt=>Ve.classList.add(rt)),De&&Object.assign(Ve,De),nt.appendChild(Ve),yield new Promise(rt=>(0,v.c)(Ve,rt)),Ve})).apply(this,arguments)},ke=(Ie,qe)=>{if(qe){if(Ie)return Ie.removeViewFromDom(qe.parentElement,qe);qe.remove()}return Promise.resolve()},Pe=()=>{var Ie;let qe,Je;return{attachViewToDom:function(Ge,ze){return(Ie=Ie||(0,I.Z)(function*(nt,Ze,Ye={},De=[]){var Ee,yt;let Ve;if(qe=nt,Ze){const be="string"==typeof Ze?null===(Ee=qe.ownerDocument)||void 0===Ee?void 0:Ee.createElement(Ze):Ze;De.forEach(Xe=>be.classList.add(Xe)),Object.assign(be,Ye),qe.appendChild(be),Ve=be,yield new Promise(Xe=>(0,v.c)(be,Xe))}else if(qe.children.length>0&&("ION-MODAL"===qe.tagName||"ION-POPOVER"===qe.tagName)&&!(Ve=qe.children[0]).classList.contains("ion-delegate-host")){const Xe=null===(yt=qe.ownerDocument)||void 0===yt?void 0:yt.createElement("div");Xe.classList.add("ion-delegate-host"),De.forEach(Fe=>Xe.classList.add(Fe)),Xe.append(...qe.children),qe.appendChild(Xe),Ve=Xe}const rt=document.querySelector("ion-app")||document.body;return Je=document.createComment("ionic teleport"),qe.parentNode.insertBefore(Je,qe),rt.appendChild(qe),Ve??qe})).apply(this,arguments)},removeViewFromDom:()=>(qe&&Je&&(Je.parentNode.insertBefore(qe,Je),Je.remove()),Promise.resolve())}}},619:(wn,gt,L)=>{"use strict";L.d(gt,{G:()=>ke});class v{constructor(Ie,qe,Je,ye,ge){this.id=qe,this.name=Je,this.disableScroll=ge,this.priority=1e6*ye+qe,this.ctrl=Ie}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ie=this.ctrl.capture(this.name,this.id,this.priority);return Ie&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ie}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class ne{constructor(Ie,qe,Je,ye){this.id=qe,this.disable=Je,this.disableScroll=ye,this.ctrl=Ie}block(){if(this.ctrl){if(this.disable)for(const Ie of this.disable)this.ctrl.disableGesture(Ie,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ie of this.disable)this.ctrl.enableGesture(Ie,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const he="backdrop-no-scroll",ke=new class I{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ie){var qe;return new v(this,this.newID(),Ie.name,null!==(qe=Ie.priority)&&void 0!==qe?qe:0,!!Ie.disableScroll)}createBlocker(Ie={}){return new ne(this,this.newID(),Ie.disable,!!Ie.disableScroll)}start(Ie,qe,Je){return this.canStart(Ie)?(this.requestedStart.set(qe,Je),!0):(this.requestedStart.delete(qe),!1)}capture(Ie,qe,Je){if(!this.start(Ie,qe,Je))return!1;const ye=this.requestedStart;let ge=-1e4;if(ye.forEach(Me=>{ge=Math.max(ge,Me)}),ge===Je){this.capturedId=qe,ye.clear();const Me=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ie}});return document.dispatchEvent(Me),!0}return ye.delete(qe),!1}release(Ie){this.requestedStart.delete(Ie),this.capturedId===Ie&&(this.capturedId=void 0)}disableGesture(Ie,qe){let Je=this.disabledGestures.get(Ie);void 0===Je&&(Je=new Set,this.disabledGestures.set(Ie,Je)),Je.add(qe)}enableGesture(Ie,qe){const Je=this.disabledGestures.get(Ie);void 0!==Je&&Je.delete(qe)}disableScroll(Ie){this.disabledScroll.add(Ie),1===this.disabledScroll.size&&document.body.classList.add(he)}enableScroll(Ie){this.disabledScroll.delete(Ie),0===this.disabledScroll.size&&document.body.classList.remove(he)}canStart(Ie){return!(void 0!==this.capturedId||this.isDisabled(Ie))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ie){const qe=this.disabledGestures.get(Ie);return!!(qe&&qe.size>0)}newID(){return this.gestureId++,this.gestureId}}},2124:(wn,gt,L)=>{"use strict";L.r(gt),L.d(gt,{MENU_BACK_BUTTON_PRIORITY:()=>ke,OVERLAY_BACK_BUTTON_PRIORITY:()=>he,blockHardwareBackButton:()=>v,startHardwareBackButton:()=>ne});var I=L(5861);const v=()=>{document.addEventListener("backbutton",()=>{})},ne=()=>{const Pe=document;let Ie=!1;Pe.addEventListener("backbutton",()=>{var qe;if(Ie)return;let Je=0,ye=[];const ge=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(ze,nt){ye.push({priority:ze,handler:nt,id:Je++})}}});Pe.dispatchEvent(ge);const Ge=()=>{if(ye.length>0){let ze={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};ye.forEach(nt=>{nt.priority>=ze.priority&&(ze=nt)}),Ie=!0,ye=ye.filter(nt=>nt.id!==ze.id),function(nt){return(qe=qe||(0,I.Z)(function*(Ze){try{if(Ze?.handler){const Ye=Ze.handler(Ge);null!=Ye&&(yield Ye)}}catch(Ye){console.error(Ye)}})).apply(this,arguments)}(ze).then(()=>Ie=!1)}};Ge()})},he=100,ke=99},839:(wn,gt,L)=>{"use strict";L.d(gt,{a:()=>qe,b:()=>Je,c:()=>ne,d:()=>Ze,e:()=>nt,f:()=>ze,g:()=>ye,h:()=>Ge,i:()=>Ie,j:()=>rt,k:()=>ke,l:()=>Ye,m:()=>he,n:()=>Me,o:()=>De,p:()=>Ve,q:()=>be,r:()=>ge,s:()=>Xe,t:()=>I,u:()=>Ee,v:()=>yt});const I=(Fe,fe=0)=>new Promise(at=>{v(Fe,fe,at)}),v=(Fe,fe=0,at)=>{let Ue,zt;const en={passive:!0},mn=()=>{Ue&&Ue()},de=gn=>{(void 0===gn||Fe===gn.target)&&(mn(),at(gn))};return Fe&&(Fe.addEventListener("webkitTransitionEnd",de,en),Fe.addEventListener("transitionend",de,en),zt=setTimeout(de,fe+500),Ue=()=>{zt&&(clearTimeout(zt),zt=void 0),Fe.removeEventListener("webkitTransitionEnd",de,en),Fe.removeEventListener("transitionend",de,en)}),mn},ne=(Fe,fe)=>{Fe.componentOnReady?Fe.componentOnReady().then(at=>fe(at)):ge(()=>fe(Fe))},he=Fe=>void 0!==Fe.componentOnReady,ke=(Fe,fe=[])=>{const at={};return fe.forEach(Ue=>{Fe.hasAttribute(Ue)&&(null!==Fe.getAttribute(Ue)&&(at[Ue]=Fe.getAttribute(Ue)),Fe.removeAttribute(Ue))}),at},Pe=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Ie=(Fe,fe)=>{let at=Pe;return fe&&fe.length>0&&(at=at.filter(Ue=>!fe.includes(Ue))),ke(Fe,at)},qe=(Fe,fe,at,Ue)=>{var zt;if(typeof window<"u"){const en=window,Xt=null===(zt=en?.Ionic)||void 0===zt?void 0:zt.config;if(Xt){const mn=Xt.get("_ael");if(mn)return mn(Fe,fe,at,Ue);if(Xt._ael)return Xt._ael(Fe,fe,at,Ue)}}return Fe.addEventListener(fe,at,Ue)},Je=(Fe,fe,at,Ue)=>{var zt;if(typeof window<"u"){const en=window,Xt=null===(zt=en?.Ionic)||void 0===zt?void 0:zt.config;if(Xt){const mn=Xt.get("_rel");if(mn)return mn(Fe,fe,at,Ue);if(Xt._rel)return Xt._rel(Fe,fe,at,Ue)}}return Fe.removeEventListener(fe,at,Ue)},ye=(Fe,fe=Fe)=>Fe.shadowRoot||fe,ge=Fe=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Fe):"function"==typeof requestAnimationFrame?requestAnimationFrame(Fe):setTimeout(Fe),Me=Fe=>!!Fe.shadowRoot&&!!Fe.attachShadow,Ge=Fe=>{const fe=Fe.closest("ion-item");return fe?fe.querySelector("ion-label"):null},ze=Fe=>{if(Fe.focus(),Fe.classList.contains("ion-focusable")){const fe=Fe.closest("ion-app");fe&&fe.setFocus([Fe])}},nt=(Fe,fe)=>{let at;const Ue=Fe.getAttribute("aria-labelledby"),zt=Fe.id;let en=null!==Ue&&""!==Ue.trim()?Ue:fe+"-lbl",Xt=null!==Ue&&""!==Ue.trim()?document.getElementById(Ue):Ge(Fe);return Xt?(null===Ue&&(Xt.id=en),at=Xt.textContent,Xt.setAttribute("aria-hidden","true")):""!==zt.trim()&&(Xt=document.querySelector(`label[for="${zt}"]`),Xt&&(""!==Xt.id?en=Xt.id:Xt.id=en=`${zt}-lbl`,at=Xt.textContent)),{label:Xt,labelId:en,labelText:at}},Ze=(Fe,fe,at,Ue,zt)=>{if(Fe||Me(fe)){let en=fe.querySelector("input.aux-input");en||(en=fe.ownerDocument.createElement("input"),en.type="hidden",en.classList.add("aux-input"),fe.appendChild(en)),en.disabled=zt,en.name=at,en.value=Ue||""}},Ye=(Fe,fe,at)=>Math.max(Fe,Math.min(fe,at)),De=(Fe,fe)=>{if(!Fe){const at="ASSERT: "+fe;throw console.error(at),new Error(at)}},Ee=Fe=>Fe.timeStamp||Date.now(),yt=Fe=>{if(Fe){const fe=Fe.changedTouches;if(fe&&fe.length>0){const at=fe[0];return{x:at.clientX,y:at.clientY}}if(void 0!==Fe.pageX)return{x:Fe.pageX,y:Fe.pageY}}return{x:0,y:0}},Ve=Fe=>{const fe="rtl"===document.dir;switch(Fe){case"start":return fe;case"end":return!fe;default:throw new Error(`"${Fe}" is not a valid value for [side]. Use "start" or "end" instead.`)}},rt=(Fe,fe)=>{const at=Fe._original||Fe;return{_original:Fe,emit:be(at.emit.bind(at),fe)}},be=(Fe,fe=0)=>{let at;return(...Ue)=>{clearTimeout(at),at=setTimeout(Fe,fe,...Ue)}},Xe=(Fe,fe)=>{if(Fe??(Fe={}),fe??(fe={}),Fe===fe)return!0;const at=Object.keys(Fe);if(at.length!==Object.keys(fe).length)return!1;for(const Ue of at)if(!(Ue in fe)||Fe[Ue]!==fe[Ue])return!1;return!0}},6710:(wn,gt,L)=>{"use strict";L.d(gt,{a:()=>v,b:()=>ne,p:()=>I});const I=(he,...ke)=>console.warn(`[Ionic Warning]: ${he}`,...ke),v=(he,...ke)=>console.error(`[Ionic Error]: ${he}`,...ke),ne=(he,...ke)=>console.error(`<${he.tagName.toLowerCase()}> must be used inside ${ke.join(" or ")}.`)},1651:(wn,gt,L)=>{"use strict";L.d(gt,{L:()=>ge,a:()=>Me,b:()=>Ge,c:()=>ze,d:()=>nt,e:()=>mn,g:()=>_t,l:()=>en,s:()=>de,t:()=>De,w:()=>Xt});var he,ke,Pe,Ie,qe,Je,ye,I=L(5861),v=L(1688),ne=L(839);const ge="ionViewWillEnter",Me="ionViewDidEnter",Ge="ionViewWillLeave",ze="ionViewDidLeave",nt="ionViewWillUnload",De=pe=>new Promise((Se,$e)=>{(0,v.w)(()=>{Ee(pe),yt(pe).then(je=>{je.animation&&je.animation.destroy(),Ve(pe),Se(je)},je=>{Ve(pe),$e(je)})})}),Ee=pe=>{const Se=pe.enteringEl,$e=pe.leavingEl;gn(Se,$e,pe.direction),pe.showGoBack?Se.classList.add("can-go-back"):Se.classList.remove("can-go-back"),de(Se,!1),Se.style.setProperty("pointer-events","none"),$e&&(de($e,!1),$e.style.setProperty("pointer-events","none"))},yt=function(Se){return(he=he||(0,I.Z)(function*($e){const je=yield rt($e);return je&&v.B.isBrowser?be(je,$e):Xe($e)})).apply(this,arguments)},Ve=pe=>{const Se=pe.enteringEl,$e=pe.leavingEl;Se.classList.remove("ion-page-invisible"),Se.style.removeProperty("pointer-events"),void 0!==$e&&($e.classList.remove("ion-page-invisible"),$e.style.removeProperty("pointer-events"))},rt=function(Se){return(ke=ke||(0,I.Z)(function*($e){return $e.leavingEl&&$e.animated&&0!==$e.duration?$e.animationBuilder?$e.animationBuilder:"ios"===$e.mode?(yield Promise.resolve().then(L.bind(L,2650))).iosTransitionAnimation:(yield Promise.resolve().then(L.bind(L,1904))).mdTransitionAnimation:void 0})).apply(this,arguments)},be=function(Se,$e){return(Pe=Pe||(0,I.Z)(function*(je,pt){yield Fe(pt,!0);const ht=je(pt.baseEl,pt);Ue(pt.enteringEl,pt.leavingEl);const Bt=yield at(ht,pt);return pt.progressCallback&&pt.progressCallback(void 0),Bt&&zt(pt.enteringEl,pt.leavingEl),{hasCompleted:Bt,animation:ht}})).apply(this,arguments)},Xe=function(Se){return(Ie=Ie||(0,I.Z)(function*($e){const je=$e.enteringEl,pt=$e.leavingEl;return yield Fe($e,!1),Ue(je,pt),zt(je,pt),{hasCompleted:!0}})).apply(this,arguments)},Fe=function(Se,$e){return(qe=qe||(0,I.Z)(function*(je,pt){(void 0!==je.deepWait?je.deepWait:pt)&&(yield Promise.all([mn(je.enteringEl),mn(je.leavingEl)])),yield fe(je.viewIsReady,je.enteringEl)})).apply(this,arguments)},fe=function(Se,$e){return(Je=Je||(0,I.Z)(function*(je,pt){je&&(yield je(pt))})).apply(this,arguments)},at=(pe,Se)=>{const $e=Se.progressCallback,je=new Promise(pt=>{pe.onFinish(ht=>pt(1===ht))});return $e?(pe.progressStart(!0),$e(pe)):pe.play(),je},Ue=(pe,Se)=>{en(Se,Ge),en(pe,ge)},zt=(pe,Se)=>{en(pe,Me),en(Se,ze)},en=(pe,Se)=>{if(pe){const $e=new CustomEvent(Se,{bubbles:!1,cancelable:!1});pe.dispatchEvent($e)}},Xt=()=>new Promise(pe=>(0,ne.r)(()=>(0,ne.r)(()=>pe()))),mn=function pe(Se){return(ye=ye||(0,I.Z)(function*($e){const je=$e;if(je){if(null!=je.componentOnReady){if(null!=(yield je.componentOnReady()))return}else if(null!=je.__registerHost)return void(yield new Promise(ht=>(0,ne.r)(ht)));yield Promise.all(Array.from(je.children).map(pe))}})).apply(this,arguments)},de=(pe,Se)=>{Se?(pe.setAttribute("aria-hidden","true"),pe.classList.add("ion-page-hidden")):(pe.hidden=!1,pe.removeAttribute("aria-hidden"),pe.classList.remove("ion-page-hidden"))},gn=(pe,Se,$e)=>{void 0!==pe&&(pe.style.zIndex="back"===$e?"99":"101"),void 0!==Se&&(Se.style.zIndex="100")},_t=pe=>pe.classList.contains("ion-page")?pe:pe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||pe},6225:(wn,gt,L)=>{"use strict";L.d(gt,{d:()=>v,w:()=>I});const I=typeof window<"u"?window:void 0,v=typeof document<"u"?document:void 0},1688:(wn,gt,L)=>{"use strict";L.d(gt,{B:()=>ze,H:()=>_t,a:()=>Bs,b:()=>ei,c:()=>Qt,d:()=>tn,e:()=>bt,f:()=>Bn,g:()=>st,h:()=>de,i:()=>Ke,j:()=>nt,r:()=>Hr,w:()=>Cn});var v,ne,he,I=L(5861);let Pe,Ie,qe,Je=!1,ye=!1,ge=!1,Me=!1,Ge=!1;const ze={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},nt=J=>{const _e=new URL(J,$r.$resourcesUrl$);return _e.origin!==es.location.origin?_e.href:_e.pathname},rt="s-id",be="sty-id",fe="http://www.w3.org/1999/xlink",at={},Xt=J=>"object"==(J=typeof J)||"function"===J;function mn(J){var _e,it,ct;return null!==(ct=null===(it=null===(_e=J.head)||void 0===_e?void 0:_e.querySelector('meta[name="csp-nonce"]'))||void 0===it?void 0:it.getAttribute("content"))&&void 0!==ct?ct:void 0}const de=(J,_e,...it)=>{let ct=null,At=null,It=null,qt=!1,Zt=!1;const Ut=[],ln=We=>{for(let He=0;He<We.length;He++)ct=We[He],Array.isArray(ct)?ln(ct):null!=ct&&"boolean"!=typeof ct&&((qt="function"!=typeof J&&!Xt(ct))&&(ct=String(ct)),qt&&Zt?Ut[Ut.length-1].$text$+=ct:Ut.push(qt?gn(null,ct):ct),Zt=qt)};if(ln(it),_e){_e.key&&(At=_e.key),_e.name&&(It=_e.name);{const We=_e.className||_e.class;We&&(_e.class="object"!=typeof We?We:Object.keys(We).filter(He=>We[He]).join(" "))}}if("function"==typeof J)return J(null===_e?{}:_e,Ut,Se);const Rn=gn(J,null);return Rn.$attrs$=_e,Ut.length>0&&(Rn.$children$=Ut),Rn.$key$=At,Rn.$name$=It,Rn},gn=(J,_e)=>({$flags$:0,$tag$:J,$text$:_e,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),_t={},Se={forEach:(J,_e)=>J.map($e).forEach(_e),map:(J,_e)=>J.map($e).map(_e).map(je)},$e=J=>({vattrs:J.$attrs$,vchildren:J.$children$,vkey:J.$key$,vname:J.$name$,vtag:J.$tag$,vtext:J.$text$}),je=J=>{if("function"==typeof J.vtag){const it=Object.assign({},J.vattrs);return J.vkey&&(it.key=J.vkey),J.vname&&(it.name=J.vname),de(J.vtag,it,...J.vchildren||[])}const _e=gn(J.vtag,J.vtext);return _e.$attrs$=J.vattrs,_e.$children$=J.vchildren,_e.$key$=J.vkey,_e.$name$=J.vname,_e},ht=(J,_e,it,ct,At,It,qt)=>{let Zt,Ut,ln,Rn;if(1===It.nodeType){for(Zt=It.getAttribute("c-id"),Zt&&(Ut=Zt.split("."),(Ut[0]===qt||"0"===Ut[0])&&(ln={$flags$:0,$hostId$:Ut[0],$nodeId$:Ut[1],$depth$:Ut[2],$index$:Ut[3],$tag$:It.tagName.toLowerCase(),$elm$:It,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},_e.push(ln),It.removeAttribute("c-id"),J.$children$||(J.$children$=[]),J.$children$[ln.$index$]=ln,J=ln,ct&&"0"===ln.$depth$&&(ct[ln.$index$]=ln.$elm$))),Rn=It.childNodes.length-1;Rn>=0;Rn--)ht(J,_e,it,ct,At,It.childNodes[Rn],qt);if(It.shadowRoot)for(Rn=It.shadowRoot.childNodes.length-1;Rn>=0;Rn--)ht(J,_e,it,ct,At,It.shadowRoot.childNodes[Rn],qt)}else if(8===It.nodeType)Ut=It.nodeValue.split("."),(Ut[1]===qt||"0"===Ut[1])&&(Zt=Ut[0],ln={$flags$:0,$hostId$:Ut[1],$nodeId$:Ut[2],$depth$:Ut[3],$index$:Ut[4],$elm$:It,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Zt?(ln.$elm$=It.nextSibling,ln.$elm$&&3===ln.$elm$.nodeType&&(ln.$text$=ln.$elm$.textContent,_e.push(ln),It.remove(),J.$children$||(J.$children$=[]),J.$children$[ln.$index$]=ln,ct&&"0"===ln.$depth$&&(ct[ln.$index$]=ln.$elm$))):ln.$hostId$===qt&&("s"===Zt?(ln.$tag$="slot",It["s-sn"]=Ut[5]?ln.$name$=Ut[5]:"",It["s-sr"]=!0,ct&&(ln.$elm$=Kr.createElement(ln.$tag$),ln.$name$&&ln.$elm$.setAttribute("name",ln.$name$),It.parentNode.insertBefore(ln.$elm$,It),It.remove(),"0"===ln.$depth$&&(ct[ln.$index$]=ln.$elm$)),it.push(ln),J.$children$||(J.$children$=[]),J.$children$[ln.$index$]=ln):"r"===Zt&&(ct?It.remove():(At["s-cr"]=It,It["s-cn"]=!0))));else if(J&&"style"===J.$tag$){const We=gn(null,It.textContent);We.$elm$=It,We.$index$="0",J.$children$=[We]}},Bt=(J,_e)=>{if(1===J.nodeType){let it=0;for(;it<J.childNodes.length;it++)Bt(J.childNodes[it],_e);if(J.shadowRoot)for(it=0;it<J.shadowRoot.childNodes.length;it++)Bt(J.shadowRoot.childNodes[it],_e)}else if(8===J.nodeType){const it=J.nodeValue.split(".");"o"===it[0]&&(_e.set(it[1]+"."+it[2],J),J.nodeValue="",J["s-en"]=it[3])}},Qt=J=>Ni.push(J),st=J=>ur(J).$modeName$,Bn=J=>ur(J).$hostElement$,tn=(J,_e,it)=>{const ct=Bn(J);return{emit:At=>wt(ct,_e,{bubbles:!!(4&it),composed:!!(2&it),cancelable:!!(1&it),detail:At})}},wt=(J,_e,it)=>{const ct=$r.ce(_e,it);return J.dispatchEvent(ct),ct},Rt=new WeakMap,dt=(J,_e,it)=>{let ct=vi.get(J);Ei&&it?(ct=ct||new CSSStyleSheet,"string"==typeof ct?ct=_e:ct.replaceSync(_e)):ct=_e,vi.set(J,ct)},Wt=(J,_e,it)=>{var ct;const At=En(_e,it),It=vi.get(At);if(J=11===J.nodeType?J:Kr,It)if("string"==typeof It){let Zt,qt=Rt.get(J=J.head||J);if(qt||Rt.set(J,qt=new Set),!qt.has(At)){if(J.host&&(Zt=J.querySelector(`[${be}="${At}"]`)))Zt.innerHTML=It;else{Zt=Kr.createElement("style"),Zt.innerHTML=It;const Ut=null!==(ct=$r.$nonce$)&&void 0!==ct?ct:mn(Kr);null!=Ut&&Zt.setAttribute("nonce",Ut),J.insertBefore(Zt,J.querySelector("link"))}qt&&qt.add(At)}}else J.adoptedStyleSheets.includes(It)||(J.adoptedStyleSheets=[...J.adoptedStyleSheets,It]);return At},En=(J,_e)=>"sc-"+(_e&&32&J.$flags$?J.$tagName$+"-"+_e:J.$tagName$),vn=J=>J.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Xn=(J,_e,it,ct,At,It)=>{if(it!==ct){let qt=Ji(J,_e),Zt=_e.toLowerCase();if("class"===_e){const Ut=J.classList,ln=wr(it),Rn=wr(ct);Ut.remove(...ln.filter(We=>We&&!Rn.includes(We))),Ut.add(...Rn.filter(We=>We&&!ln.includes(We)))}else if("style"===_e){for(const Ut in it)(!ct||null==ct[Ut])&&(Ut.includes("-")?J.style.removeProperty(Ut):J.style[Ut]="");for(const Ut in ct)(!it||ct[Ut]!==it[Ut])&&(Ut.includes("-")?J.style.setProperty(Ut,ct[Ut]):J.style[Ut]=ct[Ut])}else if("key"!==_e)if("ref"===_e)ct&&ct(J);else if(qt||"o"!==_e[0]||"n"!==_e[1]){const Ut=Xt(ct);if((qt||Ut&&null!==ct)&&!At)try{if(J.tagName.includes("-"))J[_e]=ct;else{const Rn=ct??"";"list"===_e?qt=!1:(null==it||J[_e]!=Rn)&&(J[_e]=Rn)}}catch{}let ln=!1;Zt!==(Zt=Zt.replace(/^xlink\:?/,""))&&(_e=Zt,ln=!0),null==ct||!1===ct?(!1!==ct||""===J.getAttribute(_e))&&(ln?J.removeAttributeNS(fe,_e):J.removeAttribute(_e)):(!qt||4&It||At)&&!Ut&&(ct=!0===ct?"":ct,ln?J.setAttributeNS(fe,_e,ct):J.setAttribute(_e,ct))}else _e="-"===_e[2]?_e.slice(3):Ji(es,Zt)?Zt.slice(2):Zt[2]+_e.slice(3),it&&$r.rel(J,_e,it,!1),ct&&$r.ael(J,_e,ct,!1)}},Jn=/\s/,wr=J=>J?J.split(Jn):[],Sn=(J,_e,it,ct)=>{const At=11===_e.$elm$.nodeType&&_e.$elm$.host?_e.$elm$.host:_e.$elm$,It=J&&J.$attrs$||at,qt=_e.$attrs$||at;for(ct in It)ct in qt||Xn(At,ct,It[ct],void 0,it,_e.$flags$);for(ct in qt)Xn(At,ct,It[ct],qt[ct],it,_e.$flags$)},Pn=(J,_e,it,ct)=>{const At=_e.$children$[it];let qt,Zt,Ut,It=0;if(Je||(ge=!0,"slot"===At.$tag$&&(Pe&&ct.classList.add(Pe+"-s"),At.$flags$|=At.$children$?2:1)),null!==At.$text$)qt=At.$elm$=Kr.createTextNode(At.$text$);else if(1&At.$flags$)qt=At.$elm$=Kr.createTextNode("");else{if(Me||(Me="svg"===At.$tag$),qt=At.$elm$=Kr.createElementNS(Me?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&At.$flags$?"slot-fb":At.$tag$),Me&&"foreignObject"===At.$tag$&&(Me=!1),Sn(null,At,Me),(J=>null!=J)(Pe)&&qt["s-si"]!==Pe&&qt.classList.add(qt["s-si"]=Pe),At.$children$)for(It=0;It<At.$children$.length;++It)Zt=Pn(J,At,It,qt),Zt&&qt.appendChild(Zt);"svg"===At.$tag$?Me=!1:"foreignObject"===qt.tagName&&(Me=!0)}return qt["s-hn"]=qe,3&At.$flags$&&(qt["s-sr"]=!0,qt["s-cr"]=Ie,qt["s-sn"]=At.$name$||"",Ut=J&&J.$children$&&J.$children$[it],Ut&&Ut.$tag$===At.$tag$&&J.$elm$&&Un(J.$elm$,!1)),qt},Un=(J,_e)=>{$r.$flags$|=1;const it=J.childNodes;for(let ct=it.length-1;ct>=0;ct--){const At=it[ct];At["s-hn"]!==qe&&At["s-ol"]&&(an(At).insertBefore(At,hr(At)),At["s-ol"].remove(),At["s-ol"]=void 0,ge=!0),_e&&Un(At,_e)}$r.$flags$&=-2},pr=(J,_e,it,ct,At,It)=>{let Zt,qt=J["s-cr"]&&J["s-cr"].parentNode||J;for(qt.shadowRoot&&qt.tagName===qe&&(qt=qt.shadowRoot);At<=It;++At)ct[At]&&(Zt=Pn(null,it,At,J),Zt&&(ct[At].$elm$=Zt,qt.insertBefore(Zt,hr(_e))))},Lr=(J,_e,it)=>{for(let ct=_e;ct<=it;++ct){const At=J[ct];if(At){const It=At.$elm$;Di(At),It&&(ye=!0,It["s-ol"]?It["s-ol"].remove():Un(It,!0),It.remove())}}},Kt=(J,_e)=>J.$tag$===_e.$tag$&&("slot"===J.$tag$?J.$name$===_e.$name$:J.$key$===_e.$key$),hr=J=>J&&J["s-ol"]||J,an=J=>(J["s-ol"]?J["s-ol"]:J).parentNode,Cr=(J,_e)=>{const it=_e.$elm$=J.$elm$,ct=J.$children$,At=_e.$children$,It=_e.$tag$,qt=_e.$text$;let Zt;null===qt?(Me="svg"===It||"foreignObject"!==It&&Me,"slot"===It||Sn(J,_e,Me),null!==ct&&null!==At?((J,_e,it,ct)=>{let kt,Dt,At=0,It=0,qt=0,Zt=0,Ut=_e.length-1,ln=_e[0],Rn=_e[Ut],We=ct.length-1,He=ct[0],ut=ct[We];for(;At<=Ut&&It<=We;)if(null==ln)ln=_e[++At];else if(null==Rn)Rn=_e[--Ut];else if(null==He)He=ct[++It];else if(null==ut)ut=ct[--We];else if(Kt(ln,He))Cr(ln,He),ln=_e[++At],He=ct[++It];else if(Kt(Rn,ut))Cr(Rn,ut),Rn=_e[--Ut],ut=ct[--We];else if(Kt(ln,ut))("slot"===ln.$tag$||"slot"===ut.$tag$)&&Un(ln.$elm$.parentNode,!1),Cr(ln,ut),J.insertBefore(ln.$elm$,Rn.$elm$.nextSibling),ln=_e[++At],ut=ct[--We];else if(Kt(Rn,He))("slot"===ln.$tag$||"slot"===ut.$tag$)&&Un(Rn.$elm$.parentNode,!1),Cr(Rn,He),J.insertBefore(Rn.$elm$,ln.$elm$),Rn=_e[--Ut],He=ct[++It];else{for(qt=-1,Zt=At;Zt<=Ut;++Zt)if(_e[Zt]&&null!==_e[Zt].$key$&&_e[Zt].$key$===He.$key$){qt=Zt;break}qt>=0?(Dt=_e[qt],Dt.$tag$!==He.$tag$?kt=Pn(_e&&_e[It],it,qt,J):(Cr(Dt,He),_e[qt]=void 0,kt=Dt.$elm$),He=ct[++It]):(kt=Pn(_e&&_e[It],it,It,J),He=ct[++It]),kt&&an(ln.$elm$).insertBefore(kt,hr(ln.$elm$))}At>Ut?pr(J,null==ct[We+1]?null:ct[We+1].$elm$,it,ct,It,We):It>We&&Lr(_e,At,Ut)})(it,ct,_e,At):null!==At?(null!==J.$text$&&(it.textContent=""),pr(it,null,_e,At,0,At.length-1)):null!==ct&&Lr(ct,0,ct.length-1),Me&&"svg"===It&&(Me=!1)):(Zt=it["s-cr"])?Zt.parentNode.textContent=qt:J.$text$!==qt&&(it.data=qt)},_s=J=>{const _e=J.childNodes;let it,ct,At,It,qt,Zt;for(ct=0,At=_e.length;ct<At;ct++)if(it=_e[ct],1===it.nodeType){if(it["s-sr"])for(qt=it["s-sn"],it.hidden=!1,It=0;It<At;It++)if(Zt=_e[It].nodeType,_e[It]["s-hn"]!==it["s-hn"]||""!==qt){if(1===Zt&&qt===_e[It].getAttribute("slot")){it.hidden=!0;break}}else if(1===Zt||3===Zt&&""!==_e[It].textContent.trim()){it.hidden=!0;break}_s(it)}},or=[],bi=J=>{let _e,it,ct,At,It,qt,Zt=0;const Ut=J.childNodes,ln=Ut.length;for(;Zt<ln;Zt++){if(_e=Ut[Zt],_e["s-sr"]&&(it=_e["s-cr"])&&it.parentNode)for(ct=it.parentNode.childNodes,At=_e["s-sn"],qt=ct.length-1;qt>=0;qt--)it=ct[qt],!it["s-cn"]&&!it["s-nr"]&&it["s-hn"]!==_e["s-hn"]&&(Zi(it,At)?(It=or.find(Rn=>Rn.$nodeToRelocate$===it),ye=!0,it["s-sn"]=it["s-sn"]||At,It?It.$slotRefNode$=_e:or.push({$slotRefNode$:_e,$nodeToRelocate$:it}),it["s-sr"]&&or.map(Rn=>{Zi(Rn.$nodeToRelocate$,it["s-sn"])&&(It=or.find(We=>We.$nodeToRelocate$===it),It&&!Rn.$slotRefNode$&&(Rn.$slotRefNode$=It.$slotRefNode$))})):or.some(Rn=>Rn.$nodeToRelocate$===it)||or.push({$nodeToRelocate$:it}));1===_e.nodeType&&bi(_e)}},Zi=(J,_e)=>1===J.nodeType?null===J.getAttribute("slot")&&""===_e||J.getAttribute("slot")===_e:J["s-sn"]===_e||""===_e,Di=J=>{J.$attrs$&&J.$attrs$.ref&&J.$attrs$.ref(null),J.$children$&&J.$children$.map(Di)},Ii=(J,_e)=>{_e&&!J.$onRenderResolve$&&_e["s-p"]&&_e["s-p"].push(new Promise(it=>J.$onRenderResolve$=it))},jt=(J,_e)=>{if(J.$flags$|=16,!(4&J.$flags$))return Ii(J,J.$ancestorComponent$),Cn(()=>ot(J,_e));J.$flags$|=512},ot=(J,_e)=>{const ct=J.$lazyInstance$;let At;return _e&&(J.$flags$|=256,J.$queuedListeners$&&(J.$queuedListeners$.map(([It,qt])=>te(ct,It,qt)),J.$queuedListeners$=void 0),At=te(ct,"componentWillLoad")),At=Pt(At,()=>te(ct,"componentWillRender")),Pt(At,()=>In(J,ct,_e))},Pt=(J,_e)=>sn(J)?J.then(_e):_e(),sn=J=>J instanceof Promise||J&&J.then&&"function"==typeof J.then,In=function(_e,it,ct){return(v=v||(0,I.Z)(function*(At,It,qt){var Zt;const Ut=At.$hostElement$,Rn=Ut["s-rc"];qt&&(J=>{const _e=J.$cmpMeta$,it=J.$hostElement$,ct=_e.$flags$,It=Wt(it.shadowRoot?it.shadowRoot:it.getRootNode(),_e,J.$modeName$);10&ct&&(it["s-sc"]=It,it.classList.add(It+"-h"),2&ct&&it.classList.add(It+"-s"))})(At);Mn(At,It,Ut,qt),Rn&&(Rn.map(He=>He()),Ut["s-rc"]=void 0);{const He=null!==(Zt=Ut["s-p"])&&void 0!==Zt?Zt:[],ut=()=>br(At);0===He.length?ut():(Promise.all(He).then(ut),At.$flags$|=4,He.length=0)}})).apply(this,arguments)},Mn=(J,_e,it,ct)=>{try{_e=_e.render&&_e.render(),J.$flags$&=-17,J.$flags$|=2,((J,_e,it=!1)=>{const ct=J.$hostElement$,At=J.$cmpMeta$,It=J.$vnode$||gn(null,null),qt=(J=>J&&J.$tag$===_t)(_e)?_e:de(null,null,_e);if(qe=ct.tagName,At.$attrsToReflect$&&(qt.$attrs$=qt.$attrs$||{},At.$attrsToReflect$.map(([Zt,Ut])=>qt.$attrs$[Ut]=ct[Zt])),it&&qt.$attrs$)for(const Zt of Object.keys(qt.$attrs$))ct.hasAttribute(Zt)&&!["key","ref","style","class"].includes(Zt)&&(qt.$attrs$[Zt]=ct[Zt]);if(qt.$tag$=null,qt.$flags$|=4,J.$vnode$=qt,qt.$elm$=It.$elm$=ct.shadowRoot||ct,Pe=ct["s-sc"],Ie=ct["s-cr"],Je=0!=(1&At.$flags$),ye=!1,Cr(It,qt),$r.$flags$|=1,ge){bi(qt.$elm$);let Zt,Ut,ln,Rn,We,He,ut=0;for(;ut<or.length;ut++)Zt=or[ut],Ut=Zt.$nodeToRelocate$,Ut["s-ol"]||(ln=Kr.createTextNode(""),ln["s-nr"]=Ut,Ut.parentNode.insertBefore(Ut["s-ol"]=ln,Ut));for(ut=0;ut<or.length;ut++)if(Zt=or[ut],Ut=Zt.$nodeToRelocate$,Zt.$slotRefNode$){for(Rn=Zt.$slotRefNode$.parentNode,We=Zt.$slotRefNode$.nextSibling,ln=Ut["s-ol"];ln=ln.previousSibling;)if(He=ln["s-nr"],He&&He["s-sn"]===Ut["s-sn"]&&Rn===He.parentNode&&(He=He.nextSibling,!He||!He["s-nr"])){We=He;break}(!We&&Rn!==Ut.parentNode||Ut.nextSibling!==We)&&Ut!==We&&(!Ut["s-hn"]&&Ut["s-ol"]&&(Ut["s-hn"]=Ut["s-ol"].parentNode.nodeName),Rn.insertBefore(Ut,We))}else 1===Ut.nodeType&&(Ut.hidden=!0)}ye&&_s(qt.$elm$),$r.$flags$&=-2,or.length=0})(J,_e,ct)}catch(At){Mi(At,J.$hostElement$)}return null},br=J=>{const it=J.$hostElement$,At=J.$lazyInstance$,It=J.$ancestorComponent$;te(At,"componentDidRender"),64&J.$flags$?te(At,"componentDidUpdate"):(J.$flags$|=64,Ne(it),te(At,"componentDidLoad"),J.$onReadyResolve$(it),It||re()),J.$onInstanceResolve$(it),J.$onRenderResolve$&&(J.$onRenderResolve$(),J.$onRenderResolve$=void 0),512&J.$flags$&&as(()=>jt(J,!1)),J.$flags$&=-517},Ke=J=>{{const _e=ur(J),it=_e.$hostElement$.isConnected;return it&&2==(18&_e.$flags$)&&jt(_e,!1),it}},re=J=>{Ne(Kr.documentElement),as(()=>wt(es,"appload",{detail:{namespace:"ionic"}}))},te=(J,_e,it)=>{if(J&&J[_e])try{return J[_e](it)}catch(ct){Mi(ct)}},Ne=J=>J.classList.add("hydrated"),St=(J,_e,it)=>{if(_e.$members$){J.watchers&&(_e.$watchers$=J.watchers);const ct=Object.entries(_e.$members$),At=J.prototype;if(ct.map(([It,[qt]])=>{31&qt||2&it&&32&qt?Object.defineProperty(At,It,{get(){return((J,_e)=>ur(this).$instanceValues$.get(_e))(0,It)},set(Zt){((J,_e,it,ct)=>{const At=ur(J),It=At.$hostElement$,qt=At.$instanceValues$.get(_e),Zt=At.$flags$,Ut=At.$lazyInstance$;it=((J,_e)=>null==J||Xt(J)?J:4&_e?"false"!==J&&(""===J||!!J):2&_e?parseFloat(J):1&_e?String(J):J)(it,ct.$members$[_e][0]);const ln=Number.isNaN(qt)&&Number.isNaN(it);if((!(8&Zt)||void 0===qt)&&it!==qt&&!ln&&(At.$instanceValues$.set(_e,it),Ut)){if(ct.$watchers$&&128&Zt){const We=ct.$watchers$[_e];We&&We.map(He=>{try{Ut[He](it,qt,_e)}catch(ut){Mi(ut,It)}})}2==(18&Zt)&&jt(At,!1)}})(this,It,Zt,_e)},configurable:!0,enumerable:!0}):1&it&&64&qt&&Object.defineProperty(At,It,{value(...Zt){const Ut=ur(this);return Ut.$onInstancePromise$.then(()=>Ut.$lazyInstance$[It](...Zt))}})}),1&it){const It=new Map;At.attributeChangedCallback=function(qt,Zt,Ut){$r.jmp(()=>{const ln=It.get(qt);if(this.hasOwnProperty(ln))Ut=this[ln],delete this[ln];else if(At.hasOwnProperty(ln)&&"number"==typeof this[ln]&&this[ln]==Ut)return;this[ln]=(null!==Ut||"boolean"!=typeof this[ln])&&Ut})},J.observedAttributes=ct.filter(([qt,Zt])=>15&Zt[0]).map(([qt,Zt])=>{const Ut=Zt[1]||qt;return It.set(Ut,qt),512&Zt[0]&&_e.$attrsToReflect$.push([qt,Ut]),Ut})}}return J},zn=J=>{te(J,"connectedCallback")},yn=J=>{if(!(1&$r.$flags$)){const _e=ur(J),it=_e.$cmpMeta$,ct=()=>{};if(1&_e.$flags$)Is(J,_e,it.$listeners$),_e?.$lazyInstance$?zn(_e.$lazyInstance$):_e?.$onReadyPromise$&&_e.$onReadyPromise$.then(()=>zn(_e.$lazyInstance$));else{let At;if(_e.$flags$|=1,At=J.getAttribute(rt),At){if(1&it.$flags$){const It=Wt(J.shadowRoot,it,J.getAttribute("s-mode"));J.classList.remove(It+"-h",It+"-s")}((J,_e,it,ct)=>{const It=J.shadowRoot,qt=[],Ut=It?[]:null,ln=ct.$vnode$=gn(_e,null);$r.$orgLocNodes$||Bt(Kr.body,$r.$orgLocNodes$=new Map),J[rt]=it,J.removeAttribute(rt),ht(ln,qt,[],Ut,J,J,it),qt.map(Rn=>{const We=Rn.$hostId$+"."+Rn.$nodeId$,He=$r.$orgLocNodes$.get(We),ut=Rn.$elm$;He&&Ys&&""===He["s-en"]&&He.parentNode.insertBefore(ut,He.nextSibling),It||(ut["s-hn"]=_e,He&&(ut["s-ol"]=He,ut["s-ol"]["s-nr"]=ut)),$r.$orgLocNodes$.delete(We)}),It&&Ut.map(Rn=>{Rn&&It.appendChild(Rn)})})(J,it.$tagName$,At,_e)}At||12&it.$flags$&&lr(J);{let It=J;for(;It=It.parentNode||It.host;)if(1===It.nodeType&&It.hasAttribute("s-id")&&It["s-p"]||It["s-p"]){Ii(_e,_e.$ancestorComponent$=It);break}}it.$members$&&Object.entries(it.$members$).map(([It,[qt]])=>{if(31&qt&&J.hasOwnProperty(It)){const Zt=J[It];delete J[It],J[It]=Zt}}),function(_e,it,ct,At,It){(ne=ne||(0,I.Z)(function*(qt,Zt,Ut,ln,Rn){if(!(32&Zt.$flags$)){Zt.$flags$|=32;{if((Rn=on(Ut)).then){const kt=()=>{};Rn=yield Rn,kt()}Rn.isProxied||(Ut.$watchers$=Rn.watchers,St(Rn,Ut,2),Rn.isProxied=!0);const ut=()=>{};Zt.$flags$|=8;try{new Rn(Zt)}catch(kt){Mi(kt)}Zt.$flags$&=-9,Zt.$flags$|=128,ut(),zn(Zt.$lazyInstance$)}if(Rn.style){let ut=Rn.style;"string"!=typeof ut&&(ut=ut[Zt.$modeName$=(J=qt,Ni.map(_e=>_e(J)).find(_e=>!!_e))]);const kt=En(Ut,Zt.$modeName$);if(!vi.has(kt)){const Dt=()=>{};dt(kt,ut,!!(1&Ut.$flags$)),Dt()}}}var J;const We=Zt.$ancestorComponent$,He=()=>jt(Zt,!0);We&&We["s-rc"]?We["s-rc"].push(He):He()})).apply(this,arguments)}(J,_e,it)}ct()}},lr=J=>{const _e=J["s-cr"]=Kr.createComment("");_e["s-cn"]=!0,J.insertBefore(_e,J.firstChild)},er=J=>{te(J,"disconnectedCallback")},ei=(J,_e={})=>{var it;const At=[],It=_e.exclude||[],qt=es.customElements,Zt=Kr.head,Ut=Zt.querySelector("meta[charset]"),ln=Kr.createElement("style"),Rn=[],We=Kr.querySelectorAll(`[${be}]`);let He,ut=!0,kt=0;for(Object.assign($r,_e),$r.$resourcesUrl$=new URL(_e.resourcesUrl||"./",Kr.baseURI).href,$r.$flags$|=2;kt<We.length;kt++)dt(We[kt].getAttribute(be),vn(We[kt].innerHTML),!0);J.map(Dt=>{Dt[1].map(bn=>{const qn={$flags$:bn[0],$tagName$:bn[1],$members$:bn[2],$listeners$:bn[3]};qn.$members$=bn[2],qn.$listeners$=bn[3],qn.$attrsToReflect$=[],qn.$watchers$={};const Kn=qn.$tagName$,Qn=class extends HTMLElement{constructor(Ln){super(Ln),qr(Ln=this,qn),1&qn.$flags$&&Ln.attachShadow({mode:"open",delegatesFocus:!!(16&qn.$flags$)})}connectedCallback(){He&&(clearTimeout(He),He=null),ut?Rn.push(this):$r.jmp(()=>yn(this))}disconnectedCallback(){$r.jmp(()=>function(_e){return(he=he||(0,I.Z)(function*(it){if(!(1&$r.$flags$)){const ct=ur(it);ct.$rmListeners$&&(ct.$rmListeners$.map(At=>At()),ct.$rmListeners$=void 0),ct?.$lazyInstance$?er(ct.$lazyInstance$):ct?.$onReadyPromise$&&ct.$onReadyPromise$.then(()=>er(ct.$lazyInstance$))}})).apply(this,arguments)}(this))}componentOnReady(){return ur(this).$onReadyPromise$}};qn.$lazyBundleId$=Dt[0],!It.includes(Kn)&&!qt.get(Kn)&&(At.push(Kn),qt.define(Kn,St(Qn,qn,1)))})});{ln.innerHTML=At+"{visibility:hidden}.hydrated{visibility:inherit}",ln.setAttribute("data-styles","");const Dt=null!==(it=$r.$nonce$)&&void 0!==it?it:mn(Kr);null!=Dt&&ln.setAttribute("nonce",Dt),Zt.insertBefore(ln,Ut?Ut.nextSibling:Zt.firstChild)}ut=!1,Rn.length?Rn.map(Dt=>Dt.connectedCallback()):$r.jmp(()=>He=setTimeout(re,30))},Is=(J,_e,it,ct)=>{it&&it.map(([At,It,qt])=>{const Zt=Bi(J,At),Ut=Fs(_e,qt),ln=zi(At);$r.ael(Zt,It,Ut,ln),(_e.$rmListeners$=_e.$rmListeners$||[]).push(()=>$r.rel(Zt,It,Ut,ln))})},Fs=(J,_e)=>it=>{try{256&J.$flags$?J.$lazyInstance$[_e](it):(J.$queuedListeners$=J.$queuedListeners$||[]).push([_e,it])}catch(ct){Mi(ct)}},Bi=(J,_e)=>4&_e?Kr:8&_e?es:16&_e?Kr.body:J,zi=J=>0!=(2&J),Pi=new WeakMap,ur=J=>Pi.get(J),Hr=(J,_e)=>Pi.set(_e.$lazyInstance$=J,_e),qr=(J,_e)=>{const it={$flags$:0,$hostElement$:J,$cmpMeta$:_e,$instanceValues$:new Map};return it.$onInstancePromise$=new Promise(ct=>it.$onInstanceResolve$=ct),it.$onReadyPromise$=new Promise(ct=>it.$onReadyResolve$=ct),J["s-p"]=[],J["s-rc"]=[],Is(J,it,_e.$listeners$),Pi.set(J,it)},Ji=(J,_e)=>_e in J,Mi=(J,_e)=>(0,console.error)(J,_e),ti=new Map,on=(J,_e,it)=>{const ct=J.$tagName$.replace(/-/g,"_"),At=J.$lazyBundleId$,It=ti.get(At);return It?It[ct]:L(863)(`./${At}.entry.js`).then(qt=>(ti.set(At,qt),qt[ct]),Mi)},vi=new Map,Ni=[],es=typeof window<"u"?window:{},Kr=es.document||{head:{}},$r={$flags$:0,$resourcesUrl$:"",jmp:J=>J(),raf:J=>requestAnimationFrame(J),ael:(J,_e,it,ct)=>J.addEventListener(_e,it,ct),rel:(J,_e,it,ct)=>J.removeEventListener(_e,it,ct),ce:(J,_e)=>new CustomEvent(J,_e)},Bs=J=>{Object.assign($r,J)},Ys=!0,Ei=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),ts=[],Gi=[],$s=(J,_e)=>it=>{J.push(it),Ge||(Ge=!0,_e&&4&$r.$flags$?as(Dr):$r.raf(Dr))},Ir=J=>{for(let _e=0;_e<J.length;_e++)try{J[_e](performance.now())}catch(it){Mi(it)}J.length=0},Dr=()=>{Ir(ts),Ir(Gi),(Ge=ts.length>0)&&$r.raf(Dr)},as=J=>Promise.resolve(void 0).then(J),bt=$s(ts,!1),Cn=$s(Gi,!0)},5662:(wn,gt,L)=>{"use strict";L.d(gt,{m:()=>ge});var I=L(5861),v=L(2124),ne=L(839),he=L(2085),ke=L(1774);const Pe=Me=>(0,ke.c)().duration(Me?400:300),Ie=Me=>{let Ge,ze;const nt=Me.width+8,Ze=(0,ke.c)(),Ye=(0,ke.c)();Me.isEndSide?(Ge=nt+"px",ze="0px"):(Ge=-nt+"px",ze="0px"),Ze.addElement(Me.menuInnerEl).fromTo("transform",`translateX(${Ge})`,`translateX(${ze})`);const Ee="ios"===(0,he.b)(Me),yt=Ee?.2:.25;return Ye.addElement(Me.backdropEl).fromTo("opacity",.01,yt),Pe(Ee).addAnimation([Ze,Ye])},qe=Me=>{let Ge,ze;const nt=(0,he.b)(Me),Ze=Me.width;Me.isEndSide?(Ge=-Ze+"px",ze=Ze+"px"):(Ge=Ze+"px",ze=-Ze+"px");const Ye=(0,ke.c)().addElement(Me.menuInnerEl).fromTo("transform",`translateX(${ze})`,"translateX(0px)"),De=(0,ke.c)().addElement(Me.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ge})`),Ee=(0,ke.c)().addElement(Me.backdropEl).fromTo("opacity",.01,.32);return Pe("ios"===nt).addAnimation([Ye,De,Ee])},Je=Me=>{const Ge=(0,he.b)(Me),ze=Me.width*(Me.isEndSide?-1:1)+"px",nt=(0,ke.c)().addElement(Me.contentEl).fromTo("transform","translateX(0px)",`translateX(${ze})`);return Pe("ios"===Ge).addAnimation(nt)},ge=(()=>{var Me,Ge,ze,nt,Ze,Ye,De,Ee,yt,Ve,rt,be;const Xe=new Map,Fe=[],de=function(wt){return(Ee=Ee||(0,I.Z)(function*(Rt){return yield Bn(),"start"===Rt||"end"===Rt?Vn(Tn=>Tn.side===Rt&&!Tn.disabled)||Vn(Tn=>Tn.side===Rt):null!=Rt?Vn(Wt=>Wt.menuId===Rt):Vn(Wt=>!Wt.disabled)||(Fe.length>0?Fe[0].el:void 0)})).apply(this,arguments)},gn=function(){return(yt=yt||(0,I.Z)(function*(){return yield Bn(),Ft()})).apply(this,arguments)},Se=(tn,wt)=>{Xe.set(tn,wt)},pt=tn=>{const wt=tn.side;Fe.filter(Rt=>Rt.side===wt&&Rt!==tn).forEach(Rt=>Rt.disabled=!0)},Ft=()=>Vn(tn=>tn._isOpen),st=()=>Fe.some(tn=>tn.isAnimating),Vn=tn=>{const wt=Fe.find(tn);if(void 0!==wt)return wt.el},Bn=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(tn=>new Promise(wt=>(0,ne.c)(tn,wt))));return Se("reveal",Je),Se("push",qe),Se("overlay",Ie),typeof document<"u"&&document.addEventListener("ionBackButton",tn=>{const wt=Ft();wt&&tn.detail.register(v.MENU_BACK_BUTTON_PRIORITY,()=>wt.close())}),{registerAnimation:Se,get:de,getMenus:function(){return(Ve=Ve||(0,I.Z)(function*(){return yield Bn(),Fe.map(tn=>tn.el)})).apply(this,arguments)},getOpen:gn,isEnabled:function(wt){return(De=De||(0,I.Z)(function*(Rt){const dt=yield de(Rt);return!!dt&&!dt.disabled})).apply(this,arguments)},swipeGesture:function(wt,Rt){return(Ze=Ze||(0,I.Z)(function*(dt,Wt){const Tn=yield de(Wt);return Tn&&(Tn.swipeGesture=dt),Tn})).apply(this,arguments)},isAnimating:function(){return(rt=rt||(0,I.Z)(function*(){return yield Bn(),st()})).apply(this,arguments)},isOpen:function(wt){return(Ye=Ye||(0,I.Z)(function*(Rt){if(null!=Rt){const dt=yield de(Rt);return void 0!==dt&&dt.isOpen()}return void 0!==(yield gn())})).apply(this,arguments)},enable:function(wt,Rt){return(nt=nt||(0,I.Z)(function*(dt,Wt){const Tn=yield de(Wt);return Tn&&(Tn.disabled=!dt),Tn})).apply(this,arguments)},toggle:function(wt){return(ze=ze||(0,I.Z)(function*(Rt){const dt=yield de(Rt);return!!dt&&dt.toggle()})).apply(this,arguments)},close:function(wt){return(Ge=Ge||(0,I.Z)(function*(Rt){const dt=yield void 0!==Rt?de(Rt):gn();return void 0!==dt&&dt.close()})).apply(this,arguments)},open:function(wt){return(Me=Me||(0,I.Z)(function*(Rt){const dt=yield de(Rt);return!!dt&&dt.open()})).apply(this,arguments)},_getOpenSync:Ft,_createAnimation:(tn,wt)=>{const Rt=Xe.get(tn);if(!Rt)throw new Error("animation not registered");return Rt(wt)},_register:tn=>{Fe.indexOf(tn)<0&&(tn.disabled||pt(tn),Fe.push(tn))},_unregister:tn=>{const wt=Fe.indexOf(tn);wt>-1&&Fe.splice(wt,1)},_setOpen:function(wt,Rt,dt){return(be=be||(0,I.Z)(function*(Wt,Tn,En){if(st())return!1;if(Tn){const vn=yield gn();vn&&Wt.el!==vn&&(yield vn.setOpen(!1,!1))}return Wt._setOpen(Tn,En)})).apply(this,arguments)},_setActiveMenu:pt}})()},9203:(wn,gt,L)=>{"use strict";L.r(gt),L.d(gt,{GESTURE_CONTROLLER:()=>I.G,createGesture:()=>Je});var I=L(619);const v=(Ge,ze,nt,Ze)=>{const Ye=ne(Ge)?{capture:!!Ze.capture,passive:!!Ze.passive}:!!Ze.capture;let De,Ee;return Ge.__zone_symbol__addEventListener?(De="__zone_symbol__addEventListener",Ee="__zone_symbol__removeEventListener"):(De="addEventListener",Ee="removeEventListener"),Ge[De](ze,nt,Ye),()=>{Ge[Ee](ze,nt,Ye)}},ne=Ge=>{if(void 0===he)try{const ze=Object.defineProperty({},"passive",{get:()=>{he=!0}});Ge.addEventListener("optsTest",()=>{},ze)}catch{he=!1}return!!he};let he;const Ie=Ge=>Ge instanceof Document?Ge:Ge.ownerDocument,Je=Ge=>{let ze=!1,nt=!1,Ze=!0,Ye=!1;const De=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ge),Ee=De.canStart,yt=De.onWillStart,Ve=De.onStart,rt=De.onEnd,be=De.notCaptured,Xe=De.onMove,Fe=De.threshold,fe=De.passive,at=De.blurOnStart,Ue={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},zt=((Ge,ze,nt)=>{const Ze=nt*(Math.PI/180),Ye="x"===Ge,De=Math.cos(Ze),Ee=ze*ze;let yt=0,Ve=0,rt=!1,be=0;return{start(Xe,Fe){yt=Xe,Ve=Fe,be=0,rt=!0},detect(Xe,Fe){if(!rt)return!1;const fe=Xe-yt,at=Fe-Ve,Ue=fe*fe+at*at;if(Ue<Ee)return!1;const zt=Math.sqrt(Ue),en=(Ye?fe:at)/zt;return be=en>De?1:en<-De?-1:0,rt=!1,!0},isGesture:()=>0!==be,getDirection:()=>be}})(De.direction,De.threshold,De.maxAngle),en=I.G.createGesture({name:Ge.gestureName,priority:Ge.gesturePriority,disableScroll:Ge.disableScroll}),de=()=>{ze&&(Ye=!1,Xe&&Xe(Ue))},gn=()=>!!en.capture()&&(ze=!0,Ze=!1,Ue.startX=Ue.currentX,Ue.startY=Ue.currentY,Ue.startTime=Ue.currentTime,yt?yt(Ue).then(pe):pe(),!0),pe=()=>{at&&(()=>{if(typeof document<"u"){const ht=document.activeElement;ht?.blur&&ht.blur()}})(),Ve&&Ve(Ue),Ze=!0},Se=()=>{ze=!1,nt=!1,Ye=!1,Ze=!0,en.release()},$e=ht=>{const Bt=ze,Ft=Ze;if(Se(),Ft){if(ye(Ue,ht),Bt)return void(rt&&rt(Ue));be&&be(Ue)}},je=((Ge,ze,nt,Ze,Ye)=>{let De,Ee,yt,Ve,rt,be,Xe,Fe=0;const fe=_t=>{Fe=Date.now()+2e3,ze(_t)&&(!Ee&&nt&&(Ee=v(Ge,"touchmove",nt,Ye)),yt||(yt=v(_t.target,"touchend",Ue,Ye)),Ve||(Ve=v(_t.target,"touchcancel",Ue,Ye)))},at=_t=>{Fe>Date.now()||ze(_t)&&(!be&&nt&&(be=v(Ie(Ge),"mousemove",nt,Ye)),Xe||(Xe=v(Ie(Ge),"mouseup",zt,Ye)))},Ue=_t=>{en(),Ze&&Ze(_t)},zt=_t=>{Xt(),Ze&&Ze(_t)},en=()=>{Ee&&Ee(),yt&&yt(),Ve&&Ve(),Ee=yt=Ve=void 0},Xt=()=>{be&&be(),Xe&&Xe(),be=Xe=void 0},mn=()=>{en(),Xt()},de=(_t=!0)=>{_t?(De||(De=v(Ge,"touchstart",fe,Ye)),rt||(rt=v(Ge,"mousedown",at,Ye))):(De&&De(),rt&&rt(),De=rt=void 0,mn())};return{enable:de,stop:mn,destroy:()=>{de(!1),Ze=nt=ze=void 0}}})(De.el,ht=>{const Bt=Me(ht);return!(nt||!Ze||(ge(ht,Ue),Ue.startX=Ue.currentX,Ue.startY=Ue.currentY,Ue.startTime=Ue.currentTime=Bt,Ue.velocityX=Ue.velocityY=Ue.deltaX=Ue.deltaY=0,Ue.event=ht,Ee&&!1===Ee(Ue))||(en.release(),!en.start()))&&(nt=!0,0===Fe?gn():(zt.start(Ue.startX,Ue.startY),!0))},ht=>{ze?!Ye&&Ze&&(Ye=!0,ye(Ue,ht),requestAnimationFrame(de)):(ye(Ue,ht),zt.detect(Ue.currentX,Ue.currentY)&&(!zt.isGesture()||!gn())&&pt())},$e,{capture:!1,passive:fe}),pt=()=>{Se(),je.stop(),be&&be(Ue)};return{enable(ht=!0){ht||(ze&&$e(void 0),Se()),je.enable(ht)},destroy(){en.destroy(),je.destroy()}}},ye=(Ge,ze)=>{if(!ze)return;const nt=Ge.currentX,Ze=Ge.currentY,Ye=Ge.currentTime;ge(ze,Ge);const De=Ge.currentX,Ee=Ge.currentY,Ve=(Ge.currentTime=Me(ze))-Ye;if(Ve>0&&Ve<100){const be=(Ee-Ze)/Ve;Ge.velocityX=(De-nt)/Ve*.7+.3*Ge.velocityX,Ge.velocityY=.7*be+.3*Ge.velocityY}Ge.deltaX=De-Ge.startX,Ge.deltaY=Ee-Ge.startY,Ge.event=ze},ge=(Ge,ze)=>{let nt=0,Ze=0;if(Ge){const Ye=Ge.changedTouches;if(Ye&&Ye.length>0){const De=Ye[0];nt=De.clientX,Ze=De.clientY}else void 0!==Ge.pageX&&(nt=Ge.pageX,Ze=Ge.pageY)}ze.currentX=nt,ze.currentY=Ze},Me=Ge=>Ge.timeStamp||Date.now()},2085:(wn,gt,L)=>{"use strict";L.d(gt,{a:()=>ge,b:()=>de,c:()=>ne,g:()=>ye,i:()=>gn});var I=L(1688);class v{constructor(){this.m=new Map}reset(pe){this.m=new Map(Object.entries(pe))}get(pe,Se){const $e=this.m.get(pe);return void 0!==$e?$e:Se}getBoolean(pe,Se=!1){const $e=this.m.get(pe);return void 0===$e?Se:"string"==typeof $e?"true"===$e:!!$e}getNumber(pe,Se){const $e=parseFloat(this.m.get(pe));return isNaN($e)?void 0!==Se?Se:NaN:$e}set(pe,Se){this.m.set(pe,Se)}}const ne=new v,Je="ionic-persist-config",ye=_t=>Me(_t),ge=(_t,pe)=>("string"==typeof _t&&(pe=_t,_t=void 0),ye(_t).includes(pe)),Me=(_t=window)=>{if(typeof _t>"u")return[];_t.Ionic=_t.Ionic||{};let pe=_t.Ionic.platforms;return null==pe&&(pe=_t.Ionic.platforms=Ge(_t),pe.forEach(Se=>_t.document.documentElement.classList.add(`plt-${Se}`))),pe},Ge=_t=>{const pe=ne.get("platform");return Object.keys(Xt).filter(Se=>{const $e=pe?.[Se];return"function"==typeof $e?$e(_t):Xt[Se](_t)})},nt=_t=>!!(zt(_t,/iPad/i)||zt(_t,/Macintosh/i)&&rt(_t)),De=_t=>zt(_t,/android|sink/i),rt=_t=>en(_t,"(any-pointer:coarse)"),Xe=_t=>Fe(_t)||fe(_t),Fe=_t=>!!(_t.cordova||_t.phonegap||_t.PhoneGap),fe=_t=>{const pe=_t.Capacitor;return!!pe?.isNative},zt=(_t,pe)=>pe.test(_t.navigator.userAgent),en=(_t,pe)=>{var Se;return null===(Se=_t.matchMedia)||void 0===Se?void 0:Se.call(_t,pe).matches},Xt={ipad:nt,iphone:_t=>zt(_t,/iPhone/i),ios:_t=>zt(_t,/iPhone|iPod/i)||nt(_t),android:De,phablet:_t=>{const pe=_t.innerWidth,Se=_t.innerHeight,$e=Math.min(pe,Se),je=Math.max(pe,Se);return $e>390&&$e<520&&je>620&&je<800},tablet:_t=>{const pe=_t.innerWidth,Se=_t.innerHeight,$e=Math.min(pe,Se),je=Math.max(pe,Se);return nt(_t)||(_t=>De(_t)&&!zt(_t,/mobile/i))(_t)||$e>460&&$e<820&&je>780&&je<1400},cordova:Fe,capacitor:fe,electron:_t=>zt(_t,/electron/i),pwa:_t=>{var pe;return!!(null!==(pe=_t.matchMedia)&&void 0!==pe&&pe.call(_t,"(display-mode: standalone)").matches||_t.navigator.standalone)},mobile:rt,mobileweb:_t=>rt(_t)&&!Xe(_t),desktop:_t=>!rt(_t),hybrid:Xe};let mn;const de=_t=>_t&&(0,I.g)(_t)||mn,gn=(_t={})=>{if(typeof window>"u")return;const pe=window.document,Se=window,$e=Se.Ionic=Se.Ionic||{},je={};_t._ael&&(je.ael=_t._ael),_t._rel&&(je.rel=_t._rel),_t._ce&&(je.ce=_t._ce),(0,I.a)(je);const pt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(_t=>{try{const pe=_t.sessionStorage.getItem(Je);return null!==pe?JSON.parse(pe):{}}catch{return{}}})(Se)),{persistConfig:!1}),$e.config),(_t=>{const pe={};return _t.location.search.slice(1).split("&").map(Se=>Se.split("=")).map(([Se,$e])=>[decodeURIComponent(Se),decodeURIComponent($e)]).filter(([Se])=>((_t,pe)=>_t.substr(0,pe.length)===pe)(Se,"ionic:")).map(([Se,$e])=>[Se.slice(6),$e]).forEach(([Se,$e])=>{pe[Se]=$e}),pe})(Se)),_t);ne.reset(pt),ne.getBoolean("persistConfig")&&((_t,pe)=>{try{_t.sessionStorage.setItem(Je,JSON.stringify(pe))}catch{return}})(Se,pt),Me(Se),$e.config=ne,$e.mode=mn=ne.get("mode",pe.documentElement.getAttribute("mode")||(ge(Se,"ios")?"ios":"md")),ne.set("mode",mn),pe.documentElement.setAttribute("mode",mn),pe.documentElement.classList.add(mn),ne.getBoolean("_testing")&&ne.set("animated",!1);const ht=Ft=>{var Qt;return null===(Qt=Ft.tagName)||void 0===Qt?void 0:Qt.startsWith("ION-")},Bt=Ft=>["ios","md"].includes(Ft);(0,I.c)(Ft=>{for(;Ft;){const Qt=Ft.mode||Ft.getAttribute("mode");if(Qt){if(Bt(Qt))return Qt;ht(Ft)&&console.warn('Invalid ionic mode: "'+Qt+'", expected: "ios" or "md"')}Ft=Ft.parentElement}return mn})}},2650:(wn,gt,L)=>{"use strict";L.r(gt),L.d(gt,{iosTransitionAnimation:()=>Ge,shadow:()=>Ie});var I=L(1774),v=L(1651);L(6225),L(1688);const Pe=ze=>document.querySelector(`${ze}.ion-cloned-element`),Ie=ze=>ze.shadowRoot||ze,qe=ze=>{const nt="ION-TABS"===ze.tagName?ze:ze.querySelector("ion-tabs"),Ze="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=nt){const Ye=nt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ye?Ye.querySelector(Ze):null}return ze.querySelector(Ze)},Je=(ze,nt)=>{const Ze="ION-TABS"===ze.tagName?ze:ze.querySelector("ion-tabs");let Ye=[];if(null!=Ze){const De=Ze.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=De&&(Ye=De.querySelectorAll("ion-buttons"))}else Ye=ze.querySelectorAll("ion-buttons");for(const De of Ye){const Ee=De.closest("ion-header"),yt=Ee&&!Ee.classList.contains("header-collapse-condense-inactive"),Ve=De.querySelector("ion-back-button"),rt=De.classList.contains("buttons-collapse");if(null!==Ve&&("start"===De.slot||""===De.slot)&&(rt&&yt&&nt||!rt))return Ve}return null},ge=(ze,nt,Ze,Ye,De,Ee)=>{const yt=nt?`calc(100% - ${Ee.right+4}px)`:Ee.left-4+"px",Ve=nt?"7px":"-7px",rt=nt?"-4px":"4px",be=nt?"-4px":"4px",Xe=nt?"right":"left",Fe=nt?"left":"right",Ue=Ze?[{offset:0,opacity:1,transform:`translate3d(${rt}, ${Ee.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Ve}, ${De.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Ve}, ${De.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${rt}, ${Ee.top-46}px, 0) scale(1)`}],Xt=Ze?[{offset:0,opacity:1,transform:`translate3d(${be}, ${Ee.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${be}, ${Ee.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${be}, ${Ee.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${be}, ${Ee.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${be}, ${Ee.top-46}px, 0) scale(1)`}],mn=(0,I.c)(),de=(0,I.c)(),gn=Pe("ion-back-button"),_t=Ie(gn).querySelector(".button-text"),pe=Ie(gn).querySelector("ion-icon");gn.text=Ye.text,gn.mode=Ye.mode,gn.icon=Ye.icon,gn.color=Ye.color,gn.disabled=Ye.disabled,gn.style.setProperty("display","block"),gn.style.setProperty("position","fixed"),de.addElement(pe),mn.addElement(_t),mn.beforeStyles({"transform-origin":`${Xe} center`}).beforeAddWrite(()=>{Ye.style.setProperty("display","none"),gn.style.setProperty(Xe,yt)}).afterAddWrite(()=>{Ye.style.setProperty("display",""),gn.style.setProperty("display","none"),gn.style.removeProperty(Xe)}).keyframes(Ue),de.beforeStyles({"transform-origin":`${Fe} center`}).keyframes(Xt),ze.addAnimation([mn,de])},Me=(ze,nt,Ze,Ye,De,Ee)=>{const yt=nt?`calc(100% - ${De.right}px)`:`${De.left}px`,Ve=nt?"-18px":"18px",rt=nt?"right":"left",Fe=Ze?[{offset:0,opacity:0,transform:`translate3d(${Ve}, ${Ee.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Ve}, ${Ee.top-4}px, 0) scale(0.5)`}],fe=Pe("ion-title"),at=(0,I.c)();fe.innerText=Ye.innerText,fe.size=Ye.size,fe.color=Ye.color,at.addElement(fe),at.beforeStyles({"transform-origin":`${rt} center`,height:"46px",display:"",position:"relative",[rt]:yt}).beforeAddWrite(()=>{Ye.style.setProperty("display","none")}).afterAddWrite(()=>{Ye.style.setProperty("display",""),fe.style.setProperty("display","none")}).keyframes(Fe),ze.addAnimation(at)},Ge=(ze,nt)=>{var Ze;try{const Ye="cubic-bezier(0.32,0.72,0,1)",De="opacity",Ee="transform",yt="0%",rt="rtl"===ze.ownerDocument.dir,be=rt?"-99.5%":"99.5%",Xe=rt?"33%":"-33%",Fe=nt.enteringEl,fe=nt.leavingEl,at="back"===nt.direction,Ue=Fe.querySelector(":scope > ion-content"),zt=Fe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),en=Fe.querySelectorAll(":scope > ion-header > ion-toolbar"),Xt=(0,I.c)(),mn=(0,I.c)();if(Xt.addElement(Fe).duration((null!==(Ze=nt.duration)&&void 0!==Ze?Ze:0)||540).easing(nt.easing||Ye).fill("both").beforeRemoveClass("ion-page-invisible"),fe&&null!=ze){const pe=(0,I.c)();pe.addElement(ze),Xt.addAnimation(pe)}if(Ue||0!==en.length||0!==zt.length?(mn.addElement(Ue),mn.addElement(zt)):mn.addElement(Fe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Xt.addAnimation(mn),at?mn.beforeClearStyles([De]).fromTo("transform",`translateX(${Xe})`,`translateX(${yt})`).fromTo(De,.8,1):mn.beforeClearStyles([De]).fromTo("transform",`translateX(${be})`,`translateX(${yt})`),Ue){const pe=Ie(Ue).querySelector(".transition-effect");if(pe){const Se=pe.querySelector(".transition-cover"),$e=pe.querySelector(".transition-shadow"),je=(0,I.c)(),pt=(0,I.c)(),ht=(0,I.c)();je.addElement(pe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),pt.addElement(Se).beforeClearStyles([De]).fromTo(De,0,.1),ht.addElement($e).beforeClearStyles([De]).fromTo(De,.03,.7),je.addAnimation([pt,ht]),mn.addAnimation([je])}}const de=Fe.querySelector("ion-header.header-collapse-condense"),{forward:gn,backward:_t}=((ze,nt,Ze,Ye,De)=>{const Ee=Je(Ye,Ze),yt=qe(De),Ve=qe(Ye),rt=Je(De,Ze),be=null!==Ee&&null!==yt&&!Ze,Xe=null!==Ve&&null!==rt&&Ze;if(be){const Fe=yt.getBoundingClientRect(),fe=Ee.getBoundingClientRect();Me(ze,nt,Ze,yt,Fe,fe),ge(ze,nt,Ze,Ee,Fe,fe)}else if(Xe){const Fe=Ve.getBoundingClientRect(),fe=rt.getBoundingClientRect();Me(ze,nt,Ze,Ve,Fe,fe),ge(ze,nt,Ze,rt,Fe,fe)}return{forward:be,backward:Xe}})(Xt,rt,at,Fe,fe);if(en.forEach(pe=>{const Se=(0,I.c)();Se.addElement(pe),Xt.addAnimation(Se);const $e=(0,I.c)();$e.addElement(pe.querySelector("ion-title"));const je=(0,I.c)(),pt=Array.from(pe.querySelectorAll("ion-buttons,[menuToggle]")),ht=pe.closest("ion-header"),Bt=ht?.classList.contains("header-collapse-condense-inactive");let Ft;Ft=pt.filter(at?tn=>{const wt=tn.classList.contains("buttons-collapse");return wt&&!Bt||!wt}:tn=>!tn.classList.contains("buttons-collapse")),je.addElement(Ft);const Qt=(0,I.c)();Qt.addElement(pe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const st=(0,I.c)();st.addElement(Ie(pe).querySelector(".toolbar-background"));const Vn=(0,I.c)(),Bn=pe.querySelector("ion-back-button");if(Bn&&Vn.addElement(Bn),Se.addAnimation([$e,je,Qt,st,Vn]),je.fromTo(De,.01,1),Qt.fromTo(De,.01,1),at)Bt||$e.fromTo("transform",`translateX(${Xe})`,`translateX(${yt})`).fromTo(De,.01,1),Qt.fromTo("transform",`translateX(${Xe})`,`translateX(${yt})`),Vn.fromTo(De,.01,1);else if(de||$e.fromTo("transform",`translateX(${be})`,`translateX(${yt})`).fromTo(De,.01,1),Qt.fromTo("transform",`translateX(${be})`,`translateX(${yt})`),st.beforeClearStyles([De,"transform"]),ht?.translucent?st.fromTo("transform",rt?"translateX(-100%)":"translateX(100%)","translateX(0px)"):st.fromTo(De,.01,"var(--opacity)"),gn||Vn.fromTo(De,.01,1),Bn&&!gn){const wt=(0,I.c)();wt.addElement(Ie(Bn).querySelector(".button-text")).fromTo("transform",rt?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Se.addAnimation(wt)}}),fe){const pe=(0,I.c)(),Se=fe.querySelector(":scope > ion-content"),$e=fe.querySelectorAll(":scope > ion-header > ion-toolbar"),je=fe.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Se||0!==$e.length||0!==je.length?(pe.addElement(Se),pe.addElement(je)):pe.addElement(fe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Xt.addAnimation(pe),at){pe.beforeClearStyles([De]).fromTo("transform",`translateX(${yt})`,rt?"translateX(-100%)":"translateX(100%)");const pt=(0,v.g)(fe);Xt.afterAddWrite(()=>{"normal"===Xt.getDirection()&&pt.style.setProperty("display","none")})}else pe.fromTo("transform",`translateX(${yt})`,`translateX(${Xe})`).fromTo(De,1,.8);if(Se){const pt=Ie(Se).querySelector(".transition-effect");if(pt){const ht=pt.querySelector(".transition-cover"),Bt=pt.querySelector(".transition-shadow"),Ft=(0,I.c)(),Qt=(0,I.c)(),st=(0,I.c)();Ft.addElement(pt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Qt.addElement(ht).beforeClearStyles([De]).fromTo(De,.1,0),st.addElement(Bt).beforeClearStyles([De]).fromTo(De,.7,.03),Ft.addAnimation([Qt,st]),pe.addAnimation([Ft])}}$e.forEach(pt=>{const ht=(0,I.c)();ht.addElement(pt);const Bt=(0,I.c)();Bt.addElement(pt.querySelector("ion-title"));const Ft=(0,I.c)(),Qt=pt.querySelectorAll("ion-buttons,[menuToggle]"),st=pt.closest("ion-header"),Vn=st?.classList.contains("header-collapse-condense-inactive"),Bn=Array.from(Qt).filter(Tn=>{const En=Tn.classList.contains("buttons-collapse");return En&&!Vn||!En});Ft.addElement(Bn);const tn=(0,I.c)(),wt=pt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");wt.length>0&&tn.addElement(wt);const Rt=(0,I.c)();Rt.addElement(Ie(pt).querySelector(".toolbar-background"));const dt=(0,I.c)(),Wt=pt.querySelector("ion-back-button");if(Wt&&dt.addElement(Wt),ht.addAnimation([Bt,Ft,tn,dt,Rt]),Xt.addAnimation(ht),dt.fromTo(De,.99,0),Ft.fromTo(De,.99,0),tn.fromTo(De,.99,0),at){if(Vn||Bt.fromTo("transform",`translateX(${yt})`,rt?"translateX(-100%)":"translateX(100%)").fromTo(De,.99,0),tn.fromTo("transform",`translateX(${yt})`,rt?"translateX(-100%)":"translateX(100%)"),Rt.beforeClearStyles([De,"transform"]),st?.translucent?Rt.fromTo("transform","translateX(0px)",rt?"translateX(-100%)":"translateX(100%)"):Rt.fromTo(De,"var(--opacity)",0),Wt&&!_t){const En=(0,I.c)();En.addElement(Ie(Wt).querySelector(".button-text")).fromTo("transform",`translateX(${yt})`,`translateX(${(rt?-124:124)+"px"})`),ht.addAnimation(En)}}else Vn||Bt.fromTo("transform",`translateX(${yt})`,`translateX(${Xe})`).fromTo(De,.99,0).afterClearStyles([Ee,De]),tn.fromTo("transform",`translateX(${yt})`,`translateX(${Xe})`).afterClearStyles([Ee,De]),dt.afterClearStyles([De]),Bt.afterClearStyles([De]),Ft.afterClearStyles([De])})}return Xt}catch(Ye){throw Ye}}},1904:(wn,gt,L)=>{"use strict";L.r(gt),L.d(gt,{mdTransitionAnimation:()=>ke});var I=L(1774),v=L(1651);L(6225),L(1688);const ke=(Pe,Ie)=>{var qe,Je,ye;const Ge="back"===Ie.direction,nt=Ie.leavingEl,Ze=(0,v.g)(Ie.enteringEl),Ye=Ze.querySelector("ion-toolbar"),De=(0,I.c)();if(De.addElement(Ze).fill("both").beforeRemoveClass("ion-page-invisible"),Ge?De.duration((null!==(qe=Ie.duration)&&void 0!==qe?qe:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):De.duration((null!==(Je=Ie.duration)&&void 0!==Je?Je:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Ye){const Ee=(0,I.c)();Ee.addElement(Ye),De.addAnimation(Ee)}if(nt&&Ge){De.duration((null!==(ye=Ie.duration)&&void 0!==ye?ye:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Ee=(0,I.c)();Ee.addElement((0,v.g)(nt)).onFinish(yt=>{1===yt&&Ee.elements.length>0&&Ee.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),De.addAnimation(Ee)}return De}},1647:(wn,gt,L)=>{"use strict";L.d(gt,{B:()=>st,G:()=>Vn,a:()=>nt,b:()=>Ze,c:()=>yt,d:()=>Bn,e:()=>tn,f:()=>_t,g:()=>Se,h:()=>pt,i:()=>Bt,j:()=>rt,k:()=>be,m:()=>De,n:()=>Ge,o:()=>fe,q:()=>de,s:()=>Qt});var Ie,qe,Je,ye,I=L(5861),v=L(2085),ne=L(6559),he=L(2124),ke=L(839),Pe=L(6710);let ge=0,Me=0;const Ge=new WeakMap,ze=wt=>({create:Rt=>Xe(wt,Rt),dismiss:(Rt,dt,Wt)=>Xt(document,Rt,dt,wt,Wt),getTop:()=>(0,I.Z)(function*(){return de(document,wt)})()}),nt=ze("ion-alert"),Ze=ze("ion-action-sheet"),De=ze("ion-modal"),yt=ze("ion-popover"),rt=wt=>{typeof document<"u"&&en(document);const Rt=ge++;wt.overlayIndex=Rt},be=wt=>(wt.hasAttribute("id")||(wt.id="ion-overlay-"+ ++Me),wt.id),Xe=(wt,Rt)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(wt).then(()=>{const dt=document.createElement(wt);return dt.classList.add("overlay-hidden"),Object.assign(dt,Object.assign(Object.assign({},Rt),{hasController:!0})),$e(document).appendChild(dt),new Promise(Wt=>(0,ke.c)(dt,Wt))}):Promise.resolve(),Fe='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',fe=(wt,Rt)=>{let dt=wt.querySelector(Fe);const Wt=dt?.shadowRoot;Wt&&(dt=Wt.querySelector(Fe)||dt),dt?(0,ke.f)(dt):Rt.focus()},Ue=(wt,Rt)=>{const dt=Array.from(wt.querySelectorAll(Fe));let Wt=dt.length>0?dt[dt.length-1]:null;const Tn=Wt?.shadowRoot;Tn&&(Wt=Tn.querySelector(Fe)||Wt),Wt?Wt.focus():Rt.focus()},en=wt=>{0===ge&&(ge=1,wt.addEventListener("focus",Rt=>{((wt,Rt)=>{const dt=de(Rt,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Wt=wt.target;dt&&Wt&&!dt.classList.contains("ion-disable-focus-trap")&&(dt.shadowRoot?(()=>{if(dt.contains(Wt))dt.lastFocus=Wt;else{const vn=dt.lastFocus;fe(dt,dt),vn===Rt.activeElement&&Ue(dt,dt),dt.lastFocus=Rt.activeElement}})():(()=>{if(dt===Wt)dt.lastFocus=void 0;else{const vn=(0,ke.g)(dt);if(!vn.contains(Wt))return;const Xn=vn.querySelector(".ion-overlay-wrapper");if(!Xn)return;if(Xn.contains(Wt)||Wt===vn.querySelector("ion-backdrop"))dt.lastFocus=Wt;else{const Jn=dt.lastFocus;fe(Xn,dt),Jn===Rt.activeElement&&Ue(Xn,dt),dt.lastFocus=Rt.activeElement}}})())})(Rt,wt)},!0),wt.addEventListener("ionBackButton",Rt=>{const dt=de(wt);dt?.backdropDismiss&&Rt.detail.register(he.OVERLAY_BACK_BUTTON_PRIORITY,()=>dt.dismiss(void 0,st))}),wt.addEventListener("keydown",Rt=>{if("Escape"===Rt.key){const dt=de(wt);dt?.backdropDismiss&&dt.dismiss(void 0,st)}}))},Xt=(wt,Rt,dt,Wt,Tn)=>{const En=de(wt,Wt,Tn);return En?En.dismiss(Rt,dt):Promise.reject("overlay does not exist")},de=(wt,Rt,dt)=>{const Wt=((wt,Rt)=>(void 0===Rt&&(Rt="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(wt.querySelectorAll(Rt)).filter(dt=>dt.overlayIndex>0)))(wt,Rt).filter(Tn=>!(wt=>wt.classList.contains("overlay-hidden"))(Tn));return void 0===dt?Wt[Wt.length-1]:Wt.find(Tn=>Tn.id===dt)},gn=(wt=!1)=>{const dt=$e(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");dt&&(wt?dt.setAttribute("aria-hidden","true"):dt.removeAttribute("aria-hidden"))},_t=function(Rt,dt,Wt,Tn,En){return(Ie=Ie||(0,I.Z)(function*(vn,Xn,Jn,wr,Sn){var Pn,Un;if(vn.presented)return;gn(!0),vn.presented=!0,vn.willPresent.emit(),null===(Pn=vn.willPresentShorthand)||void 0===Pn||Pn.emit();const pr=(0,v.b)(vn),Lr=vn.enterAnimation?vn.enterAnimation:v.c.get(Xn,"ios"===pr?Jn:wr);(yield je(vn,Lr,vn.el,Sn))&&(vn.didPresent.emit(),null===(Un=vn.didPresentShorthand)||void 0===Un||Un.emit()),"ION-TOAST"!==vn.el.tagName&&pe(vn.el),vn.keyboardClose&&(null===document.activeElement||!vn.el.contains(document.activeElement))&&vn.el.focus()})).apply(this,arguments)},pe=function(Rt){return(qe=qe||(0,I.Z)(function*(dt){let Wt=document.activeElement;if(!Wt)return;const Tn=Wt?.shadowRoot;Tn&&(Wt=Tn.querySelector(Fe)||Wt),yield dt.onDidDismiss(),Wt.focus()})).apply(this,arguments)},Se=function(Rt,dt,Wt,Tn,En,vn,Xn){return(Je=Je||(0,I.Z)(function*(Jn,wr,Sn,Pn,Un,pr,Lr){var Br,Kt;if(!Jn.presented)return!1;gn(!1),Jn.presented=!1;try{Jn.el.style.setProperty("pointer-events","none"),Jn.willDismiss.emit({data:wr,role:Sn}),null===(Br=Jn.willDismissShorthand)||void 0===Br||Br.emit({data:wr,role:Sn});const hr=(0,v.b)(Jn),an=Jn.leaveAnimation?Jn.leaveAnimation:v.c.get(Pn,"ios"===hr?Un:pr);Sn!==Vn&&(yield je(Jn,an,Jn.el,Lr)),Jn.didDismiss.emit({data:wr,role:Sn}),null===(Kt=Jn.didDismissShorthand)||void 0===Kt||Kt.emit({data:wr,role:Sn}),Ge.delete(Jn),Jn.el.classList.add("overlay-hidden"),Jn.el.style.removeProperty("pointer-events"),void 0!==Jn.el.lastFocus&&(Jn.el.lastFocus=void 0)}catch(hr){console.error(hr)}return Jn.el.remove(),!0})).apply(this,arguments)},$e=wt=>wt.querySelector("ion-app")||wt.body,je=function(Rt,dt,Wt,Tn){return(ye=ye||(0,I.Z)(function*(En,vn,Xn,Jn){Xn.classList.remove("overlay-hidden");const Sn=vn(En.el,Jn);(!En.animated||!v.c.getBoolean("animated",!0))&&Sn.duration(0),En.keyboardClose&&Sn.beforeAddWrite(()=>{const Un=Xn.ownerDocument.activeElement;Un?.matches("input,ion-input, ion-textarea")&&Un.blur()});const Pn=Ge.get(En)||[];return Ge.set(En,[...Pn,Sn]),yield Sn.play(),!0})).apply(this,arguments)},pt=(wt,Rt)=>{let dt;const Wt=new Promise(Tn=>dt=Tn);return ht(wt,Rt,Tn=>{dt(Tn.detail)}),Wt},ht=(wt,Rt,dt)=>{const Wt=Tn=>{(0,ke.b)(wt,Rt,Wt),dt(Tn)};(0,ke.a)(wt,Rt,Wt)},Bt=wt=>"cancel"===wt||wt===st,Ft=wt=>wt(),Qt=(wt,Rt)=>{if("function"==typeof wt)return v.c.get("_zoneGate",Ft)(()=>{try{return wt(Rt)}catch(Wt){throw Wt}})},st="backdrop",Vn="gesture",Bn=wt=>{var Rt;let Wt,dt=!1;const Tn=(0,ne.C)(),En=(Jn=!1)=>{if(Wt&&!Jn)return{delegate:Wt,inline:dt};const{el:wr,hasController:Sn,delegate:Pn}=wt;return dt=null!==wr.parentNode&&!Sn,Wt=dt?Pn||Tn:Pn,{inline:dt,delegate:Wt}};return{attachViewToDom:function(wr){return(Rt=Rt||(0,I.Z)(function*(Sn){const{delegate:Pn}=En(!0);if(Pn)return yield Pn.attachViewToDom(wt.el,Sn);const{hasController:Un}=wt;if(Un&&void 0!==Sn)throw new Error("framework delegate is missing");return null})).apply(this,arguments)},removeViewFromDom:()=>{const{delegate:Jn}=En();Jn&&void 0!==wt.el&&Jn.removeViewFromDom(wt.el.parentElement,wt.el)}}},tn=()=>{let wt;const Rt=()=>{wt&&(wt(),wt=void 0)};return{addClickListener:(Wt,Tn)=>{Rt();const En=void 0!==Tn?document.getElementById(Tn):null;En?wt=((Xn,Jn)=>{const wr=()=>{Jn.present()};return Xn.addEventListener("click",wr),()=>{Xn.removeEventListener("click",wr)}})(En,Wt):(0,Pe.p)(`A trigger element with the ID "${Tn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Wt)},removeClickListener:Rt}}},4796:(wn,gt,L)=>{"use strict";var I=L(6593),v=L(5879),ne=L(4934),he=L(7027);let ke=(()=>{var h;class c{constructor(){}}return(h=c).\u0275fac=function(y){return new(y||h)},h.\u0275cmp=v.Xpm({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(y,D){1&y&&(v.TgZ(0,"ion-app"),v._UZ(1,"ion-router-outlet"),v.qZA())},dependencies:[he.dr,he.jP]}),c})();const Pe=[{path:"home",loadChildren:()=>Promise.all([L.e(8592),L.e(1719)]).then(L.bind(L,1719)).then(h=>h.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"anime",loadChildren:()=>Promise.all([L.e(8592),L.e(5737)]).then(L.bind(L,5737)).then(h=>h.AnimePageModule)},{path:"adicionar",loadChildren:()=>Promise.all([L.e(8592),L.e(4791)]).then(L.bind(L,4791)).then(h=>h.AdicionarPageModule)}];let Ie=(()=>{var h;class c{}return(h=c).\u0275fac=function(y){return new(y||h)},h.\u0275mod=v.oAB({type:h}),h.\u0275inj=v.cJS({imports:[ne.Bz.forRoot(Pe,{preloadingStrategy:ne.wm}),ne.Bz]}),c})();const qe_firebaseConfig={apiKey:"AIzaSyD5v0q7ylaPbETn5ImLIY7QwpDQf6MlKr4",authDomain:"anime-cdde9.firebaseapp.com",projectId:"anime-cdde9",storageBucket:"anime-cdde9.appspot.com",messagingSenderId:"200735475258",appId:"1:200735475258:web:9668366e8bcee4087e9703"};var Je=L(6304),ye=L(6321),ge=L(5592),Me=L(2096),Ge=L(3019),ze=L(7398),nt=L(3020),Ze=L(4664),Ye=L(6699),De=L(3997),Ee=L(9360),yt=L(8251),Ve=L(4829),rt=L(2737),be=L(2420),Xe=L(4564),at=L(2793),zt=(L(8977),L(3399)),en=L(4537),Xt=L(5861),mn=L(7592),de=L(9058),gn=L(7879);const _t="@firebase/database";let Se="";function $e(h){Se=h}class je{constructor(c){this.domStorage_=c,this.prefix_="firebase:"}set(c,u){null==u?this.domStorage_.removeItem(this.prefixedName_(c)):this.domStorage_.setItem(this.prefixedName_(c),(0,de.Wl)(u))}get(c){const u=this.domStorage_.getItem(this.prefixedName_(c));return null==u?null:(0,de.cI)(u)}remove(c){this.domStorage_.removeItem(this.prefixedName_(c))}prefixedName_(c){return this.prefix_+c}toString(){return this.domStorage_.toString()}}class pt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(c,u){null==u?delete this.cache_[c]:this.cache_[c]=u}get(c){return(0,de.r3)(this.cache_,c)?this.cache_[c]:null}remove(c){delete this.cache_[c]}}const ht=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const c=window[h];return c.setItem("firebase:sentinel","cache"),c.removeItem("firebase:sentinel"),new je(c)}}catch{}return new pt},Bt=ht("localStorage"),Ft=ht("sessionStorage"),Qt=new gn.Yd("@firebase/database"),st=function(){let h=1;return function(){return h++}}(),Vn=function(h){const c=(0,de.dS)(h),u=new de.gQ;u.update(c);const y=u.digest();return de.US.encodeByteArray(y)},Bn=function(...h){let c="";for(let u=0;u<h.length;u++){const y=h[u];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?c+=Bn.apply(null,y):c+="object"==typeof y?(0,de.Wl)(y):y,c+=" "}return c};let tn=null,wt=!0;const Rt=function(h,c){(0,de.hu)(!c||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(Qt.logLevel=gn.in.VERBOSE,tn=Qt.log.bind(Qt),c&&Ft.set("logging_enabled",!0)):"function"==typeof h?tn=h:(tn=null,Ft.remove("logging_enabled"))},dt=function(...h){if(!0===wt&&(wt=!1,null===tn&&!0===Ft.get("logging_enabled")&&Rt(!0)),tn){const c=Bn.apply(null,h);tn(c)}},Wt=function(h){return function(...c){dt(h,...c)}},Tn=function(...h){const c="FIREBASE INTERNAL ERROR: "+Bn(...h);Qt.error(c)},En=function(...h){const c=`FIREBASE FATAL ERROR: ${Bn(...h)}`;throw Qt.error(c),new Error(c)},vn=function(...h){const c="FIREBASE WARNING: "+Bn(...h);Qt.warn(c)},Jn=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Sn="[MIN_NAME]",Pn="[MAX_NAME]",Un=function(h,c){if(h===c)return 0;if(h===Sn||c===Pn)return-1;if(c===Sn||h===Pn)return 1;{const u=_i(h),y=_i(c);return null!==u?null!==y?u-y==0?h.length-c.length:u-y:-1:null!==y?1:h<c?-1:1}},pr=function(h,c){return h===c?0:h<c?-1:1},Lr=function(h,c){if(c&&h in c)return c[h];throw new Error("Missing required key ("+h+") in object: "+(0,de.Wl)(c))},Br=function(h){if("object"!=typeof h||null===h)return(0,de.Wl)(h);const c=[];for(const y in h)c.push(y);c.sort();let u="{";for(let y=0;y<c.length;y++)0!==y&&(u+=","),u+=(0,de.Wl)(c[y]),u+=":",u+=Br(h[c[y]]);return u+="}",u},Kt=function(h,c){const u=h.length;if(u<=c)return[h];const y=[];for(let D=0;D<u;D+=c)y.push(h.substring(D,D+c>u?u:D+c));return y};function hr(h,c){for(const u in h)h.hasOwnProperty(u)&&c(u,h[u])}const an=function(h){(0,de.hu)(!Jn(h),"Invalid JSON number");const y=1023;let D,k,K,le,Re;0===h?(k=0,K=0,D=1/h==-1/0?1:0):(D=h<0,(h=Math.abs(h))>=Math.pow(2,1-y)?(le=Math.min(Math.floor(Math.log(h)/Math.LN2),y),k=le+y,K=Math.round(h*Math.pow(2,52-le)-Math.pow(2,52))):(k=0,K=Math.round(h/Math.pow(2,-1074))));const et=[];for(Re=52;Re;Re-=1)et.push(K%2?1:0),K=Math.floor(K/2);for(Re=11;Re;Re-=1)et.push(k%2?1:0),k=Math.floor(k/2);et.push(D?1:0),et.reverse();const Ot=et.join("");let Gt="";for(Re=0;Re<64;Re+=8){let un=parseInt(Ot.substr(Re,8),2).toString(16);1===un.length&&(un="0"+un),Gt+=un}return Gt.toLowerCase()},bi=new RegExp("^-?(0*)\\d{1,10}$"),_i=function(h){if(bi.test(h)){const c=Number(h);if(c>=-2147483648&&c<=2147483647)return c}return null},Ii=function(h){try{h()}catch(c){setTimeout(()=>{throw vn("Exception was thrown by user callback.",c.stack||""),c},Math.floor(0))}},ot=function(h,c){const u=setTimeout(h,c);return"number"==typeof u&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(u):"object"==typeof u&&u.unref&&u.unref(),u};class Pt{constructor(c,u){this.appName_=c,this.appCheckProvider=u,this.appCheck=u?.getImmediate({optional:!0}),this.appCheck||u?.get().then(y=>this.appCheck=y)}getToken(c){return this.appCheck?this.appCheck.getToken(c):new Promise((u,y)=>{setTimeout(()=>{this.appCheck?this.getToken(c).then(u,y):u(null)},0)})}addTokenChangeListener(c){var u;null===(u=this.appCheckProvider)||void 0===u||u.get().then(y=>y.addTokenListener(c))}notifyForInvalidToken(){vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class sn{constructor(c,u,y){this.appName_=c,this.firebaseOptions_=u,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(D=>this.auth_=D)}getToken(c){return this.auth_?this.auth_.getToken(c).catch(u=>u&&"auth/token-not-initialized"===u.code?(dt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(u)):new Promise((u,y)=>{setTimeout(()=>{this.auth_?this.getToken(c).then(u,y):u(null)},0)})}addTokenChangeListener(c){this.auth_?this.auth_.addAuthTokenListener(c):this.authProvider_.get().then(u=>u.addAuthTokenListener(c))}removeTokenChangeListener(c){this.authProvider_.get().then(u=>u.removeAuthTokenListener(c))}notifyForInvalidToken(){let c='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';c+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vn(c)}}let In=(()=>{class h{constructor(u){this.accessToken=u}getToken(u){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(u){u(this.accessToken)}removeTokenChangeListener(u){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const Ne=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nn="websocket",zn="long_polling";class yn{constructor(c,u,y,D,k=!1,K="",le=!1,Re=!1){this.secure=u,this.namespace=y,this.webSocketOnly=D,this.nodeAdmin=k,this.persistenceKey=K,this.includeNamespaceInQueryParams=le,this.isUsingEmulator=Re,this._host=c.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bt.get("host:"+c)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(c){c!==this.internalHost&&(this.internalHost=c,this.isCacheableHost()&&Bt.set("host:"+this._host,this.internalHost))}toString(){let c=this.toURLString();return this.persistenceKey&&(c+="<"+this.persistenceKey+">"),c}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function er(h,c,u){let y;if((0,de.hu)("string"==typeof c,"typeof type must == string"),(0,de.hu)("object"==typeof u,"typeof params must == object"),c===nn)y=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(c!==zn)throw new Error("Unknown connection type: "+c);y=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function lr(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(u.ns=h.namespace);const D=[];return hr(u,(k,K)=>{D.push(k+"="+K)}),y+D.join("&")}class Zr{constructor(){this.counters_={}}incrementCounter(c,u=1){(0,de.r3)(this.counters_,c)||(this.counters_[c]=0),this.counters_[c]+=u}get(){return(0,de.p$)(this.counters_)}}const ei={},Is={};function Fs(h){const c=h.toString();return ei[c]||(ei[c]=new Zr),ei[c]}class zi{constructor(c){this.onMessage_=c,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(c,u){this.closeAfterResponse=c,this.onClose=u,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(c,u){for(this.pendingResponses[c]=u;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let D=0;D<y.length;++D)y[D]&&Ii(()=>{this.onMessage_(y[D])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ei{constructor(c,u,y,D,k,K,le){this.connId=c,this.repoInfo=u,this.applicationId=y,this.appCheckToken=D,this.authToken=k,this.transportSessionId=K,this.lastSessionId=le,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wt(c),this.stats_=Fs(u),this.urlFn=Re=>(this.appCheckToken&&(Re.ac=this.appCheckToken),er(u,zn,Re))}open(c,u){this.curSegmentNum=0,this.onDisconnect_=u,this.myPacketOrderer=new zi(c),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,de.Yr)()||"complete"===document.readyState)h();else{let c=!1;const u=function(){document.body?c||(c=!0,h()):setTimeout(u,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&u()}),window.attachEvent("onload",u))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ts((...k)=>{const[K,le,Re,et,Ot]=k;if(this.incrementIncomingBytes_(k),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===K)this.id=le,this.password=Re;else{if("close"!==K)throw new Error("Unrecognized command received: "+K);le?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(le,()=>{this.onClosed_()})):this.onClosed_()}},(...k)=>{const[K,le]=k;this.incrementIncomingBytes_(k),this.myPacketOrderer.handleResponse(K,le)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ne.test(location.hostname)&&(y.r="f");const D=this.urlFn(y);this.log_("Connecting via long-poll to "+D),this.scriptTagHolder.addTag(D,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ei.forceAllow_=!0}static forceDisallow(){Ei.forceDisallow_=!0}static isAvailable(){return!((0,de.Yr)()||!Ei.forceAllow_&&(Ei.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(c){const u=(0,de.Wl)(c);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);const y=(0,de.h$)(u),D=Kt(y,1840);for(let k=0;k<D.length;k++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,D.length,D[k]),this.curSegmentNum++}addDisconnectPingFrame(c,u){if((0,de.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=c,y.pw=u,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(c){const u=(0,de.Wl)(c).length;this.bytesReceived+=u,this.stats_.incrementCounter("bytes_received",u)}}class ts{constructor(c,u,y,D){if(this.onDisconnect=y,this.urlFn=D,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,de.Yr)())this.commandCB=c,this.onMessageCB=u;else{this.uniqueCallbackIdentifier=st(),window["pLPCommand"+this.uniqueCallbackIdentifier]=c,window["pRTLPCB"+this.uniqueCallbackIdentifier]=u,this.myIFrame=ts.createIFrame_();let k="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(k='<script>document.domain="'+document.domain+'";<\/script>');const K="<html><body>"+k+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(K),this.myIFrame.doc.close()}catch(le){dt("frame writing exception"),le.stack&&dt(le.stack),dt(le)}}}static createIFrame_(){const c=document.createElement("iframe");if(c.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(c);try{c.contentWindow.document||dt("No IE domain setting required")}catch{const y=document.domain;c.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return c.contentDocument?c.doc=c.contentDocument:c.contentWindow?c.doc=c.contentWindow.document:c.document&&(c.doc=c.document),c}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const c=this.onDisconnect;c&&(this.onDisconnect=null,c())}startLongPoll(c,u){for(this.myID=c,this.myPW=u,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const c={};c.id=this.myID,c.pw=this.myPW,c.ser=this.currentSerial;let u=this.urlFn(c),y="",D=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const K=this.pendingSegs.shift();y=y+"&seg"+D+"="+K.seg+"&ts"+D+"="+K.ts+"&d"+D+"="+K.d,D++}return u+=y,this.addLongPollTag_(u,this.currentSerial),!0}return!1}enqueueSegment(c,u,y){this.pendingSegs.push({seg:c,ts:u,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(c,u){this.outstandingRequests.add(u);const y=()=>{this.outstandingRequests.delete(u),this.newRequest_()},D=setTimeout(y,Math.floor(25e3));this.addTag(c,()=>{clearTimeout(D),y()})}addTag(c,u){(0,de.Yr)()?this.doNodeLongPoll(c,u):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=c,y.onload=y.onreadystatechange=function(){const D=y.readyState;(!D||"loaded"===D||"complete"===D)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),u())},y.onerror=()=>{dt("Long-poll script failed to load: "+c),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch{}},Math.floor(1))}}let Ir=null;typeof MozWebSocket<"u"?Ir=MozWebSocket:typeof WebSocket<"u"&&(Ir=WebSocket);let Dr=(()=>{class h{constructor(u,y,D,k,K,le,Re){this.connId=u,this.applicationId=D,this.appCheckToken=k,this.authToken=K,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wt(this.connId),this.stats_=Fs(y),this.connURL=h.connectionURL_(y,le,Re,k,D),this.nodeAdmin=y.nodeAdmin}static connectionURL_(u,y,D,k,K){const le={v:"5"};return!(0,de.Yr)()&&typeof location<"u"&&location.hostname&&Ne.test(location.hostname)&&(le.r="f"),y&&(le.s=y),D&&(le.ls=D),k&&(le.ac=k),K&&(le.p=K),er(u,nn,le)}open(u,y){this.onDisconnect=y,this.onMessage=u,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bt.set("previous_websocket_failure",!0);try{let D;if((0,de.Yr)()){D={headers:{"User-Agent":`Firebase/5/${Se}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(D.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(D.headers["X-Firebase-AppCheck"]=this.appCheckToken);const K=process.env,le=0===this.connURL.indexOf("wss://")?K.HTTPS_PROXY||K.https_proxy:K.HTTP_PROXY||K.http_proxy;le&&(D.proxy={origin:le})}this.mySock=new Ir(this.connURL,[],D)}catch(D){this.log_("Error instantiating WebSocket.");const k=D.message||D.data;return k&&this.log_(k),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=D=>{this.handleIncomingFrame(D)},this.mySock.onerror=D=>{this.log_("WebSocket error.  Closing connection.");const k=D.message||D.data;k&&this.log_(k),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let u=!1;if(typeof navigator<"u"&&navigator.userAgent){const D=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);D&&D.length>1&&parseFloat(D[1])<4.4&&(u=!0)}return!u&&null!==Ir&&!h.forceDisallow_}static previouslyFailed(){return Bt.isInMemoryStorage||!0===Bt.get("previous_websocket_failure")}markConnectionHealthy(){Bt.remove("previous_websocket_failure")}appendFrame_(u){if(this.frames.push(u),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const D=(0,de.cI)(y);this.onMessage(D)}}handleNewFrameCount_(u){this.totalFrames=u,this.frames=[]}extractFrameCount_(u){if((0,de.hu)(null===this.frames,"We already have a frame buffer"),u.length<=6){const y=Number(u);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),u}handleIncomingFrame(u){if(null===this.mySock)return;const y=u.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const D=this.extractFrameCount_(y);null!==D&&this.appendFrame_(D)}}send(u){this.resetKeepAlive();const y=(0,de.Wl)(u);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const D=Kt(y,16384);D.length>1&&this.sendString_(String(D.length));for(let k=0;k<D.length;k++)this.sendString_(D[k])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(u){try{this.mySock.send(u)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),as=(()=>{class h{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[Ei,Dr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(u){const y=Dr&&Dr.isAvailable();let D=y&&!Dr.previouslyFailed();if(u.webSocketOnly&&(y||vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),D=!0),D)this.transports_=[Dr];else{const k=this.transports_=[];for(const K of h.ALL_TRANSPORTS)K&&K.isAvailable()&&k.push(K);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class He{constructor(c,u,y,D,k,K,le,Re,et,Ot){this.id=c,this.repoInfo_=u,this.applicationId_=y,this.appCheckToken_=D,this.authToken_=k,this.onMessage_=K,this.onReady_=le,this.onDisconnect_=Re,this.onKill_=et,this.lastSessionId=Ot,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wt("c:"+this.id+":"),this.transportManager_=new as(u),this.log_("Connection created"),this.start_()}start_(){const c=this.transportManager_.initialTransport();this.conn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(u,y)},Math.floor(0));const D=c.healthyTimeout||0;D>0&&(this.healthyTimeout_=ot(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(D)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(c){return u=>{c===this.conn_?this.onConnectionLost_(u):c===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(c){return u=>{2!==this.state_&&(c===this.rx_?this.onPrimaryMessageReceived_(u):c===this.secondaryConn_?this.onSecondaryMessageReceived_(u):this.log_("message on old connection"))}}sendRequest(c){this.sendData_({t:"d",d:c})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(c){if("t"in c){const u=c.t;"a"===u?this.upgradeIfSecondaryHealthy_():"r"===u?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===u&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(c){const u=Lr("t",c),y=Lr("d",c);if("c"===u)this.onSecondaryControl_(y);else{if("d"!==u)throw new Error("Unknown protocol layer: "+u);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(c){const u=Lr("t",c),y=Lr("d",c);"c"===u?this.onControl_(y):"d"===u&&this.onDataMessage_(y)}onDataMessage_(c){this.onPrimaryResponse_(),this.onMessage_(c)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(c){const u=Lr("t",c);if("d"in c){const y=c.d;if("h"===u){const D=Object.assign({},y);this.repoInfo_.isUsingEmulator&&(D.h=this.repoInfo_.host),this.onHandshake_(D)}else if("n"===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let D=0;D<this.pendingDataMessages.length;++D)this.onDataMessage_(this.pendingDataMessages[D]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===u?this.onConnectionShutdown_(y):"r"===u?this.onReset_(y):"e"===u?Tn("Server Error: "+y):"o"===u?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Tn("Unknown control packet command: "+u)}}onHandshake_(c){const u=c.ts,y=c.v,D=c.h;this.sessionId=c.s,this.repoInfo_.host=D,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,u),"5"!==y&&vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const c=this.transportManager_.upgradeTransport();c&&this.startUpgrade_(c)}startUpgrade_(c){this.secondaryConn_=new c(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=c.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(u,y),ot(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(c){this.log_("Reset packet received.  New host: "+c),this.repoInfo_.host=c,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(c,u){this.log_("Realtime connection established."),this.conn_=c,this.state_=1,this.onReady_&&(this.onReady_(u,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ot(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const c=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===c||this.rx_===c)&&this.close()}onConnectionLost_(c){this.conn_=null,c||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(c){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(c),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(c){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(c)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ut{put(c,u,y,D){}merge(c,u,y,D){}refreshAuthToken(c){}refreshAppCheckToken(c){}onDisconnectPut(c,u,y){}onDisconnectMerge(c,u,y){}onDisconnectCancel(c,u){}reportStats(c){}}class kt{constructor(c){this.allowedEvents_=c,this.listeners_={},(0,de.hu)(Array.isArray(c)&&c.length>0,"Requires a non-empty array")}trigger(c,...u){if(Array.isArray(this.listeners_[c])){const y=[...this.listeners_[c]];for(let D=0;D<y.length;D++)y[D].callback.apply(y[D].context,u)}}on(c,u,y){this.validateEventType_(c),this.listeners_[c]=this.listeners_[c]||[],this.listeners_[c].push({callback:u,context:y});const D=this.getInitialEvent(c);D&&u.apply(y,D)}off(c,u,y){this.validateEventType_(c);const D=this.listeners_[c]||[];for(let k=0;k<D.length;k++)if(D[k].callback===u&&(!y||y===D[k].context))return void D.splice(k,1)}validateEventType_(c){(0,de.hu)(this.allowedEvents_.find(u=>u===c),"Unknown event: "+c)}}class Dt extends kt{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,de.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Dt}getInitialEvent(c){return(0,de.hu)("online"===c,"Unknown event type: "+c),[this.online_]}currentlyOnline(){return this.online_}}class Kn{constructor(c,u){if(void 0===u){this.pieces_=c.split("/");let y=0;for(let D=0;D<this.pieces_.length;D++)this.pieces_[D].length>0&&(this.pieces_[y]=this.pieces_[D],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=c,this.pieceNum_=u}toString(){let c="";for(let u=this.pieceNum_;u<this.pieces_.length;u++)""!==this.pieces_[u]&&(c+="/"+this.pieces_[u]);return c||"/"}}function Qn(){return new Kn("")}function Ln(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function wi(h){return h.pieces_.length-h.pieceNum_}function Er(h){let c=h.pieceNum_;return c<h.pieces_.length&&c++,new Kn(h.pieces_,c)}function _o(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function zr(h,c=0){return h.pieces_.slice(h.pieceNum_+c)}function An(h){if(h.pieceNum_>=h.pieces_.length)return null;const c=[];for(let u=h.pieceNum_;u<h.pieces_.length-1;u++)c.push(h.pieces_[u]);return new Kn(c,0)}function $n(h,c){const u=[];for(let y=h.pieceNum_;y<h.pieces_.length;y++)u.push(h.pieces_[y]);if(c instanceof Kn)for(let y=c.pieceNum_;y<c.pieces_.length;y++)u.push(c.pieces_[y]);else{const y=c.split("/");for(let D=0;D<y.length;D++)y[D].length>0&&u.push(y[D])}return new Kn(u,0)}function Gn(h){return h.pieceNum_>=h.pieces_.length}function Vr(h,c){const u=Ln(h),y=Ln(c);if(null===u)return c;if(u===y)return Vr(Er(h),Er(c));throw new Error("INTERNAL ERROR: innerPath ("+c+") is not within outerPath ("+h+")")}function Vs(h,c){const u=zr(h,0),y=zr(c,0);for(let D=0;D<u.length&&D<y.length;D++){const k=Un(u[D],y[D]);if(0!==k)return k}return u.length===y.length?0:u.length<y.length?-1:1}function Ti(h,c){if(wi(h)!==wi(c))return!1;for(let u=h.pieceNum_,y=c.pieceNum_;u<=h.pieces_.length;u++,y++)if(h.pieces_[u]!==c.pieces_[y])return!1;return!0}function ls(h,c){let u=h.pieceNum_,y=c.pieceNum_;if(wi(h)>wi(c))return!1;for(;u<h.pieces_.length;){if(h.pieces_[u]!==c.pieces_[y])return!1;++u,++y}return!0}class Ci{constructor(c,u){this.errorPrefix_=u,this.parts_=zr(c,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,de.ug)(this.parts_[y]);ar(this)}}function ar(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+xi(h))}function xi(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class io extends kt{constructor(){let c,u;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(u="visibilitychange",c="hidden"):typeof document.mozHidden<"u"?(u="mozvisibilitychange",c="mozHidden"):typeof document.msHidden<"u"?(u="msvisibilitychange",c="msHidden"):typeof document.webkitHidden<"u"&&(u="webkitvisibilitychange",c="webkitHidden")),this.visible_=!0,u&&document.addEventListener(u,()=>{const y=!document[c];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new io}getInitialEvent(c){return(0,de.hu)("visible"===c,"Unknown event type: "+c),[this.visible_]}}const Wi=1e3;let mo,Ms=(()=>{class h extends ut{constructor(u,y,D,k,K,le,Re,et){if(super(),this.repoInfo_=u,this.applicationId_=y,this.onDataUpdate_=D,this.onConnectStatus_=k,this.onServerInfoUpdate_=K,this.authTokenProvider_=le,this.appCheckTokenProvider_=Re,this.authOverride_=et,this.id=h.nextPersistentConnectionId_++,this.log_=Wt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,et&&!(0,de.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");io.getInstance().on("visible",this.onVisible_,this),-1===u.host.indexOf("fblocal")&&Dt.getInstance().on("online",this.onOnline_,this)}sendRequest(u,y,D){const k=++this.requestNumber_,K={r:k,a:u,b:y};this.log_((0,de.Wl)(K)),(0,de.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(K),D&&(this.requestCBHash_[k]=D)}get(u){this.initConnection_();const y=new de.BH,k={action:"g",request:{p:u._path.toString(),q:u._queryObject},onComplete:le=>{const Re=le.d;"ok"===le.s?y.resolve(Re):y.reject(Re)}};return this.outstandingGets_.push(k),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(u,y,D,k){this.initConnection_();const K=u._queryIdentifier,le=u._path.toString();this.log_("Listen called for "+le+" "+K),this.listens.has(le)||this.listens.set(le,new Map),(0,de.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,de.hu)(!this.listens.get(le).has(K),"listen() called twice for same path/queryId.");const Re={onComplete:k,hashFn:y,query:u,tag:D};this.listens.get(le).set(K,Re),this.connected_&&this.sendListen_(Re)}sendGet_(u){const y=this.outstandingGets_[u];this.sendRequest("g",y.request,D=>{delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(D)})}sendListen_(u){const y=u.query,D=y._path.toString(),k=y._queryIdentifier;this.log_("Listen on "+D+" for "+k);const K={p:D};u.tag&&(K.q=y._queryObject,K.t=u.tag),K.h=u.hashFn(),this.sendRequest("q",K,Re=>{const et=Re.d,Ot=Re.s;h.warnOnListenWarnings_(et,y),(this.listens.get(D)&&this.listens.get(D).get(k))===u&&(this.log_("listen response",Re),"ok"!==Ot&&this.removeListen_(D,k),u.onComplete&&u.onComplete(Ot,et))})}static warnOnListenWarnings_(u,y){if(u&&"object"==typeof u&&(0,de.r3)(u,"w")){const D=(0,de.DV)(u,"w");if(Array.isArray(D)&&~D.indexOf("no_index")){const k='".indexOn": "'+y._queryParams.getIndex().toString()+'"',K=y._path.toString();vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${k} at ${K} to your security rules for better performance.`)}}}refreshAuthToken(u){this.authToken_=u,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(u)}reduceReconnectDelayIfAdminCredential_(u){(u&&40===u.length||(0,de.GJ)(u))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(u){this.appCheckToken_=u,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const u=this.authToken_,y=(0,de.w9)(u)?"auth":"gauth",D={cred:u};null===this.authOverride_?D.noauth=!0:"object"==typeof this.authOverride_&&(D.authvar=this.authOverride_),this.sendRequest(y,D,k=>{const K=k.s,le=k.d||"error";this.authToken_===u&&("ok"===K?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(K,le))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},u=>{const y=u.s,D=u.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,D)})}unlisten(u,y){const D=u._path.toString(),k=u._queryIdentifier;this.log_("Unlisten called for "+D+" "+k),(0,de.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(D,k)&&this.connected_&&this.sendUnlisten_(D,k,u._queryObject,y)}sendUnlisten_(u,y,D,k){this.log_("Unlisten on "+u+" for "+y);const K={p:u};k&&(K.q=D,K.t=k),this.sendRequest("n",K)}onDisconnectPut(u,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",u,y,D):this.onDisconnectRequestQueue_.push({pathString:u,action:"o",data:y,onComplete:D})}onDisconnectMerge(u,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",u,y,D):this.onDisconnectRequestQueue_.push({pathString:u,action:"om",data:y,onComplete:D})}onDisconnectCancel(u,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",u,null,y):this.onDisconnectRequestQueue_.push({pathString:u,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(u,y,D,k){const K={p:y,d:D};this.log_("onDisconnect "+u,K),this.sendRequest(u,K,le=>{k&&setTimeout(()=>{k(le.s,le.d)},Math.floor(0))})}put(u,y,D,k){this.putInternal("p",u,y,D,k)}merge(u,y,D,k){this.putInternal("m",u,y,D,k)}putInternal(u,y,D,k,K){this.initConnection_();const le={p:y,d:D};void 0!==K&&(le.h=K),this.outstandingPuts_.push({action:u,request:le,onComplete:k}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(u){const y=this.outstandingPuts_[u].action,D=this.outstandingPuts_[u].request,k=this.outstandingPuts_[u].onComplete;this.outstandingPuts_[u].queued=this.connected_,this.sendRequest(y,D,K=>{this.log_(y+" response",K),delete this.outstandingPuts_[u],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),k&&k(K.s,K.d)})}reportStats(u){if(this.connected_){const y={c:u};this.log_("reportStats",y),this.sendRequest("s",y,D=>{"ok"!==D.s&&this.log_("reportStats","Error sending stats: "+D.d)})}}onDataMessage_(u){if("r"in u){this.log_("from server: "+(0,de.Wl)(u));const y=u.r,D=this.requestCBHash_[y];D&&(delete this.requestCBHash_[y],D(u.b))}else{if("error"in u)throw"A server-side error has occurred: "+u.error;"a"in u&&this.onDataPush_(u.a,u.b)}}onDataPush_(u,y){this.log_("handleServerMessage",u,y),"d"===u?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===u?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===u?this.onListenRevoked_(y.p,y.q):"ac"===u?this.onAuthRevoked_(y.s,y.d):"apc"===u?this.onAppCheckRevoked_(y.s,y.d):"sd"===u?this.onSecurityDebugPacket_(y):Tn("Unrecognized action received from server: "+(0,de.Wl)(u)+"\nAre you using the latest client?")}onReady_(u,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(u),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(u){(0,de.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(u))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(u){u&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0)),this.visible_=u}onOnline_(u){u?(this.log_("Browser went online."),this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Wi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const u=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-u);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var u=this;return(0,Xt.Z)(function*(){if(u.shouldReconnect_()){u.log_("Making a connection attempt"),u.lastConnectionAttemptTime_=(new Date).getTime(),u.lastConnectionEstablishedTime_=null;const y=u.onDataMessage_.bind(u),D=u.onReady_.bind(u),k=u.onRealtimeDisconnect_.bind(u),K=u.id+":"+h.nextConnectionId_++,le=u.lastSessionId;let Re=!1,et=null;const Ot=function(){et?et.close():(Re=!0,k())};u.realtime_={close:Ot,sendRequest:function(rr){(0,de.hu)(et,"sendRequest call when we're not connected not allowed."),et.sendRequest(rr)}};const un=u.forceTokenRefresh_;u.forceTokenRefresh_=!1;try{const[rr,mr]=yield Promise.all([u.authTokenProvider_.getToken(un),u.appCheckTokenProvider_.getToken(un)]);Re?dt("getToken() completed but was canceled"):(dt("getToken() completed. Creating connection."),u.authToken_=rr&&rr.accessToken,u.appCheckToken_=mr&&mr.token,et=new He(K,u.repoInfo_,u.applicationId_,u.appCheckToken_,u.authToken_,y,D,k,di=>{vn(di+" ("+u.repoInfo_.toString()+")"),u.interrupt("server_kill")},le))}catch(rr){u.log_("Failed to get token: "+rr),Re||(u.repoInfo_.nodeAdmin&&vn(rr),Ot())}}})()}interrupt(u){dt("Interrupting connection for reason: "+u),this.interruptReasons_[u]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(u){dt("Resuming connection for reason: "+u),delete this.interruptReasons_[u],(0,de.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Wi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(u){const y=u-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let u=0;u<this.outstandingPuts_.length;u++){const y=this.outstandingPuts_[u];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[u],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(u,y){let D;D=y?y.map(K=>Br(K)).join("$"):"default";const k=this.removeListen_(u,D);k&&k.onComplete&&k.onComplete("permission_denied")}removeListen_(u,y){const D=new Kn(u).toString();let k;if(this.listens.has(D)){const K=this.listens.get(D);k=K.get(y),K.delete(y),0===K.size&&this.listens.delete(D)}else k=void 0;return k}onAuthRevoked_(u,y){dt("Auth token revoked: "+u+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===u||"permission_denied"===u)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(u,y){dt("App check token revoked: "+u+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===u||"permission_denied"===u)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(u){this.securityDebugCallback_?this.securityDebugCallback_(u):"msg"in u&&console.log("FIREBASE: "+u.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const u of this.listens.values())for(const y of u.values())this.sendListen_(y);for(let u=0;u<this.outstandingPuts_.length;u++)this.outstandingPuts_[u]&&this.sendPut_(u);for(;this.onDisconnectRequestQueue_.length;){const u=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(u.action,u.pathString,u.data,u.onComplete)}for(let u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}sendConnectStats_(){const u={};let y="js";(0,de.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),u["sdk."+y+"."+Se.replace(/\./g,"-")]=1,(0,de.uI)()?u["framework.cordova"]=1:(0,de.b$)()&&(u["framework.reactnative"]=1),this.reportStats(u)}shouldReconnect_(){const u=Dt.getInstance().currentlyOnline();return(0,de.xb)(this.interruptReasons_)&&u}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class Tr{constructor(c,u){this.name=c,this.node=u}static Wrap(c,u){return new Tr(c,u)}}class js{getCompare(){return this.compare.bind(this)}indexedValueChanged(c,u){const y=new Tr(Sn,c),D=new Tr(Sn,u);return 0!==this.compare(y,D)}minPost(){return Tr.MIN}}class kr extends js{static get __EMPTY_NODE(){return mo}static set __EMPTY_NODE(c){mo=c}compare(c,u){return Un(c.name,u.name)}isDefinedOn(c){throw(0,de.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(c,u){return!1}minPost(){return Tr.MIN}maxPost(){return new Tr(Pn,mo)}makePost(c,u){return(0,de.hu)("string"==typeof c,"KeyIndex indexValue must always be a string."),new Tr(c,mo)}toString(){return".key"}}const ps=new kr;class xs{constructor(c,u,y,D,k=null){this.isReverse_=D,this.resultGenerator_=k,this.nodeStack_=[];let K=1;for(;!c.isEmpty();)if(K=u?y(c.key,u):1,D&&(K*=-1),K<0)c=this.isReverse_?c.left:c.right;else{if(0===K){this.nodeStack_.push(c);break}this.nodeStack_.push(c),c=this.isReverse_?c.right:c.left}}getNext(){if(0===this.nodeStack_.length)return null;let u,c=this.nodeStack_.pop();if(u=this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value},this.isReverse_)for(c=c.left;!c.isEmpty();)this.nodeStack_.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack_.push(c),c=c.left;return u}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const c=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(c.key,c.value):{key:c.key,value:c.value}}}let ns,Rs=(()=>{class h{constructor(u,y,D,k,K){this.key=u,this.value=y,this.color=D??h.RED,this.left=k??ri.EMPTY_NODE,this.right=K??ri.EMPTY_NODE}copy(u,y,D,k,K){return new h(u??this.key,y??this.value,D??this.color,k??this.left,K??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(u){return this.left.inorderTraversal(u)||!!u(this.key,this.value)||this.right.inorderTraversal(u)}reverseTraversal(u){return this.right.reverseTraversal(u)||u(this.key,this.value)||this.left.reverseTraversal(u)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(u,y,D){let k=this;const K=D(u,k.key);return k=K<0?k.copy(null,null,null,k.left.insert(u,y,D),null):0===K?k.copy(null,y,null,null,null):k.copy(null,null,null,null,k.right.insert(u,y,D)),k.fixUp_()}removeMin_(){if(this.left.isEmpty())return ri.EMPTY_NODE;let u=this;return!u.left.isRed_()&&!u.left.left.isRed_()&&(u=u.moveRedLeft_()),u=u.copy(null,null,null,u.left.removeMin_(),null),u.fixUp_()}remove(u,y){let D,k;if(D=this,y(u,D.key)<0)!D.left.isEmpty()&&!D.left.isRed_()&&!D.left.left.isRed_()&&(D=D.moveRedLeft_()),D=D.copy(null,null,null,D.left.remove(u,y),null);else{if(D.left.isRed_()&&(D=D.rotateRight_()),!D.right.isEmpty()&&!D.right.isRed_()&&!D.right.left.isRed_()&&(D=D.moveRedRight_()),0===y(u,D.key)){if(D.right.isEmpty())return ri.EMPTY_NODE;k=D.right.min_(),D=D.copy(k.key,k.value,null,null,D.right.removeMin_())}D=D.copy(null,null,null,null,D.right.remove(u,y))}return D.fixUp_()}isRed_(){return this.color}fixUp_(){let u=this;return u.right.isRed_()&&!u.left.isRed_()&&(u=u.rotateLeft_()),u.left.isRed_()&&u.left.left.isRed_()&&(u=u.rotateRight_()),u.left.isRed_()&&u.right.isRed_()&&(u=u.colorFlip_()),u}moveRedLeft_(){let u=this.colorFlip_();return u.right.left.isRed_()&&(u=u.copy(null,null,null,null,u.right.rotateRight_()),u=u.rotateLeft_(),u=u.colorFlip_()),u}moveRedRight_(){let u=this.colorFlip_();return u.left.left.isRed_()&&(u=u.rotateRight_(),u=u.colorFlip_()),u}rotateLeft_(){const u=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,u,null)}rotateRight_(){const u=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,u)}colorFlip_(){const u=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,u,y)}checkMaxDepth_(){const u=this.check_();return Math.pow(2,u)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const u=this.left.check_();if(u!==this.right.check_())throw new Error("Black depths differ");return u+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class ri{constructor(c,u=ri.EMPTY_NODE){this.comparator_=c,this.root_=u}insert(c,u){return new ri(this.comparator_,this.root_.insert(c,u,this.comparator_).copy(null,null,Rs.BLACK,null,null))}remove(c){return new ri(this.comparator_,this.root_.remove(c,this.comparator_).copy(null,null,Rs.BLACK,null,null))}get(c){let u,y=this.root_;for(;!y.isEmpty();){if(u=this.comparator_(c,y.key),0===u)return y.value;u<0?y=y.left:u>0&&(y=y.right)}return null}getPredecessorKey(c){let u,y=this.root_,D=null;for(;!y.isEmpty();){if(u=this.comparator_(c,y.key),0===u){if(y.left.isEmpty())return D?D.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}u<0?y=y.left:u>0&&(D=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(c){return this.root_.inorderTraversal(c)}reverseTraversal(c){return this.root_.reverseTraversal(c)}getIterator(c){return new xs(this.root_,null,this.comparator_,!1,c)}getIteratorFrom(c,u){return new xs(this.root_,c,this.comparator_,!1,u)}getReverseIteratorFrom(c,u){return new xs(this.root_,c,this.comparator_,!0,u)}getReverseIterator(c){return new xs(this.root_,null,this.comparator_,!0,c)}}function Xi(h,c){return Un(h.name,c.name)}function Hs(h,c){return Un(h,c)}ri.EMPTY_NODE=new class cs{copy(c,u,y,D,k){return this}insert(c,u,y){return new Rs(c,u,null)}remove(c,u){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const us=function(h){return"number"==typeof h?"number:"+an(h):"string:"+h},ds=function(h){if(h.isLeafNode()){const c=h.val();(0,de.hu)("string"==typeof c||"number"==typeof c||"object"==typeof c&&(0,de.r3)(c,".sv"),"Priority must be a string or number.")}else(0,de.hu)(h===ns||h.isEmpty(),"priority of unexpected type.");(0,de.hu)(h===ns||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Io,Cs,rs,ws=(()=>{class h{constructor(u,y=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=u,this.priorityNode_=y,this.lazyHash_=null,(0,de.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ds(this.priorityNode_)}static set __childrenNodeConstructor(u){Io=u}static get __childrenNodeConstructor(){return Io}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(u){return new h(this.value_,u)}getImmediateChild(u){return".priority"===u?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(u){return Gn(u)?this:".priority"===Ln(u)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(u,y){return null}updateImmediateChild(u,y){return".priority"===u?this.updatePriority(y):y.isEmpty()&&".priority"!==u?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(u,y).updatePriority(this.priorityNode_)}updateChild(u,y){const D=Ln(u);return null===D?y:y.isEmpty()&&".priority"!==D?this:((0,de.hu)(".priority"!==D||1===wi(u),".priority must be the last token in a path"),this.updateImmediateChild(D,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Er(u),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(u,y){return!1}val(u){return u&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let u="";this.priorityNode_.isEmpty()||(u+="priority:"+us(this.priorityNode_.val())+":");const y=typeof this.value_;u+=y+":",u+="number"===y?an(this.value_):this.value_,this.lazyHash_=Vn(u)}return this.lazyHash_}getValue(){return this.value_}compareTo(u){return u===h.__childrenNodeConstructor.EMPTY_NODE?1:u instanceof h.__childrenNodeConstructor?-1:((0,de.hu)(u.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(u))}compareToLeafNode_(u){const y=typeof u.value_,D=typeof this.value_,k=h.VALUE_TYPE_ORDER.indexOf(y),K=h.VALUE_TYPE_ORDER.indexOf(D);return(0,de.hu)(k>=0,"Unknown leaf type: "+y),(0,de.hu)(K>=0,"Unknown leaf type: "+D),k===K?"object"===D?0:this.value_<u.value_?-1:this.value_===u.value_?0:1:K-k}withIndex(){return this}isIndexed(){return!0}equals(u){return u===this||!!u.isLeafNode()&&(this.value_===u.value_&&this.priorityNode_.equals(u.priorityNode_))}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const mi=new class qo extends js{compare(c,u){const y=c.node.getPriority(),D=u.node.getPriority(),k=y.compareTo(D);return 0===k?Un(c.name,u.name):k}isDefinedOn(c){return!c.getPriority().isEmpty()}indexedValueChanged(c,u){return!c.getPriority().equals(u.getPriority())}minPost(){return Tr.MIN}maxPost(){return new Tr(Pn,new ws("[PRIORITY-POST]",rs))}makePost(c,u){const y=Cs(c);return new Tr(u,new ws("[PRIORITY-POST]",y))}toString(){return".priority"}},ia=Math.log(2);class Pa{constructor(c){this.count=parseInt(Math.log(c+1)/ia,10),this.current_=this.count-1;const D=(k=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=c+1&D}nextBitIsOne(){const c=!(this.bits_&1<<this.current_);return this.current_--,c}}const Eo=function(h,c,u,y){h.sort(c);const D=function(Re,et){const Ot=et-Re;let Gt,un;if(0===Ot)return null;if(1===Ot)return Gt=h[Re],un=u?u(Gt):Gt,new Rs(un,Gt.node,Rs.BLACK,null,null);{const rr=parseInt(Ot/2,10)+Re,mr=D(Re,rr),di=D(rr+1,et);return Gt=h[rr],un=u?u(Gt):Gt,new Rs(un,Gt.node,Rs.BLACK,mr,di)}},le=function(Re){let et=null,Ot=null,Gt=h.length;const un=function(mr,di){const po=Gt-mr,il=Gt;Gt-=mr;const Lc=D(po+1,il),bd=h[po],Rg=u?u(bd):bd;rr(new Rs(Rg,bd.node,di,null,Lc))},rr=function(mr){et?(et.left=mr,et=mr):(Ot=mr,et=mr)};for(let mr=0;mr<Re.count;++mr){const di=Re.nextBitIsOne(),po=Math.pow(2,Re.count-(mr+1));di?un(po,Rs.BLACK):(un(po,Rs.BLACK),un(po,Rs.RED))}return Ot}(new Pa(h.length));return new ri(y||c,le)};let Ro;const sa={};class wo{constructor(c,u){this.indexes_=c,this.indexSet_=u}static get Default(){return(0,de.hu)(sa&&mi,"ChildrenNode.ts has not been loaded"),Ro=Ro||new wo({".priority":sa},{".priority":mi}),Ro}get(c){const u=(0,de.DV)(this.indexes_,c);if(!u)throw new Error("No index defined for "+c);return u instanceof ri?u:null}hasIndex(c){return(0,de.r3)(this.indexSet_,c.toString())}addIndex(c,u){(0,de.hu)(c!==ps,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let D=!1;const k=u.getIterator(Tr.Wrap);let le,K=k.getNext();for(;K;)D=D||c.isDefinedOn(K.node),y.push(K),K=k.getNext();le=D?Eo(y,c.getCompare()):sa;const Re=c.toString(),et=Object.assign({},this.indexSet_);et[Re]=c;const Ot=Object.assign({},this.indexes_);return Ot[Re]=le,new wo(Ot,et)}addToIndexes(c,u){const y=(0,de.UI)(this.indexes_,(D,k)=>{const K=(0,de.DV)(this.indexSet_,k);if((0,de.hu)(K,"Missing index implementation for "+k),D===sa){if(K.isDefinedOn(c.node)){const le=[],Re=u.getIterator(Tr.Wrap);let et=Re.getNext();for(;et;)et.name!==c.name&&le.push(et),et=Re.getNext();return le.push(c),Eo(le,K.getCompare())}return sa}{const le=u.get(c.name);let Re=D;return le&&(Re=Re.remove(new Tr(c.name,le))),Re.insert(c,c.node)}});return new wo(y,this.indexSet_)}removeFromIndexes(c,u){const y=(0,de.UI)(this.indexes_,D=>{if(D===sa)return D;{const k=u.get(c.name);return k?D.remove(new Tr(c.name,k)):D}});return new wo(y,this.indexSet_)}}let ci,Or=(()=>{class h{constructor(u,y,D){this.children_=u,this.priorityNode_=y,this.indexMap_=D,this.lazyHash_=null,this.priorityNode_&&ds(this.priorityNode_),this.children_.isEmpty()&&(0,de.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ci||(ci=new h(new ri(Hs),null,wo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ci}updatePriority(u){return this.children_.isEmpty()?this:new h(this.children_,u,this.indexMap_)}getImmediateChild(u){if(".priority"===u)return this.getPriority();{const y=this.children_.get(u);return null===y?ci:y}}getChild(u){const y=Ln(u);return null===y?this:this.getImmediateChild(y).getChild(Er(u))}hasChild(u){return null!==this.children_.get(u)}updateImmediateChild(u,y){if((0,de.hu)(y,"We should always be passing snapshot nodes"),".priority"===u)return this.updatePriority(y);{const D=new Tr(u,y);let k,K;y.isEmpty()?(k=this.children_.remove(u),K=this.indexMap_.removeFromIndexes(D,this.children_)):(k=this.children_.insert(u,y),K=this.indexMap_.addToIndexes(D,this.children_));const le=k.isEmpty()?ci:this.priorityNode_;return new h(k,le,K)}}updateChild(u,y){const D=Ln(u);if(null===D)return y;{(0,de.hu)(".priority"!==Ln(u)||1===wi(u),".priority must be the last token in a path");const k=this.getImmediateChild(D).updateChild(Er(u),y);return this.updateImmediateChild(D,k)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(u){if(this.isEmpty())return null;const y={};let D=0,k=0,K=!0;if(this.forEachChild(mi,(le,Re)=>{y[le]=Re.val(u),D++,K&&h.INTEGER_REGEXP_.test(le)?k=Math.max(k,Number(le)):K=!1}),!u&&K&&k<2*D){const le=[];for(const Re in y)le[Re]=y[Re];return le}return u&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let u="";this.getPriority().isEmpty()||(u+="priority:"+us(this.getPriority().val())+":"),this.forEachChild(mi,(y,D)=>{const k=D.hash();""!==k&&(u+=":"+y+":"+k)}),this.lazyHash_=""===u?"":Vn(u)}return this.lazyHash_}getPredecessorChildName(u,y,D){const k=this.resolveIndex_(D);if(k){const K=k.getPredecessorKey(new Tr(u,y));return K?K.name:null}return this.children_.getPredecessorKey(u)}getFirstChildName(u){const y=this.resolveIndex_(u);if(y){const D=y.minKey();return D&&D.name}return this.children_.minKey()}getFirstChild(u){const y=this.getFirstChildName(u);return y?new Tr(y,this.children_.get(y)):null}getLastChildName(u){const y=this.resolveIndex_(u);if(y){const D=y.maxKey();return D&&D.name}return this.children_.maxKey()}getLastChild(u){const y=this.getLastChildName(u);return y?new Tr(y,this.children_.get(y)):null}forEachChild(u,y){const D=this.resolveIndex_(u);return D?D.inorderTraversal(k=>y(k.name,k.node)):this.children_.inorderTraversal(y)}getIterator(u){return this.getIteratorFrom(u.minPost(),u)}getIteratorFrom(u,y){const D=this.resolveIndex_(y);if(D)return D.getIteratorFrom(u,k=>k);{const k=this.children_.getIteratorFrom(u.name,Tr.Wrap);let K=k.peek();for(;null!=K&&y.compare(K,u)<0;)k.getNext(),K=k.peek();return k}}getReverseIterator(u){return this.getReverseIteratorFrom(u.maxPost(),u)}getReverseIteratorFrom(u,y){const D=this.resolveIndex_(y);if(D)return D.getReverseIteratorFrom(u,k=>k);{const k=this.children_.getReverseIteratorFrom(u.name,Tr.Wrap);let K=k.peek();for(;null!=K&&y.compare(K,u)>0;)k.getNext(),K=k.peek();return k}}compareTo(u){return this.isEmpty()?u.isEmpty()?0:-1:u.isLeafNode()||u.isEmpty()?1:u===z?-1:0}withIndex(u){if(u===ps||this.indexMap_.hasIndex(u))return this;{const y=this.indexMap_.addIndex(u,this.children_);return new h(this.children_,this.priorityNode_,y)}}isIndexed(u){return u===ps||this.indexMap_.hasIndex(u)}equals(u){if(u===this)return!0;if(u.isLeafNode())return!1;{const y=u;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const D=this.getIterator(mi),k=y.getIterator(mi);let K=D.getNext(),le=k.getNext();for(;K&&le;){if(K.name!==le.name||!K.node.equals(le.node))return!1;K=D.getNext(),le=k.getNext()}return null===K&&null===le}return!1}return!1}}resolveIndex_(u){return u===ps?null:this.indexMap_.get(u.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const z=new class Gl extends Or{constructor(){super(new ri(Hs),Or.EMPTY_NODE,wo.Default)}compareTo(c){return c===this?0:1}equals(c){return c===this}getPriority(){return this}getImmediateChild(c){return Or.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Tr,{MIN:{value:new Tr(Sn,Or.EMPTY_NODE)},MAX:{value:new Tr(Pn,z)}}),kr.__EMPTY_NODE=Or.EMPTY_NODE,ws.__childrenNodeConstructor=Or,function qi(h){ns=h}(z),function ol(h){rs=h}(z);const V=!0;function oe(h,c=null){if(null===h)return Or.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(c=h[".priority"]),(0,de.hu)(null===c||"string"==typeof c||"number"==typeof c||"object"==typeof c&&".sv"in c,"Invalid priority type found: "+typeof c),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new ws(h,oe(c));if(h instanceof Array||!V){let u=Or.EMPTY_NODE;return hr(h,(y,D)=>{if((0,de.r3)(h,y)&&"."!==y.substring(0,1)){const k=oe(D);(k.isLeafNode()||!k.isEmpty())&&(u=u.updateImmediateChild(y,k))}}),u.updatePriority(oe(c))}{const u=[];let y=!1;if(hr(h,(K,le)=>{if("."!==K.substring(0,1)){const Re=oe(le);Re.isEmpty()||(y=y||!Re.getPriority().isEmpty(),u.push(new Tr(K,Re)))}}),0===u.length)return Or.EMPTY_NODE;const k=Eo(u,Xi,K=>K.name,Hs);if(y){const K=Eo(u,mi.getCompare());return new Or(k,oe(c),new wo({".priority":K},{".priority":mi}))}return new Or(k,oe(c),wo.Default)}}!function so(h){Cs=h}(oe);class Y extends js{constructor(c){super(),this.indexPath_=c,(0,de.hu)(!Gn(c)&&".priority"!==Ln(c),"Can't create PathIndex with empty path or .priority key")}extractChild(c){return c.getChild(this.indexPath_)}isDefinedOn(c){return!c.getChild(this.indexPath_).isEmpty()}compare(c,u){const y=this.extractChild(c.node),D=this.extractChild(u.node),k=y.compareTo(D);return 0===k?Un(c.name,u.name):k}makePost(c,u){const y=oe(c),D=Or.EMPTY_NODE.updateChild(this.indexPath_,y);return new Tr(u,D)}maxPost(){const c=Or.EMPTY_NODE.updateChild(this.indexPath_,z);return new Tr(Pn,c)}toString(){return zr(this.indexPath_,0).join("/")}}const fn=new class Te extends js{compare(c,u){const y=c.node.compareTo(u.node);return 0===y?Un(c.name,u.name):y}isDefinedOn(c){return!0}indexedValueChanged(c,u){return!c.equals(u)}minPost(){return Tr.MIN}maxPost(){return Tr.MAX}makePost(c,u){const y=oe(c);return new Tr(u,y)}toString(){return".value"}};function E(h){return{type:"value",snapshotNode:h}}function q(h,c){return{type:"child_added",snapshotNode:c,childName:h}}function C(h,c){return{type:"child_removed",snapshotNode:c,childName:h}}function j(h,c,u){return{type:"child_changed",snapshotNode:c,childName:h,oldSnap:u}}class Nt{constructor(c){this.index_=c}updateChild(c,u,y,D,k,K){(0,de.hu)(c.isIndexed(this.index_),"A node must be indexed if only a child is updated");const le=c.getImmediateChild(u);return le.getChild(D).equals(y.getChild(D))&&le.isEmpty()===y.isEmpty()||(null!=K&&(y.isEmpty()?c.hasChild(u)?K.trackChildChange(C(u,le)):(0,de.hu)(c.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):le.isEmpty()?K.trackChildChange(q(u,y)):K.trackChildChange(j(u,y,le))),c.isLeafNode()&&y.isEmpty())?c:c.updateImmediateChild(u,y).withIndex(this.index_)}updateFullNode(c,u,y){return null!=y&&(c.isLeafNode()||c.forEachChild(mi,(D,k)=>{u.hasChild(D)||y.trackChildChange(C(D,k))}),u.isLeafNode()||u.forEachChild(mi,(D,k)=>{if(c.hasChild(D)){const K=c.getImmediateChild(D);K.equals(k)||y.trackChildChange(j(D,k,K))}else y.trackChildChange(q(D,k))})),u.withIndex(this.index_)}updatePriority(c,u){return c.isEmpty()?Or.EMPTY_NODE:c.updatePriority(u)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class jn{constructor(c){this.indexedFilter_=new Nt(c.getIndex()),this.index_=c.getIndex(),this.startPost_=jn.getStartPost_(c),this.endPost_=jn.getEndPost_(c),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(c){const u=this.startIsInclusive_?this.index_.compare(this.getStartPost(),c)<=0:this.index_.compare(this.getStartPost(),c)<0,y=this.endIsInclusive_?this.index_.compare(c,this.getEndPost())<=0:this.index_.compare(c,this.getEndPost())<0;return u&&y}updateChild(c,u,y,D,k,K){return this.matches(new Tr(u,y))||(y=Or.EMPTY_NODE),this.indexedFilter_.updateChild(c,u,y,D,k,K)}updateFullNode(c,u,y){u.isLeafNode()&&(u=Or.EMPTY_NODE);let D=u.withIndex(this.index_);D=D.updatePriority(Or.EMPTY_NODE);const k=this;return u.forEachChild(mi,(K,le)=>{k.matches(new Tr(K,le))||(D=D.updateImmediateChild(K,Or.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(c,D,y)}updatePriority(c,u){return c}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(c){if(c.hasStart()){const u=c.getIndexStartName();return c.getIndex().makePost(c.getIndexStartValue(),u)}return c.getIndex().minPost()}static getEndPost_(c){if(c.hasEnd()){const u=c.getIndexEndName();return c.getIndex().makePost(c.getIndexEndValue(),u)}return c.getIndex().maxPost()}}class Wn{constructor(c){this.withinDirectionalStart=u=>this.reverse_?this.withinEndPost(u):this.withinStartPost(u),this.withinDirectionalEnd=u=>this.reverse_?this.withinStartPost(u):this.withinEndPost(u),this.withinStartPost=u=>{const y=this.index_.compare(this.rangedFilter_.getStartPost(),u);return this.startIsInclusive_?y<=0:y<0},this.withinEndPost=u=>{const y=this.index_.compare(u,this.rangedFilter_.getEndPost());return this.endIsInclusive_?y<=0:y<0},this.rangedFilter_=new jn(c),this.index_=c.getIndex(),this.limit_=c.getLimit(),this.reverse_=!c.isViewFromLeft(),this.startIsInclusive_=!c.startAfterSet_,this.endIsInclusive_=!c.endBeforeSet_}updateChild(c,u,y,D,k,K){return this.rangedFilter_.matches(new Tr(u,y))||(y=Or.EMPTY_NODE),c.getImmediateChild(u).equals(y)?c:c.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(c,u,y,D,k,K):this.fullLimitUpdateChild_(c,u,y,k,K)}updateFullNode(c,u,y){let D;if(u.isLeafNode()||u.isEmpty())D=Or.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<u.numChildren()&&u.isIndexed(this.index_)){let k;D=Or.EMPTY_NODE.withIndex(this.index_),k=this.reverse_?u.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let K=0;for(;k.hasNext()&&K<this.limit_;){const le=k.getNext();if(this.withinDirectionalStart(le)){if(!this.withinDirectionalEnd(le))break;D=D.updateImmediateChild(le.name,le.node),K++}}}else{let k;D=u.withIndex(this.index_),D=D.updatePriority(Or.EMPTY_NODE),k=this.reverse_?D.getReverseIterator(this.index_):D.getIterator(this.index_);let K=0;for(;k.hasNext();){const le=k.getNext();K<this.limit_&&this.withinDirectionalStart(le)&&this.withinDirectionalEnd(le)?K++:D=D.updateImmediateChild(le.name,Or.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(c,D,y)}updatePriority(c,u){return c}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(c,u,y,D,k){let K;if(this.reverse_){const Gt=this.index_.getCompare();K=(un,rr)=>Gt(rr,un)}else K=this.index_.getCompare();const le=c;(0,de.hu)(le.numChildren()===this.limit_,"");const Re=new Tr(u,y),et=this.reverse_?le.getFirstChild(this.index_):le.getLastChild(this.index_),Ot=this.rangedFilter_.matches(Re);if(le.hasChild(u)){const Gt=le.getImmediateChild(u);let un=D.getChildAfterChild(this.index_,et,this.reverse_);for(;null!=un&&(un.name===u||le.hasChild(un.name));)un=D.getChildAfterChild(this.index_,un,this.reverse_);const rr=null==un?1:K(un,Re);if(Ot&&!y.isEmpty()&&rr>=0)return k?.trackChildChange(j(u,y,Gt)),le.updateImmediateChild(u,y);{k?.trackChildChange(C(u,Gt));const di=le.updateImmediateChild(u,Or.EMPTY_NODE);return null!=un&&this.rangedFilter_.matches(un)?(k?.trackChildChange(q(un.name,un.node)),di.updateImmediateChild(un.name,un.node)):di}}return y.isEmpty()?c:Ot&&K(et,Re)>=0?(null!=k&&(k.trackChildChange(C(et.name,et.node)),k.trackChildChange(q(u,y))),le.updateImmediateChild(u,y).updateImmediateChild(et.name,Or.EMPTY_NODE)):c}}class fr{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,de.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,de.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,de.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,de.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,de.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mi}copy(){const c=new fr;return c.limitSet_=this.limitSet_,c.limit_=this.limit_,c.startSet_=this.startSet_,c.startAfterSet_=this.startAfterSet_,c.indexStartValue_=this.indexStartValue_,c.startNameSet_=this.startNameSet_,c.indexStartName_=this.indexStartName_,c.endSet_=this.endSet_,c.endBeforeSet_=this.endBeforeSet_,c.indexEndValue_=this.indexEndValue_,c.endNameSet_=this.endNameSet_,c.indexEndName_=this.indexEndName_,c.index_=this.index_,c.viewFrom_=this.viewFrom_,c}}function Ds(h,c,u){const y=h.copy();return y.startSet_=!0,void 0===c&&(c=null),y.indexStartValue_=c,null!=u?(y.startNameSet_=!0,y.indexStartName_=u):(y.startNameSet_=!1,y.indexStartName_=""),y}function oo(h,c,u){const y=h.copy();return y.endSet_=!0,void 0===c&&(c=null),y.indexEndValue_=c,void 0!==u?(y.endNameSet_=!0,y.indexEndName_=u):(y.endNameSet_=!1,y.indexEndName_=""),y}function Na(h,c){const u=h.copy();return u.index_=c,u}function ao(h){const c={};if(h.isDefault())return c;let u;if(h.index_===mi?u="$priority":h.index_===fn?u="$value":h.index_===ps?u="$key":((0,de.hu)(h.index_ instanceof Y,"Unrecognized index type!"),u=h.index_.toString()),c.orderBy=(0,de.Wl)(u),h.startSet_){const y=h.startAfterSet_?"startAfter":"startAt";c[y]=(0,de.Wl)(h.indexStartValue_),h.startNameSet_&&(c[y]+=","+(0,de.Wl)(h.indexStartName_))}if(h.endSet_){const y=h.endBeforeSet_?"endBefore":"endAt";c[y]=(0,de.Wl)(h.indexEndValue_),h.endNameSet_&&(c[y]+=","+(0,de.Wl)(h.indexEndName_))}return h.limitSet_&&(h.isViewFromLeft()?c.limitToFirst=h.limit_:c.limitToLast=h.limit_),c}function aa(h){const c={};if(h.startSet_&&(c.sp=h.indexStartValue_,h.startNameSet_&&(c.sn=h.indexStartName_),c.sin=!h.startAfterSet_),h.endSet_&&(c.ep=h.indexEndValue_,h.endNameSet_&&(c.en=h.indexEndName_),c.ein=!h.endBeforeSet_),h.limitSet_){c.l=h.limit_;let u=h.viewFrom_;""===u&&(u=h.isViewFromLeft()?"l":"r"),c.vf=u}return h.index_!==mi&&(c.i=h.index_.toString()),c}class Zs extends ut{constructor(c,u,y,D){super(),this.repoInfo_=c,this.onDataUpdate_=u,this.authTokenProvider_=y,this.appCheckTokenProvider_=D,this.log_=Wt("p:rest:"),this.listens_={}}reportStats(c){throw new Error("Method not implemented.")}static getListenId_(c,u){return void 0!==u?"tag$"+u:((0,de.hu)(c._queryParams.isDefault(),"should have a tag if it's not a default query."),c._path.toString())}listen(c,u,y,D){const k=c._path.toString();this.log_("Listen called for "+k+" "+c._queryIdentifier);const K=Zs.getListenId_(c,y),le={};this.listens_[K]=le;const Re=ao(c._queryParams);this.restRequest_(k+".json",Re,(et,Ot)=>{let Gt=Ot;if(404===et&&(Gt=null,et=null),null===et&&this.onDataUpdate_(k,Gt,!1,y),(0,de.DV)(this.listens_,K)===le){let un;un=et?401===et?"permission_denied":"rest_error:"+et:"ok",D(un,null)}})}unlisten(c,u){const y=Zs.getListenId_(c,u);delete this.listens_[y]}get(c){const u=ao(c._queryParams),y=c._path.toString(),D=new de.BH;return this.restRequest_(y+".json",u,(k,K)=>{let le=K;404===k&&(le=null,k=null),null===k?(this.onDataUpdate_(y,le,!1,null),D.resolve(le)):D.reject(new Error(le))}),D.promise}refreshAuthToken(c){}restRequest_(c,u={},y){return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([D,k])=>{D&&D.accessToken&&(u.auth=D.accessToken),k&&k.token&&(u.ac=k.token);const K=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+c+"?ns="+this.repoInfo_.namespace+(0,de.xO)(u);this.log_("Sending REST request for "+K);const le=new XMLHttpRequest;le.onreadystatechange=()=>{if(y&&4===le.readyState){this.log_("REST Response for "+K+" received. status:",le.status,"response:",le.responseText);let Re=null;if(le.status>=200&&le.status<300){try{Re=(0,de.cI)(le.responseText)}catch{vn("Failed to parse JSON response for "+K+": "+le.responseText)}y(null,Re)}else 401!==le.status&&404!==le.status&&vn("Got unsuccessful REST response for "+K+" Status: "+le.status),y(le.status);y=null}},le.open("GET",K,!0),le.send()})}}class Il{constructor(){this.rootNode_=Or.EMPTY_NODE}getNode(c){return this.rootNode_.getChild(c)}updateSnapshot(c,u){this.rootNode_=this.rootNode_.updateChild(c,u)}}function Bo(){return{value:null,children:new Map}}function Ts(h,c,u){if(Gn(c))h.value=u,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(c,u);else{const y=Ln(c);h.children.has(y)||h.children.set(y,Bo()),Ts(h.children.get(y),c=Er(c),u)}}function yo(h,c){if(Gn(c))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const u=h.value;return h.value=null,u.forEachChild(mi,(y,D)=>{Ts(h,new Kn(y),D)}),yo(h,c)}}if(h.children.size>0){const u=Ln(c);return c=Er(c),h.children.has(u)&&yo(h.children.get(u),c)&&h.children.delete(u),0===h.children.size}return!0}function la(h,c,u){null!==h.value?u(c,h.value):function al(h,c){h.children.forEach((u,y)=>{c(y,u)})}(h,(y,D)=>{la(D,new Kn(c.toString()+"/"+y),u)})}class ka{constructor(c){this.collection_=c,this.last_=null}get(){const c=this.collection_.get(),u=Object.assign({},c);return this.last_&&hr(this.last_,(y,D)=>{u[y]=u[y]-D}),this.last_=c,u}}class Fa{constructor(c,u){this.server_=u,this.statsToReport_={},this.statsListener_=new ka(c);const y=1e4+2e4*Math.random();ot(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const c=this.statsListener_.get(),u={};let y=!1;hr(c,(D,k)=>{k>0&&(0,de.r3)(this.statsToReport_,D)&&(u[D]=k,y=!0)}),y&&this.server_.reportStats(u),ot(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Oo=function(h){return h[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",h}(Oo||{});function Qa(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class $o{constructor(c,u,y){this.path=c,this.affectedTree=u,this.revert=y,this.type=Oo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(c){if(Gn(this.path)){if(null!=this.affectedTree.value)return(0,de.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const u=this.affectedTree.subtree(new Kn(c));return new $o(Qn(),u,this.revert)}}return(0,de.hu)(Ln(this.path)===c,"operationForChild called for unrelated child."),new $o(Er(this.path),this.affectedTree,this.revert)}}class Ps{constructor(c,u){this.source=c,this.path=u,this.type=Oo.LISTEN_COMPLETE}operationForChild(c){return Gn(this.path)?new Ps(this.source,Qn()):new Ps(this.source,Er(this.path))}}class lo{constructor(c,u,y){this.source=c,this.path=u,this.snap=y,this.type=Oo.OVERWRITE}operationForChild(c){return Gn(this.path)?new lo(this.source,Qn(),this.snap.getImmediateChild(c)):new lo(this.source,Er(this.path),this.snap)}}class co{constructor(c,u,y){this.source=c,this.path=u,this.children=y,this.type=Oo.MERGE}operationForChild(c){if(Gn(this.path)){const u=this.children.subtree(new Kn(c));return u.isEmpty()?null:u.value?new lo(this.source,Qn(),u.value):new co(this.source,Qn(),u)}return(0,de.hu)(Ln(this.path)===c,"Can't get a merge for a child not on the path of the operation"),new co(this.source,Er(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Yr{constructor(c,u,y){this.node_=c,this.fullyInitialized_=u,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(c){if(Gn(c))return this.isFullyInitialized()&&!this.filtered_;const u=Ln(c);return this.isCompleteForChild(u)}isCompleteForChild(c){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(c)}getNode(){return this.node_}}class A{constructor(c){this.query_=c,this.index_=this.query_._queryParams.getIndex()}}function we(h,c,u,y,D,k){const K=y.filter(le=>le.type===u);K.sort((le,Re)=>function me(h,c,u){if(null==c.childName||null==u.childName)throw(0,de.g5)("Should only compare child_ events.");const y=new Tr(c.childName,c.snapshotNode),D=new Tr(u.childName,u.snapshotNode);return h.index_.compare(y,D)}(h,le,Re)),K.forEach(le=>{const Re=function $(h,c,u){return"value"===c.type||"child_removed"===c.type||(c.prevName=u.getPredecessorChildName(c.childName,c.snapshotNode,h.index_)),c}(h,le,k);D.forEach(et=>{et.respondsTo(le.type)&&c.push(et.createEvent(Re,h.query_))})})}function tt(h,c){return{eventCache:h,serverCache:c}}function $t(h,c,u,y){return tt(new Yr(c,u,y),h.serverCache)}function xn(h,c,u,y){return tt(h.eventCache,new Yr(c,u,y))}function xr(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function Pr(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let Sr;class Rr{constructor(c,u=(()=>(Sr||(Sr=new ri(pr)),Sr))()){this.value=c,this.children=u}static fromObject(c){let u=new Rr(null);return hr(c,(y,D)=>{u=u.set(new Kn(y),D)}),u}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(c,u){if(null!=this.value&&u(this.value))return{path:Qn(),value:this.value};if(Gn(c))return null;{const y=Ln(c),D=this.children.get(y);if(null!==D){const k=D.findRootMostMatchingPathAndValue(Er(c),u);return null!=k?{path:$n(new Kn(y),k.path),value:k.value}:null}return null}}findRootMostValueAndPath(c){return this.findRootMostMatchingPathAndValue(c,()=>!0)}subtree(c){if(Gn(c))return this;{const u=Ln(c),y=this.children.get(u);return null!==y?y.subtree(Er(c)):new Rr(null)}}set(c,u){if(Gn(c))return new Rr(u,this.children);{const y=Ln(c),k=(this.children.get(y)||new Rr(null)).set(Er(c),u),K=this.children.insert(y,k);return new Rr(this.value,K)}}remove(c){if(Gn(c))return this.children.isEmpty()?new Rr(null):new Rr(null,this.children);{const u=Ln(c),y=this.children.get(u);if(y){const D=y.remove(Er(c));let k;return k=D.isEmpty()?this.children.remove(u):this.children.insert(u,D),null===this.value&&k.isEmpty()?new Rr(null):new Rr(this.value,k)}return this}}get(c){if(Gn(c))return this.value;{const u=Ln(c),y=this.children.get(u);return y?y.get(Er(c)):null}}setTree(c,u){if(Gn(c))return u;{const y=Ln(c),k=(this.children.get(y)||new Rr(null)).setTree(Er(c),u);let K;return K=k.isEmpty()?this.children.remove(y):this.children.insert(y,k),new Rr(this.value,K)}}fold(c){return this.fold_(Qn(),c)}fold_(c,u){const y={};return this.children.inorderTraversal((D,k)=>{y[D]=k.fold_($n(c,D),u)}),u(c,this.value,y)}findOnPath(c,u){return this.findOnPath_(c,Qn(),u)}findOnPath_(c,u,y){const D=!!this.value&&y(u,this.value);if(D)return D;if(Gn(c))return null;{const k=Ln(c),K=this.children.get(k);return K?K.findOnPath_(Er(c),$n(u,k),y):null}}foreachOnPath(c,u){return this.foreachOnPath_(c,Qn(),u)}foreachOnPath_(c,u,y){if(Gn(c))return this;{this.value&&y(u,this.value);const D=Ln(c),k=this.children.get(D);return k?k.foreachOnPath_(Er(c),$n(u,D),y):new Rr(null)}}foreach(c){this.foreach_(Qn(),c)}foreach_(c,u){this.children.inorderTraversal((y,D)=>{D.foreach_($n(c,y),u)}),this.value&&u(c,this.value)}foreachChild(c){this.children.inorderTraversal((u,y)=>{y.value&&c(u,y.value)})}}class Ur{constructor(c){this.writeTree_=c}static empty(){return new Ur(new Rr(null))}}function $i(h,c,u){if(Gn(c))return new Ur(new Rr(u));{const y=h.writeTree_.findRootMostValueAndPath(c);if(null!=y){const D=y.path;let k=y.value;const K=Vr(D,c);return k=k.updateChild(K,u),new Ur(h.writeTree_.set(D,k))}{const D=new Rr(u),k=h.writeTree_.setTree(c,D);return new Ur(k)}}}function Co(h,c,u){let y=h;return hr(u,(D,k)=>{y=$i(y,$n(c,D),k)}),y}function Ns(h,c){if(Gn(c))return Ur.empty();{const u=h.writeTree_.setTree(c,new Rr(null));return new Ur(u)}}function bo(h,c){return null!=zs(h,c)}function zs(h,c){const u=h.writeTree_.findRootMostValueAndPath(c);return null!=u?h.writeTree_.get(u.path).getChild(Vr(u.path,c)):null}function Ss(h){const c=[],u=h.writeTree_.value;return null!=u?u.isLeafNode()||u.forEachChild(mi,(y,D)=>{c.push(new Tr(y,D))}):h.writeTree_.children.inorderTraversal((y,D)=>{null!=D.value&&c.push(new Tr(y,D.value))}),c}function Qs(h,c){if(Gn(c))return h;{const u=zs(h,c);return new Ur(null!=u?new Rr(u):h.writeTree_.subtree(c))}}function da(h){return h.writeTree_.isEmpty()}function Nr(h,c){return Ml(Qn(),h.writeTree_,c)}function Ml(h,c,u){if(null!=c.value)return u.updateChild(h,c.value);{let y=null;return c.children.inorderTraversal((D,k)=>{".priority"===D?((0,de.hu)(null!==k.value,"Priority writes must always be leaf nodes"),y=k.value):u=Ml($n(h,D),k,u)}),!u.getChild(h).isEmpty()&&null!==y&&(u=u.updateChild($n(h,".priority"),y)),u}}function ha(h,c){return Ko(c,h)}function Vo(h,c){if(h.snap)return ls(h.path,c);for(const u in h.children)if(h.children.hasOwnProperty(u)&&ls($n(h.path,u),c))return!0;return!1}function pc(h){return h.visible}function xl(h,c,u){let y=Ur.empty();for(let D=0;D<h.length;++D){const k=h[D];if(c(k)){const K=k.path;let le;if(k.snap)ls(u,K)?(le=Vr(u,K),y=$i(y,le,k.snap)):ls(K,u)&&(le=Vr(K,u),y=$i(y,Qn(),k.snap.getChild(le)));else{if(!k.children)throw(0,de.g5)("WriteRecord should have .snap or .children");if(ls(u,K))le=Vr(u,K),y=Co(y,le,k.children);else if(ls(K,u))if(le=Vr(K,u),Gn(le))y=Co(y,Qn(),k.children);else{const Re=(0,de.DV)(k.children,Ln(le));if(Re){const et=Re.getChild(Er(le));y=$i(y,Qn(),et)}}}}}return y}function Da(h,c,u,y,D){if(y||D){const k=Qs(h.visibleWrites,c);return!D&&da(k)?u:D||null!=u||bo(k,Qn())?Nr(xl(h.allWrites,function(et){return(et.visible||D)&&(!y||!~y.indexOf(et.writeId))&&(ls(et.path,c)||ls(c,et.path))},c),u||Or.EMPTY_NODE):null}{const k=zs(h.visibleWrites,c);if(null!=k)return k;{const K=Qs(h.visibleWrites,c);return da(K)?u:null!=u||bo(K,Qn())?Nr(K,u||Or.EMPTY_NODE):null}}}function Mr(h,c,u,y){return Da(h.writeTree,h.treePath,c,u,y)}function ll(h,c){return function ad(h,c,u){let y=Or.EMPTY_NODE;const D=zs(h.visibleWrites,c);if(D)return D.isLeafNode()||D.forEachChild(mi,(k,K)=>{y=y.updateImmediateChild(k,K)}),y;if(u){const k=Qs(h.visibleWrites,c);return u.forEachChild(mi,(K,le)=>{const Re=Nr(Qs(k,new Kn(K)),le);y=y.updateImmediateChild(K,Re)}),Ss(k).forEach(K=>{y=y.updateImmediateChild(K.name,K.node)}),y}return Ss(Qs(h.visibleWrites,c)).forEach(K=>{y=y.updateImmediateChild(K.name,K.node)}),y}(h.writeTree,h.treePath,c)}function ql(h,c,u,y){return function Du(h,c,u,y,D){(0,de.hu)(y||D,"Either existingEventSnap or existingServerSnap must exist");const k=$n(c,u);if(bo(h.visibleWrites,k))return null;{const K=Qs(h.visibleWrites,k);return da(K)?D.getChild(u):Nr(K,D.getChild(u))}}(h.writeTree,h.treePath,c,u,y)}function cl(h,c){return function Tu(h,c){return zs(h.visibleWrites,c)}(h.writeTree,$n(h.treePath,c))}function Rl(h,c,u){return function La(h,c,u,y){const D=$n(c,u),k=zs(h.visibleWrites,D);return null!=k?k:y.isCompleteForChild(u)?Nr(Qs(h.visibleWrites,D),y.getNode().getImmediateChild(u)):null}(h.writeTree,h.treePath,c,u)}function El(h,c){return Ko($n(h.treePath,c),h.writeTree)}function Ko(h,c){return{treePath:h,writeTree:c}}class mc{constructor(){this.changeMap=new Map}trackChildChange(c){const u=c.type,y=c.childName;(0,de.hu)("child_added"===u||"child_changed"===u||"child_removed"===u,"Only child changes supported for tracking"),(0,de.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");const D=this.changeMap.get(y);if(D){const k=D.type;if("child_added"===u&&"child_removed"===k)this.changeMap.set(y,j(y,c.snapshotNode,D.snapshotNode));else if("child_removed"===u&&"child_added"===k)this.changeMap.delete(y);else if("child_removed"===u&&"child_changed"===k)this.changeMap.set(y,C(y,D.oldSnap));else if("child_changed"===u&&"child_added"===k)this.changeMap.set(y,q(y,c.snapshotNode));else{if("child_changed"!==u||"child_changed"!==k)throw(0,de.g5)("Illegal combination of changes: "+c+" occurred after "+D);this.changeMap.set(y,j(y,c.snapshotNode,D.oldSnap))}}else this.changeMap.set(y,c)}getChanges(){return Array.from(this.changeMap.values())}}const Kl=new class Ol{getCompleteChild(c){return null}getChildAfterChild(c,u,y){return null}};class Yl{constructor(c,u,y=null){this.writes_=c,this.viewCache_=u,this.optCompleteServerCache_=y}getCompleteChild(c){const u=this.viewCache_.eventCache;if(u.isCompleteForChild(c))return u.getNode().getImmediateChild(c);{const y=null!=this.optCompleteServerCache_?new Yr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rl(this.writes_,c,y)}}getChildAfterChild(c,u,y){const D=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Pr(this.viewCache_),k=function gc(h,c,u,y,D,k){return function Ba(h,c,u,y,D,k,K){let le;const Re=Qs(h.visibleWrites,c),et=zs(Re,Qn());if(null!=et)le=et;else{if(null==u)return[];le=Nr(Re,u)}if(le=le.withIndex(K),le.isEmpty()||le.isLeafNode())return[];{const Ot=[],Gt=K.getCompare(),un=k?le.getReverseIteratorFrom(y,K):le.getIteratorFrom(y,K);let rr=un.getNext();for(;rr&&Ot.length<D;)0!==Gt(rr,y)&&Ot.push(rr),rr=un.getNext();return Ot}}(h.writeTree,h.treePath,c,u,y,D,k)}(this.writes_,D,u,1,y,c);return 0===k.length?null:k[0]}}function vc(h,c,u,y,D,k){const K=c.eventCache;if(null!=cl(y,u))return c;{let le,Re;if(Gn(u))if((0,de.hu)(c.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),c.serverCache.isFiltered()){const et=Pr(c),Gt=ll(y,et instanceof Or?et:Or.EMPTY_NODE);le=h.filter.updateFullNode(c.eventCache.getNode(),Gt,k)}else{const et=Mr(y,Pr(c));le=h.filter.updateFullNode(c.eventCache.getNode(),et,k)}else{const et=Ln(u);if(".priority"===et){(0,de.hu)(1===wi(u),"Can't have a priority with additional path components");const Ot=K.getNode();Re=c.serverCache.getNode();const Gt=ql(y,u,Ot,Re);le=null!=Gt?h.filter.updatePriority(Ot,Gt):K.getNode()}else{const Ot=Er(u);let Gt;if(K.isCompleteForChild(et)){Re=c.serverCache.getNode();const un=ql(y,u,K.getNode(),Re);Gt=null!=un?K.getNode().getImmediateChild(et).updateChild(Ot,un):K.getNode().getImmediateChild(et)}else Gt=Rl(y,et,c.serverCache);le=null!=Gt?h.filter.updateChild(K.getNode(),et,Gt,Ot,D,k):K.getNode()}}return $t(c,le,K.isFullyInitialized()||Gn(u),h.filter.filtersNodes())}}function Vi(h,c,u,y,D,k,K,le){const Re=c.serverCache;let et;const Ot=K?h.filter:h.filter.getIndexedFilter();if(Gn(u))et=Ot.updateFullNode(Re.getNode(),y,null);else if(Ot.filtersNodes()&&!Re.isFiltered()){const rr=Re.getNode().updateChild(u,y);et=Ot.updateFullNode(Re.getNode(),rr,null)}else{const rr=Ln(u);if(!Re.isCompleteForPath(u)&&wi(u)>1)return c;const mr=Er(u),po=Re.getNode().getImmediateChild(rr).updateChild(mr,y);et=".priority"===rr?Ot.updatePriority(Re.getNode(),po):Ot.updateChild(Re.getNode(),rr,po,mr,Kl,null)}const Gt=xn(c,et,Re.isFullyInitialized()||Gn(u),Ot.filtersNodes());return vc(h,Gt,u,D,new Yl(D,Gt,k),le)}function ul(h,c,u,y,D,k,K){const le=c.eventCache;let Re,et;const Ot=new Yl(D,c,k);if(Gn(u))et=h.filter.updateFullNode(c.eventCache.getNode(),y,K),Re=$t(c,et,!0,h.filter.filtersNodes());else{const Gt=Ln(u);if(".priority"===Gt)et=h.filter.updatePriority(c.eventCache.getNode(),y),Re=$t(c,et,le.isFullyInitialized(),le.isFiltered());else{const un=Er(u),rr=le.getNode().getImmediateChild(Gt);let mr;if(Gn(un))mr=y;else{const di=Ot.getCompleteChild(Gt);mr=null!=di?".priority"===_o(un)&&di.getChild(An(un)).isEmpty()?di:di.updateChild(un,y):Or.EMPTY_NODE}Re=rr.equals(mr)?c:$t(c,h.filter.updateChild(le.getNode(),Gt,mr,un,Ot,K),le.isFullyInitialized(),h.filter.filtersNodes())}}return Re}function hs(h,c){return h.eventCache.isCompleteForChild(c)}function Gs(h,c,u){return u.foreach((y,D)=>{c=c.updateChild(y,D)}),c}function is(h,c,u,y,D,k,K,le){if(c.serverCache.getNode().isEmpty()&&!c.serverCache.isFullyInitialized())return c;let et,Re=c;et=Gn(u)?y:new Rr(null).setTree(u,y);const Ot=c.serverCache.getNode();return et.children.inorderTraversal((Gt,un)=>{if(Ot.hasChild(Gt)){const mr=Gs(0,c.serverCache.getNode().getImmediateChild(Gt),un);Re=Vi(h,Re,new Kn(Gt),mr,D,k,K,le)}}),et.children.inorderTraversal((Gt,un)=>{const rr=!c.serverCache.isCompleteForChild(Gt)&&null===un.value;if(!Ot.hasChild(Gt)&&!rr){const di=Gs(0,c.serverCache.getNode().getImmediateChild(Gt),un);Re=Vi(h,Re,new Kn(Gt),di,D,k,K,le)}}),Re}class To{constructor(c,u){this.query_=c,this.eventRegistrations_=[];const y=this.query_._queryParams,D=new Nt(y.getIndex()),k=function pi(h){return h.loadsAllData()?new Nt(h.getIndex()):h.hasLimit()?new Wn(h):new jn(h)}(y);this.processor_=function yc(h){return{filter:h}}(k);const K=u.serverCache,le=u.eventCache,Re=D.updateFullNode(Or.EMPTY_NODE,K.getNode(),null),et=k.updateFullNode(Or.EMPTY_NODE,le.getNode(),null),Ot=new Yr(Re,K.isFullyInitialized(),D.filtersNodes()),Gt=new Yr(et,le.isFullyInitialized(),k.filtersNodes());this.viewCache_=tt(Gt,Ot),this.eventGenerator_=new A(this.query_)}get query(){return this.query_}}function Cl(h,c){const u=Pr(h.viewCache_);return u&&(h.query._queryParams.loadsAllData()||!Gn(c)&&!u.getImmediateChild(Ln(c)).isEmpty())?u.getChild(c):null}function Uo(h){return 0===h.eventRegistrations_.length}function R(h,c,u){const y=[];if(u){(0,de.hu)(null==c,"A cancel should cancel all event registrations.");const D=h.query._path;h.eventRegistrations_.forEach(k=>{const K=k.createCancelEvent(u,D);K&&y.push(K)})}if(c){let D=[];for(let k=0;k<h.eventRegistrations_.length;++k){const K=h.eventRegistrations_[k];if(K.matches(c)){if(c.hasAnyCallback()){D=D.concat(h.eventRegistrations_.slice(k+1));break}}else D.push(K)}h.eventRegistrations_=D}else h.eventRegistrations_=[];return y}function N(h,c,u,y){c.type===Oo.MERGE&&null!==c.source.queryId&&((0,de.hu)(Pr(h.viewCache_),"We should always have a full cache before handling merges"),(0,de.hu)(xr(h.viewCache_),"Missing event cache, even though we have a server cache"));const D=h.viewCache_,k=function gi(h,c,u,y,D){const k=new mc;let K,le;if(u.type===Oo.OVERWRITE){const et=u;et.source.fromUser?K=ul(h,c,et.path,et.snap,y,D,k):((0,de.hu)(et.source.fromServer,"Unknown source."),le=et.source.tagged||c.serverCache.isFiltered()&&!Gn(et.path),K=Vi(h,c,et.path,et.snap,y,D,le,k))}else if(u.type===Oo.MERGE){const et=u;et.source.fromUser?K=function Do(h,c,u,y,D,k,K){let le=c;return y.foreach((Re,et)=>{const Ot=$n(u,Re);hs(c,Ln(Ot))&&(le=ul(h,le,Ot,et,D,k,K))}),y.foreach((Re,et)=>{const Ot=$n(u,Re);hs(c,Ln(Ot))||(le=ul(h,le,Ot,et,D,k,K))}),le}(h,c,et.path,et.children,y,D,k):((0,de.hu)(et.source.fromServer,"Unknown source."),le=et.source.tagged||c.serverCache.isFiltered(),K=is(h,c,et.path,et.children,y,D,le,k))}else if(u.type===Oo.ACK_USER_WRITE){const et=u;K=et.revert?function Wc(h,c,u,y,D,k){let K;if(null!=cl(y,u))return c;{const le=new Yl(y,c,D),Re=c.eventCache.getNode();let et;if(Gn(u)||".priority"===Ln(u)){let Ot;if(c.serverCache.isFullyInitialized())Ot=Mr(y,Pr(c));else{const Gt=c.serverCache.getNode();(0,de.hu)(Gt instanceof Or,"serverChildren would be complete if leaf node"),Ot=ll(y,Gt)}et=h.filter.updateFullNode(Re,Ot,k)}else{const Ot=Ln(u);let Gt=Rl(y,Ot,c.serverCache);null==Gt&&c.serverCache.isCompleteForChild(Ot)&&(Gt=Re.getImmediateChild(Ot)),et=null!=Gt?h.filter.updateChild(Re,Ot,Gt,Er(u),le,k):c.eventCache.getNode().hasChild(Ot)?h.filter.updateChild(Re,Ot,Or.EMPTY_NODE,Er(u),le,k):Re,et.isEmpty()&&c.serverCache.isFullyInitialized()&&(K=Mr(y,Pr(c)),K.isLeafNode()&&(et=h.filter.updateFullNode(et,K,k)))}return K=c.serverCache.isFullyInitialized()||null!=cl(y,Qn()),$t(c,et,K,h.filter.filtersNodes())}}(h,c,et.path,y,D,k):function Zl(h,c,u,y,D,k,K){if(null!=cl(D,u))return c;const le=c.serverCache.isFiltered(),Re=c.serverCache;if(null!=y.value){if(Gn(u)&&Re.isFullyInitialized()||Re.isCompleteForPath(u))return Vi(h,c,u,Re.getNode().getChild(u),D,k,le,K);if(Gn(u)){let et=new Rr(null);return Re.getNode().forEachChild(ps,(Ot,Gt)=>{et=et.set(new Kn(Ot),Gt)}),is(h,c,u,et,D,k,le,K)}return c}{let et=new Rr(null);return y.foreach((Ot,Gt)=>{const un=$n(u,Ot);Re.isCompleteForPath(un)&&(et=et.set(Ot,Re.getNode().getChild(un)))}),is(h,c,u,et,D,k,le,K)}}(h,c,et.path,et.affectedTree,y,D,k)}else{if(u.type!==Oo.LISTEN_COMPLETE)throw(0,de.g5)("Unknown operation type: "+u.type);K=function _c(h,c,u,y,D){const k=c.serverCache;return vc(h,xn(c,k.getNode(),k.isFullyInitialized()||Gn(u),k.isFiltered()),u,y,Kl,D)}(h,c,u.path,y,k)}const Re=k.getChanges();return function wl(h,c,u){const y=c.eventCache;if(y.isFullyInitialized()){const D=y.getNode().isLeafNode()||y.getNode().isEmpty(),k=xr(h);(u.length>0||!h.eventCache.isFullyInitialized()||D&&!y.getNode().equals(k)||!y.getNode().getPriority().equals(k.getPriority()))&&u.push(E(xr(c)))}}(c,K,Re),{viewCache:K,changes:Re}}(h.processor_,D,c,u,y);return function dn(h,c){(0,de.hu)(c.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,de.hu)(c.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,k.viewCache),(0,de.hu)(k.viewCache.serverCache.isFullyInitialized()||!D.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=k.viewCache,U(h,k.changes,k.viewCache.eventCache.getNode(),null)}function U(h,c,u,y){return function G(h,c,u,y){const D=[],k=[];return c.forEach(K=>{"child_changed"===K.type&&h.index_.indexedValueChanged(K.oldSnap,K.snapshotNode)&&k.push(function ae(h,c){return{type:"child_moved",snapshotNode:c,childName:h}}(K.childName,K.snapshotNode))}),we(h,D,"child_removed",c,y,u),we(h,D,"child_added",c,y,u),we(h,D,"child_moved",k,y,u),we(h,D,"child_changed",c,y,u),we(h,D,"value",c,y,u),D}(h.eventGenerator_,c,u,y?[y]:h.eventRegistrations_)}let se,ss;class Ce{constructor(){this.views=new Map}}function yr(h,c,u,y){const D=c.source.queryId;if(null!==D){const k=h.views.get(D);return(0,de.hu)(null!=k,"SyncTree gave us an op for an invalid query."),N(k,c,u,y)}{let k=[];for(const K of h.views.values())k=k.concat(N(K,c,u,y));return k}}function cn(h,c,u,y,D){const K=h.views.get(c._queryIdentifier);if(!K){let le=Mr(u,D?y:null),Re=!1;le?Re=!0:y instanceof Or?(le=ll(u,y),Re=!1):(le=Or.EMPTY_NODE,Re=!1);const et=tt(new Yr(le,Re,!1),new Yr(y,D,!1));return new To(c,et)}return K}function kn(h){const c=[];for(const u of h.views.values())u.query._queryParams.loadsAllData()||c.push(u);return c}function Mt(h,c){let u=null;for(const y of h.views.values())u=u||Cl(y,c);return u}function rn(h,c){return c._queryParams.loadsAllData()?Yo(h):h.views.get(c._queryIdentifier)}function Ui(h,c){return null!=rn(h,c)}function gs(h){return null!=Yo(h)}function Yo(h){for(const c of h.views.values())if(c.query._queryParams.loadsAllData())return c;return null}let Gd=1;class Su{constructor(c){this.listenProvider_=c,this.syncPointTree_=new Rr(null),this.pendingWriteTree_=function Wl(){return{visibleWrites:Ur.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fa(h,c,u,y,D){return function uo(h,c,u,y,D){(0,de.hu)(y>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===D&&(D=!0),h.allWrites.push({path:c,snap:u,writeId:y,visible:D}),D&&(h.visibleWrites=$i(h.visibleWrites,c,u)),h.lastWriteId=y}(h.pendingWriteTree_,c,u,y,D),D?On(h,new lo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,u)):[]}function pa(h,c,u=!1){const y=function Xa(h,c){for(let u=0;u<h.allWrites.length;u++){const y=h.allWrites[u];if(y.writeId===c)return y}return null}(h.pendingWriteTree_,c);if(function Ja(h,c){const u=h.allWrites.findIndex(le=>le.writeId===c);(0,de.hu)(u>=0,"removeWrite called with nonexistent writeId.");const y=h.allWrites[u];h.allWrites.splice(u,1);let D=y.visible,k=!1,K=h.allWrites.length-1;for(;D&&K>=0;){const le=h.allWrites[K];le.visible&&(K>=u&&Vo(le,y.path)?D=!1:ls(y.path,le.path)&&(k=!0)),K--}return!!D&&(k?(function od(h){h.visibleWrites=xl(h.allWrites,pc,Qn()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(y.snap?h.visibleWrites=Ns(h.visibleWrites,y.path):hr(y.children,Re=>{h.visibleWrites=Ns(h.visibleWrites,$n(y.path,Re))}),!0))}(h.pendingWriteTree_,c)){let k=new Rr(null);return null!=y.snap?k=k.set(Qn(),!0):hr(y.children,K=>{k=k.set(new Kn(K),!0)}),On(h,new $o(y.path,k,u))}return[]}function Po(h,c,u){return On(h,new lo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,u))}function Ri(h,c,u,y,D=!1){const k=c._path,K=h.syncPointTree_.get(k);let le=[];if(K&&("default"===c._queryIdentifier||Ui(K,c))){const Re=function Si(h,c,u,y){const D=c._queryIdentifier,k=[];let K=[];const le=gs(h);if("default"===D)for(const[Re,et]of h.views.entries())K=K.concat(R(et,u,y)),Uo(et)&&(h.views.delete(Re),et.query._queryParams.loadsAllData()||k.push(et.query));else{const Re=h.views.get(D);Re&&(K=K.concat(R(Re,u,y)),Uo(Re)&&(h.views.delete(D),Re.query._queryParams.loadsAllData()||k.push(Re.query)))}return le&&!gs(h)&&k.push(new(function hn(){return(0,de.hu)(se,"Reference.ts has not been loaded"),se}())(c._repo,c._path)),{removed:k,events:K}}(K,c,u,y);(function Lt(h){return 0===h.views.size})(K)&&(h.syncPointTree_=h.syncPointTree_.remove(k));const et=Re.removed;if(le=Re.events,!D){const Ot=-1!==et.findIndex(un=>un._queryParams.loadsAllData()),Gt=h.syncPointTree_.findOnPath(k,(un,rr)=>gs(rr));if(Ot&&!Gt){const un=h.syncPointTree_.subtree(k);if(!un.isEmpty()){const rr=function Ec(h){return h.fold((c,u,y)=>{if(u&&gs(u))return[Yo(u)];{let D=[];return u&&(D=kn(u)),hr(y,(k,K)=>{D=D.concat(K)}),D}})}(un);for(let mr=0;mr<rr.length;++mr){const di=rr[mr],po=di.query,il=dl(h,di);h.listenProvider_.startListening(As(po),Mu(h,po),il.hashFn,il.onComplete)}}}!Gt&&et.length>0&&!y&&(Ot?h.listenProvider_.stopListening(As(c),null):et.forEach(un=>{const rr=h.queryToTagMap.get(Pl(un));h.listenProvider_.stopListening(As(un),rr)}))}!function xu(h,c){for(let u=0;u<c.length;++u){const y=c[u];if(!y._queryParams.loadsAllData()){const D=Pl(y),k=h.queryToTagMap.get(D);h.queryToTagMap.delete(D),h.tagToQueryMap.delete(k)}}}(h,et)}return le}function vr(h,c,u,y){const D=ud(h,y);if(null!=D){const k=Jl(D),K=k.path,le=k.queryId,Re=Vr(K,c);return dd(h,K,new lo(Qa(le),Re,u))}return[]}function ii(h,c,u,y=!1){const D=c._path;let k=null,K=!1;h.syncPointTree_.foreachOnPath(D,(un,rr)=>{const mr=Vr(un,D);k=k||Mt(rr,mr),K=K||gs(rr)});let Re,le=h.syncPointTree_.get(D);le?(K=K||gs(le),k=k||Mt(le,Qn())):(le=new Ce,h.syncPointTree_=h.syncPointTree_.set(D,le)),null!=k?Re=!0:(Re=!1,k=Or.EMPTY_NODE,h.syncPointTree_.subtree(D).foreachChild((rr,mr)=>{const di=Mt(mr,Qn());di&&(k=k.updateImmediateChild(rr,di))}));const et=Ui(le,c);if(!et&&!c._queryParams.loadsAllData()){const un=Pl(c);(0,de.hu)(!h.queryToTagMap.has(un),"View does not exist, but we have a tag");const rr=function tl(){return Gd++}();h.queryToTagMap.set(un,rr),h.tagToQueryMap.set(rr,un)}let Gt=function Hn(h,c,u,y,D,k){const K=cn(h,c,y,D,k);return h.views.has(c._queryIdentifier)||h.views.set(c._queryIdentifier,K),function T(h,c){h.eventRegistrations_.push(c)}(K,u),function x(h,c){const u=h.viewCache_.eventCache,y=[];return u.getNode().isLeafNode()||u.getNode().forEachChild(mi,(k,K)=>{y.push(q(k,K))}),u.isFullyInitialized()&&y.push(E(u.getNode())),U(h,y,u.getNode(),c)}(K,u)}(le,c,u,ha(h.pendingWriteTree_,D),k,Re);if(!et&&!K&&!y){const un=rn(le,c);Gt=Gt.concat(function Kc(h,c,u){const y=c._path,D=Mu(h,c),k=dl(h,u),K=h.listenProvider_.startListening(As(c),D,k.hashFn,k.onComplete),le=h.syncPointTree_.subtree(y);if(D)(0,de.hu)(!gs(le.value),"If we're adding a query, it shouldn't be shadowed");else{const Re=le.fold((et,Ot,Gt)=>{if(!Gn(et)&&Ot&&gs(Ot))return[Yo(Ot).query];{let un=[];return Ot&&(un=un.concat(kn(Ot).map(rr=>rr.query))),hr(Gt,(rr,mr)=>{un=un.concat(mr)}),un}});for(let et=0;et<Re.length;++et){const Ot=Re[et];h.listenProvider_.stopListening(As(Ot),Mu(h,Ot))}}return K}(h,c,un))}return Gt}function Au(h,c,u){const D=h.pendingWriteTree_,k=h.syncPointTree_.findOnPath(c,(K,le)=>{const et=Mt(le,Vr(K,c));if(et)return et});return Da(D,c,k,u,!0)}function On(h,c){return Xl(c,h.syncPointTree_,null,ha(h.pendingWriteTree_,Qn()))}function Xl(h,c,u,y){if(Gn(h.path))return cd(h,c,u,y);{const D=c.get(Qn());null==u&&null!=D&&(u=Mt(D,Qn()));let k=[];const K=Ln(h.path),le=h.operationForChild(K),Re=c.children.get(K);if(Re&&le){const et=u?u.getImmediateChild(K):null,Ot=El(y,K);k=k.concat(Xl(le,Re,et,Ot))}return D&&(k=k.concat(yr(D,h,y,u))),k}}function cd(h,c,u,y){const D=c.get(Qn());null==u&&null!=D&&(u=Mt(D,Qn()));let k=[];return c.children.inorderTraversal((K,le)=>{const Re=u?u.getImmediateChild(K):null,et=El(y,K),Ot=h.operationForChild(K);Ot&&(k=k.concat(cd(Ot,le,Re,et)))}),D&&(k=k.concat(yr(D,h,y,u))),k}function dl(h,c){const u=c.query,y=Mu(h,u);return{hashFn:()=>(function $a(h){return h.viewCache_.serverCache.getNode()}(c)||Or.EMPTY_NODE).hash(),onComplete:D=>{if("ok"===D)return y?function No(h,c,u){const y=ud(h,u);if(y){const D=Jl(y),k=D.path,K=D.queryId,le=Vr(k,c);return dd(h,k,new Ps(Qa(K),le))}return[]}(h,u._path,y):function el(h,c){return On(h,new Ps({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c))}(h,u._path);{const k=function or(h,c){let u="Unknown Error";"too_big"===h?u="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?u="Client doesn't have permission to access the desired data.":"unavailable"===h&&(u="The service is unavailable");const y=new Error(h+" at "+c._path.toString()+": "+u);return y.code=h.toUpperCase(),y}(D,u);return Ri(h,u,null,k)}}}}function Mu(h,c){const u=Pl(c);return h.queryToTagMap.get(u)}function Pl(h){return h._path.toString()+"$"+h._queryIdentifier}function ud(h,c){return h.tagToQueryMap.get(c)}function Jl(h){const c=h.indexOf("$");return(0,de.hu)(-1!==c&&c<h.length-1,"Bad queryKey."),{queryId:h.substr(c+1),path:new Kn(h.substr(0,c))}}function dd(h,c,u){const y=h.syncPointTree_.get(c);return(0,de.hu)(y,"Missing sync point for query tag that we're tracking"),yr(y,u,ha(h.pendingWriteTree_,c),null)}function As(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function zd(){return(0,de.hu)(ss,"Reference.ts has not been loaded"),ss}())(h._repo,h._path):h}class ga{constructor(c){this.node_=c}getImmediateChild(c){const u=this.node_.getImmediateChild(c);return new ga(u)}node(){return this.node_}}class xt{constructor(c,u){this.syncTree_=c,this.path_=u}getImmediateChild(c){const u=$n(this.path_,c);return new xt(this.syncTree_,u)}node(){return Au(this.syncTree_,this.path_)}}const wc=function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h},Zo=function(h,c,u){return h&&"object"==typeof h?((0,de.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?hd(h[".sv"],c,u):"object"==typeof h[".sv"]?jo(h[".sv"],c):void(0,de.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},hd=function(h,c,u){if("timestamp"===h)return u.timestamp;(0,de.hu)(!1,"Unexpected server value: "+h)},jo=function(h,c,u){h.hasOwnProperty("increment")||(0,de.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const y=h.increment;"number"!=typeof y&&(0,de.hu)(!1,"Unexpected increment value: "+y);const D=c.node();if((0,de.hu)(null!==D&&typeof D<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!D.isLeafNode())return y;const K=D.getValue();return"number"!=typeof K?y:K+y},hl=function(h,c,u,y){return Va(c,new xt(u,h),y)},ec=function(h,c,u){return Va(h,new ga(c),u)};function Va(h,c,u){const y=h.getPriority().val(),D=Zo(y,c.getImmediateChild(".priority"),u);let k;if(h.isLeafNode()){const K=h,le=Zo(K.getValue(),c,u);return le!==K.getValue()||D!==K.getPriority().val()?new ws(le,oe(D)):h}{const K=h;return k=K,D!==K.getPriority().val()&&(k=k.updatePriority(new ws(D))),K.forEachChild(mi,(le,Re)=>{const et=Va(Re,c.getImmediateChild(le),u);et!==Re&&(k=k.updateImmediateChild(le,et))}),k}}class Nl{constructor(c="",u=null,y={children:{},childCount:0}){this.name=c,this.parent=u,this.node=y}}function Ua(h,c){let u=c instanceof Kn?c:new Kn(c),y=h,D=Ln(u);for(;null!==D;){const k=(0,de.DV)(y.node.children,D)||{children:{},childCount:0};y=new Nl(D,y,k),u=Er(u),D=Ln(u)}return y}function ja(h){return h.node.value}function Cc(h,c){h.node.value=c,nl(h)}function Xs(h){return h.node.childCount>0}function Ha(h,c){hr(h.node.children,(u,y)=>{c(new Nl(u,h,y))})}function Yc(h,c,u,y){u&&!y&&c(h),Ha(h,D=>{Yc(D,c,!0,y)}),u&&y&&c(h)}function bl(h){return new Kn(null===h.parent?h.name:bl(h.parent)+"/"+h.name)}function nl(h){null!==h.parent&&function za(h,c,u){const y=function fl(h){return void 0===ja(h)&&!Xs(h)}(u),D=(0,de.r3)(h.node.children,c);y&&D?(delete h.node.children[c],h.node.childCount--,nl(h)):!y&&!D&&(h.node.children[c]=u.node,h.node.childCount++,nl(h))}(h.parent,h.name,h)}const Dl=/[\[\].#$\/\u0000-\u001F\u007F]/,tc=/[\[\].#$\u0000-\u001F\u007F]/,Tl=10485760,Zc=function(h){return"string"==typeof h&&0!==h.length&&!Dl.test(h)},Ls=function(h){return"string"==typeof h&&0!==h.length&&!tc.test(h)},Ta=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!Jn(h)||h&&"object"==typeof h&&(0,de.r3)(h,".sv")},Qo=function(h,c,u,y){y&&void 0===c||Qc((0,de.gK)(h,"value"),c,u)},Qc=function(h,c,u){const y=u instanceof Kn?new Ci(u,h):u;if(void 0===c)throw new Error(h+"contains undefined "+xi(y));if("function"==typeof c)throw new Error(h+"contains a function "+xi(y)+" with contents = "+c.toString());if(Jn(c))throw new Error(h+"contains "+c.toString()+" "+xi(y));if("string"==typeof c&&c.length>Tl/3&&(0,de.ug)(c)>Tl)throw new Error(h+"contains a string greater than "+Tl+" utf8 bytes "+xi(y)+" ('"+c.substring(0,50)+"...')");if(c&&"object"==typeof c){let D=!1,k=!1;if(hr(c,(K,le)=>{if(".value"===K)D=!0;else if(".priority"!==K&&".sv"!==K&&(k=!0,!Zc(K)))throw new Error(h+" contains an invalid key ("+K+") "+xi(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Es(h,c){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(c),h.byteLength_+=(0,de.ug)(c),ar(h)})(y,K),Qc(h,le,y),function Mo(h){const c=h.parts_.pop();h.byteLength_-=(0,de.ug)(c),h.parts_.length>0&&(h.byteLength_-=1)}(y)}),D&&k)throw new Error(h+' contains ".value" child '+xi(y)+" in addition to actual children.")}},Xc=function(h,c,u,y){if(y&&void 0===c)return;const D=(0,de.gK)(h,"values");if(!c||"object"!=typeof c||Array.isArray(c))throw new Error(D+" must be an object containing the children to replace.");const k=[];hr(c,(K,le)=>{const Re=new Kn(K);if(Qc(D,le,$n(u,Re)),".priority"===_o(Re)&&!Ta(le))throw new Error(D+"contains an invalid value for '"+Re.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");k.push(Re)}),function(h,c){let u,y;for(u=0;u<c.length;u++){y=c[u];const k=zr(y);for(let K=0;K<k.length;K++)if((".priority"!==k[K]||K!==k.length-1)&&!Zc(k[K]))throw new Error(h+"contains an invalid key ("+k[K]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}c.sort(Vs);let D=null;for(u=0;u<c.length;u++){if(y=c[u],null!==D&&ls(D,y))throw new Error(h+"contains a path "+D.toString()+" that is ancestor of another path "+y.toString());D=y}}(D,k)},Sl=function(h,c,u){if(!u||void 0!==c){if(Jn(c))throw new Error((0,de.gK)(h,"priority")+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ta(c))throw new Error((0,de.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pl=function(h,c,u,y){if(!(y&&void 0===u||Zc(u)))throw new Error((0,de.gK)(h,c)+'was an invalid key = "'+u+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},B=function(h,c,u,y){if(!(y&&void 0===u||Ls(u)))throw new Error((0,de.gK)(h,c)+'was an invalid path = "'+u+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},H=function(h,c,u,y){u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),B(h,c,u,y)},X=function(h,c){if(".info"===Ln(c))throw new Error(h+" failed = Can't modify data under /.info/")},ve=function(h,c){const u=c.path.toString();if("string"!=typeof c.repoInfo.host||0===c.repoInfo.host.length||!Zc(c.repoInfo.namespace)&&"localhost"!==c.repoInfo.host.split(":")[0]||0!==u.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Ls(h)}(u))throw new Error((0,de.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Qe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vt(h,c){let u=null;for(let y=0;y<c.length;y++){const D=c[y],k=D.getPath();null!==u&&!Ti(k,u.path)&&(h.eventLists_.push(u),u=null),null===u&&(u={events:[],path:k}),u.events.push(D)}u&&h.eventLists_.push(u)}function Vt(h,c,u){vt(h,u),Dn(h,y=>Ti(y,c))}function Yt(h,c,u){vt(h,u),Dn(h,y=>ls(y,c)||ls(c,y))}function Dn(h,c){h.recursionDepth_++;let u=!0;for(let y=0;y<h.eventLists_.length;y++){const D=h.eventLists_[y];D&&(c(D.path)?(nr(h.eventLists_[y]),h.eventLists_[y]=null):u=!1)}u&&(h.eventLists_=[]),h.recursionDepth_--}function nr(h){for(let c=0;c<h.events.length;c++){const u=h.events[c];if(null!==u){h.events[c]=null;const y=u.getEventRunner();tn&&dt("event: "+u.toString()),Ii(y)}}}const cr="repo_interrupt",tr=25;class si{constructor(c,u,y,D){this.repoInfo_=c,this.forceRestClient_=u,this.authTokenProvider_=y,this.appCheckProvider_=D,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Bo(),this.transactionQueueTree_=new Nl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ms(h){const u=h.infoData_.getNode(new Kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+u}function gr(h){return wc({timestamp:ms(h)})}function Js(h,c,u,y,D){h.dataUpdateCount++;const k=new Kn(c);u=h.interceptServerDataCallback_?h.interceptServerDataCallback_(c,u):u;let K=[];if(D)if(y){const Re=(0,de.UI)(u,et=>oe(et));K=function Ql(h,c,u,y){const D=ud(h,y);if(D){const k=Jl(D),K=k.path,le=k.queryId,Re=Vr(K,c),et=Rr.fromObject(u);return dd(h,K,new co(Qa(le),Re,et))}return[]}(h.serverSyncTree_,k,Re,D)}else{const Re=oe(u);K=vr(h.serverSyncTree_,k,Re,D)}else if(y){const Re=(0,de.UI)(u,et=>oe(et));K=function jr(h,c,u){const y=Rr.fromObject(u);return On(h,new co({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},c,y))}(h.serverSyncTree_,k,Re)}else{const Re=oe(u);K=Po(h.serverSyncTree_,k,Re)}let le=k;K.length>0&&(le=Xo(h,k)),Yt(h.eventQueue_,le,K)}function dr(h,c){Ws(h,"connected",c),!1===c&&function vo(h){Sa(h,"onDisconnectEvents");const c=gr(h),u=Bo();la(h.onDisconnect_,Qn(),(D,k)=>{const K=hl(D,k,h.serverSyncTree_,c);Ts(u,D,K)});let y=[];la(u,Qn(),(D,k)=>{y=y.concat(Po(h.serverSyncTree_,D,k));const K=Nu(h,D);Xo(h,K)}),h.onDisconnect_=Bo(),Yt(h.eventQueue_,Qn(),y)}(h)}function Ws(h,c,u){const y=new Kn("/.info/"+c),D=oe(u);h.infoData_.updateSnapshot(y,D);const k=Po(h.infoSyncTree_,y,D);Yt(h.eventQueue_,y,k)}function ks(h){return h.nextWriteId_++}function Jc(h,c,u,y,D){Sa(h,"set",{path:c.toString(),value:u,priority:y});const k=gr(h),K=oe(u,y),le=Au(h.serverSyncTree_,c),Re=ec(K,le,k),et=ks(h),Ot=fa(h.serverSyncTree_,c,Re,et,!0);vt(h.eventQueue_,Ot),h.server_.put(c.toString(),K.val(!0),(un,rr)=>{const mr="ok"===un;mr||vn("set at "+c+" failed: "+un);const di=pa(h.serverSyncTree_,et,!mr);Yt(h.eventQueue_,c,di),ya(0,D,un,rr)});const Gt=Nu(h,c);Xo(h,Gt),Yt(h.eventQueue_,Gt,[])}function Wd(h,c,u){h.server_.onDisconnectCancel(c.toString(),(y,D)=>{"ok"===y&&yo(h.onDisconnect_,c),ya(0,u,y,D)})}function Al(h,c,u,y){const D=oe(u);h.server_.onDisconnectPut(c.toString(),D.val(!0),(k,K)=>{"ok"===k&&Ts(h.onDisconnect_,c,D),ya(0,y,k,K)})}function gl(h,c,u){let y;y=".info"===Ln(c._path)?Ri(h.infoSyncTree_,c,u):Ri(h.serverSyncTree_,c,u),Vt(h.eventQueue_,c._path,y)}function Ou(h){h.persistentConnection_&&h.persistentConnection_.interrupt(cr)}function Sa(h,...c){let u="";h.persistentConnection_&&(u=h.persistentConnection_.id+":"),dt(u,...c)}function ya(h,c,u,y){c&&Ii(()=>{if("ok"===u)c(null);else{const D=(u||"error").toUpperCase();let k=D;y&&(k+=": "+y);const K=new Error(k);K.code=D,c(K)}})}function ml(h,c,u){return Au(h.serverSyncTree_,c,u)||Or.EMPTY_NODE}function Aa(h,c=h.transactionQueueTree_){if(c||Wa(h,c),ja(c)){const u=Dc(h,c);(0,de.hu)(u.length>0,"Sending zero length transaction queue"),u.every(D=>0===D.status)&&function tu(h,c,u){const y=u.map(et=>et.currentWriteId),D=ml(h,c,y);let k=D;const K=D.hash();for(let et=0;et<u.length;et++){const Ot=u[et];(0,de.hu)(0===Ot.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ot.status=1,Ot.retryCount++;const Gt=Vr(c,Ot.path);k=k.updateChild(Gt,Ot.currentOutputSnapshotRaw)}const le=k.val(!0),Re=c;h.server_.put(Re.toString(),le,et=>{Sa(h,"transaction put response",{path:Re.toString(),status:et});let Ot=[];if("ok"===et){const Gt=[];for(let un=0;un<u.length;un++)u[un].status=2,Ot=Ot.concat(pa(h.serverSyncTree_,u[un].currentWriteId)),u[un].onComplete&&Gt.push(()=>u[un].onComplete(null,!0,u[un].currentOutputSnapshotResolved)),u[un].unwatcher();Wa(h,Ua(h.transactionQueueTree_,c)),Aa(h,h.transactionQueueTree_),Yt(h.eventQueue_,c,Ot);for(let un=0;un<Gt.length;un++)Ii(Gt[un])}else{if("datastale"===et)for(let Gt=0;Gt<u.length;Gt++)u[Gt].status=3===u[Gt].status?4:0;else{vn("transaction at "+Re.toString()+" failed: "+et);for(let Gt=0;Gt<u.length;Gt++)u[Gt].status=4,u[Gt].abortReason=et}Xo(h,c)}},K)}(h,bl(c),u)}else Xs(c)&&Ha(c,u=>{Aa(h,u)})}function Xo(h,c){const u=Ga(h,c),y=bl(u);return function nu(h,c,u){if(0===c.length)return;const y=[];let D=[];const K=c.filter(le=>0===le.status).map(le=>le.currentWriteId);for(let le=0;le<c.length;le++){const Re=c[le],et=Vr(u,Re.path);let Gt,Ot=!1;if((0,de.hu)(null!==et,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Re.status)Ot=!0,Gt=Re.abortReason,D=D.concat(pa(h.serverSyncTree_,Re.currentWriteId,!0));else if(0===Re.status)if(Re.retryCount>=tr)Ot=!0,Gt="maxretry",D=D.concat(pa(h.serverSyncTree_,Re.currentWriteId,!0));else{const un=ml(h,Re.path,K);Re.currentInputSnapshot=un;const rr=c[le].update(un.val());if(void 0!==rr){Qc("transaction failed: Data returned ",rr,Re.path);let mr=oe(rr);"object"==typeof rr&&null!=rr&&(0,de.r3)(rr,".priority")||(mr=mr.updatePriority(un.getPriority()));const po=Re.currentWriteId,il=gr(h),Lc=ec(mr,un,il);Re.currentOutputSnapshotRaw=mr,Re.currentOutputSnapshotResolved=Lc,Re.currentWriteId=ks(h),K.splice(K.indexOf(po),1),D=D.concat(fa(h.serverSyncTree_,Re.path,Lc,Re.currentWriteId,Re.applyLocally)),D=D.concat(pa(h.serverSyncTree_,po,!0))}else Ot=!0,Gt="nodata",D=D.concat(pa(h.serverSyncTree_,Re.currentWriteId,!0))}Yt(h.eventQueue_,u,D),D=[],Ot&&(c[le].status=2,setTimeout(c[le].unwatcher,Math.floor(0)),c[le].onComplete&&y.push("nodata"===Gt?()=>c[le].onComplete(null,!1,c[le].currentInputSnapshot):()=>c[le].onComplete(new Error(Gt),!1,null)))}Wa(h,h.transactionQueueTree_);for(let le=0;le<y.length;le++)Ii(y[le]);Aa(h,h.transactionQueueTree_)}(h,Dc(h,u),y),y}function Ga(h,c){let u,y=h.transactionQueueTree_;for(u=Ln(c);null!==u&&void 0===ja(y);)y=Ua(y,u),u=Ln(c=Er(c));return y}function Dc(h,c){const u=[];return Pu(h,c,u),u.sort((y,D)=>y.order-D.order),u}function Pu(h,c,u){const y=ja(c);if(y)for(let D=0;D<y.length;D++)u.push(y[D]);Ha(c,D=>{Pu(h,D,u)})}function Wa(h,c){const u=ja(c);if(u){let y=0;for(let D=0;D<u.length;D++)2!==u[D].status&&(u[y]=u[D],y++);u.length=y,Cc(c,u.length>0?u:void 0)}Ha(c,y=>{Wa(h,y)})}function Nu(h,c){const u=bl(Ga(h,c)),y=Ua(h.transactionQueueTree_,c);return function ko(h,c,u){let y=u?h:h.parent;for(;null!==y;){if(c(y))return!0;y=y.parent}}(y,D=>{nc(h,D)}),nc(h,y),Yc(y,D=>{nc(h,D)}),u}function nc(h,c){const u=ja(c);if(u){const y=[];let D=[],k=-1;for(let K=0;K<u.length;K++)3===u[K].status||(1===u[K].status?((0,de.hu)(k===K-1,"All SENT items should be at beginning of queue."),k=K,u[K].status=3,u[K].abortReason="set"):((0,de.hu)(0===u[K].status,"Unexpected transaction status in abort"),u[K].unwatcher(),D=D.concat(pa(h.serverSyncTree_,u[K].currentWriteId,!0)),u[K].onComplete&&y.push(u[K].onComplete.bind(null,new Error("set"),!1,null))));-1===k?Cc(c,void 0):u.length=k+1,Yt(h.eventQueue_,bl(c),D);for(let K=0;K<y.length;K++)Ii(y[K])}}const Tc=function(h,c){const u=Fu(h),y=u.namespace;return"firebase.com"===u.domain&&En(u.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==u.domain&&En("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),u.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new yn(u.host,u.secure,y,"ws"===u.scheme||"wss"===u.scheme,c,"",y!==u.subdomain),path:new Kn(u.pathString)}},Fu=function(h){let c="",u="",y="",D="",k="",K=!0,le="https",Re=443;if("string"==typeof h){let et=h.indexOf("//");et>=0&&(le=h.substring(0,et-1),h=h.substring(et+2));let Ot=h.indexOf("/");-1===Ot&&(Ot=h.length);let Gt=h.indexOf("?");-1===Gt&&(Gt=h.length),c=h.substring(0,Math.min(Ot,Gt)),Ot<Gt&&(D=function pd(h){let c="";const u=h.split("/");for(let y=0;y<u.length;y++)if(u[y].length>0){let D=u[y];try{D=decodeURIComponent(D.replace(/\+/g," "))}catch{}c+="/"+D}return c}(h.substring(Ot,Gt)));const un=function ku(h){const c={};"?"===h.charAt(0)&&(h=h.substring(1));for(const u of h.split("&")){if(0===u.length)continue;const y=u.split("=");2===y.length?c[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):vn(`Invalid query segment '${u}' in query '${h}'`)}return c}(h.substring(Math.min(h.length,Gt)));et=c.indexOf(":"),et>=0?(K="https"===le||"wss"===le,Re=parseInt(c.substring(et+1),10)):et=c.length;const rr=c.slice(0,et);if("localhost"===rr.toLowerCase())u="localhost";else if(rr.split(".").length<=2)u=rr;else{const mr=c.indexOf(".");y=c.substring(0,mr).toLowerCase(),u=c.substring(mr+1),k=y}"ns"in un&&(k=un.ns)}return{host:c,port:Re,domain:u,subdomain:y,secure:K,scheme:le,pathString:D,namespace:k}},Kd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ru=function(){let h=0;const c=[];return function(u){const y=u===h;let D;h=u;const k=new Array(8);for(D=7;D>=0;D--)k[D]=Kd.charAt(u%64),u=Math.floor(u/64);(0,de.hu)(0===u,"Cannot push at time == 0");let K=k.join("");if(y){for(D=11;D>=0&&63===c[D];D--)c[D]=0;c[D]++}else for(D=0;D<12;D++)c[D]=Math.floor(64*Math.random());for(D=0;D<12;D++)K+=Kd.charAt(c[D]);return(0,de.hu)(20===K.length,"nextPushId: Length should be 20."),K}}();class iu{constructor(c,u,y,D){this.eventType=c,this.eventRegistration=u,this.snapshot=y,this.prevName=D}getPath(){const c=this.snapshot.ref;return"value"===this.eventType?c._path:c.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,de.Wl)(this.snapshot.exportVal())}}class gd{constructor(c,u,y){this.eventRegistration=c,this.error=u,this.path=y}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Yd{constructor(c,u){this.snapshotCallback=c,this.cancelCallback=u}onValue(c,u){this.snapshotCallback.call(null,c,u)}onCancel(c){return(0,de.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,c)}get hasCancelCallback(){return!!this.cancelCallback}matches(c){return this.snapshotCallback===c.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===c.snapshotCallback.userCallback&&this.snapshotCallback.context===c.snapshotCallback.context}}class So{constructor(c,u){this._repo=c,this._path=u}cancel(){const c=new de.BH;return Wd(this._repo,this._path,c.wrapCallback(()=>{})),c.promise}remove(){X("OnDisconnect.remove",this._path);const c=new de.BH;return Al(this._repo,this._path,null,c.wrapCallback(()=>{})),c.promise}set(c){X("OnDisconnect.set",this._path),Qo("OnDisconnect.set",c,this._path,!1);const u=new de.BH;return Al(this._repo,this._path,c,u.wrapCallback(()=>{})),u.promise}setWithPriority(c,u){X("OnDisconnect.setWithPriority",this._path),Qo("OnDisconnect.setWithPriority",c,this._path,!1),Sl("OnDisconnect.setWithPriority",u,!1);const y=new de.BH;return function eo(h,c,u,y,D){const k=oe(u,y);h.server_.onDisconnectPut(c.toString(),k.val(!0),(K,le)=>{"ok"===K&&Ts(h.onDisconnect_,c,k),ya(0,D,K,le)})}(this._repo,this._path,c,u,y.wrapCallback(()=>{})),y.promise}update(c){X("OnDisconnect.update",this._path),Xc("OnDisconnect.update",c,this._path,!1);const u=new de.BH;return function ho(h,c,u,y){if((0,de.xb)(u))return dt("onDisconnect().update() called with empty data.  Don't do anything."),void ya(0,y,"ok",void 0);h.server_.onDisconnectMerge(c.toString(),u,(D,k)=>{"ok"===D&&hr(u,(K,le)=>{const Re=oe(le);Ts(h.onDisconnect_,$n(c,K),Re)}),ya(0,y,D,k)})}(this._repo,this._path,c,u.wrapCallback(()=>{})),u.promise}}class Ho{constructor(c,u,y,D){this._repo=c,this._path=u,this._queryParams=y,this._orderByCalled=D}get key(){return Gn(this._path)?null:_o(this._path)}get ref(){return new Jo(this._repo,this._path)}get _queryIdentifier(){const c=aa(this._queryParams),u=Br(c);return"{}"===u?"default":u}get _queryObject(){return aa(this._queryParams)}isEqual(c){if(!((c=(0,de.m9)(c))instanceof Ho))return!1;const u=this._repo===c._repo,y=Ti(this._path,c._path);return u&&y&&this._queryIdentifier===c._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ki(h){let c="";for(let u=h.pieceNum_;u<h.pieces_.length;u++)""!==h.pieces_[u]&&(c+="/"+encodeURIComponent(String(h.pieces_[u])));return c||"/"}(this._path)}}function os(h,c){if(!0===h._orderByCalled)throw new Error(c+": You can't combine multiple orderBy calls.")}function va(h){let c=null,u=null;if(h.hasStart()&&(c=h.getIndexStartValue()),h.hasEnd()&&(u=h.getIndexEndValue()),h.getIndex()===ps){const y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",D="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Sn)throw new Error(y);if("string"!=typeof c)throw new Error(D)}if(h.hasEnd()){if(h.getIndexEndName()!==Pn)throw new Error(y);if("string"!=typeof u)throw new Error(D)}}else if(h.getIndex()===mi){if(null!=c&&!Ta(c)||null!=u&&!Ta(u))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,de.hu)(h.getIndex()instanceof Y||h.getIndex()===fn,"unknown index type."),null!=c&&"object"==typeof c||null!=u&&"object"==typeof u)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Lu(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Jo extends Ho{constructor(c,u){super(c,u,new fr,!1)}get parent(){const c=An(this._path);return null===c?null:new Jo(this._repo,c)}get root(){let c=this;for(;null!==c.parent;)c=c.parent;return c}}class _a{constructor(c,u,y){this._node=c,this.ref=u,this._index=y}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(c){const u=new Kn(c),y=Qr(this.ref,c);return new _a(this._node.getChild(u),y,mi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(c){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(y,D)=>c(new _a(D,Qr(this.ref,y),mi)))}hasChild(c){const u=new Kn(c);return!this._node.getChild(u).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zd(h,c){return(h=(0,de.m9)(h))._checkNotDeleted("ref"),void 0!==c?Qr(h._root,c):h._root}function Qd(h,c){(h=(0,de.m9)(h))._checkNotDeleted("refFromURL");const u=Tc(c,h._repo.repoInfo_.nodeAdmin);ve("refFromURL",u);const y=u.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&y.host!==h._repo.repoInfo_.host&&En("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+h._repo.repoInfo_.host+")"),Zd(h,u.path.toString())}function Qr(h,c){return null===Ln((h=(0,de.m9)(h))._path)?H("child","path",c,!1):B("child","path",c,!1),new Jo(h._repo,$n(h._path,c))}function su(h,c){h=(0,de.m9)(h),X("set",h._path),Qo("set",c,h._path,!1);const u=new de.BH;return Jc(h._repo,h._path,c,null,u.wrapCallback(()=>{})),u.promise}function Tf(h,c){Xc("update",c,h._path,!1);const u=new de.BH;return function bc(h,c,u,y){Sa(h,"update",{path:c.toString(),value:u});let D=!0;const k=gr(h),K={};if(hr(u,(le,Re)=>{D=!1,K[le]=hl($n(c,le),oe(Re),h.serverSyncTree_,k)}),D)dt("update() called with empty data.  Don't do anything."),ya(0,y,"ok",void 0);else{const le=ks(h),Re=function ld(h,c,u,y){!function Gc(h,c,u,y){(0,de.hu)(y>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:c,children:u,writeId:y,visible:!0}),h.visibleWrites=Co(h.visibleWrites,c,u),h.lastWriteId=y}(h.pendingWriteTree_,c,u,y);const D=Rr.fromObject(u);return On(h,new co({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},c,D))}(h.serverSyncTree_,c,K,le);vt(h.eventQueue_,Re),h.server_.merge(c.toString(),u,(et,Ot)=>{const Gt="ok"===et;Gt||vn("update at "+c+" failed: "+et);const un=pa(h.serverSyncTree_,le,!Gt),rr=un.length>0?Xo(h,c):c;Yt(h.eventQueue_,rr,un),ya(0,y,et,Ot)}),hr(u,et=>{const Ot=Nu(h,$n(c,et));Xo(h,Ot)}),Yt(h.eventQueue_,c,[])}}(h._repo,h._path,c,u.wrapCallback(()=>{})),u.promise}function $u(h){h=(0,de.m9)(h);const c=new Yd(()=>{}),u=new ic(c);return function ma(h,c,u){const y=function Li(h,c){const u=c._path;let y=null;h.syncPointTree_.foreachOnPath(u,(et,Ot)=>{const Gt=Vr(et,u);y=y||Mt(Ot,Gt)});let D=h.syncPointTree_.get(u);D?y=y||Mt(D,Qn()):(D=new Ce,h.syncPointTree_=h.syncPointTree_.set(u,D));const k=null!=y,K=k?new Yr(y,!0,!1):null;return function Ic(h){return xr(h.viewCache_)}(cn(D,c,ha(h.pendingWriteTree_,c._path),k?K.getNode():Or.EMPTY_NODE,k))}(h.serverSyncTree_,c);return null!=y?Promise.resolve(y):h.server_.get(c).then(D=>{const k=oe(D).withIndex(c._queryParams.getIndex());let K;if(ii(h.serverSyncTree_,c,u,!0),c._queryParams.loadsAllData())K=Po(h.serverSyncTree_,c._path,k);else{const le=Mu(h.serverSyncTree_,c);K=vr(h.serverSyncTree_,c._path,k,le)}return Yt(h.eventQueue_,c._path,K),Ri(h.serverSyncTree_,c,u,null,!0),k},D=>(Sa(h,"get for query "+(0,de.Wl)(c)+" failed: "+D),Promise.reject(new Error(D))))}(h._repo,h,u).then(y=>new _a(y,new Jo(h._repo,h._path),h._queryParams.getIndex()))}class ic{constructor(c){this.callbackContext=c}respondsTo(c){return"value"===c}createEvent(c,u){const y=u._queryParams.getIndex();return new iu("value",this,new _a(c.snapshotNode,new Jo(u._repo,u._path),y))}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,null)}createCancelEvent(c,u){return this.callbackContext.hasCancelCallback?new gd(this,c,u):null}matches(c){return c instanceof ic&&(!c.callbackContext||!this.callbackContext||c.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class md{constructor(c,u){this.eventType=c,this.callbackContext=u}respondsTo(c){let u="children_added"===c?"child_added":c;return u="children_removed"===u?"child_removed":u,this.eventType===u}createCancelEvent(c,u){return this.callbackContext.hasCancelCallback?new gd(this,c,u):null}createEvent(c,u){(0,de.hu)(null!=c.childName,"Child events should have a childName.");const y=Qr(new Jo(u._repo,u._path),c.childName),D=u._queryParams.getIndex();return new iu(c.type,this,new _a(c.snapshotNode,y,D),c.prevName)}getEventRunner(c){return"cancel"===c.getEventType()?()=>this.callbackContext.onCancel(c.error):()=>this.callbackContext.onValue(c.snapshot,c.prevName)}matches(c){return c instanceof md&&this.eventType===c.eventType&&(!this.callbackContext||!c.callbackContext||this.callbackContext.matches(c.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function yd(h,c,u,y,D){let k;if("object"==typeof y&&(k=void 0,D=y),"function"==typeof y&&(k=y),D&&D.onlyOnce){const Re=u,et=(Ot,Gt)=>{gl(h._repo,h,le),Re(Ot,Gt)};et.userCallback=u.userCallback,et.context=u.context,u=et}const K=new Yd(u,k||void 0),le="value"===c?new ic(K):new md(c,K);return function eu(h,c,u){let y;y=".info"===Ln(c._path)?ii(h.infoSyncTree_,c,u):ii(h.serverSyncTree_,c,u),Vt(h.eventQueue_,c._path,y)}(h._repo,h,le),()=>gl(h._repo,h,le)}function Lh(h,c,u,y){return yd(h,"value",c,u,y)}function Bh(h,c,u,y){return yd(h,"child_added",c,u,y)}function Sf(h,c,u,y){return yd(h,"child_changed",c,u,y)}function vd(h,c,u,y){return yd(h,"child_moved",c,u,y)}function Sc(h,c,u,y){return yd(h,"child_removed",c,u,y)}function Ac(h,c,u){let y=null;const D=u?new Yd(u):null;"value"===c?y=new ic(D):c&&(y=new md(c,D)),gl(h._repo,h,y)}class qa{}class Vu extends qa{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){Qo("endAt",this._value,c._path,!0);const u=oo(c._queryParams,this._value,this._key);if(Lu(u),va(u),c._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ho(c._repo,c._path,u,c._orderByCalled)}}class to extends qa{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){Qo("endBefore",this._value,c._path,!1);const u=function oa(h,c,u){let y;return y=oo(h,c,h.index_===ps||u?u:Sn),y.endBeforeSet_=!0,y}(c._queryParams,this._value,this._key);if(Lu(u),va(u),c._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ho(c._repo,c._path,u,c._orderByCalled)}}class Mc extends qa{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){Qo("startAt",this._value,c._path,!0);const u=Ds(c._queryParams,this._value,this._key);if(Lu(u),va(u),c._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ho(c._repo,c._path,u,c._orderByCalled)}}class xc extends qa{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){Qo("startAfter",this._value,c._path,!1);const u=function Lo(h,c,u){let y;return y=Ds(h,c,h.index_===ps||u?u:Pn),y.startAfterSet_=!0,y}(c._queryParams,this._value,this._key);if(Lu(u),va(u),c._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ho(c._repo,c._path,u,c._orderByCalled)}}class Jd extends qa{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ho(c._repo,c._path,function Gr(h,c){const u=h.copy();return u.limitSet_=!0,u.limit_=c,u.viewFrom_="l",u}(c._queryParams,this._limit),c._orderByCalled)}}class Fl extends qa{constructor(c){super(),this._limit=c}_apply(c){if(c._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ho(c._repo,c._path,function bs(h,c){const u=h.copy();return u.limitSet_=!0,u.limit_=c,u.viewFrom_="r",u}(c._queryParams,this._limit),c._orderByCalled)}}class au extends qa{constructor(c){super(),this._path=c}_apply(c){os(c,"orderByChild");const u=new Kn(this._path);if(Gn(u))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const y=new Y(u),D=Na(c._queryParams,y);return va(D),new Ho(c._repo,c._path,D,!0)}}class Rc extends qa{_apply(c){os(c,"orderByKey");const u=Na(c._queryParams,ps);return va(u),new Ho(c._repo,c._path,u,!0)}}class zo extends qa{_apply(c){os(c,"orderByPriority");const u=Na(c._queryParams,mi);return va(u),new Ho(c._repo,c._path,u,!0)}}class Hu extends qa{_apply(c){os(c,"orderByValue");const u=Na(c._queryParams,fn);return va(u),new Ho(c._repo,c._path,u,!0)}}class Ll extends qa{constructor(c,u){super(),this._value=c,this._key=u}_apply(c){if(Qo("equalTo",this._value,c._path,!1),c._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(c._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Vu(this._value,this._key)._apply(new Mc(this._value,this._key)._apply(c))}}function Ia(h,...c){let u=(0,de.m9)(h);for(const y of c)u=y._apply(u);return u}(function Be(h){(0,de.hu)(!se,"__referenceConstructor has already been defined"),se=h})(Jo),function qc(h){(0,de.hu)(!ss,"__referenceConstructor has already been defined"),ss=h}(Jo);const Bl={};function Ea(h,c,u,y,D){let k=y||h.options.databaseURL;void 0===k&&(h.options.projectId||En("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dt("Using default host for project ",h.options.projectId),k=`${h.options.projectId}-default-rtdb.firebaseio.com`);let Re,et,K=Tc(k,D),le=K.repoInfo;typeof process<"u"&&process.env&&(et=process.env.FIREBASE_DATABASE_EMULATOR_HOST),et?(Re=!0,k=`http://${et}?ns=${le.namespace}`,K=Tc(k,D),le=K.repoInfo):Re=!K.repoInfo.secure;const Ot=D&&Re?new In(In.OWNER):new sn(h.name,h.options,c);ve("Invalid Firebase Database URL",K),Gn(K.path)||En("Database URL must point to the root of a Firebase Database (not including a child path).");const Gt=function P(h,c,u,y){let D=Bl[c.name];D||(D={},Bl[c.name]=D);let k=D[h.toURLString()];return k&&En("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),k=new si(h,false,u,y),D[h.toURLString()]=k,k}(le,h,Ot,new Pt(h.name,u));return new m(Gt,h)}class m{constructor(c,u){this._repoInternal=c,this.app=u,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ki(h,c,u){if(h.stats_=Fs(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new Zs(h.repoInfo_,(y,D,k,K)=>{Js(h,y,D,k,K)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>dr(h,!0),0);else{if(typeof u<"u"&&null!==u){if("object"!=typeof u)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,de.Wl)(u)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}h.persistentConnection_=new Ms(h.repoInfo_,c,(y,D,k,K)=>{Js(h,y,D,k,K)},y=>{dr(h,y)},y=>{!function yi(h,c){hr(c,(u,y)=>{Ws(h,u,y)})}(h,y)},h.authTokenProvider_,h.appCheckProvider_,u),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(y=>{h.server_.refreshAuthToken(y)}),h.appCheckProvider_.addTokenChangeListener(y=>{h.server_.refreshAppCheckToken(y.token)}),h.statsReporter_=function Bi(h,c){const u=h.toString();return Is[u]||(Is[u]=c()),Is[u]}(h.repoInfo_,()=>new Fa(h.stats_,h.server_)),h.infoData_=new Il,h.infoSyncTree_=new Su({startListening:(y,D,k,K)=>{let le=[];const Re=h.infoData_.getNode(y._path);return Re.isEmpty()||(le=Po(h.infoSyncTree_,y._path,Re),setTimeout(()=>{K("ok")},0)),le},stopListening:()=>{}}),Ws(h,"connected",!1),h.serverSyncTree_=new Su({startListening:(y,D,k,K)=>(h.server_.listen(y,k,D,(le,Re)=>{const et=K(le,Re);Yt(h.eventQueue_,y._path,et)}),[]),stopListening:(y,D)=>{h.server_.unlisten(y,D)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jo(this._repo,Qn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function th(h,c){const u=Bl[c];(!u||u[h.key]!==h)&&En(`Database ${c}(${h.repoInfo_}) has already been deleted.`),Ou(h),delete u[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(c){null===this._rootInternal&&En("Cannot call "+c+" on a deleted database.")}}function b(){as.IS_TRANSPORT_INITIALIZED&&vn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function W(){b(),Ei.forceDisallow()}function ee(){b(),Dr.forceDisallow(),Ei.forceAllow()}function ir(h,c){Rt(h,c)}const _r={".sv":"timestamp"};class fo{constructor(c,u){this.committed=c,this.snapshot=u}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ms.prototype.simpleListen=function(h,c){this.sendRequest("q",{p:h},c)},Ms.prototype.echo=function(h,c){this.sendRequest("echo",{d:h},c)},function Yn(h){$e(mn.SDK_VERSION),(0,mn._registerComponent)(new en.wA("database",(c,{instanceIdentifier:u})=>Ea(c.getProvider("app").getImmediate(),c.getProvider("auth-internal"),c.getProvider("app-check-internal"),u),"PUBLIC").setMultipleInstances(!0)),(0,mn.registerVersion)(_t,"0.14.4",h),(0,mn.registerVersion)(_t,"0.14.4","esm2017")}();const nh=new gn.Yd("@firebase/database-compat"),Vl=function(h){nh.warn("FIREBASE WARNING: "+h)};class Nc{constructor(c){this._delegate=c}cancel(c){(0,de.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,de.Wj)("OnDisconnect.cancel","onComplete",c,!0);const u=this._delegate.cancel();return c&&u.then(()=>c(null),y=>c(y)),u}remove(c){(0,de.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,de.Wj)("OnDisconnect.remove","onComplete",c,!0);const u=this._delegate.remove();return c&&u.then(()=>c(null),y=>c(y)),u}set(c,u){(0,de.Dv)("OnDisconnect.set",1,2,arguments.length),(0,de.Wj)("OnDisconnect.set","onComplete",u,!0);const y=this._delegate.set(c);return u&&y.then(()=>u(null),D=>u(D)),y}setWithPriority(c,u,y){(0,de.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,de.Wj)("OnDisconnect.setWithPriority","onComplete",y,!0);const D=this._delegate.setWithPriority(c,u);return y&&D.then(()=>y(null),k=>y(k)),D}update(c,u){if((0,de.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(c)){const D={};for(let k=0;k<c.length;++k)D[""+k]=c[k];c=D,Vl("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,de.Wj)("OnDisconnect.update","onComplete",u,!0);const y=this._delegate.update(c);return u&&y.then(()=>u(null),D=>u(D)),y}}class Uh{constructor(c,u){this.committed=c,this.snapshot=u}toJSON(){return(0,de.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ul{constructor(c,u){this._database=c,this._delegate=u}val(){return(0,de.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,de.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,de.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,de.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(c){return(0,de.Dv)("DataSnapshot.child",0,1,arguments.length),c=String(c),B("DataSnapshot.child","path",c,!1),new Ul(this._database,this._delegate.child(c))}hasChild(c){return(0,de.Dv)("DataSnapshot.hasChild",1,1,arguments.length),B("DataSnapshot.hasChild","path",c,!1),this._delegate.hasChild(c)}getPriority(){return(0,de.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(c){return(0,de.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,de.Wj)("DataSnapshot.forEach","action",c,!1),this._delegate.forEach(u=>c(new Ul(this._database,u)))}hasChildren(){return(0,de.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,de.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,de.Dv)("DataSnapshot.ref",0,0,arguments.length),new ta(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ui{constructor(c,u){this.database=c,this._delegate=u}on(c,u,y,D){var k;(0,de.Dv)("Query.on",2,4,arguments.length),(0,de.Wj)("Query.on","callback",u,!1);const K=ui.getCancelAndContextArgs_("Query.on",y,D),le=(et,Ot)=>{u.call(K.context,new Ul(this.database,et),Ot)};le.userCallback=u,le.context=K.context;const Re=null===(k=K.cancel)||void 0===k?void 0:k.bind(K.context);switch(c){case"value":return Lh(this._delegate,le,Re),u;case"child_added":return Bh(this._delegate,le,Re),u;case"child_removed":return Sc(this._delegate,le,Re),u;case"child_changed":return Sf(this._delegate,le,Re),u;case"child_moved":return vd(this._delegate,le,Re),u;default:throw new Error((0,de.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(c,u,y){if((0,de.Dv)("Query.off",0,3,arguments.length),function(h,c,u){if(void 0!==c)switch(c){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,de.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,c),(0,de.Wj)("Query.off","callback",u,!0),(0,de.lb)("Query.off","context",y,!0),u){const D=()=>{};D.userCallback=u,D.context=y,Ac(this._delegate,c,D)}else Ac(this._delegate,c)}get(){return $u(this._delegate).then(c=>new Ul(this.database,c))}once(c,u,y,D){(0,de.Dv)("Query.once",1,4,arguments.length),(0,de.Wj)("Query.once","callback",u,!0);const k=ui.getCancelAndContextArgs_("Query.once",y,D),K=new de.BH,le=(et,Ot)=>{const Gt=new Ul(this.database,et);u&&u.call(k.context,Gt,Ot),K.resolve(Gt)};le.userCallback=u,le.context=k.context;const Re=et=>{k.cancel&&k.cancel.call(k.context,et),K.reject(et)};switch(c){case"value":Lh(this._delegate,le,Re,{onlyOnce:!0});break;case"child_added":Bh(this._delegate,le,Re,{onlyOnce:!0});break;case"child_removed":Sc(this._delegate,le,Re,{onlyOnce:!0});break;case"child_changed":Sf(this._delegate,le,Re,{onlyOnce:!0});break;case"child_moved":vd(this._delegate,le,Re,{onlyOnce:!0});break;default:throw new Error((0,de.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return K.promise}limitToFirst(c){return(0,de.Dv)("Query.limitToFirst",1,1,arguments.length),new ui(this.database,Ia(this._delegate,function ou(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Jd(h)}(c)))}limitToLast(c){return(0,de.Dv)("Query.limitToLast",1,1,arguments.length),new ui(this.database,Ia(this._delegate,function ju(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Fl(h)}(c)))}orderByChild(c){return(0,de.Dv)("Query.orderByChild",1,1,arguments.length),new ui(this.database,Ia(this._delegate,function eh(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return B("orderByChild","path",h,!1),new au(h)}(c)))}orderByKey(){return(0,de.Dv)("Query.orderByKey",0,0,arguments.length),new ui(this.database,Ia(this._delegate,function ea(){return new Rc}()))}orderByPriority(){return(0,de.Dv)("Query.orderByPriority",0,0,arguments.length),new ui(this.database,Ia(this._delegate,function lu(){return new zo}()))}orderByValue(){return(0,de.Dv)("Query.orderByValue",0,0,arguments.length),new ui(this.database,Ia(this._delegate,function qs(){return new Hu}()))}startAt(c=null,u){return(0,de.Dv)("Query.startAt",0,2,arguments.length),new ui(this.database,Ia(this._delegate,function Uu(h=null,c){return pl("startAt","key",c,!0),new Mc(h,c)}(c,u)))}startAfter(c=null,u){return(0,de.Dv)("Query.startAfter",0,2,arguments.length),new ui(this.database,Ia(this._delegate,function rl(h,c){return pl("startAfter","key",c,!0),new xc(h,c)}(c,u)))}endAt(c=null,u){return(0,de.Dv)("Query.endAt",0,2,arguments.length),new ui(this.database,Ia(this._delegate,function sc(h,c){return pl("endAt","key",c,!0),new Vu(h,c)}(c,u)))}endBefore(c=null,u){return(0,de.Dv)("Query.endBefore",0,2,arguments.length),new ui(this.database,Ia(this._delegate,function kl(h,c){return pl("endBefore","key",c,!0),new to(h,c)}(c,u)))}equalTo(c,u){return(0,de.Dv)("Query.equalTo",1,2,arguments.length),new ui(this.database,Ia(this._delegate,function Oc(h,c){return pl("equalTo","key",c,!0),new Ll(h,c)}(c,u)))}toString(){return(0,de.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,de.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(c){if((0,de.Dv)("Query.isEqual",1,1,arguments.length),!(c instanceof ui))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(c._delegate)}static getCancelAndContextArgs_(c,u,y){const D={cancel:void 0,context:void 0};if(u&&y)D.cancel=u,(0,de.Wj)(c,"cancel",D.cancel,!0),D.context=y,(0,de.lb)(c,"context",D.context,!0);else if(u)if("object"==typeof u&&null!==u)D.context=u;else{if("function"!=typeof u)throw new Error((0,de.gK)(c,"cancelOrContext")+" must either be a cancel callback or a context object.");D.cancel=u}return D}get ref(){return new ta(this.database,new Jo(this._delegate._repo,this._delegate._path))}}class ta extends ui{constructor(c,u){super(c,new Ho(u._repo,u._path,new fr,!1)),this.database=c,this._delegate=u}getKey(){return(0,de.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(c){return(0,de.Dv)("Reference.child",1,1,arguments.length),"number"==typeof c&&(c=String(c)),new ta(this.database,Qr(this._delegate,c))}getParent(){(0,de.Dv)("Reference.parent",0,0,arguments.length);const c=this._delegate.parent;return c?new ta(this.database,c):null}getRoot(){return(0,de.Dv)("Reference.root",0,0,arguments.length),new ta(this.database,this._delegate.root)}set(c,u){(0,de.Dv)("Reference.set",1,2,arguments.length),(0,de.Wj)("Reference.set","onComplete",u,!0);const y=su(this._delegate,c);return u&&y.then(()=>u(null),D=>u(D)),y}update(c,u){if((0,de.Dv)("Reference.update",1,2,arguments.length),Array.isArray(c)){const D={};for(let k=0;k<c.length;++k)D[""+k]=c[k];c=D,Vl("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}X("Reference.update",this._delegate._path),(0,de.Wj)("Reference.update","onComplete",u,!0);const y=Tf(this._delegate,c);return u&&y.then(()=>u(null),D=>u(D)),y}setWithPriority(c,u,y){(0,de.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,de.Wj)("Reference.setWithPriority","onComplete",y,!0);const D=function Bu(h,c,u){if(X("setWithPriority",h._path),Qo("setWithPriority",c,h._path,!1),Sl("setWithPriority",u,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const y=new de.BH;return Jc(h._repo,h._path,c,u,y.wrapCallback(()=>{})),y.promise}(this._delegate,c,u);return y&&D.then(()=>y(null),k=>y(k)),D}remove(c){(0,de.Dv)("Reference.remove",0,1,arguments.length),(0,de.Wj)("Reference.remove","onComplete",c,!0);const u=function Xd(h){return X("remove",h._path),su(h,null)}(this._delegate);return c&&u.then(()=>c(null),y=>c(y)),u}transaction(c,u,y){(0,de.Dv)("Reference.transaction",1,3,arguments.length),(0,de.Wj)("Reference.transaction","transactionUpdate",c,!1),(0,de.Wj)("Reference.transaction","onComplete",u,!0),function(h,c,u,y){if(void 0!==u&&"boolean"!=typeof u)throw new Error((0,de.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,y);const D=function Fo(h,c,u){var y;if(h=(0,de.m9)(h),X("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const D=null===(y=u?.applyLocally)||void 0===y||y,k=new de.BH,le=Lh(h,()=>{});return function qd(h,c,u,y,D,k){Sa(h,"transaction on "+c);const K={path:c,update:u,onComplete:y,status:null,order:st(),applyLocally:k,retryCount:0,unwatcher:D,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},le=ml(h,c,void 0);K.currentInputSnapshot=le;const Re=K.update(le.val());if(void 0===Re)K.unwatcher(),K.currentOutputSnapshotRaw=null,K.currentOutputSnapshotResolved=null,K.onComplete&&K.onComplete(null,!1,K.currentInputSnapshot);else{Qc("transaction failed: Data returned ",Re,K.path),K.status=0;const et=Ua(h.transactionQueueTree_,c),Ot=ja(et)||[];let Gt;Ot.push(K),Cc(et,Ot),"object"==typeof Re&&null!==Re&&(0,de.r3)(Re,".priority")?(Gt=(0,de.DV)(Re,".priority"),(0,de.hu)(Ta(Gt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Gt=(Au(h.serverSyncTree_,c)||Or.EMPTY_NODE).getPriority().val();const un=gr(h),rr=oe(Re,Gt),mr=ec(rr,le,un);K.currentOutputSnapshotRaw=rr,K.currentOutputSnapshotResolved=mr,K.currentWriteId=ks(h);const di=fa(h.serverSyncTree_,c,mr,K.currentWriteId,K.applyLocally);Yt(h.eventQueue_,c,di),Aa(h,h.transactionQueueTree_)}}(h._repo,h._path,c,(Re,et,Ot)=>{let Gt=null;Re?k.reject(Re):(Gt=new _a(Ot,new Jo(h._repo,h._path),mi),k.resolve(new fo(et,Gt)))},le,D),k.promise}(this._delegate,c,{applyLocally:y}).then(k=>new Uh(k.committed,new Ul(this.database,k.snapshot)));return u&&D.then(k=>u(null,k.committed,k.snapshot),k=>u(k,!1,null)),D}setPriority(c,u){(0,de.Dv)("Reference.setPriority",1,2,arguments.length),(0,de.Wj)("Reference.setPriority","onComplete",u,!0);const y=function Fh(h,c){h=(0,de.m9)(h),X("setPriority",h._path),Sl("setPriority",c,!1);const u=new de.BH;return Jc(h._repo,$n(h._path,".priority"),c,null,u.wrapCallback(()=>{})),u.promise}(this._delegate,c);return u&&y.then(()=>u(null),D=>u(D)),y}push(c,u){(0,de.Dv)("Reference.push",0,2,arguments.length),(0,de.Wj)("Reference.push","onComplete",u,!0);const y=function rc(h,c){h=(0,de.m9)(h),X("push",h._path),Qo("push",c,h._path,!0);const u=ms(h._repo),y=ru(u),D=Qr(h,y),k=Qr(h,y);let K;return K=null!=c?su(k,c).then(()=>k):Promise.resolve(k),D.then=K.then.bind(K),D.catch=K.then.bind(K,void 0),D}(this._delegate,c),D=y.then(K=>new ta(this.database,K));u&&D.then(()=>u(null),K=>u(K));const k=new ta(this.database,y);return k.then=D.then.bind(D),k.catch=D.catch.bind(D,void 0),k}onDisconnect(){return X("Reference.onDisconnect",this._delegate._path),new Nc(new So(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class cu{constructor(c,u){this._delegate=c,this.app=u,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:W,forceLongPolling:ee}}useEmulator(c,u,y={}){!function Oe(h,c,u,y={}){(h=(0,de.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&En("Cannot call useEmulator() after instance has already been initialized.");const D=h._repoInternal;let k;if(D.repoInfo_.nodeAdmin)y.mockUserToken&&En('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),k=new In(In.OWNER);else if(y.mockUserToken){const K="string"==typeof y.mockUserToken?y.mockUserToken:(0,de.Sg)(y.mockUserToken,h.app.options.projectId);k=new In(K)}!function $h(h,c,u,y){h.repoInfo_=new yn(`${c}:${u}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams,!0),y&&(h.authTokenProvider_=y)}(D,c,u,k)}(this._delegate,c,u,y)}ref(c){if((0,de.Dv)("database.ref",0,1,arguments.length),c instanceof ta){const u=Qd(this._delegate,c.toString());return new ta(this,u)}{const u=Zd(this._delegate,c);return new ta(this,u)}}refFromURL(c){(0,de.Dv)("database.refFromURL",1,1,arguments.length);const y=Qd(this._delegate,c);return new ta(this,y)}goOffline(){return(0,de.Dv)("database.goOffline",0,0,arguments.length),function Tt(h){(h=(0,de.m9)(h))._checkNotDeleted("goOffline"),Ou(h._repo)}(this._delegate)}goOnline(){return(0,de.Dv)("database.goOnline",0,0,arguments.length),function Ht(h){(h=(0,de.m9)(h))._checkNotDeleted("goOnline"),function kh(h){h.persistentConnection_&&h.persistentConnection_.resume(cr)}(h._repo)}(this._delegate)}}cu.ServerValue={TIMESTAMP:function Xr(){return _r}(),increment:h=>function vs(h){return{".sv":{increment:h}}}(h)};var Af=Object.freeze({__proto__:null,initStandalone:function mp({app:h,url:c,version:u,customAuthImpl:y,namespace:D,nodeAdmin:k=!1}){$e(u);const K=new en.zt("auth-internal",new en.H0("database-standalone"));return K.setComponent(new en.wA("auth-internal",()=>y,"PRIVATE")),{instance:new cu(Ea(h,K,void 0,c,k),h),namespace:D}}});const _d=cu.ServerValue;!function zu(h){h.INTERNAL.registerComponent(new en.wA("database-compat",(c,{instanceIdentifier:u})=>{const y=c.getProvider("app-compat").getImmediate(),D=c.getProvider("database").getImmediate({identifier:u});return new cu(D,y)},"PUBLIC").setServiceProps({Reference:ta,Query:ui,Database:cu,DataSnapshot:Ul,enableLogging:ir,INTERNAL:Af,ServerValue:_d}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.3.4")}(zt.Z);var ac=L(6796),Gu=L(14),kc=L(120);function Mf(h){return null==h}function uu(h){return"function"==typeof h.set}function sh(h,c){return uu(c)?c:h.ref(c)}function oh(h,c){if(function xg(h){return"string"==typeof h}(h))return c.stringCase();if(uu(h))return c.firebaseCase();if(function ih(h){return"function"==typeof h.exportVal}(h))return c.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function Fc(h,c,u="on",y=ye.z){return new ge.y(D=>{let k=null;return k=h[u](c,(K,le)=>{y.schedule(()=>{D.next({snapshot:K,prevKey:le})}),"once"===u&&y.schedule(()=>D.complete())},K=>{y.schedule(()=>D.error(K))}),"on"===u?{unsubscribe(){null!=k&&h.off(c,k)}}:{unsubscribe(){}}}).pipe((0,ze.U)(D=>{const{snapshot:k,prevKey:K}=D;let le=null;return k.exists()&&(le=k.key),{type:c,payload:k,prevKey:K,key:le}}),(0,nt.B)())}function ah(h,c){const u=h.length;for(let y=0;y<u;y++)if(h[y].payload.key===c)return y;return-1}function Ao(h,c){const{payload:u,prevKey:y,key:D}=c,k=ah(h,D),K=function lh(h,c){if(Mf(c))return 0;{const u=ah(h,c);return-1===u?h.length:u+1}}(h,y);switch(c.type){case"value":if(c.payload&&c.payload.exists()){let le=null;c.payload.forEach(Re=>{const et={payload:Re,type:"value",prevKey:le,key:Re.key};return le=Re.key,h=[...h,et],!1})}return h;case"child_added":if(k>-1){const le=h[k-1];(le&&le.key||null)!==y&&(h=h.filter(Re=>Re.payload.key!==u.key)).splice(K,0,c)}else{if(null==y)return[c,...h];(h=h.slice()).splice(K,0,c)}return h;case"child_removed":return h.filter(le=>le.payload.key!==u.key);case"child_changed":return h.map(le=>le.payload.key===D?c:le);case"child_moved":if(k>-1){const le=h.splice(k,1)[0];return(h=h.slice()).splice(K,0,le),h}return h;default:return h}}function Ai(h){return(Mf(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function Id(h,c,u){return function jh(h,c,u){return Fc(h,"value","once",u).pipe((0,Ze.w)(y=>{const D=[(0,Me.of)(y)];return c.forEach(k=>D.push(Fc(h,k,"on",u))),(0,Ge.T)(...D).pipe((0,Ye.R)(Ao,[]))}),(0,De.x)())}(h,c=Ai(c),u)}function Hh(h,c,u){const y=(c=Ai(c)).map(D=>Fc(h,D,"on",u));return(0,Ge.T)(...y)}function xf(h,c){return function(y,D){return oh(y,{stringCase:()=>h.child(y)[c](D),firebaseCase:()=>y[c](D),snapshotCase:()=>y.ref[c](D)})}}function vp(h){return function(u){return u?oh(u,{stringCase:()=>h.child(u).remove(),firebaseCase:()=>u.remove(),snapshotCase:()=>u.ref.remove()}):h.remove()}}function zh(h,c){return function(){return Fc(h,"value","on",c)}}const wd=new v.OlP("angularfire2.realtimeDatabaseURL"),hu=new v.OlP("angularfire2.database.use-emulator");let Cd=(()=>{class h{constructor(u,y,D,k,K,le,Re,et,Ot,Gt,un,rr,mr,di,po){this.schedulers=le;const il=Re,Lc=(0,Je.on)(u,K,y);et&&(0,ac.nw)(Lc,K,Ot,un,rr,mr,Gt,di),this.database=(0,Je.cc)(`${Lc.name}.database.${D}`,"AngularFireDatabase",Lc.name,()=>{const bd=K.runOutsideAngular(()=>Lc.database(D||void 0));return il&&bd.useEmulator(...il),bd},[il])}list(u,y){const D=this.schedulers.ngZone.runOutsideAngular(()=>sh(this.database,u));let k=D;return y&&(k=y(D)),function _p(h,c){const u=c.schedulers.outsideAngular,y=c.schedulers.ngZone.run(()=>h.ref);return{query:h,update:xf(y,"update"),set:xf(y,"set"),push:D=>y.push(D),remove:vp(y),snapshotChanges:D=>Id(h,D,u).pipe(at.iC),stateChanges:D=>Hh(h,D,u).pipe(at.iC),auditTrail:D=>function ch(h,c,u){return function yp(h,c,u){return function du(h,c){return Fc(h,"value","on",c).pipe((0,ze.U)(u=>{let y;return u.payload.forEach(D=>(y=D.key,!1)),{data:u,lastKeyToLoad:y}}))}(h,u).pipe(function Fe(...h){const c=(0,Xe.jO)(h);return(0,Ee.e)((u,y)=>{const D=h.length,k=new Array(D);let K=h.map(()=>!1),le=!1;for(let Re=0;Re<D;Re++)(0,Ve.Xf)(h[Re]).subscribe((0,yt.x)(y,et=>{k[Re]=et,!le&&!K[Re]&&(K[Re]=!0,(le=K.every(rt.y))&&(K=null))},be.Z));u.subscribe((0,yt.x)(y,Re=>{if(le){const et=[Re,...k];y.next(c?c(...et):et)}}))})}(c),(0,ze.U)(([D,k])=>{const K=D.lastKeyToLoad,le=k.map(Re=>Re.key);return{actions:k,lastKeyToLoad:K,loadedKeys:le}}),function fe(h){return(0,Ee.e)((c,u)=>{let y=!1,D=0;c.subscribe((0,yt.x)(u,k=>(y||(y=!h(k,D++)))&&u.next(k)))})}(D=>-1===D.loadedKeys.indexOf(D.lastKeyToLoad)),(0,ze.U)(D=>D.actions))}(h,Hh(h,c).pipe((0,Ye.R)((D,k)=>[...D,k],[])),u)}(h,D,u).pipe(at.iC),valueChanges:(D,k)=>Id(h,D,u).pipe((0,ze.U)(le=>le.map(Re=>k&&k.idField?Object.assign(Object.assign({},Re.payload.val()),{[k.idField]:Re.key}):Re.payload.val())),at.iC)}}(k,this)}object(u){return function Ed(h,c){return{query:h,snapshotChanges:()=>zh(h,c.schedulers.outsideAngular)().pipe(at.iC),update:u=>h.ref.update(u),set:u=>h.ref.set(u),remove:()=>h.ref.remove(),valueChanges:()=>zh(h,c.schedulers.outsideAngular)().pipe(at.iC,(0,ze.U)(y=>y.payload.exists()?y.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>sh(this.database,u)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(u){return new(u||h)(v.LFG(Je.Dh),v.LFG(Je.xv,8),v.LFG(wd,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(at.HU),v.LFG(hu,8),v.LFG(ac.zQ,8),v.LFG(ac.Qv,8),v.LFG(ac.L6,8),v.LFG(ac._Q,8),v.LFG(ac.rT,8),v.LFG(ac.lh,8),v.LFG(ac.f7,8),v.LFG(Gu.nm,8))},h.\u0275prov=v.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),Wu=(()=>{class h{constructor(){kc.Z.registerVersion("angularfire",at.q4.full,"rtdb-compat")}}return h.\u0275fac=function(u){return new(u||h)},h.\u0275mod=v.oAB({type:h}),h.\u0275inj=v.cJS({providers:[Cd]}),h})();var Ip=L(8022);let Ep=(()=>{var h;class c{}return(h=c).\u0275fac=function(y){return new(y||h)},h.\u0275mod=v.oAB({type:h,bootstrap:[ke]}),h.\u0275inj=v.cJS({providers:[{provide:ne.wN,useClass:he.r4}],imports:[I.b2,he.Pc.forRoot(),Ie,Je.hO.initializeApp(qe_firebaseConfig),Wu,Ip.yb]}),c})();(0,v.G48)(),I.q6().bootstrapModule(Ep).catch(h=>console.log(h))},5619:(wn,gt,L)=>{"use strict";L.d(gt,{X:()=>v});var I=L(8645);class v extends I.x{constructor(he){super(),this._value=he}get value(){return this.getValue()}_subscribe(he){const ke=super._subscribe(he);return!ke.closed&&he.next(this._value),ke}getValue(){const{hasError:he,thrownError:ke,_value:Pe}=this;if(he)throw ke;return this._throwIfClosed(),Pe}next(he){super.next(this._value=he)}}},5592:(wn,gt,L)=>{"use strict";L.d(gt,{y:()=>qe});var I=L(305),v=L(7394),ne=L(4850),he=L(8407),ke=L(2653),Pe=L(4674),Ie=L(1441);let qe=(()=>{class Me{constructor(ze){ze&&(this._subscribe=ze)}lift(ze){const nt=new Me;return nt.source=this,nt.operator=ze,nt}subscribe(ze,nt,Ze){const Ye=function ge(Me){return Me&&Me instanceof I.Lv||function ye(Me){return Me&&(0,Pe.m)(Me.next)&&(0,Pe.m)(Me.error)&&(0,Pe.m)(Me.complete)}(Me)&&(0,v.Nn)(Me)}(ze)?ze:new I.Hp(ze,nt,Ze);return(0,Ie.x)(()=>{const{operator:De,source:Ee}=this;Ye.add(De?De.call(Ye,Ee):Ee?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(ze){try{return this._subscribe(ze)}catch(nt){ze.error(nt)}}forEach(ze,nt){return new(nt=Je(nt))((Ze,Ye)=>{const De=new I.Hp({next:Ee=>{try{ze(Ee)}catch(yt){Ye(yt),De.unsubscribe()}},error:Ye,complete:Ze});this.subscribe(De)})}_subscribe(ze){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(ze)}[ne.L](){return this}pipe(...ze){return(0,he.U)(ze)(this)}toPromise(ze){return new(ze=Je(ze))((nt,Ze)=>{let Ye;this.subscribe(De=>Ye=De,De=>Ze(De),()=>nt(Ye))})}}return Me.create=Ge=>new Me(Ge),Me})();function Je(Me){var Ge;return null!==(Ge=Me??ke.config.Promise)&&void 0!==Ge?Ge:Promise}},8645:(wn,gt,L)=>{"use strict";L.d(gt,{x:()=>Ie});var I=L(5592),v=L(7394);const he=(0,L(2306).d)(Je=>function(){Je(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=L(9039),Pe=L(1441);let Ie=(()=>{class Je extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ge){const Me=new qe(this,this);return Me.operator=ge,Me}_throwIfClosed(){if(this.closed)throw new he}next(ge){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Me of this.currentObservers)Me.next(ge)}})}error(ge){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ge;const{observers:Me}=this;for(;Me.length;)Me.shift().error(ge)}})}complete(){(0,Pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ge}=this;for(;ge.length;)ge.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ge;return(null===(ge=this.observers)||void 0===ge?void 0:ge.length)>0}_trySubscribe(ge){return this._throwIfClosed(),super._trySubscribe(ge)}_subscribe(ge){return this._throwIfClosed(),this._checkFinalizedStatuses(ge),this._innerSubscribe(ge)}_innerSubscribe(ge){const{hasError:Me,isStopped:Ge,observers:ze}=this;return Me||Ge?v.Lc:(this.currentObservers=null,ze.push(ge),new v.w0(()=>{this.currentObservers=null,(0,ke.P)(ze,ge)}))}_checkFinalizedStatuses(ge){const{hasError:Me,thrownError:Ge,isStopped:ze}=this;Me?ge.error(Ge):ze&&ge.complete()}asObservable(){const ge=new I.y;return ge.source=this,ge}}return Je.create=(ye,ge)=>new qe(ye,ge),Je})();class qe extends Ie{constructor(ye,ge){super(),this.destination=ye,this.source=ge}next(ye){var ge,Me;null===(Me=null===(ge=this.destination)||void 0===ge?void 0:ge.next)||void 0===Me||Me.call(ge,ye)}error(ye){var ge,Me;null===(Me=null===(ge=this.destination)||void 0===ge?void 0:ge.error)||void 0===Me||Me.call(ge,ye)}complete(){var ye,ge;null===(ge=null===(ye=this.destination)||void 0===ye?void 0:ye.complete)||void 0===ge||ge.call(ye)}_subscribe(ye){var ge,Me;return null!==(Me=null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(ye))&&void 0!==Me?Me:v.Lc}}},305:(wn,gt,L)=>{"use strict";L.d(gt,{Hp:()=>Ze,Lv:()=>Me});var I=L(4674),v=L(7394),ne=L(2653),he=L(3894),ke=L(2420);const Pe=Je("C",void 0,void 0);function Je(Ve,rt,be){return{kind:Ve,value:rt,error:be}}var ye=L(7599),ge=L(1441);class Me extends v.w0{constructor(rt){super(),this.isStopped=!1,rt?(this.destination=rt,(0,v.Nn)(rt)&&rt.add(this)):this.destination=yt}static create(rt,be,Xe){return new Ze(rt,be,Xe)}next(rt){this.isStopped?Ee(function qe(Ve){return Je("N",Ve,void 0)}(rt),this):this._next(rt)}error(rt){this.isStopped?Ee(function Ie(Ve){return Je("E",void 0,Ve)}(rt),this):(this.isStopped=!0,this._error(rt))}complete(){this.isStopped?Ee(Pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(rt){this.destination.next(rt)}_error(rt){try{this.destination.error(rt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function ze(Ve,rt){return Ge.call(Ve,rt)}class nt{constructor(rt){this.partialObserver=rt}next(rt){const{partialObserver:be}=this;if(be.next)try{be.next(rt)}catch(Xe){Ye(Xe)}}error(rt){const{partialObserver:be}=this;if(be.error)try{be.error(rt)}catch(Xe){Ye(Xe)}else Ye(rt)}complete(){const{partialObserver:rt}=this;if(rt.complete)try{rt.complete()}catch(be){Ye(be)}}}class Ze extends Me{constructor(rt,be,Xe){let Fe;if(super(),(0,I.m)(rt)||!rt)Fe={next:rt??void 0,error:be??void 0,complete:Xe??void 0};else{let fe;this&&ne.config.useDeprecatedNextContext?(fe=Object.create(rt),fe.unsubscribe=()=>this.unsubscribe(),Fe={next:rt.next&&ze(rt.next,fe),error:rt.error&&ze(rt.error,fe),complete:rt.complete&&ze(rt.complete,fe)}):Fe=rt}this.destination=new nt(Fe)}}function Ye(Ve){ne.config.useDeprecatedSynchronousErrorHandling?(0,ge.O)(Ve):(0,he.h)(Ve)}function Ee(Ve,rt){const{onStoppedNotification:be}=ne.config;be&&ye.z.setTimeout(()=>be(Ve,rt))}const yt={closed:!0,next:ke.Z,error:function De(Ve){throw Ve},complete:ke.Z}},7394:(wn,gt,L)=>{"use strict";L.d(gt,{Lc:()=>Pe,w0:()=>ke,Nn:()=>Ie});var I=L(4674);const ne=(0,L(2306).d)(Je=>function(ge){Je(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((Me,Ge)=>`${Ge+1}) ${Me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge});var he=L(9039);class ke{constructor(ye){this.initialTeardown=ye,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ye;if(!this.closed){this.closed=!0;const{_parentage:ge}=this;if(ge)if(this._parentage=null,Array.isArray(ge))for(const ze of ge)ze.remove(this);else ge.remove(this);const{initialTeardown:Me}=this;if((0,I.m)(Me))try{Me()}catch(ze){ye=ze instanceof ne?ze.errors:[ze]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const ze of Ge)try{qe(ze)}catch(nt){ye=ye??[],nt instanceof ne?ye=[...ye,...nt.errors]:ye.push(nt)}}if(ye)throw new ne(ye)}}add(ye){var ge;if(ye&&ye!==this)if(this.closed)qe(ye);else{if(ye instanceof ke){if(ye.closed||ye._hasParent(this))return;ye._addParent(this)}(this._finalizers=null!==(ge=this._finalizers)&&void 0!==ge?ge:[]).push(ye)}}_hasParent(ye){const{_parentage:ge}=this;return ge===ye||Array.isArray(ge)&&ge.includes(ye)}_addParent(ye){const{_parentage:ge}=this;this._parentage=Array.isArray(ge)?(ge.push(ye),ge):ge?[ge,ye]:ye}_removeParent(ye){const{_parentage:ge}=this;ge===ye?this._parentage=null:Array.isArray(ge)&&(0,he.P)(ge,ye)}remove(ye){const{_finalizers:ge}=this;ge&&(0,he.P)(ge,ye),ye instanceof ke&&ye._removeParent(this)}}ke.EMPTY=(()=>{const Je=new ke;return Je.closed=!0,Je})();const Pe=ke.EMPTY;function Ie(Je){return Je instanceof ke||Je&&"closed"in Je&&(0,I.m)(Je.remove)&&(0,I.m)(Je.add)&&(0,I.m)(Je.unsubscribe)}function qe(Je){(0,I.m)(Je)?Je():Je.unsubscribe()}},2653:(wn,gt,L)=>{"use strict";L.d(gt,{config:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2572:(wn,gt,L)=>{"use strict";L.d(gt,{a:()=>ye});var I=L(5592),v=L(7453),ne=L(2459),he=L(2737),ke=L(7400),Pe=L(4564),Ie=L(2714),qe=L(8251),Je=L(7103);function ye(...Ge){const ze=(0,Pe.yG)(Ge),nt=(0,Pe.jO)(Ge),{args:Ze,keys:Ye}=(0,v.D)(Ge);if(0===Ze.length)return(0,ne.D)([],ze);const De=new I.y(function ge(Ge,ze,nt=he.y){return Ze=>{Me(ze,()=>{const{length:Ye}=Ge,De=new Array(Ye);let Ee=Ye,yt=Ye;for(let Ve=0;Ve<Ye;Ve++)Me(ze,()=>{const rt=(0,ne.D)(Ge[Ve],ze);let be=!1;rt.subscribe((0,qe.x)(Ze,Xe=>{De[Ve]=Xe,be||(be=!0,yt--),yt||Ze.next(nt(De.slice()))},()=>{--Ee||Ze.complete()}))},Ze)},Ze)}}(Ze,ze,Ye?Ee=>(0,Ie.n)(Ye,Ee):he.y));return nt?De.pipe((0,ke.Z)(nt)):De}function Me(Ge,ze,nt){Ge?(0,Je.f)(nt,Ge,ze):ze()}},5211:(wn,gt,L)=>{"use strict";L.d(gt,{z:()=>ke});var I=L(7537),ne=L(4564),he=L(2459);function ke(...Pe){return function v(){return(0,I.J)(1)}()((0,he.D)(Pe,(0,ne.yG)(Pe)))}},6232:(wn,gt,L)=>{"use strict";L.d(gt,{E:()=>v});const v=new(L(5592).y)(ke=>ke.complete())},2459:(wn,gt,L)=>{"use strict";L.d(gt,{D:()=>rt});var I=L(4829),v=L(3093),ne=L(5137),Pe=L(5592),qe=L(4971),Je=L(4674),ye=L(7103);function Me(be,Xe){if(!be)throw new Error("Iterable cannot be null");return new Pe.y(Fe=>{(0,ye.f)(Fe,Xe,()=>{const fe=be[Symbol.asyncIterator]();(0,ye.f)(Fe,Xe,()=>{fe.next().then(at=>{at.done?Fe.complete():Fe.next(at.value)})},0,!0)})})}var Ge=L(8382),ze=L(4026),nt=L(4266),Ze=L(3664),Ye=L(5726),De=L(9853),Ee=L(541);function rt(be,Xe){return Xe?function Ve(be,Xe){if(null!=be){if((0,Ge.c)(be))return function he(be,Xe){return(0,I.Xf)(be).pipe((0,ne.R)(Xe),(0,v.Q)(Xe))}(be,Xe);if((0,nt.z)(be))return function Ie(be,Xe){return new Pe.y(Fe=>{let fe=0;return Xe.schedule(function(){fe===be.length?Fe.complete():(Fe.next(be[fe++]),Fe.closed||this.schedule())})})}(be,Xe);if((0,ze.t)(be))return function ke(be,Xe){return(0,I.Xf)(be).pipe((0,ne.R)(Xe),(0,v.Q)(Xe))}(be,Xe);if((0,Ye.D)(be))return Me(be,Xe);if((0,Ze.T)(be))return function ge(be,Xe){return new Pe.y(Fe=>{let fe;return(0,ye.f)(Fe,Xe,()=>{fe=be[qe.h](),(0,ye.f)(Fe,Xe,()=>{let at,Ue;try{({value:at,done:Ue}=fe.next())}catch(zt){return void Fe.error(zt)}Ue?Fe.complete():Fe.next(at)},0,!0)}),()=>(0,Je.m)(fe?.return)&&fe.return()})}(be,Xe);if((0,Ee.L)(be))return function yt(be,Xe){return Me((0,Ee.Q)(be),Xe)}(be,Xe)}throw(0,De.z)(be)}(be,Xe):(0,I.Xf)(be)}},4829:(wn,gt,L)=>{"use strict";L.d(gt,{Xf:()=>Ge});var I=L(7582),v=L(4266),ne=L(4026),he=L(5592),ke=L(8382),Pe=L(5726),Ie=L(9853),qe=L(3664),Je=L(541),ye=L(4674),ge=L(3894),Me=L(4850);function Ge(Ve){if(Ve instanceof he.y)return Ve;if(null!=Ve){if((0,ke.c)(Ve))return function ze(Ve){return new he.y(rt=>{const be=Ve[Me.L]();if((0,ye.m)(be.subscribe))return be.subscribe(rt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,v.z)(Ve))return function nt(Ve){return new he.y(rt=>{for(let be=0;be<Ve.length&&!rt.closed;be++)rt.next(Ve[be]);rt.complete()})}(Ve);if((0,ne.t)(Ve))return function Ze(Ve){return new he.y(rt=>{Ve.then(be=>{rt.closed||(rt.next(be),rt.complete())},be=>rt.error(be)).then(null,ge.h)})}(Ve);if((0,Pe.D)(Ve))return De(Ve);if((0,qe.T)(Ve))return function Ye(Ve){return new he.y(rt=>{for(const be of Ve)if(rt.next(be),rt.closed)return;rt.complete()})}(Ve);if((0,Je.L)(Ve))return function Ee(Ve){return De((0,Je.Q)(Ve))}(Ve)}throw(0,Ie.z)(Ve)}function De(Ve){return new he.y(rt=>{(function yt(Ve,rt){var be,Xe,Fe,fe;return(0,I.mG)(this,void 0,void 0,function*(){try{for(be=(0,I.KL)(Ve);!(Xe=yield be.next()).done;)if(rt.next(Xe.value),rt.closed)return}catch(at){Fe={error:at}}finally{try{Xe&&!Xe.done&&(fe=be.return)&&(yield fe.call(be))}finally{if(Fe)throw Fe.error}}rt.complete()})})(Ve,rt).catch(be=>rt.error(be))})}},3019:(wn,gt,L)=>{"use strict";L.d(gt,{T:()=>Pe});var I=L(7537),v=L(4829),ne=L(6232),he=L(4564),ke=L(2459);function Pe(...Ie){const qe=(0,he.yG)(Ie),Je=(0,he._6)(Ie,1/0),ye=Ie;return ye.length?1===ye.length?(0,v.Xf)(ye[0]):(0,I.J)(Je)((0,ke.D)(ye,qe)):ne.E}},2096:(wn,gt,L)=>{"use strict";L.d(gt,{of:()=>ne});var I=L(4564),v=L(2459);function ne(...he){const ke=(0,I.yG)(he);return(0,v.D)(he,ke)}},8251:(wn,gt,L)=>{"use strict";L.d(gt,{x:()=>v});var I=L(305);function v(he,ke,Pe,Ie,qe){return new ne(he,ke,Pe,Ie,qe)}class ne extends I.Lv{constructor(ke,Pe,Ie,qe,Je,ye){super(ke),this.onFinalize=Je,this.shouldUnsubscribe=ye,this._next=Pe?function(ge){try{Pe(ge)}catch(Me){ke.error(Me)}}:super._next,this._error=qe?function(ge){try{qe(ge)}catch(Me){ke.error(Me)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(ge){ke.error(ge)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ke;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(ke=this.onFinalize)||void 0===ke||ke.call(this))}}}},3572:(wn,gt,L)=>{"use strict";L.d(gt,{d:()=>ne});var I=L(9360),v=L(8251);function ne(he){return(0,I.e)((ke,Pe)=>{let Ie=!1;ke.subscribe((0,v.x)(Pe,qe=>{Ie=!0,Pe.next(qe)},()=>{Ie||Pe.next(he),Pe.complete()}))})}},3997:(wn,gt,L)=>{"use strict";L.d(gt,{x:()=>he});var I=L(2737),v=L(9360),ne=L(8251);function he(Pe,Ie=I.y){return Pe=Pe??ke,(0,v.e)((qe,Je)=>{let ye,ge=!0;qe.subscribe((0,ne.x)(Je,Me=>{const Ge=Ie(Me);(ge||!Pe(ye,Ge))&&(ge=!1,ye=Ge,Je.next(Me))}))})}function ke(Pe,Ie){return Pe===Ie}},2181:(wn,gt,L)=>{"use strict";L.d(gt,{h:()=>ne});var I=L(9360),v=L(8251);function ne(he,ke){return(0,I.e)((Pe,Ie)=>{let qe=0;Pe.subscribe((0,v.x)(Ie,Je=>he.call(ke,Je,qe++)&&Ie.next(Je)))})}},1374:(wn,gt,L)=>{"use strict";L.d(gt,{P:()=>Ie});var I=L(6973),v=L(2181),ne=L(8180),he=L(3572),ke=L(3026),Pe=L(2737);function Ie(qe,Je){const ye=arguments.length>=2;return ge=>ge.pipe(qe?(0,v.h)((Me,Ge)=>qe(Me,Ge,ge)):Pe.y,(0,ne.q)(1),ye?(0,he.d)(Je):(0,ke.T)(()=>new I.K))}},7398:(wn,gt,L)=>{"use strict";L.d(gt,{U:()=>ne});var I=L(9360),v=L(8251);function ne(he,ke){return(0,I.e)((Pe,Ie)=>{let qe=0;Pe.subscribe((0,v.x)(Ie,Je=>{Ie.next(he.call(ke,Je,qe++))}))})}},7537:(wn,gt,L)=>{"use strict";L.d(gt,{J:()=>ne});var I=L(1631),v=L(2737);function ne(he=1/0){return(0,I.z)(v.y,he)}},1631:(wn,gt,L)=>{"use strict";L.d(gt,{z:()=>qe});var I=L(7398),v=L(4829),ne=L(9360),he=L(7103),ke=L(8251),Ie=L(4674);function qe(Je,ye,ge=1/0){return(0,Ie.m)(ye)?qe((Me,Ge)=>(0,I.U)((ze,nt)=>ye(Me,ze,Ge,nt))((0,v.Xf)(Je(Me,Ge))),ge):("number"==typeof ye&&(ge=ye),(0,ne.e)((Me,Ge)=>function Pe(Je,ye,ge,Me,Ge,ze,nt,Ze){const Ye=[];let De=0,Ee=0,yt=!1;const Ve=()=>{yt&&!Ye.length&&!De&&ye.complete()},rt=Xe=>De<Me?be(Xe):Ye.push(Xe),be=Xe=>{ze&&ye.next(Xe),De++;let Fe=!1;(0,v.Xf)(ge(Xe,Ee++)).subscribe((0,ke.x)(ye,fe=>{Ge?.(fe),ze?rt(fe):ye.next(fe)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(De--;Ye.length&&De<Me;){const fe=Ye.shift();nt?(0,he.f)(ye,nt,()=>be(fe)):be(fe)}Ve()}catch(fe){ye.error(fe)}}))};return Je.subscribe((0,ke.x)(ye,rt,()=>{yt=!0,Ve()})),()=>{Ze?.()}}(Me,Ge,Je,ge)))}},3093:(wn,gt,L)=>{"use strict";L.d(gt,{Q:()=>he});var I=L(7103),v=L(9360),ne=L(8251);function he(ke,Pe=0){return(0,v.e)((Ie,qe)=>{Ie.subscribe((0,ne.x)(qe,Je=>(0,I.f)(qe,ke,()=>qe.next(Je),Pe),()=>(0,I.f)(qe,ke,()=>qe.complete(),Pe),Je=>(0,I.f)(qe,ke,()=>qe.error(Je),Pe)))})}},6699:(wn,gt,L)=>{"use strict";L.d(gt,{R:()=>he});var I=L(9360),v=L(8251);function he(ke,Pe){return(0,I.e)(function ne(ke,Pe,Ie,qe,Je){return(ye,ge)=>{let Me=Ie,Ge=Pe,ze=0;ye.subscribe((0,v.x)(ge,nt=>{const Ze=ze++;Ge=Me?ke(Ge,nt,Ze):(Me=!0,nt),qe&&ge.next(Ge)},Je&&(()=>{Me&&ge.next(Ge),ge.complete()})))}}(ke,Pe,arguments.length>=2,!0))}},3020:(wn,gt,L)=>{"use strict";L.d(gt,{B:()=>ke});var I=L(4829),v=L(8645),ne=L(305),he=L(9360);function ke(Ie={}){const{connector:qe=(()=>new v.x),resetOnError:Je=!0,resetOnComplete:ye=!0,resetOnRefCountZero:ge=!0}=Ie;return Me=>{let Ge,ze,nt,Ze=0,Ye=!1,De=!1;const Ee=()=>{ze?.unsubscribe(),ze=void 0},yt=()=>{Ee(),Ge=nt=void 0,Ye=De=!1},Ve=()=>{const rt=Ge;yt(),rt?.unsubscribe()};return(0,he.e)((rt,be)=>{Ze++,!De&&!Ye&&Ee();const Xe=nt=nt??qe();be.add(()=>{Ze--,0===Ze&&!De&&!Ye&&(ze=Pe(Ve,ge))}),Xe.subscribe(be),!Ge&&Ze>0&&(Ge=new ne.Hp({next:Fe=>Xe.next(Fe),error:Fe=>{De=!0,Ee(),ze=Pe(yt,Je,Fe),Xe.error(Fe)},complete:()=>{Ye=!0,Ee(),ze=Pe(yt,ye),Xe.complete()}}),(0,I.Xf)(rt).subscribe(Ge))})(Me)}}function Pe(Ie,qe,...Je){if(!0===qe)return void Ie();if(!1===qe)return;const ye=new ne.Hp({next:()=>{ye.unsubscribe(),Ie()}});return(0,I.Xf)(qe(...Je)).subscribe(ye)}},7921:(wn,gt,L)=>{"use strict";L.d(gt,{O:()=>he});var I=L(5211),v=L(4564),ne=L(9360);function he(...ke){const Pe=(0,v.yG)(ke);return(0,ne.e)((Ie,qe)=>{(Pe?(0,I.z)(ke,Ie,Pe):(0,I.z)(ke,Ie)).subscribe(qe)})}},5137:(wn,gt,L)=>{"use strict";L.d(gt,{R:()=>v});var I=L(9360);function v(ne,he=0){return(0,I.e)((ke,Pe)=>{Pe.add(ne.schedule(()=>ke.subscribe(Pe),he))})}},4664:(wn,gt,L)=>{"use strict";L.d(gt,{w:()=>he});var I=L(4829),v=L(9360),ne=L(8251);function he(ke,Pe){return(0,v.e)((Ie,qe)=>{let Je=null,ye=0,ge=!1;const Me=()=>ge&&!Je&&qe.complete();Ie.subscribe((0,ne.x)(qe,Ge=>{Je?.unsubscribe();let ze=0;const nt=ye++;(0,I.Xf)(ke(Ge,nt)).subscribe(Je=(0,ne.x)(qe,Ze=>qe.next(Pe?Pe(Ge,Ze,nt,ze++):Ze),()=>{Je=null,Me()}))},()=>{ge=!0,Me()}))})}},8180:(wn,gt,L)=>{"use strict";L.d(gt,{q:()=>he});var I=L(6232),v=L(9360),ne=L(8251);function he(ke){return ke<=0?()=>I.E:(0,v.e)((Pe,Ie)=>{let qe=0;Pe.subscribe((0,ne.x)(Ie,Je=>{++qe<=ke&&(Ie.next(Je),ke<=qe&&Ie.complete())}))})}},9397:(wn,gt,L)=>{"use strict";L.d(gt,{b:()=>ke});var I=L(4674),v=L(9360),ne=L(8251),he=L(2737);function ke(Pe,Ie,qe){const Je=(0,I.m)(Pe)||Ie||qe?{next:Pe,error:Ie,complete:qe}:Pe;return Je?(0,v.e)((ye,ge)=>{var Me;null===(Me=Je.subscribe)||void 0===Me||Me.call(Je);let Ge=!0;ye.subscribe((0,ne.x)(ge,ze=>{var nt;null===(nt=Je.next)||void 0===nt||nt.call(Je,ze),ge.next(ze)},()=>{var ze;Ge=!1,null===(ze=Je.complete)||void 0===ze||ze.call(Je),ge.complete()},ze=>{var nt;Ge=!1,null===(nt=Je.error)||void 0===nt||nt.call(Je,ze),ge.error(ze)},()=>{var ze,nt;Ge&&(null===(ze=Je.unsubscribe)||void 0===ze||ze.call(Je)),null===(nt=Je.finalize)||void 0===nt||nt.call(Je)}))}):he.y}},3026:(wn,gt,L)=>{"use strict";L.d(gt,{T:()=>he});var I=L(6973),v=L(9360),ne=L(8251);function he(Pe=ke){return(0,v.e)((Ie,qe)=>{let Je=!1;Ie.subscribe((0,ne.x)(qe,ye=>{Je=!0,qe.next(ye)},()=>Je?qe.complete():qe.error(Pe())))})}function ke(){return new I.K}},1954:(wn,gt,L)=>{"use strict";L.d(gt,{o:()=>ke});var I=L(7394);class v extends I.w0{constructor(Ie,qe){super()}schedule(Ie,qe=0){return this}}const ne={setInterval(Pe,Ie,...qe){const{delegate:Je}=ne;return Je?.setInterval?Je.setInterval(Pe,Ie,...qe):setInterval(Pe,Ie,...qe)},clearInterval(Pe){const{delegate:Ie}=ne;return(Ie?.clearInterval||clearInterval)(Pe)},delegate:void 0};var he=L(9039);class ke extends v{constructor(Ie,qe){super(Ie,qe),this.scheduler=Ie,this.work=qe,this.pending=!1}schedule(Ie,qe=0){var Je;if(this.closed)return this;this.state=Ie;const ye=this.id,ge=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(ge,ye,qe)),this.pending=!0,this.delay=qe,this.id=null!==(Je=this.id)&&void 0!==Je?Je:this.requestAsyncId(ge,this.id,qe),this}requestAsyncId(Ie,qe,Je=0){return ne.setInterval(Ie.flush.bind(Ie,this),Je)}recycleAsyncId(Ie,qe,Je=0){if(null!=Je&&this.delay===Je&&!1===this.pending)return qe;null!=qe&&ne.clearInterval(qe)}execute(Ie,qe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Je=this._execute(Ie,qe);if(Je)return Je;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,qe){let ye,Je=!1;try{this.work(Ie)}catch(ge){Je=!0,ye=ge||new Error("Scheduled action threw falsy error")}if(Je)return this.unsubscribe(),ye}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:qe}=this,{actions:Je}=qe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(Je,this),null!=Ie&&(this.id=this.recycleAsyncId(qe,Ie,null)),this.delay=null,super.unsubscribe()}}}},2631:(wn,gt,L)=>{"use strict";L.d(gt,{v:()=>ne});var I=L(4552);class v{constructor(ke,Pe=v.now){this.schedulerActionCtor=ke,this.now=Pe}schedule(ke,Pe=0,Ie){return new this.schedulerActionCtor(this,ke).schedule(Ie,Pe)}}v.now=I.l.now;class ne extends v{constructor(ke,Pe=v.now){super(ke,Pe),this.actions=[],this._active=!1}flush(ke){const{actions:Pe}=this;if(this._active)return void Pe.push(ke);let Ie;this._active=!0;do{if(Ie=ke.execute(ke.state,ke.delay))break}while(ke=Pe.shift());if(this._active=!1,Ie){for(;ke=Pe.shift();)ke.unsubscribe();throw Ie}}}},6321:(wn,gt,L)=>{"use strict";L.d(gt,{z:()=>ne});var I=L(1954);const ne=new(L(2631).v)(I.o)},4552:(wn,gt,L)=>{"use strict";L.d(gt,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},7599:(wn,gt,L)=>{"use strict";L.d(gt,{z:()=>I});const I={setTimeout(v,ne,...he){const{delegate:ke}=I;return ke?.setTimeout?ke.setTimeout(v,ne,...he):setTimeout(v,ne,...he)},clearTimeout(v){const{delegate:ne}=I;return(ne?.clearTimeout||clearTimeout)(v)},delegate:void 0}},4971:(wn,gt,L)=>{"use strict";L.d(gt,{h:()=>v});const v=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(wn,gt,L)=>{"use strict";L.d(gt,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(wn,gt,L)=>{"use strict";L.d(gt,{K:()=>v});const v=(0,L(2306).d)(ne=>function(){ne(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(wn,gt,L)=>{"use strict";L.d(gt,{_6:()=>Pe,jO:()=>he,yG:()=>ke});var I=L(4674);function ne(Ie){return Ie[Ie.length-1]}function he(Ie){return(0,I.m)(ne(Ie))?Ie.pop():void 0}function ke(Ie){return function v(Ie){return Ie&&(0,I.m)(Ie.schedule)}(ne(Ie))?Ie.pop():void 0}function Pe(Ie,qe){return"number"==typeof ne(Ie)?Ie.pop():qe}},7453:(wn,gt,L)=>{"use strict";L.d(gt,{D:()=>ke});const{isArray:I}=Array,{getPrototypeOf:v,prototype:ne,keys:he}=Object;function ke(Ie){if(1===Ie.length){const qe=Ie[0];if(I(qe))return{args:qe,keys:null};if(function Pe(Ie){return Ie&&"object"==typeof Ie&&v(Ie)===ne}(qe)){const Je=he(qe);return{args:Je.map(ye=>qe[ye]),keys:Je}}}return{args:Ie,keys:null}}},9039:(wn,gt,L)=>{"use strict";function I(v,ne){if(v){const he=v.indexOf(ne);0<=he&&v.splice(he,1)}}L.d(gt,{P:()=>I})},2306:(wn,gt,L)=>{"use strict";function I(v){const he=v(ke=>{Error.call(ke),ke.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}L.d(gt,{d:()=>I})},2714:(wn,gt,L)=>{"use strict";function I(v,ne){return v.reduce((he,ke,Pe)=>(he[ke]=ne[Pe],he),{})}L.d(gt,{n:()=>I})},1441:(wn,gt,L)=>{"use strict";L.d(gt,{O:()=>he,x:()=>ne});var I=L(2653);let v=null;function ne(ke){if(I.config.useDeprecatedSynchronousErrorHandling){const Pe=!v;if(Pe&&(v={errorThrown:!1,error:null}),ke(),Pe){const{errorThrown:Ie,error:qe}=v;if(v=null,Ie)throw qe}}else ke()}function he(ke){I.config.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=ke)}},7103:(wn,gt,L)=>{"use strict";function I(v,ne,he,ke=0,Pe=!1){const Ie=ne.schedule(function(){he(),Pe?v.add(this.schedule(null,ke)):this.unsubscribe()},ke);if(v.add(Ie),!Pe)return Ie}L.d(gt,{f:()=>I})},2737:(wn,gt,L)=>{"use strict";function I(v){return v}L.d(gt,{y:()=>I})},4266:(wn,gt,L)=>{"use strict";L.d(gt,{z:()=>I});const I=v=>v&&"number"==typeof v.length&&"function"!=typeof v},5726:(wn,gt,L)=>{"use strict";L.d(gt,{D:()=>v});var I=L(4674);function v(ne){return Symbol.asyncIterator&&(0,I.m)(ne?.[Symbol.asyncIterator])}},4674:(wn,gt,L)=>{"use strict";function I(v){return"function"==typeof v}L.d(gt,{m:()=>I})},8382:(wn,gt,L)=>{"use strict";L.d(gt,{c:()=>ne});var I=L(4850),v=L(4674);function ne(he){return(0,v.m)(he[I.L])}},3664:(wn,gt,L)=>{"use strict";L.d(gt,{T:()=>ne});var I=L(4971),v=L(4674);function ne(he){return(0,v.m)(he?.[I.h])}},4026:(wn,gt,L)=>{"use strict";L.d(gt,{t:()=>v});var I=L(4674);function v(ne){return(0,I.m)(ne?.then)}},541:(wn,gt,L)=>{"use strict";L.d(gt,{L:()=>he,Q:()=>ne});var I=L(7582),v=L(4674);function ne(ke){return(0,I.FC)(this,arguments,function*(){const Ie=ke.getReader();try{for(;;){const{value:qe,done:Je}=yield(0,I.qq)(Ie.read());if(Je)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(qe)}}finally{Ie.releaseLock()}})}function he(ke){return(0,v.m)(ke?.getReader)}},9360:(wn,gt,L)=>{"use strict";L.d(gt,{A:()=>v,e:()=>ne});var I=L(4674);function v(he){return(0,I.m)(he?.lift)}function ne(he){return ke=>{if(v(ke))return ke.lift(function(Pe){try{return he(Pe,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(wn,gt,L)=>{"use strict";L.d(gt,{Z:()=>he});var I=L(7398);const{isArray:v}=Array;function he(ke){return(0,I.U)(Pe=>function ne(ke,Pe){return v(Pe)?ke(...Pe):ke(Pe)}(ke,Pe))}},2420:(wn,gt,L)=>{"use strict";function I(){}L.d(gt,{Z:()=>I})},8407:(wn,gt,L)=>{"use strict";L.d(gt,{U:()=>ne,z:()=>v});var I=L(2737);function v(...he){return ne(he)}function ne(he){return 0===he.length?I.y:1===he.length?he[0]:function(Pe){return he.reduce((Ie,qe)=>qe(Ie),Pe)}}},3894:(wn,gt,L)=>{"use strict";L.d(gt,{h:()=>ne});var I=L(2653),v=L(7599);function ne(he){v.z.setTimeout(()=>{const{onUnhandledError:ke}=I.config;if(!ke)throw he;ke(he)})}},9853:(wn,gt,L)=>{"use strict";function I(v){return new TypeError(`You provided ${null!==v&&"object"==typeof v?"an invalid object":`'${v}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(gt,{z:()=>I})},863:(wn,gt,L)=>{var I={"./ion-accordion_2.entry.js":[8484,8592,8484],"./ion-action-sheet.entry.js":[9882,8592,9882],"./ion-alert.entry.js":[7068,8592,6304],"./ion-app_8.entry.js":[5860,8592,5860],"./ion-avatar_3.entry.js":[3544,3544],"./ion-back-button.entry.js":[505,8592,505],"./ion-backdrop.entry.js":[469,469],"./ion-breadcrumb_2.entry.js":[9857,8592,9857],"./ion-button_2.entry.js":[1372,1372],"./ion-card_5.entry.js":[3150,3150],"./ion-checkbox.entry.js":[7635,8592,7635],"./ion-chip.entry.js":[6673,6673],"./ion-col_3.entry.js":[1315,1315],"./ion-datetime-button.entry.js":[433,9643,433],"./ion-datetime_3.entry.js":[7059,9643,8592,7059],"./ion-fab_3.entry.js":[4087,8592,4087],"./ion-img.entry.js":[1745,1745],"./ion-infinite-scroll_2.entry.js":[9352,8592,9352],"./ion-input.entry.js":[4530,8592,4530],"./ion-item-option_3.entry.js":[8633,8592,8633],"./ion-item_8.entry.js":[5962,8592,5962],"./ion-loading.entry.js":[3483,8592,3483],"./ion-menu_3.entry.js":[2939,8592,8382],"./ion-modal.entry.js":[8577,8592,8577],"./ion-nav_2.entry.js":[5675,8592,5675],"./ion-picker-column-internal.entry.js":[9992,8592,9992],"./ion-picker-internal.entry.js":[9820,9820],"./ion-popover.entry.js":[185,8592,185],"./ion-progress-bar.entry.js":[5454,5454],"./ion-radio_2.entry.js":[4458,8592,4458],"./ion-range.entry.js":[7666,8592,7666],"./ion-refresher_2.entry.js":[7219,8592,7219],"./ion-reorder_2.entry.js":[2975,8592,2975],"./ion-ripple-effect.entry.js":[7465,7465],"./ion-route_4.entry.js":[4764,4764],"./ion-searchbar.entry.js":[3998,8592,3998],"./ion-segment_2.entry.js":[3672,8592,3672],"./ion-select_3.entry.js":[6754,8592,6754],"./ion-spinner.entry.js":[9588,8592,9588],"./ion-split-pane.entry.js":[9793,9793],"./ion-tab-bar_2.entry.js":[4090,8592,4090],"./ion-tab_2.entry.js":[2841,2841],"./ion-text.entry.js":[8811,8811],"./ion-textarea.entry.js":[3734,8592,3734],"./ion-toast.entry.js":[6642,8592,6642],"./ion-toggle.entry.js":[8866,8592,8866]};function v(ne){if(!L.o(I,ne))return Promise.resolve().then(()=>{var Pe=new Error("Cannot find module '"+ne+"'");throw Pe.code="MODULE_NOT_FOUND",Pe});var he=I[ne],ke=he[0];return Promise.all(he.slice(1).map(L.e)).then(()=>L(ke))}v.keys=()=>Object.keys(I),v.id=863,wn.exports=v},6814:(wn,gt,L)=>{"use strict";L.d(gt,{Do:()=>Ze,EM:()=>fs,HT:()=>he,JF:()=>Tr,K0:()=>Pe,Mx:()=>on,O5:()=>ts,PM:()=>Wi,S$:()=>Ge,V_:()=>qe,Ye:()=>Ye,b0:()=>nt,bD:()=>Es,ez:()=>Ci,q:()=>ne,sg:()=>Ys,tP:()=>ct,w_:()=>ke});var I=L(5879);let v=null;function ne(){return v}function he(A){v||(v=A)}class ke{}const Pe=new I.OlP("DocumentToken");let Ie=(()=>{var A;class G{historyGo($){throw new Error("Not implemented")}}return(A=G).\u0275fac=function($){return new($||A)},A.\u0275prov=I.Yz7({token:A,factory:function(){return(0,I.f3M)(Je)},providedIn:"platform"}),G})();const qe=new I.OlP("Location Initialized");let Je=(()=>{var A;class G extends Ie{constructor(){super(),this._doc=(0,I.f3M)(Pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ne().getBaseHref(this._doc)}onPopState($){const me=ne().getGlobalEventTarget(this._doc,"window");return me.addEventListener("popstate",$,!1),()=>me.removeEventListener("popstate",$)}onHashChange($){const me=ne().getGlobalEventTarget(this._doc,"window");return me.addEventListener("hashchange",$,!1),()=>me.removeEventListener("hashchange",$)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname($){this._location.pathname=$}pushState($,me,tt){this._history.pushState($,me,tt)}replaceState($,me,tt){this._history.replaceState($,me,tt)}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return(A=G).\u0275fac=function($){return new($||A)},A.\u0275prov=I.Yz7({token:A,factory:function(){return new A},providedIn:"platform"}),G})();function ye(A,G){if(0==A.length)return G;if(0==G.length)return A;let we=0;return A.endsWith("/")&&we++,G.startsWith("/")&&we++,2==we?A+G.substring(1):1==we?A+G:A+"/"+G}function ge(A){const G=A.match(/#|\?|$/),we=G&&G.index||A.length;return A.slice(0,we-("/"===A[we-1]?1:0))+A.slice(we)}function Me(A){return A&&"?"!==A[0]?"?"+A:A}let Ge=(()=>{var A;class G{historyGo($){throw new Error("Not implemented")}}return(A=G).\u0275fac=function($){return new($||A)},A.\u0275prov=I.Yz7({token:A,factory:function(){return(0,I.f3M)(nt)},providedIn:"root"}),G})();const ze=new I.OlP("appBaseHref");let nt=(()=>{var A;class G extends Ge{constructor($,me){super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=me??this._platformLocation.getBaseHrefFromDOM()??(0,I.f3M)(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return ye(this._baseHref,$)}path($=!1){const me=this._platformLocation.pathname+Me(this._platformLocation.search),tt=this._platformLocation.hash;return tt&&$?`${me}${tt}`:me}pushState($,me,tt,$t){const xn=this.prepareExternalUrl(tt+Me($t));this._platformLocation.pushState($,me,xn)}replaceState($,me,tt,$t){const xn=this.prepareExternalUrl(tt+Me($t));this._platformLocation.replaceState($,me,xn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return(A=G).\u0275fac=function($){return new($||A)(I.LFG(Ie),I.LFG(ze,8))},A.\u0275prov=I.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),G})(),Ze=(()=>{var A;class G extends Ge{constructor($,me){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=me&&(this._baseHref=me)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let me=this._platformLocation.hash;return null==me&&(me="#"),me.length>0?me.substring(1):me}prepareExternalUrl($){const me=ye(this._baseHref,$);return me.length>0?"#"+me:me}pushState($,me,tt,$t){let xn=this.prepareExternalUrl(tt+Me($t));0==xn.length&&(xn=this._platformLocation.pathname),this._platformLocation.pushState($,me,xn)}replaceState($,me,tt,$t){let xn=this.prepareExternalUrl(tt+Me($t));0==xn.length&&(xn=this._platformLocation.pathname),this._platformLocation.replaceState($,me,xn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){this._platformLocation.historyGo?.($)}}return(A=G).\u0275fac=function($){return new($||A)(I.LFG(Ie),I.LFG(ze,8))},A.\u0275prov=I.Yz7({token:A,factory:A.\u0275fac}),G})(),Ye=(()=>{var A;class G{constructor($){this._subject=new I.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const me=this._locationStrategy.getBaseHref();this._basePath=function Ve(A){if(new RegExp("^(https?:)?//").test(A)){const[,we]=A.split(/\/\/[^\/]+/);return we}return A}(ge(yt(me))),this._locationStrategy.onPopState(tt=>{this._subject.emit({url:this.path(!0),pop:!0,state:tt.state,type:tt.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,me=""){return this.path()==this.normalize($+Me(me))}normalize($){return G.stripTrailingSlash(function Ee(A,G){if(!A||!G.startsWith(A))return G;const we=G.substring(A.length);return""===we||["/",";","?","#"].includes(we[0])?we:G}(this._basePath,yt($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,me="",tt=null){this._locationStrategy.pushState(tt,"",$,me),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Me(me)),tt)}replaceState($,me="",tt=null){this._locationStrategy.replaceState(tt,"",$,me),this._notifyUrlChangeListeners(this.prepareExternalUrl($+Me(me)),tt)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){this._locationStrategy.historyGo?.($)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(me=>{this._notifyUrlChangeListeners(me.url,me.state)})),()=>{const me=this._urlChangeListeners.indexOf($);this._urlChangeListeners.splice(me,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",me){this._urlChangeListeners.forEach(tt=>tt($,me))}subscribe($,me,tt){return this._subject.subscribe({next:$,error:me,complete:tt})}}return(A=G).normalizeQueryParams=Me,A.joinWithSlash=ye,A.stripTrailingSlash=ge,A.\u0275fac=function($){return new($||A)(I.LFG(Ge))},A.\u0275prov=I.Yz7({token:A,factory:function(){return function De(){return new Ye((0,I.LFG)(Ge))}()},providedIn:"root"}),G})();function yt(A){return A.replace(/\/index.html$/,"")}function on(A,G){G=encodeURIComponent(G);for(const we of A.split(";")){const $=we.indexOf("="),[me,tt]=-1==$?[we,""]:[we.slice(0,$),we.slice($+1)];if(me.trim()===G)return decodeURIComponent(tt)}return null}class Bs{constructor(G,we,$,me){this.$implicit=G,this.ngForOf=we,this.index=$,this.count=me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ys=(()=>{var A;class G{set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}constructor($,me,tt){this._viewContainer=$,this._template=me,this._differs=tt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const me=this._viewContainer;$.forEachOperation((tt,$t,xn)=>{if(null==tt.previousIndex)me.createEmbeddedView(this._template,new Bs(tt.item,this._ngForOf,-1,-1),null===xn?void 0:xn);else if(null==xn)me.remove(null===$t?void 0:$t);else if(null!==$t){const xr=me.get($t);me.move(xr,xn),Qi(xr,tt)}});for(let tt=0,$t=me.length;tt<$t;tt++){const xr=me.get(tt).context;xr.index=tt,xr.count=$t,xr.ngForOf=this._ngForOf}$.forEachIdentityChange(tt=>{Qi(me.get(tt.currentIndex),tt)})}static ngTemplateContextGuard($,me){return!0}}return(A=G).\u0275fac=function($){return new($||A)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},A.\u0275dir=I.lG2({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),G})();function Qi(A,G){A.context.$implicit=G.item}let ts=(()=>{var A;class G{constructor($,me){this._viewContainer=$,this._context=new Gi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=me}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){$s("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){$s("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,me){return!0}}return(A=G).\u0275fac=function($){return new($||A)(I.Y36(I.s_b),I.Y36(I.Rgc))},A.\u0275dir=I.lG2({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),G})();class Gi{constructor(){this.$implicit=null,this.ngIf=null}}function $s(A,G){if(G&&!G.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,I.AaK)(G)}'.`)}let ct=(()=>{var A;class G{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if($.ngTemplateOutlet||$.ngTemplateOutletInjector){const me=this._viewContainerRef;if(this._viewRef&&me.remove(me.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:tt,ngTemplateOutletContext:$t,ngTemplateOutletInjector:xn}=this;this._viewRef=me.createEmbeddedView(tt,$t,xn?{injector:xn}:void 0)}else this._viewRef=null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return(A=G).\u0275fac=function($){return new($||A)(I.Y36(I.s_b))},A.\u0275dir=I.lG2({type:A,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[I.TTD]}),G})(),Ci=(()=>{var A;class G{}return(A=G).\u0275fac=function($){return new($||A)},A.\u0275mod=I.oAB({type:A}),A.\u0275inj=I.cJS({}),G})();const Es="browser",Mo="server";function Wi(A){return A===Mo}let fs=(()=>{var A;class G{}return(A=G).\u0275prov=(0,I.Yz7)({token:A,providedIn:"root",factory:()=>new Us((0,I.LFG)(Pe),window)}),G})();class Us{constructor(G,we){this.document=G,this.window=we,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const we=function Ca(A,G){const we=A.getElementById(G)||A.getElementsByName(G)[0];if(we)return we;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const $=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let me=$.currentNode;for(;me;){const tt=me.shadowRoot;if(tt){const $t=tt.getElementById(G)||tt.querySelector(`[name="${G}"]`);if($t)return $t}me=$.nextNode()}}return null}(this.document,G);we&&(this.scrollToElement(we),we.focus())}setHistoryScrollRestoration(G){this.supportsScrolling()&&(this.window.history.scrollRestoration=G)}scrollToElement(G){const we=G.getBoundingClientRect(),$=we.left+this.window.pageXOffset,me=we.top+this.window.pageYOffset,tt=this.offset();this.window.scrollTo($-tt[0],me-tt[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Tr{}},5879:(wn,gt,L)=>{"use strict";L.d(gt,{$8M:()=>Xc,$WT:()=>Kn,$Z:()=>ov,AFp:()=>yh,AaK:()=>Me,CHM:()=>wl,CRH:()=>uw,EJc:()=>PD,EpF:()=>Fv,F$t:()=>Vv,F4k:()=>Lv,FYo:()=>Qg,FiY:()=>Dc,G48:()=>gT,Gf:()=>lw,GfV:()=>Ky,GkF:()=>ey,Gpc:()=>nt,HDt:()=>Ow,Hsn:()=>L0,JOm:()=>rl,KtG:()=>vc,LFG:()=>nn,LMc:()=>GT,Lbi:()=>Np,Lck:()=>gb,MMx:()=>LE,NdJ:()=>ry,Ojb:()=>x_,OlP:()=>Yi,Oqu:()=>n,P3R:()=>Bg,PXZ:()=>oT,Q6J:()=>Qm,QGY:()=>ny,Qsj:()=>Wy,R0b:()=>xa,RDi:()=>u,Rgc:()=>Dy,SBq:()=>pu,Sil:()=>FD,Suo:()=>cw,TTD:()=>Sr,TgZ:()=>pg,VuI:()=>HT,X6Q:()=>pT,XFs:()=>Sn,Xpm:()=>qt,Xq5:()=>Tv,Xts:()=>Bc,Y36:()=>uf,YKP:()=>kE,YNc:()=>M0,Yjl:()=>kt,Yz7:()=>Bn,Z0I:()=>dt,ZZ4:()=>SI,_Bn:()=>NE,_UZ:()=>Xm,_c5:()=>RT,_uU:()=>my,aQg:()=>AI,c2e:()=>Rw,cJS:()=>wt,cg1:()=>K0,dDg:()=>nT,dqk:()=>Kt,eFA:()=>jw,eJc:()=>dI,ekj:()=>cy,eoX:()=>Bw,f3M:()=>yn,g9A:()=>Yu,h0i:()=>pp,hGG:()=>OT,iGM:()=>aw,ifc:()=>oi,ip1:()=>xw,jDz:()=>BE,kL8:()=>oE,lG2:()=>ut,lqb:()=>$c,lri:()=>Fw,n5z:()=>Ta,oAB:()=>Rn,oxw:()=>$v,q4F:()=>Xg,qFp:()=>WT,qLn:()=>sf,qOj:()=>Cv,qZA:()=>gg,rWj:()=>Lw,rg0:()=>me,s9C:()=>iy,sBO:()=>mT,s_b:()=>f_,soG:()=>g_,tb:()=>EI,tp0:()=>Wa,uIk:()=>mf,vHH:()=>Ve,vpe:()=>lc,wAp:()=>bg,xp6:()=>pm,z2F:()=>Ag,zSh:()=>Mp,zs3:()=>Uc});var I=L(8645),v=L(7394),ne=L(5592),he=L(3019),ke=L(5619),Pe=L(2096),Ie=L(3020),qe=L(4664),Je=L(3997);function ye(t){for(let r in t)if(t[r]===ye)return r;throw Error("Could not find renamed property on target object.")}function ge(t,r){for(const o in r)r.hasOwnProperty(o)&&!t.hasOwnProperty(o)&&(t[o]=r[o])}function Me(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Me).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Ge(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const ze=ye({__forward_ref__:ye});function nt(t){return t.__forward_ref__=nt,t.toString=function(){return Me(this())},t}function Ze(t){return Ye(t)?t():t}function Ye(t){return"function"==typeof t&&t.hasOwnProperty(ze)&&t.__forward_ref__===nt}function De(t){return t&&!!t.\u0275providers}const yt="https://g.co/ng/security#xss";class Ve extends Error{constructor(r,o){super(function rt(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,o)),this.code=r}}function be(t){return"string"==typeof t?t:null==t?"":String(t)}function Ue(t,r){throw new Ve(-201,!1)}function Bt(t,r){null==t&&function Ft(t,r,o,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function Bn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function wt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Rt(t){return Wt(t,vn)||Wt(t,Jn)}function dt(t){return null!==Rt(t)}function Wt(t,r){return t.hasOwnProperty(r)?t[r]:null}function En(t){return t&&(t.hasOwnProperty(Xn)||t.hasOwnProperty(wr))?t[Xn]:null}const vn=ye({\u0275prov:ye}),Xn=ye({\u0275inj:ye}),Jn=ye({ngInjectableDef:ye}),wr=ye({ngInjectorDef:ye});var Sn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Sn||{});let Pn;function pr(t){const r=Pn;return Pn=t,r}function Lr(t,r,o){const a=Rt(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&Sn.Optional?null:void 0!==r?r:void Ue(Me(t))}const Kt=globalThis,sn={},In="__NG_DI_FLAG__",Mn="ngTempTokenPath",Ke=/\n/gm,te="__source";let Ne;function lt(t){const r=Ne;return Ne=t,r}function St(t,r=Sn.Default){if(void 0===Ne)throw new Ve(-203,!1);return null===Ne?Lr(t,void 0,r):Ne.get(t,r&Sn.Optional?null:void 0,r)}function nn(t,r=Sn.Default){return(function Un(){return Pn}()||St)(Ze(t),r)}function yn(t,r=Sn.Default){return nn(t,lr(r))}function lr(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function er(t){const r=[];for(let o=0;o<t.length;o++){const a=Ze(t[o]);if(Array.isArray(a)){if(0===a.length)throw new Ve(900,!1);let d,p=Sn.Default;for(let w=0;w<a.length;w++){const S=a[w],O=ei(S);"number"==typeof O?-1===O?d=S.token:p|=O:d=S}r.push(nn(d,p))}else r.push(nn(a))}return r}function Zr(t,r){return t[In]=r,t.prototype[In]=r,t}function ei(t){return t[In]}function Bi(t){return{toString:t}.toString()}var zi=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(zi||{}),oi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(oi||{});const Pi={},ur=[],Hr=ye({\u0275cmp:ye}),qr=ye({\u0275dir:ye}),Ji=ye({\u0275pipe:ye}),Mi=ye({\u0275mod:ye}),ti=ye({\u0275fac:ye}),on=ye({__NG_ELEMENT_ID__:ye}),vi=ye({__NG_ENV_ID__:ye});function Ni(t,r,o){let a=t.length;for(;;){const d=t.indexOf(r,o);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const p=r.length;if(d+p===a||t.charCodeAt(d+p)<=32)return d}o=d+1}}function es(t,r,o){let a=0;for(;a<o.length;){const d=o[a];if("number"==typeof d){if(0!==d)break;a++;const p=o[a++],w=o[a++],S=o[a++];t.setAttribute(r,w,S,p)}else{const p=d,w=o[++a];$r(p)?t.setProperty(r,p,w):t.setAttribute(r,p,w),a++}}return a}function Kr(t){return 3===t||4===t||6===t}function $r(t){return 64===t.charCodeAt(0)}function Bs(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const d=r[a];"number"==typeof d?o=d:0===o||Ys(t,o,d,null,-1===o||2===o?r[++a]:null)}}return t}function Ys(t,r,o,a,d){let p=0,w=t.length;if(-1===r)w=-1;else for(;p<t.length;){const S=t[p++];if("number"==typeof S){if(S===r){w=-1;break}if(S>r){w=p-1;break}}}for(;p<t.length;){const S=t[p];if("number"==typeof S)break;if(S===o){if(null===a)return void(null!==d&&(t[p+1]=d));if(a===t[p+1])return void(t[p+2]=d)}p++,null!==a&&p++,null!==d&&p++}-1!==w&&(t.splice(w,0,r),p=w+1),t.splice(p++,0,o),null!==a&&t.splice(p++,0,a),null!==d&&t.splice(p++,0,d)}const Qi="ng-template";function Ei(t,r,o){let a=0,d=!0;for(;a<t.length;){let p=t[a++];if("string"==typeof p&&d){const w=t[a++];if(o&&"class"===p&&-1!==Ni(w.toLowerCase(),r,0))return!0}else{if(1===p){for(;a<t.length&&"string"==typeof(p=t[a++]);)if(p.toLowerCase()===r)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function ts(t){return 4===t.type&&t.value!==Qi}function Gi(t,r,o){return r===(4!==t.type||o?t.value:Qi)}function $s(t,r,o){let a=4;const d=t.attrs||[],p=function Cn(t){for(let r=0;r<t.length;r++)if(Kr(t[r]))return r;return t.length}(d);let w=!1;for(let S=0;S<r.length;S++){const O=r[S];if("number"!=typeof O){if(!w)if(4&a){if(a=2|1&a,""!==O&&!Gi(t,O,o)||""===O&&1===r.length){if(Ir(a))return!1;w=!0}}else{const Z=8&a?O:r[++S];if(8&a&&null!==t.attrs){if(!Ei(t.attrs,Z,o)){if(Ir(a))return!1;w=!0}continue}const Le=Dr(8&a?"class":O,d,ts(t),o);if(-1===Le){if(Ir(a))return!1;w=!0;continue}if(""!==Z){let ft;ft=Le>p?"":d[Le+1].toLowerCase();const Et=8&a?ft:null;if(Et&&-1!==Ni(Et,Z,0)||2&a&&Z!==ft){if(Ir(a))return!1;w=!0}}}}else{if(!w&&!Ir(a)&&!Ir(O))return!1;if(w&&Ir(O))continue;w=!1,a=O|1&a}}return Ir(a)||w}function Ir(t){return 0==(1&t)}function Dr(t,r,o,a){if(null===r)return-1;let d=0;if(a||!o){let p=!1;for(;d<r.length;){const w=r[d];if(w===t)return d;if(3===w||6===w)p=!0;else{if(1===w||2===w){let S=r[++d];for(;"string"==typeof S;)S=r[++d];continue}if(4===w)break;if(0===w){d+=4;continue}}d+=p?1:2}return-1}return function J(t,r){let o=t.indexOf(4);if(o>-1)for(o++;o<t.length;){const a=t[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,t)}function as(t,r,o=!1){for(let a=0;a<r.length;a++)if($s(t,r[a],o))return!0;return!1}function _e(t,r){e:for(let o=0;o<r.length;o++){const a=r[o];if(t.length===a.length){for(let d=0;d<t.length;d++)if(t[d]!==a[d])continue e;return!0}}return!1}function it(t,r){return t?":not("+r.trim()+")":r}function ct(t){let r=t[0],o=1,a=2,d="",p=!1;for(;o<t.length;){let w=t[o];if("string"==typeof w)if(2&a){const S=t[++o];d+="["+w+(S.length>0?'="'+S+'"':"")+"]"}else 8&a?d+="."+w:4&a&&(d+=" "+w);else""!==d&&!Ir(w)&&(r+=it(p,d),d=""),a=w,p=p||!Ir(a);o++}return""!==d&&(r+=it(p,d)),r}function qt(t){return Bi(()=>{const r=Ln(t),o={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===zi.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||oi.Emulated,styles:t.styles||ur,_:null,schemas:t.schemas||null,tView:null,id:""};wi(o);const a=t.dependencies;return o.directiveDefs=Er(a,!1),o.pipeDefs=Er(a,!0),o.id=function ki(t){let r=0;const o=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const d of o)r=Math.imul(31,r)+d.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(o),o})}function Ut(t){return Dt(t)||bn(t)}function ln(t){return null!==t}function Rn(t){return Bi(()=>({type:t.type,bootstrap:t.bootstrap||ur,declarations:t.declarations||ur,imports:t.imports||ur,exports:t.exports||ur,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function He(t,r){if(null==t)return Pi;const o={};for(const a in t)if(t.hasOwnProperty(a)){let d=t[a],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),o[d]=a,r&&(r[d]=p)}return o}function ut(t){return Bi(()=>{const r=Ln(t);return wi(r),r})}function kt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Dt(t){return t[Hr]||null}function bn(t){return t[qr]||null}function qn(t){return t[Ji]||null}function Kn(t){const r=Dt(t)||bn(t)||qn(t);return null!==r&&r.standalone}function Qn(t,r){const o=t[Mi]||null;if(!o&&!0===r)throw new Error(`Type ${Me(t)} does not have '\u0275mod' property.`);return o}function Ln(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Pi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||ur,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:He(t.inputs,r),outputs:He(t.outputs)}}function wi(t){t.features?.forEach(r=>r(t))}function Er(t,r){if(!t)return null;const o=r?qn:Ut;return()=>("function"==typeof t?t():t).map(a=>o(a)).filter(ln)}const zr=0,An=1,$n=2,Gn=3,Vr=4,Vs=5,Ti=6,ls=7,Ci=8,Es=9,Mo=10,ar=11,xi=12,io=13,Wi=14,Fi=15,ni=16,xo=17,fs=18,Us=19,Ca=20,Ms=21,Tr=22,js=23,mo=24,kr=25,xs=1,Rs=2,cs=7,Xi=9,ns=11;function us(t){return Array.isArray(t)&&"object"==typeof t[xs]}function ds(t){return Array.isArray(t)&&!0===t[xs]}function Io(t){return 0!=(4&t.flags)}function ws(t){return t.componentOffset>-1}function Cs(t){return 1==(1&t.flags)}function rs(t){return!!t.template}function so(t){return 0!=(512&t[$n])}function ae(t,r){return t.hasOwnProperty(ti)?t[ti]:null}let fr=null,pi=!1;function Gr(t){const r=fr;return fr=t,r}const bs={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Lo(t){if(!yo(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Zs(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Na(t){t.dirty=!0,function oo(t){if(void 0===t.liveConsumerNode)return;const r=pi;pi=!0;try{for(const o of t.liveConsumerNode)o.dirty||Na(o)}finally{pi=r}}(t),t.consumerMarkedDirty?.(t)}function ao(t){return t&&(t.nextProducerIndex=0),Gr(t)}function aa(t,r){if(Gr(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(yo(t))for(let o=t.nextProducerIndex;o<t.producerNode.length;o++)Ts(t.producerNode[o],t.producerIndexOfThis[o]);for(let o=t.nextProducerIndex;o<t.producerNode.length;o++)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Zs(t){la(t);for(let r=0;r<t.producerNode.length;r++){const o=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==o.version||(Lo(o),a!==o.version))return!0}return!1}function Il(t){if(la(t),yo(t))for(let r=0;r<t.producerNode.length;r++)Ts(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ts(t,r){if(function al(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),la(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)Ts(t.producerNode[a],t.producerIndexOfThis[a]);const o=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[o],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[o],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],d=t.liveConsumerNode[r];la(d),d.producerIndexOfThis[a]=r}}function yo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function la(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Os=null;function me(t){const r=Gr(null);try{return t()}finally{Gr(r)}}const $t=()=>{},xn={...bs,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:$t};class Pr{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Sr(){return Wr}function Wr(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ur),Rr}function Rr(){const t=Co(this),r=t?.current;if(r){const o=t.previous;if(o===Pi)t.previous=r;else for(let a in r)o[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Ur(t,r,o,a){const d=this.declaredInputs[o],p=Co(t)||function Ns(t,r){return t[$i]=r}(t,{previous:Pi,current:null}),w=p.current||(p.current={}),S=p.previous,O=S[d];w[d]=new Pr(O&&O.currentValue,r,S===Pi),t[a]=r}Sr.ngInherit=!0;const $i="__ngSimpleChanges__";function Co(t){return t[$i]||null}const Ss=function(t,r,o){};function Nr(t){for(;Array.isArray(t);)t=t[zr];return t}function ha(t,r){return Nr(r[t])}function uo(t,r){return Nr(r[t.index])}function Xa(t,r){return t.data[r]}function Vo(t,r){const o=r[t];return us(o)?o:o[zr]}function Da(t,r){return null==r?null:t[r]}function ad(t){t[xo]=0}function Du(t){1024&t[$n]||(t[$n]|=1024,Tu(t,1))}function La(t){1024&t[$n]&&(t[$n]&=-1025,Tu(t,-1))}function Tu(t,r){let o=t[Gn];if(null===o)return;o[Vs]+=r;let a=o;for(o=o[Gn];null!==o&&(1===r&&1===a[Vs]||-1===r&&0===a[Vs]);)o[Vs]+=r,a=o,o=o[Gn]}const Mr={lFrame:Hn(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function El(){return Mr.bindingsEnabled}function Ko(){return null!==Mr.skipHydrationRootTNode}function dn(){return Mr.lFrame.lView}function gi(){return Mr.lFrame.tView}function wl(t){return Mr.lFrame.contextLView=t,t[Ci]}function vc(t){return Mr.lFrame.contextLView=null,t}function Vi(){let t=ul();for(;null!==t&&64===t.type;)t=t.parent;return t}function ul(){return Mr.lFrame.currentTNode}function Do(t,r){const o=Mr.lFrame;o.currentTNode=t,o.isParent=r}function Gs(){return Mr.lFrame.isParent}function is(){Mr.lFrame.isParent=!1}function Cl(){return Mr.lFrame.bindingIndex++}function N(t,r){const o=Mr.lFrame;o.bindingIndex=o.bindingRootIndex=t,U(r)}function U(t){Mr.lFrame.currentDirectiveIndex=t}function Ce(){return Mr.lFrame.currentQueryIndex}function Be(t){Mr.lFrame.currentQueryIndex=t}function hn(t){const r=t[An];return 2===r.type?r.declTNode:1===r.type?t[Ti]:null}function Lt(t,r,o){if(o&Sn.SkipSelf){let d=r,p=t;for(;!(d=d.parent,null!==d||o&Sn.Host||(d=hn(p),null===d||(p=p[Wi],10&d.type))););if(null===d)return!1;r=d,t=p}const a=Mr.lFrame=cn();return a.currentTNode=r,a.lView=t,!0}function yr(t){const r=cn(),o=t[An];Mr.lFrame=r,r.currentTNode=o.firstChild,r.lView=t,r.tView=o,r.contextLView=t,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function cn(){const t=Mr.lFrame,r=null===t?null:t.child;return null===r?Hn(t):r}function Hn(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Si(){const t=Mr.lFrame;return Mr.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const kn=Si;function Mt(){const t=Si();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function gs(){return Mr.lFrame.selectedIndex}function Yo(t){Mr.lFrame.selectedIndex=t}function ss(){const t=Mr.lFrame;return Xa(t.tView,t.selectedIndex)}let ld=!0;function pa(){return ld}function Po(t){ld=t}function el(t,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const p=t.data[o].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:S,ngAfterViewInit:O,ngAfterViewChecked:Z,ngOnDestroy:ie}=p;w&&(t.contentHooks??=[]).push(-o,w),S&&((t.contentHooks??=[]).push(o,S),(t.contentCheckHooks??=[]).push(o,S)),O&&(t.viewHooks??=[]).push(-o,O),Z&&((t.viewHooks??=[]).push(o,Z),(t.viewCheckHooks??=[]).push(o,Z)),null!=ie&&(t.destroyHooks??=[]).push(o,ie)}}function No(t,r,o){Ql(t,r,3,o)}function Ri(t,r,o,a){(3&t[$n])===o&&Ql(t,r,o,a)}function vr(t,r){let o=t[$n];(3&o)===r&&(o&=8191,o+=1,t[$n]=o)}function Ql(t,r,o,a){const p=a??-1,w=r.length-1;let S=0;for(let O=void 0!==a?65535&t[xo]:0;O<w;O++)if("number"==typeof r[O+1]){if(S=r[O],null!=a&&S>=a)break}else r[O]<0&&(t[xo]+=65536),(S<p||-1==p)&&(Au(t,o,r,O),t[xo]=(4294901760&t[xo])+O+2),O++}function ii(t,r){Ss(4,t,r);const o=Gr(null);try{r.call(t)}finally{Gr(o),Ss(5,t,r)}}function Au(t,r,o,a){const d=o[a]<0,p=o[a+1],S=t[d?-o[a]:o[a]];d?t[$n]>>13<t[xo]>>16&&(3&t[$n])===r&&(t[$n]+=8192,ii(S,p)):ii(S,p)}const Li=-1;class On{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function Ec(t){return t!==Li}function As(t){return 32767&t}function tl(t,r){let o=function xu(t){return t>>16}(t),a=r;for(;o>0;)a=a[Wi],o--;return a}let Kc=!0;function ga(t){const r=Kc;return Kc=t,r}const wc=255,Zo=5;let hd=0;const jo={};function ec(t,r){const o=Nl(t,r);if(-1!==o)return o;const a=r[An];a.firstCreatePass&&(t.injectorIndex=r.length,Va(a.data,t),Va(r,null),Va(a.blueprint,null));const d=Ua(t,r),p=t.injectorIndex;if(Ec(d)){const w=As(d),S=tl(d,r),O=S[An].data;for(let Z=0;Z<8;Z++)r[p+Z]=S[w+Z]|O[w+Z]}return r[p+8]=d,p}function Va(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Nl(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Ua(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let o=0,a=null,d=r;for(;null!==d;){if(a=Ru(d),null===a)return Li;if(o++,d=d[Wi],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return Li}function ja(t,r,o){!function hl(t,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(on)&&(a=o[on]),null==a&&(a=o[on]=hd++);const d=a&wc;r.data[t+(d>>Zo)]|=1<<d}(t,r,o)}function Xs(t,r,o){if(o&Sn.Optional||void 0!==t)return t;Ue()}function fl(t,r,o,a){if(o&Sn.Optional&&void 0===a&&(a=null),!(o&(Sn.Self|Sn.Host))){const d=t[Es],p=pr(void 0);try{return d?d.get(r,a,o&Sn.Optional):Lr(r,a,o&Sn.Optional)}finally{pr(p)}}return Xs(a,0,o)}function Ha(t,r,o,a=Sn.Default,d){if(null!==t){if(2048&r[$n]&&!(a&Sn.Self)){const w=function Qc(t,r,o,a,d){let p=t,w=r;for(;null!==p&&null!==w&&2048&w[$n]&&!(512&w[$n]);){const S=Yc(p,w,o,a|Sn.Self,jo);if(S!==jo)return S;let O=p.parent;if(!O){const Z=w[Ca];if(Z){const ie=Z.get(o,jo,a);if(ie!==jo)return ie}O=Ru(w),w=w[Wi]}p=O}return d}(t,r,o,a,jo);if(w!==jo)return w}const p=Yc(t,r,o,a,jo);if(p!==jo)return p}return fl(r,o,a,d)}function Yc(t,r,o,a,d){const p=function za(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(on)?t[on]:void 0;return"number"==typeof r?r>=0?r&wc:fd:r}(o);if("function"==typeof p){if(!Lt(r,t,a))return a&Sn.Host?Xs(d,0,a):fl(r,o,a,d);try{let w;if(w=p(a),null!=w||a&Sn.Optional)return w;Ue()}finally{kn()}}else if("number"==typeof p){let w=null,S=Nl(t,r),O=Li,Z=a&Sn.Host?r[Fi][Ti]:null;for((-1===S||a&Sn.SkipSelf)&&(O=-1===S?Ua(t,r):r[S+8],O!==Li&&tc(a,!1)?(w=r[An],S=As(O),r=tl(O,r)):S=-1);-1!==S;){const ie=r[An];if(Dl(p,S,ie.data)){const Le=ko(S,r,o,w,a,Z);if(Le!==jo)return Le}O=r[S+8],O!==Li&&tc(a,r[An].data[S+8]===Z)&&Dl(p,S,r)?(w=ie,S=As(O),r=tl(O,r)):S=-1}}return d}function ko(t,r,o,a,d,p){const w=r[An],S=w.data[t+8],ie=bl(S,w,o,null==a?ws(S)&&Kc:a!=w&&0!=(3&S.type),d&Sn.Host&&p===S);return null!==ie?nl(r,w,ie,S):jo}function bl(t,r,o,a,d){const p=t.providerIndexes,w=r.data,S=1048575&p,O=t.directiveStart,ie=p>>20,ft=d?S+ie:t.directiveEnd;for(let Et=a?S:S+ie;Et<ft;Et++){const Jt=w[Et];if(Et<O&&o===Jt||Et>=O&&Jt.type===o)return Et}if(d){const Et=w[O];if(Et&&rs(Et)&&Et.type===o)return O}return null}function nl(t,r,o,a){let d=t[o];const p=r.data;if(function Xl(t){return t instanceof On}(d)){const w=d;w.resolving&&function Fe(t,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${t}${o}`)}(function Xe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():be(t)}(p[o]));const S=ga(w.canSeeViewProviders);w.resolving=!0;const Z=w.injectImpl?pr(w.injectImpl):null;Lt(t,a,Sn.Default);try{d=t[o]=w.factory(void 0,p,t,a),r.firstCreatePass&&o>=a.directiveStart&&function jr(t,r,o){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:p}=r.type.prototype;if(a){const w=Wr(r);(o.preOrderHooks??=[]).push(t,w),(o.preOrderCheckHooks??=[]).push(t,w)}d&&(o.preOrderHooks??=[]).push(0-t,d),p&&((o.preOrderHooks??=[]).push(t,p),(o.preOrderCheckHooks??=[]).push(t,p))}(o,p[o],r)}finally{null!==Z&&pr(Z),ga(S),w.resolving=!1,kn()}}return d}function Dl(t,r,o){return!!(o[r+(t>>Zo)]&1<<t)}function tc(t,r){return!(t&Sn.Self||t&Sn.Host&&r)}class Ls{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return Ha(this._tNode,this._lView,r,lr(a),o)}}function fd(){return new Ls(Vi(),dn())}function Ta(t){return Bi(()=>{const r=t.prototype.constructor,o=r[ti]||Qo(r),a=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==a;){const p=d[ti]||Qo(d);if(p&&p!==o)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Qo(t){return Ye(t)?()=>{const r=Qo(Ze(t));return r&&r()}:ae(t)}function Ru(t){const r=t[An],o=r.type;return 2===o?r.declTNode:1===o?t[Ti]:null}function Xc(t){return function Cc(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const o=t.attrs;if(o){const a=o.length;let d=0;for(;d<a;){const p=o[d];if(Kr(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<a&&"string"==typeof o[d];)d++;else{if(p===r)return o[d+1];d+=2}}}return null}(Vi(),t)}const pl="__parameters__";function ve(t,r,o){return Bi(()=>{const a=function X(t){return function(...o){if(t){const a=t(...o);for(const d in a)this[d]=a[d]}}}(r);function d(...p){if(this instanceof d)return a.apply(this,p),this;const w=new d(...p);return S.annotation=w,S;function S(O,Z,ie){const Le=O.hasOwnProperty(pl)?O[pl]:Object.defineProperty(O,pl,{value:[]})[pl];for(;Le.length<=ie;)Le.push(null);return(Le[ie]=Le[ie]||[]).push(w),O}}return o&&(d.prototype=Object.create(o.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}function ks(t,r){t.forEach(o=>Array.isArray(o)?ks(o,r):r(o))}function ma(t,r,o){r>=t.length?t.push(o):t.splice(r,0,o)}function Jc(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function bc(t,r){const o=[];for(let a=0;a<t;a++)o.push(r);return o}function ho(t,r,o){let a=gl(t,r);return a>=0?t[1|a]=o:(a=~a,function Al(t,r,o,a){let d=t.length;if(d==r)t.push(o,a);else if(1===d)t.push(a,t[0]),t[0]=o;else{for(d--,t.push(t[d-1],t[d]);d>r;)t[d]=t[d-2],d--;t[r]=o,t[r+1]=a}}(t,a,r,o)),a}function eu(t,r){const o=gl(t,r);if(o>=0)return t[1|o]}function gl(t,r){return function kh(t,r,o){let a=0,d=t.length>>o;for(;d!==a;){const p=a+(d-a>>1),w=t[p<<o];if(r===w)return p<<o;w>r?d=p:a=p+1}return~(d<<o)}(t,r,1)}const Dc=Zr(ve("Optional"),8),Wa=Zr(ve("SkipSelf"),4);function Uu(t){return 128==(128&t.flags)}var rl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(rl||{});const Jd=/^>|^->|<!--|-->|--!>|<!-$/g,ou=/(<|>)/g,Fl="\u200b$1\u200b";const au=new Map;let eh=0;const Ia="__ngContext__";function Go(t,r){us(r)?(t[Ia]=r[Us],function ea(t){au.set(t[Us],t)}(r)):t[Ia]=r}let Ae;function Oe(t,r){return Ae(t,r)}function Ht(t){const r=t[Gn];return ds(r)?r[Gn]:r}function _r(t){return vs(t[xi])}function Xr(t){return vs(t[Vr])}function vs(t){for(;null!==t&&!ds(t);)t=t[Vr];return t}function fo(t,r,o,a,d){if(null!=a){let p,w=!1;ds(a)?p=a:us(a)&&(w=!0,a=a[zr]);const S=Nr(a);0===t&&null!==o?null==d?ac(r,o,S):zu(r,o,S,d||null,!0):1===t&&null!==o?zu(r,o,S,d||null,!0):2===t?function Id(t,r,o){const a=ih(t,r);a&&function kc(t,r,o,a){t.removeChild(r,o,a)}(t,a,r,o)}(r,S,w):3===t&&r.destroyNode(S),null!=p&&function vp(t,r,o,a,d){const p=o[cs];p!==Nr(o)&&fo(r,t,a,p,d);for(let S=ns;S<o.length;S++){const O=o[S];du(O[An],O,t,r,a,p)}}(r,t,p,o,d)}}function $l(t,r){return t.createComment(function ju(t){return t.replace(Jd,r=>r.replace(ou,Fl))}(r))}function Pc(t,r,o){return t.createElement(r,o)}function Uh(t,r){const o=t[Xi],a=o.indexOf(r);La(r),o.splice(a,1)}function Ul(t,r){if(t.length<=ns)return;const o=ns+r,a=t[o];if(a){const d=a[ni];null!==d&&d!==t&&Uh(d,a),r>0&&(t[o-1][Vr]=a[Vr]);const p=Jc(t,ns+r);!function oc(t,r){du(t,r,r[ar],2,null,null),r[zr]=null,r[Ti]=null}(a[An],a);const w=p[fs];null!==w&&w.detachView(p[An]),a[Gn]=null,a[Vr]=null,a[$n]&=-129}return a}function ui(t,r){if(!(256&r[$n])){const o=r[ar];r[js]&&Il(r[js]),r[mo]&&Il(r[mo]),o.destroyNode&&du(t,r,o,3,null,null),function rh(t){let r=t[xi];if(!r)return ta(t[An],t);for(;r;){let o=null;if(us(r))o=r[xi];else{const a=r[ns];a&&(o=a)}if(!o){for(;r&&!r[Vr]&&r!==t;)us(r)&&ta(r[An],r),r=r[Gn];null===r&&(r=t),us(r)&&ta(r[An],r),o=r&&r[Vr]}r=o}}(r)}}function ta(t,r){if(!(256&r[$n])){r[$n]&=-129,r[$n]|=256,function mp(t,r){let o;if(null!=t&&null!=(o=t.destroyHooks))for(let a=0;a<o.length;a+=2){const d=r[o[a]];if(!(d instanceof On)){const p=o[a+1];if(Array.isArray(p))for(let w=0;w<p.length;w+=2){const S=d[p[w]],O=p[w+1];Ss(4,S,O);try{O.call(S)}finally{Ss(5,S,O)}}else{Ss(4,d,p);try{p.call(d)}finally{Ss(5,d,p)}}}}}(t,r),function cu(t,r){const o=t.cleanup,a=r[ls];if(null!==o)for(let p=0;p<o.length-1;p+=2)if("string"==typeof o[p]){const w=o[p+3];w>=0?a[w]():a[-w].unsubscribe(),p+=2}else o[p].call(a[o[p+1]]);null!==a&&(r[ls]=null);const d=r[Ms];if(null!==d){r[Ms]=null;for(let p=0;p<d.length;p++)(0,d[p])()}}(t,r),1===r[An].type&&r[ar].destroy();const o=r[ni];if(null!==o&&ds(r[Gn])){o!==r[Gn]&&Uh(o,r);const a=r[fs];null!==a&&a.detachView(t)}!function lu(t){au.delete(t[Us])}(r)}}function Af(t,r,o){return function _d(t,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[zr];{const{componentOffset:d}=a;if(d>-1){const{encapsulation:p}=t.data[a.directiveStart+d];if(p===oi.None||p===oi.Emulated)return null}return uo(a,o)}}(t,r.parent,o)}function zu(t,r,o,a,d){t.insertBefore(r,o,a,d)}function ac(t,r,o){t.appendChild(r,o)}function Gu(t,r,o,a,d){null!==a?zu(t,r,o,a,d):ac(t,r,o)}function ih(t,r){return t.parentNode(r)}function uu(t,r,o){return oh(t,r,o)}let Fc,c,D,oh=function sh(t,r,o){return 40&t.type?uo(t,o):null};function ah(t,r,o,a){const d=Af(t,a,r),p=r[ar],S=uu(a.parent||r[Ti],a,r);if(null!=d)if(Array.isArray(o))for(let O=0;O<o.length;O++)Gu(p,d,o[O],S,!1);else Gu(p,d,o,S,!1);void 0!==Fc&&Fc(p,a,r,o,d)}function lh(t,r){if(null!==r){const o=r.type;if(3&o)return uo(r,t);if(4&o)return Ai(-1,t[r.index]);if(8&o){const a=r.child;if(null!==a)return lh(t,a);{const d=t[r.index];return ds(d)?Ai(-1,d):Nr(d)}}if(32&o)return Oe(r,t)()||Nr(t[r.index]);{const a=Ao(t,r);return null!==a?Array.isArray(a)?a[0]:lh(Ht(t[Fi]),a):lh(t,r.next)}}return null}function Ao(t,r){return null!==r?t[Fi][Ti].projection[r.projection]:null}function Ai(t,r){const o=ns+t+1;if(o<r.length){const a=r[o],d=a[An].firstChild;if(null!==d)return lh(a,d)}return r[cs]}function ch(t,r,o,a,d,p,w){for(;null!=o;){const S=a[o.index],O=o.type;if(w&&0===r&&(S&&Go(Nr(S),a),o.flags|=2),32!=(32&o.flags))if(8&O)ch(t,r,o.child,a,d,p,!1),fo(r,t,d,S,p);else if(32&O){const Z=Oe(o,a);let ie;for(;ie=Z();)fo(r,t,d,ie,p);fo(r,t,d,S,p)}else 16&O?xf(t,r,a,o,d,p):fo(r,t,d,S,p);o=w?o.projectionNext:o.next}}function du(t,r,o,a,d,p){ch(o,a,t.firstChild,r,d,p,!1)}function xf(t,r,o,a,d,p){const w=o[Fi],O=w[Ti].projection[a.projection];if(Array.isArray(O))for(let Z=0;Z<O.length;Z++)fo(r,t,d,O[Z],p);else{let Z=O;const ie=w[Gn];Uu(a)&&(Z.flags|=128),ch(t,r,Z,ie,d,p,!0)}}function Ed(t,r,o){""===o?t.removeAttribute(r,"class"):t.setAttribute(r,"class",o)}function wd(t,r,o){const{mergedAttrs:a,classes:d,styles:p}=o;null!==a&&es(t,r,a),null!==d&&Ed(t,r,d),null!==p&&function zh(t,r,o){t.setAttribute(r,"style",o)}(t,r,p)}function u(t){c=t}function Re(t){return function k(){if(void 0===D&&(D=null,Kt.trustedTypes))try{D=Kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return D}()?.createScriptURL(t)||t}class et{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yt})`}}function di(t){return t instanceof et?t.changingThisBreaksApplicationSecurity:t}function po(t,r){const o=function il(t){return t instanceof et&&t.getTypeName()||null}(t);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${yt})`)}return o===r}const Pg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var fh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(fh||{});function Fg(t){const r=Nf();return r?r.sanitize(fh.URL,t)||"":po(t,"URL")?di(t):function wp(t){return(t=String(t)).match(Pg)?t:"unsafe:"+t}(be(t))}function Lg(t){const r=Nf();if(r)return Re(r.sanitize(fh.RESOURCE_URL,t)||"");if(po(t,"ResourceURL"))return Re(di(t));throw new Ve(904,!1)}function Bg(t,r,o){return function T_(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Lg:Fg}(r,o)(t)}function Nf(){const t=dn();return t&&t[Mo].sanitizer}class Yi{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Bn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Bc=new Yi("ENVIRONMENT_INITIALIZER"),Ku=new Yi("INJECTOR",-1),$g=new Yi("INJECTOR_DEF_TYPES");class Vg{get(r,o=sn){if(o===sn){const a=new Error(`NullInjectorError: No provider for ${Me(r)}!`);throw a.name="NullInjectorError",a}return o}}function S_(...t){return{\u0275providers:Tp(0,t),\u0275fromNgModule:!0}}function Tp(t,...r){const o=[],a=new Set;let d;const p=w=>{o.push(w)};return ks(r,w=>{const S=w;kf(S,p,[],a)&&(d||=[],d.push(S))}),void 0!==d&&Sp(d,p),o}function Sp(t,r){for(let o=0;o<t.length;o++){const{ngModule:a,providers:d}=t[o];Ff(d,p=>{r(p,a)})}}function kf(t,r,o,a){if(!(t=Ze(t)))return!1;let d=null,p=En(t);const w=!p&&Dt(t);if(p||w){if(w&&!w.standalone)return!1;d=t}else{const O=t.ngModule;if(p=En(O),!p)return!1;d=O}const S=a.has(d);if(w){if(S)return!1;if(a.add(d),w.dependencies){const O="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const Z of O)kf(Z,r,o,a)}}else{if(!p)return!1;{if(null!=p.imports&&!S){let Z;a.add(d);try{ks(p.imports,ie=>{kf(ie,r,o,a)&&(Z||=[],Z.push(ie))})}finally{}void 0!==Z&&Sp(Z,r)}if(!S){const Z=ae(d)||(()=>new d);r({provide:d,useFactory:Z,deps:ur},d),r({provide:$g,useValue:d,multi:!0},d),r({provide:Bc,useValue:()=>nn(d),multi:!0},d)}const O=p.providers;if(null!=O&&!S){const Z=t;Ff(O,ie=>{r(ie,Z)})}}}return d!==t&&void 0!==t.providers}function Ff(t,r){for(let o of t)De(o)&&(o=o.\u0275providers),Array.isArray(o)?Ff(o,r):r(o)}const Ly=ye({provide:String,useValue:ye});function qh(t){return null!==t&&"object"==typeof t&&Ly in t}function fu(t){return"function"==typeof t}const Mp=new Yi("Set Injector scope."),Ad={},xp={};let gh;function Lf(){return void 0===gh&&(gh=new Vg),gh}class $c{}class wa extends $c{get destroyed(){return this._destroyed}constructor(r,o,a,d){super(),this.parent=o,this.source=a,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hg(r,w=>this.processProvider(w)),this.records.set(Ku,jl(void 0,this)),d.has("environment")&&this.records.set($c,jl(void 0,this));const p=this.records.get(Mp);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get($g.multi,ur,Sn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const o of r)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const o=lt(this),a=pr(void 0);try{return r()}finally{lt(o),pr(a)}}get(r,o=sn,a=Sn.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(vi))return r[vi](this);a=lr(a);const p=lt(this),w=pr(void 0);try{if(!(a&Sn.SkipSelf)){let O=this.records.get(r);if(void 0===O){const Z=function mh(t){return"function"==typeof t||"object"==typeof t&&t instanceof Yi}(r)&&Rt(r);O=Z&&this.injectableDefInScope(Z)?jl(Rp(r),Ad):null,this.records.set(r,O)}if(null!=O)return this.hydrate(r,O)}return(a&Sn.Self?Lf():this.parent).get(r,o=a&Sn.Optional&&o===sn?null:o)}catch(S){if("NullInjectorError"===S.name){if((S[Mn]=S[Mn]||[]).unshift(Me(r)),p)throw S;return function Is(t,r,o,a){const d=t[Mn];throw r[te]&&d.unshift(r[te]),t.message=function Fs(t,r,o,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let d=Me(r);if(Array.isArray(r))d=r.map(Me).join(" -> ");else if("object"==typeof r){let p=[];for(let w in r)if(r.hasOwnProperty(w)){let S=r[w];p.push(w+":"+("string"==typeof S?JSON.stringify(S):Me(S)))}d=`{${p.join(", ")}}`}return`${o}${a?"("+a+")":""}[${d}]: ${t.replace(Ke,"\n  ")}`}("\n"+t.message,d,o,a),t.ngTokenPath=d,t[Mn]=null,t}(S,r,"R3InjectorError",this.source)}throw S}finally{pr(w),lt(p)}}resolveInjectorInitializers(){const r=lt(this),o=pr(void 0);try{const d=this.get(Bc.multi,ur,Sn.Self);for(const p of d)p()}finally{lt(r),pr(o)}}toString(){const r=[],o=this.records;for(const a of o.keys())r.push(Me(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processProvider(r){let o=fu(r=Ze(r))?r:Ze(r&&r.provide);const a=function Pp(t){return qh(t)?jl(void 0,t.useValue):jl(jg(t),Ad)}(r);if(fu(r)||!0!==r.multi)this.records.get(o);else{let d=this.records.get(o);d||(d=jl(void 0,Ad,!0),d.factory=()=>er(d.multi),this.records.set(o,d)),o=r,d.multi.push(r)}this.records.set(o,a)}hydrate(r,o){return o.value===Ad&&(o.value=xp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function $y(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Ze(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}removeOnDestroy(r){const o=this._onDestroyHooks.indexOf(r);-1!==o&&this._onDestroyHooks.splice(o,1)}}function Rp(t){const r=Rt(t),o=null!==r?r.factory:ae(t);if(null!==o)return o;if(t instanceof Yi)throw new Ve(204,!1);if(t instanceof Function)return function Op(t){const r=t.length;if(r>0)throw bc(r,"?"),new Ve(204,!1);const o=function Tn(t){return t&&(t[vn]||t[Jn])||null}(t);return null!==o?()=>o.factory(t):()=>new t}(t);throw new Ve(204,!1)}function jg(t,r,o){let a;if(fu(t)){const d=Ze(t);return ae(d)||Rp(d)}if(qh(t))a=()=>Ze(t.useValue);else if(function Ap(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...er(t.deps||[]));else if(function By(t){return!(!t||!t.useExisting)}(t))a=()=>nn(Ze(t.useExisting));else{const d=Ze(t&&(t.useClass||t.provide));if(!function Kh(t){return!!t.deps}(t))return ae(d)||Rp(d);a=()=>new d(...er(t.deps))}return a}function jl(t,r,o=!1){return{factory:t,value:r,multi:o?[]:void 0}}function Hg(t,r){for(const o of t)Array.isArray(o)?Hg(o,r):o&&De(o)?Hg(o.\u0275providers,r):r(o)}const yh=new Yi("AppId",{providedIn:"root",factory:()=>Vy}),Vy="ng",Yu=new Yi("Platform Initializer"),Np=new Yi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),x_=new Yi("CSP nonce",{providedIn:"root",factory:()=>function y(){if(void 0!==c)return c;if(typeof document<"u")return document;throw new Ve(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Hy=(t,r,o)=>null;function Kg(t,r,o=!1){return Hy(t,r,o)}class F_{}class Zg{}class B_{resolveComponentFactory(r){throw function zy(t){const r=Error(`No component factory found for ${Me(t)}.`);return r.ngComponent=t,r}(r)}}let zf=(()=>{class r{}return r.NULL=new B_,r})();function $_(){return Vc(Vi(),dn())}function Vc(t,r){return new pu(uo(t,r))}let pu=(()=>{class r{constructor(a){this.nativeElement=a}}return r.__NG_ELEMENT_ID__=$_,r})();function Up(t){return t instanceof pu?t.nativeElement:t}class Qg{}let Wy=(()=>{class r{constructor(){this.destroyNode=null}}return r.__NG_ELEMENT_ID__=()=>function qy(){const t=dn(),o=Vo(Vi().index,t);return(us(o)?o:t)[ar]}(),r})(),V_=(()=>{var t;class r{}return(t=r).\u0275prov=Bn({token:t,providedIn:"root",factory:()=>null}),r})();class Ky{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Xg=new Ky("16.2.4"),jp={};function Gp(t,r=null,o=null,a){const d=Qy(t,r,o,a);return d.resolveInjectorInitializers(),d}function Qy(t,r=null,o=null,a,d=new Set){const p=[o||ur,S_(t)];return a=a||("object"==typeof t?void 0:Me(t)),new wa(p,r||Lf(),a||null,d)}let Uc=(()=>{var t;class r{static create(a,d){if(Array.isArray(a))return Gp({name:""},d,a,"");{const p=a.name??"";return Gp({name:p},a.parent,a.providers,p)}}}return(t=r).THROW_IF_NOT_FOUND=sn,t.NULL=new Vg,t.\u0275prov=Bn({token:t,providedIn:"any",factory:()=>nn(Ku)}),t.__NG_ELEMENT_ID__=-1,r})();function Eh(t){return r=>{setTimeout(t,void 0,r)}}const lc=class Wp extends I.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){let d=r,p=o||(()=>null),w=a;if(r&&"object"==typeof r){const O=r;d=O.next?.bind(O),p=O.error?.bind(O),w=O.complete?.bind(O)}this.__isAsync&&(p=Eh(p),d&&(d=Eh(d)),w&&(w=Eh(w)));const S=super.subscribe({next:d,error:p,complete:w});return r instanceof v.w0&&r.add(S),S}};function rm(...t){}class xa{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lc(!1),this.onMicrotaskEmpty=new lc(!1),this.onStable=new lc(!1),this.onError=new lc(!1),typeof Zone>"u")throw new Ve(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&o,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function z_(){const t="function"==typeof Kt.requestAnimationFrame;let r=Kt[t?"requestAnimationFrame":"setTimeout"],o=Kt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&o){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Gf(t){const r=()=>{!function W_(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Kt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Md(t),t.isCheckStableRunning=!0,im(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Md(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,d,p,w,S)=>{if(function am(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(S))return o.invokeTask(d,p,w,S);try{return Wf(t),o.invokeTask(d,p,w,S)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&r(),ef(t)}},onInvoke:(o,a,d,p,w,S,O)=>{try{return Wf(t),o.invoke(d,p,w,S,O)}finally{t.shouldCoalesceRunChangeDetection&&r(),ef(t)}},onHasTask:(o,a,d,p)=>{o.hasTask(d,p),a===d&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,Md(t),im(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(o,a,d,p)=>(o.handleError(d,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xa.isInAngularZone())throw new Ve(909,!1)}static assertNotInAngularZone(){if(xa.isInAngularZone())throw new Ve(909,!1)}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,d){const p=this._inner,w=p.scheduleEventTask("NgZoneEvent: "+d,r,G_,rm,rm);try{return p.runTask(w,o,a)}finally{p.cancelTask(w)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const G_={};function im(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Md(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Wf(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ef(t){t._nesting--,im(t)}class sm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lc,this.onMicrotaskEmpty=new lc,this.onStable=new lc,this.onError=new lc}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,d){return r.apply(o,a)}}const om=new Yi("",{providedIn:"root",factory:qp});function qp(){const t=yn(xa);let r=!0;const o=new ne.y(d=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{d.next(r),d.complete()})}),a=new ne.y(d=>{let p;t.runOutsideAngular(()=>{p=t.onStable.subscribe(()=>{xa.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,d.next(!0))})})});const w=t.onUnstable.subscribe(()=>{xa.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{d.next(!1)}))});return()=>{p.unsubscribe(),w.unsubscribe()}});return(0,he.T)(o,a.pipe((0,Ie.B)()))}function Qu(t){return t instanceof Function?t():t}let lm=(()=>{var t;class r{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new Ve(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const a of this.callbacks)a.invoke()}finally{this.runningCallbacks=!1;for(const a of this.deferredCallbacks)this.callbacks.add(a);this.deferredCallbacks.clear()}}register(a){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(a)}unregister(a){this.callbacks.delete(a),this.deferredCallbacks.delete(a)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=r).\u0275prov=Bn({token:t,providedIn:"root",factory:()=>new t}),r})();function rf(t){for(;t;){t[$n]|=64;const r=Ht(t);if(so(t)&&!r)return t;t=r}return null}function um(t){return t.ngOriginalError}class sf{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&um(r);for(;o&&um(o);)o=um(o);return o||null}}const Yp=new Yi("",{providedIn:"root",factory:()=>!1});let Xp=null;function Jp(t,r){return t[r]??fm()}function rv(t,r){const o=fm();o.producerNode?.length&&(t[r]=Xp,o.lView=t,Xp=sv())}const iv={...bs,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{rf(t.lView)},lView:null};function sv(){return Object.create(iv)}function fm(){return Xp??=sv(),Xp}const ai={};function pm(t){gm(gi(),dn(),gs()+t,!1)}function gm(t,r,o,a){if(!a)if(3==(3&r[$n])){const p=t.preOrderCheckHooks;null!==p&&No(r,p,o)}else{const p=t.preOrderHooks;null!==p&&Ri(r,p,0,o)}Yo(o)}function uf(t,r=Sn.Default){const o=dn();return null===o?nn(t,r):Ha(Vi(),o,Ze(t),r)}function ov(){throw new Error("invalid")}function eg(t,r,o,a,d,p,w,S,O,Z,ie){const Le=r.blueprint.slice();return Le[zr]=d,Le[$n]=140|a,(null!==Z||t&&2048&t[$n])&&(Le[$n]|=2048),ad(Le),Le[Gn]=Le[Wi]=t,Le[Ci]=o,Le[Mo]=w||t&&t[Mo],Le[ar]=S||t&&t[ar],Le[Es]=O||t&&t[Es]||null,Le[Ti]=p,Le[Us]=function Rc(){return eh++}(),Le[Tr]=ie,Le[Ca]=Z,Le[Fi]=2==r.type?t[Fi]:Le,Le}function Od(t,r,o,a,d){let p=t.data[r];if(null===p)p=function mm(t,r,o,a,d){const p=ul(),w=Gs(),O=t.data[r]=function Ju(t,r,o,a,d,p){let w=r?r.injectorIndex:-1,S=0;return Ko()&&(S|=128),{type:o,index:a,insertBeforeIndex:null,injectorIndex:w,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:S,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?p:p&&p.parent,o,r,a,d);return null===t.firstChild&&(t.firstChild=O),null!==p&&(w?null==p.child&&null!==O.parent&&(p.child=O):null===p.next&&(p.next=O,O.prev=p)),O}(t,r,o,a,d),function T(){return Mr.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=o,p.value=a,p.attrs=d;const w=function hs(){const t=Mr.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();p.injectorIndex=null===w?-1:w.injectorIndex}return Do(p,!0),p}function qf(t,r,o,a){if(0===o)return-1;const d=r.length;for(let p=0;p<o;p++)r.push(a),t.blueprint.push(a),t.data.push(null);return d}function ym(t,r,o,a,d){const p=Jp(r,js),w=gs(),S=2&a;try{Yo(-1),S&&r.length>kr&&gm(t,r,kr,!1),Ss(S?2:0,d);const Z=S?p:null,ie=ao(Z);try{null!==Z&&(Z.dirty=!1),o(a,d)}finally{aa(Z,ie)}}finally{S&&null===r[js]&&rv(r,js),Yo(w),Ss(S?3:1,d)}}function tg(t,r,o){if(Io(r)){const a=Gr(null);try{const p=r.directiveEnd;for(let w=r.directiveStart;w<p;w++){const S=t.data[w];S.contentQueries&&S.contentQueries(1,o[w],w)}}finally{Gr(a)}}}function vm(t,r,o){El()&&(function Am(t,r,o,a){const d=o.directiveStart,p=o.directiveEnd;ws(o)&&function n0(t,r,o){const a=uo(r,t),d=av(o);let w=16;o.signals?w=4096:o.onPush&&(w=64);const S=Ch(t,eg(t,d,null,w,a,r,null,t[Mo].rendererFactory.createRenderer(a,o),null,null,null));t[r.index]=S}(r,o,t.data[d+o.componentOffset]),t.firstCreatePass||ec(o,r),Go(a,r);const w=o.initialInputs;for(let S=d;S<p;S++){const O=t.data[S],Z=nl(r,t,S,o);Go(Z,r),null!==w&&r0(0,S-d,Z,O,0,w),rs(O)&&(Vo(o.index,r)[Ci]=nl(r,t,S,o))}}(t,r,o,uo(o,r)),64==(64&o.flags)&&hv(t,r,o))}function _m(t,r,o=uo){const a=r.localNames;if(null!==a){let d=r.index+1;for(let p=0;p<a.length;p+=2){const w=a[p+1],S=-1===w?o(r,t):t[w];t[d++]=S}}}function av(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Im(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Im(t,r,o,a,d,p,w,S,O,Z,ie){const Le=kr+a,ft=Le+d,Et=function Em(t,r){const o=[];for(let a=0;a<r;a++)o.push(a<t?null:ai);return o}(Le,ft),Jt="function"==typeof Z?Z():Z;return Et[An]={type:t,blueprint:Et,template:o,queries:null,viewQuery:S,declTNode:r,data:Et.slice().fill(null,Le),bindingStartIndex:Le,expandoStartIndex:ft,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:O,consts:Jt,incompleteFirstPass:!1,ssrId:ie}}let Cm=t=>null;function lv(t,r,o,a){for(let d in t)if(t.hasOwnProperty(d)){o=null===o?{}:o;const p=t[d];null===a?cv(o,r,d,p):a.hasOwnProperty(d)&&cv(o,r,a[d],p)}return o}function cv(t,r,o,a){t.hasOwnProperty(o)?t[o].push(r,a):t[o]=[r,a]}function Hl(t,r,o,a,d,p,w,S){const O=uo(r,o);let ie,Z=r.inputs;!S&&null!=Z&&(ie=Z[a])?(km(t,o,ie,a,d),ws(r)&&function X_(t,r){const o=Vo(r,t);16&o[$n]||(o[$n]|=64)}(o,r.index)):3&r.type&&(a=function Q_(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),d=null!=w?w(d,r.value||"",a):d,p.setProperty(O,a,d))}function Tm(t,r,o,a){if(El()){const d=null===a?null:{"":-1},p=function t0(t,r){const o=t.directiveRegistry;let a=null,d=null;if(o)for(let p=0;p<o.length;p++){const w=o[p];if(as(r,w.selectors,!1))if(a||(a=[]),rs(w))if(null!==w.findHostDirectiveDefs){const S=[];d=d||new Map,w.findHostDirectiveDefs(w,S,d),a.unshift(...S,w),Yf(t,r,S.length)}else a.unshift(w),Yf(t,r,0);else d=d||new Map,w.findHostDirectiveDefs?.(w,a,d),a.push(w)}return null===a?null:[a,d]}(t,o);let w,S;null===p?w=S=null:[w,S]=p,null!==w&&dv(t,r,o,w,d,S),d&&function fv(t,r,o){if(r){const a=t.localNames=[];for(let d=0;d<r.length;d+=2){const p=o[r[d+1]];if(null==p)throw new Ve(-301,!1);a.push(r[d],p)}}}(o,a,d)}o.mergedAttrs=Bs(o.mergedAttrs,o.attrs)}function dv(t,r,o,a,d,p){for(let Z=0;Z<a.length;Z++)ja(ec(o,r),t,a[Z].type);!function pv(t,r,o){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+o,t.providerIndexes=r}(o,t.data.length,a.length);for(let Z=0;Z<a.length;Z++){const ie=a[Z];ie.providersResolver&&ie.providersResolver(ie)}let w=!1,S=!1,O=qf(t,r,a.length,null);for(let Z=0;Z<a.length;Z++){const ie=a[Z];o.mergedAttrs=Bs(o.mergedAttrs,ie.hostAttrs),ng(t,o,r,O,ie),hf(O,ie,d),null!==ie.contentQueries&&(o.flags|=4),(null!==ie.hostBindings||null!==ie.hostAttrs||0!==ie.hostVars)&&(o.flags|=64);const Le=ie.type.prototype;!w&&(Le.ngOnChanges||Le.ngOnInit||Le.ngDoCheck)&&((t.preOrderHooks??=[]).push(o.index),w=!0),!S&&(Le.ngOnChanges||Le.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(o.index),S=!0),O++}!function Z_(t,r,o){const d=r.directiveEnd,p=t.data,w=r.attrs,S=[];let O=null,Z=null;for(let ie=r.directiveStart;ie<d;ie++){const Le=p[ie],ft=o?o.get(Le):null,Jt=ft?ft.outputs:null;O=lv(Le.inputs,ie,O,ft?ft.inputs:null),Z=lv(Le.outputs,ie,Z,Jt);const Nn=null===O||null===w||ts(r)?null:xm(O,ie,w);S.push(Nn)}null!==O&&(O.hasOwnProperty("class")&&(r.flags|=8),O.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=S,r.inputs=O,r.outputs=Z}(t,o,p)}function hv(t,r,o){const a=o.directiveStart,d=o.directiveEnd,p=o.index,w=function x(){return Mr.lFrame.currentDirectiveIndex}();try{Yo(p);for(let S=a;S<d;S++){const O=t.data[S],Z=r[S];U(S),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&Kf(O,Z)}}finally{Yo(-1),U(w)}}function Kf(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Yf(t,r,o){r.componentOffset=o,(t.components??=[]).push(r.index)}function hf(t,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=t;rs(r)&&(o[""]=t)}}function ng(t,r,o,a,d){t.data[a]=d;const p=d.factory||(d.factory=ae(d.type)),w=new On(p,rs(d),uf);t.blueprint[a]=w,o[a]=w,function e0(t,r,o,a,d){const p=d.hostBindings;if(p){let w=t.hostBindingOpCodes;null===w&&(w=t.hostBindingOpCodes=[]);const S=~r.index;(function Sm(t){let r=t.length;for(;r>0;){const o=t[--r];if("number"==typeof o&&o<0)return o}return 0})(w)!=S&&w.push(S),w.push(o,a,p)}}(t,r,a,qf(t,o,d.hostVars,ai),d)}function gu(t,r,o,a,d,p){const w=uo(t,r);!function Mm(t,r,o,a,d,p,w){if(null==p)t.removeAttribute(r,d,o);else{const S=null==w?be(p):w(p,a||"",d);t.setAttribute(r,d,S,o)}}(r[ar],w,p,t.value,o,a,d)}function r0(t,r,o,a,d,p){const w=p[r];if(null!==w)for(let S=0;S<w.length;)Zf(a,o,w[S++],w[S++],w[S++])}function Zf(t,r,o,a,d){const p=Gr(null);try{const w=t.inputTransforms;null!==w&&w.hasOwnProperty(a)&&(d=w[a].call(r,d)),null!==t.setInput?t.setInput(r,d,o,a):r[a]=d}finally{Gr(p)}}function xm(t,r,o){let a=null,d=0;for(;d<o.length;){const p=o[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(t.hasOwnProperty(p)){null===a&&(a=[]);const w=t[p];for(let S=0;S<w.length;S+=2)if(w[S]===r){a.push(p,w[S+1],o[d+1]);break}}d+=2}else d+=2;else d+=4}return a}function Rm(t,r,o,a){return[t,!0,!1,r,null,0,a,o,null,null,null]}function rg(t,r){const o=t.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const p=o[a+1];if(-1!==p){const w=t.data[p];Be(o[a]),w.contentQueries(2,r[p],p)}}}function Ch(t,r){return t[xi]?t[io][Vr]=r:t[xi]=r,t[io]=r,r}function ig(t,r,o){Be(0);const a=Gr(null);try{r(t,o)}finally{Gr(a)}}function Pm(t){return t[ls]||(t[ls]=[])}function sg(t){return t.cleanup||(t.cleanup=[])}function bh(t,r){const o=t[Es],a=o?o.get(sf,null):null;a&&a.handleError(r)}function km(t,r,o,a,d){for(let p=0;p<o.length;){const w=o[p++],S=o[p++];Zf(t.data[w],r[w],a,S,d)}}function s0(t,r){const o=Vo(r,t),a=o[An];!function gv(t,r){for(let o=r.length;o<t.blueprint.length;o++)r.push(t.blueprint[o])}(a,o);const d=o[zr];null!==d&&null===o[Tr]&&(o[Tr]=Kg(d,o[Es])),Fm(a,o,o[Ci])}function Fm(t,r,o){yr(r);try{const a=t.viewQuery;null!==a&&ig(1,a,o);const d=t.template;null!==d&&ym(t,r,d,1,o),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&rg(t,r),t.staticViewQueries&&ig(2,t.viewQuery,o);const p=t.components;null!==p&&function mv(t,r){for(let o=0;o<r.length;o++)s0(t,r[o])}(r,p)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[$n]&=-5,Mt()}}let yv=(()=>{var t;class r{constructor(){this.all=new Set,this.queue=new Map}create(a,d,p){const w=typeof Zone>"u"?null:Zone.current,S=function tt(t,r,o){const a=Object.create(xn);o&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const d=w=>{a.cleanupFn=w};return a.ref={notify:()=>Na(a),run:()=>{if(a.dirty=!1,a.hasRun&&!Zs(a))return;a.hasRun=!0;const w=ao(a);try{a.cleanupFn(),a.cleanupFn=$t,a.fn(d)}finally{aa(a,w)}},cleanup:()=>a.cleanupFn()},a.ref}(a,ie=>{this.all.has(ie)&&this.queue.set(ie,w)},p);let O;this.all.add(S),S.notify();const Z=()=>{S.cleanup(),O?.(),this.all.delete(S),this.queue.delete(S)};return O=d?.onDestroy(Z),{destroy:Z}}flush(){if(0!==this.queue.size)for(const[a,d]of this.queue)this.queue.delete(a),d?d.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=r).\u0275prov=Bn({token:t,providedIn:"root",factory:()=>new t}),r})();function og(t,r,o){let a=o?t.styles:null,d=o?t.classes:null,p=0;if(null!==r)for(let w=0;w<r.length;w++){const S=r[w];"number"==typeof S?p=S:1==p?d=Ge(d,S):2==p&&(a=Ge(a,S+": "+r[++w]+";"))}o?t.styles=a:t.stylesWithoutHost=a,o?t.classes=d:t.classesWithoutHost=d}function Qf(t,r,o,a,d=!1){for(;null!==o;){const p=r[o.index];null!==p&&a.push(Nr(p)),ds(p)&&Lm(p,a);const w=o.type;if(8&w)Qf(t,r,o.child,a);else if(32&w){const S=Oe(o,r);let O;for(;O=S();)a.push(O)}else if(16&w){const S=Ao(r,o);if(Array.isArray(S))a.push(...S);else{const O=Ht(r[Fi]);Qf(O[An],O,S,a,!0)}}o=d?o.projectionNext:o.next}return a}function Lm(t,r){for(let o=ns;o<t.length;o++){const a=t[o],d=a[An].firstChild;null!==d&&Qf(a[An],a,d,r)}t[cs]!==t[zr]&&r.push(t[cs])}function Xf(t,r,o,a=!0){const d=r[Mo],p=d.rendererFactory,w=d.afterRenderEventManager;p.begin?.(),w?.begin();try{Bm(t,r,t.template,o)}catch(O){throw a&&bh(r,O),O}finally{p.end?.(),d.effectManager?.flush(),w?.end()}}function Bm(t,r,o,a){const d=r[$n];if(256!=(256&d)){r[Mo].effectManager?.flush(),yr(r);try{ad(r),function Ic(t){return Mr.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==o&&ym(t,r,o,2,a);const w=3==(3&d);if(w){const Z=t.preOrderCheckHooks;null!==Z&&No(r,Z,null)}else{const Z=t.preOrderHooks;null!==Z&&Ri(r,Z,0,null),vr(r,0)}if(function ag(t){for(let r=_r(t);null!==r;r=Xr(r)){if(!r[Rs])continue;const o=r[Xi];for(let a=0;a<o.length;a++){Du(o[a])}}}(r),$m(r,2),null!==t.contentQueries&&rg(t,r),w){const Z=t.contentCheckHooks;null!==Z&&No(r,Z)}else{const Z=t.contentHooks;null!==Z&&Ri(r,Z,1),vr(r,1)}!function K_(t,r){const o=t.hostBindingOpCodes;if(null===o)return;const a=Jp(r,mo);try{for(let d=0;d<o.length;d++){const p=o[d];if(p<0)Yo(~p);else{const w=p,S=o[++d],O=o[++d];N(S,w),a.dirty=!1;const Z=ao(a);try{O(2,r[w])}finally{aa(a,Z)}}}}finally{null===r[mo]&&rv(r,mo),Yo(-1)}}(t,r);const S=t.components;null!==S&&Um(r,S,0);const O=t.viewQuery;if(null!==O&&ig(2,O,a),w){const Z=t.viewCheckHooks;null!==Z&&No(r,Z)}else{const Z=t.viewHooks;null!==Z&&Ri(r,Z,2),vr(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[$n]&=-73,La(r)}finally{Mt()}}}function $m(t,r){for(let o=_r(t);null!==o;o=Xr(o))for(let a=ns;a<o.length;a++)Vm(o[a],r)}function ji(t,r,o){Vm(Vo(r,t),o)}function Vm(t,r){if(!function pc(t){return 128==(128&t[$n])}(t))return;const o=t[An],a=t[$n];if(80&a&&0===r||1024&a||2===r)Bm(o,t,o.template,t[Ci]);else if(t[Vs]>0){$m(t,1);const d=o.components;null!==d&&Um(t,d,1)}}function Um(t,r,o){for(let a=0;a<r.length;a++)ji(t,r[a],o)}class td{get rootNodes(){const r=this._lView,o=r[An];return Qf(o,r,o.firstChild,[])}constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ci]}set context(r){this._lView[Ci]=r}get destroyed(){return 256==(256&this._lView[$n])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Gn];if(ds(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(Ul(r,a),Jc(o,a))}this._attachedToViewContainer=!1}ui(this._lView[An],this._lView)}onDestroy(r){!function Ba(t,r){if(256==(256&t[$n]))throw new Ve(911,!1);null===t[Ms]&&(t[Ms]=[]),t[Ms].push(r)}(this._lView,r)}markForCheck(){rf(this._cdRefInjectingView||this._lView)}detach(){this._lView[$n]&=-129}reattach(){this._lView[$n]|=128}detectChanges(){Xf(this._lView[An],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vl(t,r){du(t,r,r[ar],2,null,null)}(this._lView[An],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ve(902,!1);this._appRef=r}}class Iv extends td{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Xf(r[An],r,r[Ci],!1)}checkNoChanges(){}get context(){return null}}class no extends zf{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Dt(r);return new Jf(o,this.ngModule)}}function Ra(t){const r=[];for(let o in t)t.hasOwnProperty(o)&&r.push({propName:t[o],templateName:o});return r}class Ev{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,a){a=lr(a);const d=this.injector.get(r,jp,a);return d!==jp||o===jp?d:this.parentInjector.get(r,o,a)}}class Jf extends Zg{get inputs(){const r=this.componentDef,o=r.inputTransforms,a=Ra(r.inputs);if(null!==o)for(const d of a)o.hasOwnProperty(d.propName)&&(d.transform=o[d.propName]);return a}get outputs(){return Ra(this.componentDef.outputs)}constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function At(t){return t.map(ct).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}create(r,o,a,d){let p=(d=d||this.ngModule)instanceof $c?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const w=p?new Ev(r,p):r,S=w.get(Qg,null);if(null===S)throw new Ve(407,!1);const Le={rendererFactory:S,sanitizer:w.get(V_,null),effectManager:w.get(yv,null),afterRenderEventManager:w.get(lm,null)},ft=S.createRenderer(null,this.componentDef),Et=this.componentDef.selectors[0][0]||"div",Jt=a?function wm(t,r,o,a){const p=a.get(Yp,!1)||o===oi.ShadowDom,w=t.selectRootElement(r,p);return function df(t){Cm(t)}(w),w}(ft,a,this.componentDef.encapsulation,w):Pc(ft,Et,function mu(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Et)),Fr=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _n=null;null!==Jt&&(_n=Kg(Jt,w,!0));const li=Im(0,null,null,1,0,null,null,null,null,null,null),Oi=eg(null,li,null,Fr,null,null,Le,ft,w,null,_n);let Ks,fc;yr(Oi);try{const Nh=this.componentDef;let Mg,xI=null;Nh.findHostDirectiveDefs?(Mg=[],xI=new Map,Nh.findHostDirectiveDefs(Nh,Mg,xI),Mg.push(Nh)):Mg=[Nh];const qT=function wv(t,r){const o=t[An],a=kr;return t[a]=r,Od(o,a,2,"#host",null)}(Oi,Jt),KT=function jm(t,r,o,a,d,p,w){const S=d[An];!function a0(t,r,o,a){for(const d of t)r.mergedAttrs=Bs(r.mergedAttrs,d.hostAttrs);null!==r.mergedAttrs&&(og(r,r.mergedAttrs,!0),null!==o&&wd(a,o,r))}(a,t,r,w);let O=null;null!==r&&(O=Kg(r,d[Es]));const Z=p.rendererFactory.createRenderer(r,o);let ie=16;o.signals?ie=4096:o.onPush&&(ie=64);const Le=eg(d,av(o),null,ie,d[t.index],t,p,Z,null,null,O);return S.firstCreatePass&&Yf(S,t,a.length-1),Ch(d,Le),d[t.index]=Le}(qT,Jt,Nh,Mg,Oi,Le,ft);fc=Xa(li,kr),Jt&&function l0(t,r,o,a){if(a)es(t,o,["ng-version",Xg.full]);else{const{attrs:d,classes:p}=function It(t){const r=[],o=[];let a=1,d=2;for(;a<t.length;){let p=t[a];if("string"==typeof p)2===d?""!==p&&r.push(p,t[++a]):8===d&&o.push(p);else{if(!Ir(d))break;d=p}a++}return{attrs:r,classes:o}}(r.selectors[0]);d&&es(t,o,d),p&&p.length>0&&Ed(t,o,p.join(" "))}}(ft,Nh,Jt,a),void 0!==o&&function c0(t,r,o){const a=t.projection=[];for(let d=0;d<r.length;d++){const p=o[d];a.push(null!=p?Array.from(p):null)}}(fc,this.ngContentSelectors,o),Ks=function Hm(t,r,o,a,d,p){const w=Vi(),S=d[An],O=uo(w,d);dv(S,d,w,o,null,a);for(let ie=0;ie<o.length;ie++)Go(nl(d,S,w.directiveStart+ie,w),d);hv(S,d,w),O&&Go(O,d);const Z=nl(d,S,w.directiveStart+w.componentOffset,w);if(t[Ci]=d[Ci]=Z,null!==p)for(const ie of p)ie(Z,r);return tg(S,w,t),Z}(KT,Nh,Mg,xI,Oi,[go]),Fm(li,Oi,null)}finally{Mt()}return new lg(this.componentType,Ks,Vc(fc,Oi),Oi,fc)}}class lg extends F_{constructor(r,o,a,d,p){super(),this.location=a,this._rootLView=d,this._tNode=p,this.previousInputValues=null,this.instance=o,this.hostView=this.changeDetectorRef=new Iv(d),this.componentType=r}setInput(r,o){const a=this._tNode.inputs;let d;if(null!==a&&(d=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),o))return;const p=this._rootLView;km(p[An],p,d,r,o),this.previousInputValues.set(r,o),rf(Vo(this._tNode.index,p))}}get injector(){return new Ls(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function go(){const t=Vi();el(dn()[An],t)}function Cv(t){let r=function u0(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),o=!0;const a=[t];for(;r;){let d;if(rs(t))d=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ve(903,!1);d=r.\u0275dir}if(d){if(o){a.push(d);const w=t;w.inputs=ep(t.inputs),w.inputTransforms=ep(t.inputTransforms),w.declaredInputs=ep(t.declaredInputs),w.outputs=ep(t.outputs);const S=d.hostBindings;S&&bv(t,S);const O=d.viewQuery,Z=d.contentQueries;if(O&&d0(t,O),Z&&h0(t,Z),ge(t.inputs,d.inputs),ge(t.declaredInputs,d.declaredInputs),ge(t.outputs,d.outputs),null!==d.inputTransforms&&(null===w.inputTransforms&&(w.inputTransforms={}),ge(w.inputTransforms,d.inputTransforms)),rs(d)&&d.data.animation){const ie=t.data;ie.animation=(ie.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let w=0;w<p.length;w++){const S=p[w];S&&S.ngInherit&&S(t),S===Cv&&(o=!1)}}r=Object.getPrototypeOf(r)}!function Wo(t){let r=0,o=null;for(let a=t.length-1;a>=0;a--){const d=t[a];d.hostVars=r+=d.hostVars,d.hostAttrs=Bs(d.hostAttrs,o=Bs(o,d.hostAttrs))}}(a)}function ep(t){return t===Pi?{}:t===ur?[]:t}function d0(t,r){const o=t.viewQuery;t.viewQuery=o?(a,d)=>{r(a,d),o(a,d)}:r}function h0(t,r){const o=t.contentQueries;t.contentQueries=o?(a,d,p)=>{r(a,d,p),o(a,d,p)}:r}function bv(t,r){const o=t.hostBindings;t.hostBindings=o?(a,d)=>{r(a,d),o(a,d)}:r}function Tv(t){const r=t.inputConfig,o={};for(const a in r)if(r.hasOwnProperty(a)){const d=r[a];Array.isArray(d)&&d[2]&&(o[a]=d[2])}t.inputTransforms=o}function cc(t){return!!pf(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function pf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ka(t,r,o){return!Object.is(t[r],o)&&(t[r]=o,!0)}function mf(t,r,o,a){const d=dn();return Ka(d,Cl(),r)&&(gi(),gu(ss(),d,t,r,o,a)),mf}function Th(t,r,o,a){return Ka(t,Cl(),o)?r+be(o)+a:ai}function M0(t,r,o,a,d,p,w,S){const O=dn(),Z=gi(),ie=t+kr,Le=Z.firstCreatePass?function qI(t,r,o,a,d,p,w,S,O){const Z=r.consts,ie=Od(r,t,4,w||null,Da(Z,S));Tm(r,o,ie,Da(Z,O)),el(r,ie);const Le=ie.tView=Im(2,ie,a,d,p,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Z,null);return null!==r.queries&&(r.queries.template(r,ie),Le.queries=r.queries.embeddedTView(ie)),ie}(ie,Z,O,r,o,a,d,p,w):Z.data[ie];Do(Le,!1);const ft=$d(Z,O,Le,t);pa()&&ah(Z,O,ft,Le),Go(ft,O),Ch(O,O[ie]=Rm(ft,O,ft,Le)),Cs(Le)&&vm(Z,O,Le),null!=w&&_m(O,Le,S)}let $d=function Iu(t,r,o,a){return Po(!0),r[ar].createComment("")};function Qm(t,r,o){const a=dn();return Ka(a,Cl(),r)&&Hl(gi(),ss(),a,t,r,a[ar],o,!1),Qm}function Eu(t,r,o,a,d){const w=d?"class":"style";km(t,o,r.inputs[w],w,a)}function pg(t,r,o,a){const d=dn(),p=gi(),w=kr+t,S=d[ar],O=p.firstCreatePass?function R0(t,r,o,a,d,p){const w=r.consts,O=Od(r,t,2,a,Da(w,d));return Tm(r,o,O,Da(w,p)),null!==O.attrs&&og(O,O.attrs,!1),null!==O.mergedAttrs&&og(O,O.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,O),O}(w,p,d,r,o,a):p.data[w],Z=Pv(p,d,O,S,r,t);d[w]=Z;const ie=Cs(O);return Do(O,!0),wd(S,Z,O),32!=(32&O.flags)&&pa()&&ah(p,d,Z,O),0===function cl(){return Mr.lFrame.elementDepthCount}()&&Go(Z,d),function gc(){Mr.lFrame.elementDepthCount++}(),ie&&(vm(p,d,O),tg(p,O,d)),null!==a&&_m(d,O),pg}function gg(){let t=Vi();Gs()?is():(t=t.parent,Do(t,!1));const r=t;(function mc(t){return Mr.skipHydrationRootTNode===t})(r)&&function yc(){Mr.skipHydrationRootTNode=null}(),function Rl(){Mr.lFrame.elementDepthCount--}();const o=gi();return o.firstCreatePass&&(el(o,t),Io(t)&&o.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Pl(t){return 0!=(8&t.flags)}(r)&&Eu(o,r,dn(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function ud(t){return 0!=(16&t.flags)}(r)&&Eu(o,r,dn(),r.stylesWithoutHost,!1),gg}function Xm(t,r,o,a){return pg(t,r,o,a),gg(),Xm}let Pv=(t,r,o,a,d,p)=>(Po(!0),Pc(a,d,function fa(){return Mr.lFrame.currentNamespace}()));function Jm(t,r,o){const a=dn(),d=gi(),p=t+kr,w=d.firstCreatePass?function O0(t,r,o,a,d){const p=r.consts,w=Da(p,a),S=Od(r,t,8,"ng-container",w);return null!==w&&og(S,w,!0),Tm(r,o,S,Da(p,d)),null!==r.queries&&r.queries.elementStart(r,S),S}(p,d,a,r,o):d.data[p];Do(w,!0);const S=xh(d,a,w,t);return a[p]=S,pa()&&ah(d,a,S,w),Go(S,a),Cs(w)&&(vm(d,a,w),tg(d,w,a)),null!=o&&_m(a,w),Jm}function mg(){let t=Vi();const r=gi();return Gs()?is():(t=t.parent,Do(t,!1)),r.firstCreatePass&&(el(r,t),Io(t)&&r.queries.elementEnd(t)),mg}function ey(t,r,o){return Jm(t,r,o),mg(),ey}let xh=(t,r,o,a)=>(Po(!0),$l(r[ar],""));function Fv(){return dn()}function ny(t){return!!t&&"function"==typeof t.then}function Lv(t){return!!t&&"function"==typeof t.subscribe}function ry(t,r,o,a){const d=dn(),p=gi(),w=Vi();return function P0(t,r,o,a,d,p,w){const S=Cs(a),Z=t.firstCreatePass&&sg(t),ie=r[Ci],Le=Pm(r);let ft=!0;if(3&a.type||w){const Nn=uo(a,r),sr=w?w(Nn):Nn,Fr=Le.length,_n=w?Oi=>w(Nr(Oi[a.index])):a.index;let li=null;if(!w&&S&&(li=function YI(t,r,o,a){const d=t.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const w=d[p];if(w===o&&d[p+1]===a){const S=r[ls],O=d[p+2];return S.length>O?S[O]:null}"string"==typeof w&&(p+=2)}return null}(t,r,d,a.index)),null!==li)(li.__ngLastListenerFn__||li).__ngNextListenerFn__=p,li.__ngLastListenerFn__=p,ft=!1;else{p=k0(a,r,ie,p,!1);const Oi=o.listen(sr,d,p);Le.push(p,Oi),Z&&Z.push(d,_n,Fr,Fr+1)}}else p=k0(a,r,ie,p,!1);const Et=a.outputs;let Jt;if(ft&&null!==Et&&(Jt=Et[d])){const Nn=Jt.length;if(Nn)for(let sr=0;sr<Nn;sr+=2){const Ks=r[Jt[sr]][Jt[sr+1]].subscribe(p),fc=Le.length;Le.push(p,Ks),Z&&Z.push(d,a.index,fc,-(fc+1))}}}(p,d,d[ar],w,t,r,a),ry}function N0(t,r,o,a){try{return Ss(6,r,o),!1!==o(a)}catch(d){return bh(t,d),!1}finally{Ss(7,r,o)}}function k0(t,r,o,a,d){return function p(w){if(w===Function)return a;rf(t.componentOffset>-1?Vo(t.index,r):r);let O=N0(r,o,a,w),Z=p.__ngNextListenerFn__;for(;Z;)O=N0(r,o,Z,w)&&O,Z=Z.__ngNextListenerFn__;return d&&!1===O&&w.preventDefault(),O}}function $v(t=1){return function rn(t){return(Mr.lFrame.contextLView=function Ui(t,r){for(;t>0;)r=r[Wi],t--;return r}(t,Mr.lFrame.contextLView))[Ci]}(t)}function F0(t,r){let o=null;const a=function bt(t){const r=t.attrs;if(null!=r){const o=r.indexOf(5);if(!(1&o))return r[o+1]}return null}(t);for(let d=0;d<r.length;d++){const p=r[d];if("*"!==p){if(null===a?as(t,p,!0):_e(a,p))return d}else o=d}return o}function Vv(t){const r=dn()[Fi][Ti];if(!r.projection){const a=r.projection=bc(t?t.length:1,null),d=a.slice();let p=r.child;for(;null!==p;){const w=t?F0(p,t):0;null!==w&&(d[w]?d[w].projectionNext=p:a[w]=p,d[w]=p),p=p.next}}}function L0(t,r=0,o){const a=dn(),d=gi(),p=Od(d,kr+t,16,null,o||null);null===p.projection&&(p.projection=r),is(),(!a[Tr]||Ko())&&32!=(32&p.flags)&&function yp(t,r,o){xf(r[ar],0,r,o,Af(t,o,r),uu(o.parent||r[Ti],o,r))}(d,a,p)}function iy(t,r,o){return yg(t,"",r,"",o),iy}function yg(t,r,o,a,d){const p=dn(),w=Th(p,r,o,a);return w!==ai&&Hl(gi(),ss(),p,t,w,p[ar],d,!1),yg}function sy(t,r){return t<<17|r<<2}function Rh(t){return t>>17&32767}function oy(t){return 2|t}function id(t){return(131068&t)>>2}function vg(t,r){return-131069&t|r<<2}function Oh(t){return 1|t}function up(t,r,o,a,d){const p=t[o+1],w=null===r;let S=a?Rh(p):id(p),O=!1;for(;0!==S&&(!1===O||w);){const ie=t[S+1];V0(t[S],r)&&(O=!0,t[S+1]=a?Oh(ie):oy(ie)),S=a?Rh(ie):id(ie)}O&&(t[o+1]=a?oy(p):Oh(p))}function V0(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&gl(t,r)>=0}function cy(t,r){return function jc(t,r,o,a){const d=dn(),p=gi(),w=function Uo(t){const r=Mr.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,o}(2);p.firstUpdatePass&&function e_(t,r,o,a){const d=t.data;if(null===d[o+1]){const p=d[gs()],w=function uy(t,r){return r>=t.expandoStartIndex}(t,o);(function gy(t,r){return 0!=(t.flags&(r?8:16))})(p,a)&&null===r&&!w&&(r=!1),r=function dy(t,r,o,a){const d=function se(t){const r=Mr.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let p=a?r.residualClasses:r.residualStyles;if(null===d)0===(a?r.classBindings:r.styleBindings)&&(o=hp(o=dp(null,t,r,o,a),r.attrs,a),p=null);else{const w=r.directiveStylingLast;if(-1===w||t[w]!==d)if(o=dp(d,t,r,o,a),null===p){let O=function Ig(t,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==id(a))return t[Rh(a)]}(t,r,a);void 0!==O&&Array.isArray(O)&&(O=dp(null,t,r,O[1],a),O=hp(O,r.attrs,a),function t_(t,r,o,a){t[Rh(o?r.classBindings:r.styleBindings)]=a}(t,r,a,O))}else p=function H0(t,r,o){let a;const d=r.directiveEnd;for(let p=1+r.directiveStylingLast;p<d;p++)a=hp(a,t[p].hostAttrs,o);return hp(a,r.attrs,o)}(t,r,a)}return void 0!==p&&(a?r.residualClasses=p:r.residualStyles=p),o}(d,p,r,a),function $0(t,r,o,a,d,p){let w=p?r.classBindings:r.styleBindings,S=Rh(w),O=id(w);t[a]=o;let ie,Z=!1;if(Array.isArray(o)?(ie=o[1],(null===ie||gl(o,ie)>0)&&(Z=!0)):ie=o,d)if(0!==O){const ft=Rh(t[S+1]);t[a+1]=sy(ft,S),0!==ft&&(t[ft+1]=vg(t[ft+1],a)),t[S+1]=function B0(t,r){return 131071&t|r<<17}(t[S+1],a)}else t[a+1]=sy(S,0),0!==S&&(t[S+1]=vg(t[S+1],a)),S=a;else t[a+1]=sy(O,0),0===S?S=a:t[O+1]=vg(t[O+1],a),O=a;Z&&(t[a+1]=oy(t[a+1])),up(t,ie,a,!0),up(t,ie,a,!1),function Qv(t,r,o,a,d){const p=d?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof r&&gl(p,r)>=0&&(o[a+1]=Oh(o[a+1]))}(r,ie,t,a,p),w=sy(S,O),p?r.classBindings=w:r.styleBindings=w}(d,p,r,o,w,a)}}(p,t,w,a),r!==ai&&Ka(d,w,r)&&function fy(t,r,o,a,d,p,w,S){if(!(3&r.type))return;const O=t.data,Z=O[S+1],ie=function Yv(t){return 1==(1&t)}(Z)?py(O,r,o,d,id(Z),w):void 0;Eg(ie)||(Eg(p)||function Kv(t){return 2==(2&t)}(Z)&&(p=py(O,null,o,d,S,w)),function _p(t,r,o,a,d){if(r)d?t.addClass(o,a):t.removeClass(o,a);else{let p=-1===a.indexOf("-")?void 0:rl.DashCase;null==d?t.removeStyle(o,a,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=rl.Important),t.setStyle(o,a,d,p))}}(a,w,ha(gs(),o),d,p))}(p,p.data[gs()],d,d[ar],t,d[w+1]=function G0(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Me(di(t)))),t}(r,o),a,w)}(t,r,null,!0),cy}function dp(t,r,o,a,d){let p=null;const w=o.directiveEnd;let S=o.directiveStylingLast;for(-1===S?S=o.directiveStart:S++;S<w&&(p=r[S],a=hp(a,p.hostAttrs,d),p!==t);)S++;return null!==t&&(o.directiveStylingLast=S),a}function hp(t,r,o){const a=o?1:2;let d=-1;if(null!==r)for(let p=0;p<r.length;p++){const w=r[p];"number"==typeof w?d=w:d===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ho(t,w,!!o||r[++p]))}return void 0===t?null:t}function py(t,r,o,a,d,p){const w=null===r;let S;for(;d>0;){const O=t[d],Z=Array.isArray(O),ie=Z?O[1]:O,Le=null===ie;let ft=o[d+1];ft===ai&&(ft=Le?ur:void 0);let Et=Le?eu(ft,a):ie===a?ft:void 0;if(Z&&!Eg(Et)&&(Et=eu(O,a)),Eg(Et)&&(S=Et,w))return S;const Jt=t[d+1];d=w?Rh(Jt):id(Jt)}if(null!==r){let O=p?r.residualClasses:r.residualStyles;null!=O&&(S=eu(O,a))}return S}function Eg(t){return void 0!==t}function my(t,r=""){const o=dn(),a=gi(),d=t+kr,p=a.firstCreatePass?Od(a,d,1,r,null):a.data[d],w=i_(a,o,p,r,t);o[d]=w,pa()&&ah(a,o,w,p),Do(p,!1)}let i_=(t,r,o,a,d)=>(Po(!0),function Fo(t,r){return t.createText(r)}(r[ar],a));function n(t){return s("",t,""),n}function s(t,r,o){const a=dn(),d=Th(a,t,r,o);return d!==ai&&function ed(t,r,o){const a=ha(r,t);!function vl(t,r,o){t.setValue(r,o)}(t[ar],a,o)}(a,gs(),d),s}const fp=void 0;var gC=["en",[["a","p"],["AM","PM"],fp],[["AM","PM"],fp,fp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fp,"{1} 'at' {0}",fp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function pC(t){const o=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let Cg={};function K0(t){const r=function mC(t){return t.toLowerCase().replace(/_/g,"-")}(t);let o=aE(r);if(o)return o;const a=r.split("-")[0];if(o=aE(a),o)return o;if("en"===a)return gC;throw new Ve(701,!1)}function oE(t){return K0(t)[bg.PluralCase]}function aE(t){return t in Cg||(Cg[t]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[t]),Cg[t]}var bg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(bg||{});const Dg="en-US";let lE=Dg;function Q0(t,r,o,a,d){if(t=Ze(t),Array.isArray(t))for(let p=0;p<t.length;p++)Q0(t[p],r,o,a,d);else{const p=gi(),w=dn(),S=Vi();let O=fu(t)?t:Ze(t.provide);const Z=jg(t),ie=1048575&S.providerIndexes,Le=S.directiveStart,ft=S.providerIndexes>>20;if(fu(t)||!t.multi){const Et=new On(Z,d,uf),Jt=J0(O,r,d?ie:ie+ft,Le);-1===Jt?(ja(ec(S,w),p,O),X0(p,t,r.length),r.push(O),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),o.push(Et),w.push(Et)):(o[Jt]=Et,w[Jt]=Et)}else{const Et=J0(O,r,ie+ft,Le),Jt=J0(O,r,ie,ie+ft),sr=Jt>=0&&o[Jt];if(d&&!sr||!d&&!(Et>=0&&o[Et])){ja(ec(S,w),p,O);const Fr=function pb(t,r,o,a,d){const p=new On(t,o,uf);return p.multi=[],p.index=r,p.componentProviders=0,PE(p,d,a&&!o),p}(d?fb:hb,o.length,d,a,Z);!d&&sr&&(o[Jt].providerFactory=Fr),X0(p,t,r.length,0),r.push(O),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),o.push(Fr),w.push(Fr)}else X0(p,t,Et>-1?Et:Jt,PE(o[d?Jt:Et],Z,!d&&a));!d&&a&&sr&&o[Jt].componentProviders++}}}function X0(t,r,o,a){const d=fu(r),p=function A_(t){return!!t.useClass}(r);if(d||p){const O=(p?Ze(r.useClass):r).prototype.ngOnDestroy;if(O){const Z=t.destroyHooks||(t.destroyHooks=[]);if(!d&&r.multi){const ie=Z.indexOf(o);-1===ie?Z.push(o,[a,O]):Z[ie+1].push(a,O)}else Z.push(o,O)}}}function PE(t,r,o){return o&&t.componentProviders++,t.multi.push(r)-1}function J0(t,r,o,a){for(let d=o;d<a;d++)if(r[d]===t)return d;return-1}function hb(t,r,o,a){return eI(this.multi,[])}function fb(t,r,o,a){const d=this.multi;let p;if(this.providerFactory){const w=this.providerFactory.componentProviders,S=nl(o,o[An],this.providerFactory.index,a);p=S.slice(0,w),eI(d,p);for(let O=w;O<S.length;O++)p.push(S[O])}else p=[],eI(d,p);return p}function eI(t,r){for(let o=0;o<t.length;o++)r.push((0,t[o])());return r}function NE(t,r=[]){return o=>{o.providersResolver=(a,d)=>function db(t,r,o){const a=gi();if(a.firstCreatePass){const d=rs(t);Q0(o,a.data,a.blueprint,d,!0),Q0(r,a.data,a.blueprint,d,!1)}}(a,d?d(t):t,r)}}class pp{}class kE{}function gb(t,r){return new tI(t,r??null,[])}class tI extends pp{constructor(r,o,a){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new no(this);const d=Qn(r);this._bootstrapComponents=Qu(d.bootstrap),this._r3Injector=Qy(r,o,[{provide:pp,useValue:this},{provide:zf,useValue:this.componentFactoryResolver},...a],Me(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class nI extends kE{constructor(r){super(),this.moduleType=r}create(r){return new tI(this.moduleType,r,[])}}class FE extends pp{constructor(r){super(),this.componentFactoryResolver=new no(this),this.instance=null;const o=new wa([...r.providers,{provide:pp,useValue:this},{provide:zf,useValue:this.componentFactoryResolver}],r.parent||Lf(),r.debugName,new Set(["environment"]));this.injector=o,r.runEnvironmentInitializers&&o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function LE(t,r,o=null){return new FE({providers:t,parent:r,debugName:o,runEnvironmentInitializers:!0}).injector}let yb=(()=>{var t;class r{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const d=Tp(0,a.type),p=d.length>0?LE([d],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,p)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return(t=r).\u0275prov=Bn({token:t,providedIn:"environment",factory:()=>new t(nn($c))}),r})();function BE(t){t.getStandaloneInjector=r=>r.get(yb).getOrCreateStandaloneInjector(t)}function Hb(){return this._results[Symbol.iterator]()}class iI{get changes(){return this._changes||(this._changes=new lc)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=iI.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=Hb)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const d=function Ws(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function yi(t,r,o){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let d=t[a],p=r[a];if(o&&(d=o(d),p=o(p)),p!==d)return!1}return!0}(a._results,d,o))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Gb(t,r,o,a=!0){const d=r[An];if(function Vh(t,r,o,a){const d=ns+a,p=o.length;a>0&&(o[d-1][Vr]=r),a<p-ns?(r[Vr]=o[d],ma(o,ns+a,r)):(o.push(r),r[Vr]=null),r[Gn]=o;const w=r[ni];null!==w&&o!==w&&function Nc(t,r){const o=t[Xi];r[Fi]!==r[Gn][Gn][Fi]&&(t[Rs]=!0),null===o?t[Xi]=[r]:o.push(r)}(w,r);const S=r[fs];null!==S&&S.insertView(t),r[$n]|=128}(d,r,t,o),a){const p=Ai(o,t),w=r[ar],S=ih(w,t[cs]);null!==S&&function nh(t,r,o,a,d,p){a[zr]=d,a[Ti]=r,du(t,a,o,1,d,p)}(d,t[Ti],w,r,S,p)}}let Dy=(()=>{class r{}return r.__NG_ELEMENT_ID__=Kb,r})();const Wb=Dy,qb=class extends Wb{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,o){return this.createEmbeddedViewImpl(r,o)}createEmbeddedViewImpl(r,o,a){const d=function zb(t,r,o,a){const d=r.tView,S=eg(t,d,o,4096&t[$n]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);S[ni]=t[r.index];const Z=t[fs];return null!==Z&&(S[fs]=Z.createEmbeddedView(d)),Fm(d,S,o),S}(this._declarationLView,this._declarationTContainer,r,{injector:o,hydrationInfo:a});return new td(d)}};function Kb(){return d_(Vi(),dn())}function d_(t,r){return 4&t.type?new qb(r,t,Vc(t,r)):null}let f_=(()=>{class r{}return r.__NG_ELEMENT_ID__=eD,r})();function eD(){return nw(Vi(),dn())}const tD=f_,ew=class extends tD{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return Vc(this._hostTNode,this._hostLView)}get injector(){return new Ls(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ua(this._hostTNode,this._hostLView);if(Ec(r)){const o=tl(r,this._hostLView),a=As(r);return new Ls(o[An].data[a+8],o)}return new Ls(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=tw(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-ns}createEmbeddedView(r,o,a){let d,p;"number"==typeof a?d=a:null!=a&&(d=a.index,p=a.injector);const S=r.createEmbeddedViewImpl(o||{},p,null);return this.insertImpl(S,d,false),S}createComponent(r,o,a,d,p){const w=r&&!function dr(t){return"function"==typeof t}(r);let S;if(w)S=o;else{const Nn=o||{};S=Nn.index,a=Nn.injector,d=Nn.projectableNodes,p=Nn.environmentInjector||Nn.ngModuleRef}const O=w?r:new Jf(Dt(r)),Z=a||this.parentInjector;if(!p&&null==O.ngModule){const sr=(w?Z:this.parentInjector).get($c,null);sr&&(p=sr)}Dt(O.componentType??{});const Et=O.create(Z,d,null,p);return this.insertImpl(Et.hostView,S,false),Et}insert(r,o){return this.insertImpl(r,o,!1)}insertImpl(r,o,a){const d=r._lView;if(function xl(t){return ds(t[Gn])}(d)){const O=this.indexOf(r);if(-1!==O)this.detach(O);else{const Z=d[Gn],ie=new ew(Z,Z[Ti],Z[Gn]);ie.detach(ie.indexOf(r))}}const w=this._adjustIndex(o),S=this._lContainer;return Gb(S,d,w,!a),r.attachToViewContainerRef(),ma(sI(S),w,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=tw(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=Ul(this._lContainer,o);a&&(Jc(sI(this._lContainer),o),ui(a[An],a))}detach(r){const o=this._adjustIndex(r,-1),a=Ul(this._lContainer,o);return a&&null!=Jc(sI(this._lContainer),o)?new td(a):null}_adjustIndex(r,o=0){return r??this.length+o}};function tw(t){return t[8]}function sI(t){return t[8]||(t[8]=[])}function nw(t,r){let o;const a=r[t.index];return ds(a)?o=a:(o=Rm(a,r,null,t),r[t.index]=o,Ch(r,o)),rw(o,r,t,a),new ew(o,t,r)}let rw=function iw(t,r,o,a){if(t[cs])return;let d;d=8&o.type?Nr(a):function nD(t,r){const o=t[ar],a=o.createComment(""),d=uo(r,t);return zu(o,ih(o,d),a,function Mf(t,r){return t.nextSibling(r)}(o,d),!1),a}(r,o),t[cs]=d};class oI{constructor(r){this.queryList=r,this.matches=null}clone(){return new oI(this.queryList)}setDirty(){this.queryList.setDirty()}}class aI{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,d=[];for(let p=0;p<a;p++){const w=o.getByIndex(p);d.push(this.queries[w.indexInDeclarationView].clone())}return new aI(d)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==fw(r,o).matches&&this.queries[o].setDirty()}}class sw{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class lI{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const d=null!==o?o.length:0,p=this.getByIndex(a).embeddedTView(r,d);p&&(p.indexInDeclarationView=a,null!==o?o.push(p):o=[p])}return null!==o?new lI(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class cI{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new cI(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const p=a[d];this.matchTNodeWithReadOption(r,o,sD(o,p)),this.matchTNodeWithReadOption(r,o,bl(o,r,p,!1,!1))}else a===Dy?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,bl(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===pu||d===f_||d===Dy&&4&o.type)this.addMatch(o.index,-2);else{const p=bl(o,r,d,!1,!1);null!==p&&this.addMatch(o.index,p)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function sD(t,r){const o=t.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function aD(t,r,o,a){return-1===o?function oD(t,r){return 11&t.type?Vc(t,r):4&t.type?d_(t,r):null}(r,t):-2===o?function lD(t,r,o){return o===pu?Vc(r,t):o===Dy?d_(r,t):o===f_?nw(r,t):void 0}(t,r,a):nl(t,t[An],o,r)}function ow(t,r,o,a){const d=r[fs].queries[a];if(null===d.matches){const p=t.data,w=o.matches,S=[];for(let O=0;O<w.length;O+=2){const Z=w[O];S.push(Z<0?null:aD(r,p[Z],w[O+1],o.metadata.read))}d.matches=S}return d.matches}function uI(t,r,o,a){const d=t.queries.getByIndex(o),p=d.matches;if(null!==p){const w=ow(t,r,d,o);for(let S=0;S<p.length;S+=2){const O=p[S];if(O>0)a.push(w[S/2]);else{const Z=p[S+1],ie=r[-O];for(let Le=ns;Le<ie.length;Le++){const ft=ie[Le];ft[ni]===ft[Gn]&&uI(ft[An],ft,Z,a)}if(null!==ie[Xi]){const Le=ie[Xi];for(let ft=0;ft<Le.length;ft++){const Et=Le[ft];uI(Et[An],Et,Z,a)}}}}}return a}function aw(t){const r=dn(),o=gi(),a=Ce();Be(a+1);const d=fw(o,a);if(t.dirty&&function od(t){return 4==(4&t[$n])}(r)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const p=d.crossesNgTemplate?uI(o,r,a,[]):ow(o,r,d,a);t.reset(p,Up),t.notifyOnChanges()}return!0}return!1}function lw(t,r,o){const a=gi();a.firstCreatePass&&(hw(a,new sw(t,r,o),-1),2==(2&r)&&(a.staticViewQueries=!0)),dw(a,dn(),r)}function cw(t,r,o,a){const d=gi();if(d.firstCreatePass){const p=Vi();hw(d,new sw(r,o,a),p.index),function uD(t,r){const o=t.contentQueries||(t.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(t.queries.length-1,r)}(d,t),2==(2&o)&&(d.staticContentQueries=!0)}dw(d,dn(),o)}function uw(){return function cD(t,r){return t[fs].queries[r].queryList}(dn(),Ce())}function dw(t,r,o){const a=new iI(4==(4&o));(function Dm(t,r,o,a){const d=Pm(r);d.push(o),t.firstCreatePass&&sg(t).push(a,d.length-1)})(t,r,a,a.destroy),null===r[fs]&&(r[fs]=new aI),r[fs].queries.push(new oI(a))}function hw(t,r,o){null===t.queries&&(t.queries=new lI),t.queries.track(new cI(r,o))}function fw(t,r){return t.queries.getByIndex(r)}function dI(t){return!!Qn(t)}const xw=new Yi("Application Initializer");let mI=(()=>{var t;class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d}),this.appInits=yn(xw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const p of this.appInits){const w=p();if(ny(w))a.push(w);else if(Lv(w)){const S=new Promise((O,Z)=>{w.subscribe({complete:O,error:Z})});a.push(S)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{d()}).catch(p=>{this.reject(p)}),0===a.length&&d(),this.initialized=!0}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Bn({token:t,factory:t.\u0275fac,providedIn:"root"}),r})(),Rw=(()=>{var t;class r{log(a){console.log(a)}warn(a){console.warn(a)}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Bn({token:t,factory:t.\u0275fac,providedIn:"platform"}),r})();const g_=new Yi("LocaleId",{providedIn:"root",factory:()=>yn(g_,Sn.Optional|Sn.SkipSelf)||function OD(){return typeof $localize<"u"&&$localize.locale||Dg}()}),PD=new Yi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Ow=(()=>{var t;class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ke.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Bn({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();class kD{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let FD=(()=>{var t;class r{compileModuleSync(a){return new nI(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const d=this.compileModuleSync(a),w=Qu(Qn(a).declarations).reduce((S,O)=>{const Z=Dt(O);return Z&&S.push(new Jf(Z)),S},[]);return new kD(d,w)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Bn({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();const Fw=new Yi(""),Lw=new Yi("");let _I,nT=(()=>{var t;class r{constructor(a,d,p){this._ngZone=a,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_I||(function rT(t){_I=t}(p),p.addToWindow(d)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xa.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(a)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,d,p){let w=-1;d&&d>0&&(w=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==w),a(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:a,timeoutId:w,updateCb:p})}whenStable(a,d,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,d,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,d,p){return[]}}return(t=r).\u0275fac=function(a){return new(a||t)(nn(xa),nn(Bw),nn(Lw))},t.\u0275prov=Bn({token:t,factory:t.\u0275fac}),r})(),Bw=(()=>{var t;class r{constructor(){this._applications=new Map}registerApplication(a,d){this._applications.set(a,d)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,d=!0){return _I?.findTestabilityInTree(this,a,d)??null}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Bn({token:t,factory:t.\u0275fac,providedIn:"platform"}),r})(),Df=null;const $w=new Yi("AllowMultipleToken"),II=new Yi("PlatformDestroyListeners"),EI=new Yi("appBootstrapListener");class oT{constructor(r,o){this.name=r,this.token=o}}function jw(t,r,o=[]){const a=`Platform: ${r}`,d=new Yi(a);return(p=[])=>{let w=wI();if(!w||w.injector.get($w,!1)){const S=[...o,...p,{provide:d,useValue:!0}];t?t(S):function aT(t){if(Df&&!Df.get($w,!1))throw new Ve(400,!1);(function Vw(){!function Qa(t){Os=t}(()=>{throw new Ve(600,!1)})})(),Df=t;const r=t.get(zw);(function Uw(t){t.get(Yu,null)?.forEach(o=>o())})(t)}(function Hw(t=[],r){return Uc.create({name:r,providers:[{provide:Mp,useValue:"platform"},{provide:II,useValue:new Set([()=>Df=null])},...t]})}(S,a))}return function cT(t){const r=wI();if(!r)throw new Ve(401,!1);return r}()}}function wI(){return Df?.get(zw)??null}let zw=(()=>{var t;class r{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,d){const p=function uT(t="zone.js",r){return"noop"===t?new sm:"zone.js"===t?new xa(r):t}(d?.ngZone,function Gw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return p.run(()=>{const w=function mb(t,r,o){return new tI(t,r,o)}(a.moduleType,this.injector,function Zw(t){return[{provide:xa,useFactory:t},{provide:Bc,multi:!0,useFactory:()=>{const r=yn(hT,{optional:!0});return()=>r.initialize()}},{provide:Yw,useFactory:dT},{provide:om,useFactory:qp}]}(()=>p)),S=w.injector.get(sf,null);return p.runOutsideAngular(()=>{const O=p.onError.subscribe({next:Z=>{S.handleError(Z)}});w.onDestroy(()=>{y_(this._modules,w),O.unsubscribe()})}),function Ww(t,r,o){try{const a=o();return ny(a)?a.catch(d=>{throw r.runOutsideAngular(()=>t.handleError(d)),d}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(S,p,()=>{const O=w.injector.get(mI);return O.runInitializers(),O.donePromise.then(()=>(function cE(t){Bt(t,"Expected localeId to be defined"),"string"==typeof t&&(lE=t.toLowerCase().replace(/_/g,"-"))}(w.injector.get(g_,Dg)||Dg),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,d=[]){const p=qw({},d);return function iT(t,r,o){const a=new nI(o);return Promise.resolve(a)}(0,0,a).then(w=>this.bootstrapModuleFactory(w,p))}_moduleDoBootstrap(a){const d=a.injector.get(Ag);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(p=>d.bootstrap(p));else{if(!a.instance.ngDoBootstrap)throw new Ve(-403,!1);a.instance.ngDoBootstrap(d)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const a=this._injector.get(II,null);a&&(a.forEach(d=>d()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=r).\u0275fac=function(a){return new(a||t)(nn(Uc))},t.\u0275prov=Bn({token:t,factory:t.\u0275fac,providedIn:"platform"}),r})();function qw(t,r){return Array.isArray(r)?r.reduce(qw,t):{...t,...r}}let Ag=(()=>{var t;class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=yn(Yw),this.zoneIsStable=yn(om),this.componentTypes=[],this.components=[],this.isStable=yn(Ow).hasPendingTasks.pipe((0,qe.w)(a=>a?(0,Pe.of)(!1):this.zoneIsStable),(0,Je.x)(),(0,Ie.B)()),this._injector=yn($c)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,d){const p=a instanceof Zg;if(!this._injector.get(mI).done)throw!p&&Kn(a),new Ve(405,!1);let S;S=p?a:this._injector.get(zf).resolveComponentFactory(a),this.componentTypes.push(S.componentType);const O=function sT(t){return t.isBoundToModule}(S)?void 0:this._injector.get(pp),ie=S.create(Uc.NULL,[],d||S.selector,O),Le=ie.location.nativeElement,ft=ie.injector.get(Fw,null);return ft?.registerApplication(Le),ie.onDestroy(()=>{this.detachView(ie.hostView),y_(this.components,ie),ft?.unregisterApplication(Le)}),this._loadComponent(ie),ie}tick(){if(this._runningTick)throw new Ve(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const d=a;this._views.push(d),d.attachToAppRef(this)}detachView(a){const d=a;y_(this._views,d),d.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const d=this._injector.get(EI,[]);d.push(...this._bootstrapListeners),d.forEach(p=>p(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>y_(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ve(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Bn({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();function y_(t,r){const o=t.indexOf(r);o>-1&&t.splice(o,1)}const Yw=new Yi("",{providedIn:"root",factory:()=>yn(sf).handleError.bind(void 0)});function dT(){const t=yn(xa),r=yn(sf);return o=>t.runOutsideAngular(()=>r.handleError(o))}let hT=(()=>{var t;class r{constructor(){this.zone=yn(xa),this.applicationRef=yn(Ag)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=r).\u0275fac=function(a){return new(a||t)},t.\u0275prov=Bn({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();function pT(){return!1}function gT(){}let mT=(()=>{class r{}return r.__NG_ELEMENT_ID__=yT,r})();function yT(t){return function vT(t,r,o){if(ws(t)&&!o){const a=Vo(t.index,r);return new td(a,a)}return 47&t.type?new td(r[Fi],r):null}(Vi(),dn(),16==(16&t))}class eC{constructor(){}supports(r){return cc(r)}create(r){return new bT(r)}}const CT=(t,r)=>r;class bT{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||CT}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,d=0,p=null;for(;o||a;){const w=!a||o&&o.currentIndex<nC(a,d,p)?o:a,S=nC(w,d,p),O=w.currentIndex;if(w===a)d--,a=a._nextRemoved;else if(o=o._next,null==w.previousIndex)d++;else{p||(p=[]);const Z=S-d,ie=O-d;if(Z!=ie){for(let ft=0;ft<Z;ft++){const Et=ft<p.length?p[ft]:p[ft]=0,Jt=Et+ft;ie<=Jt&&Jt<Z&&(p[ft]=Et+1)}p[w.previousIndex]=ie-Z}}S!==O&&r(w,S,O)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!cc(r))throw new Ve(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let d,p,w,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let S=0;S<this.length;S++)p=r[S],w=this._trackByFn(S,p),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,p,w,S)),Object.is(o.item,p)||this._addIdentityChange(o,p)):(o=this._mismatch(o,p,w,S),a=!0),o=o._next}else d=0,function Dh(t,r){if(Array.isArray(t))for(let o=0;o<t.length;o++)r(t[o]);else{const o=t[Symbol.iterator]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,S=>{w=this._trackByFn(d,S),null!==o&&Object.is(o.trackById,w)?(a&&(o=this._verifyReinsertion(o,S,w,d)),Object.is(o.item,S)||this._addIdentityChange(o,S)):(o=this._mismatch(o,S,w,d),a=!0),o=o._next,d++}),this.length=d;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,d){let p;return null===r?p=this._itTail:(p=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,p,d)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,p,d)):r=this._addAfter(new DT(o,a),p,d),r}_verifyReinsertion(r,o,a,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==p?r=this._reinsertAfter(p,r._prev,d):r.currentIndex!=d&&(r.currentIndex=d,this._addToMoves(r,d)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const d=r._prevRemoved,p=r._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const d=null===o?this._itHead:o._next;return r._next=d,r._prev=o,null===d?this._itTail=r:d._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new tC),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tC),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class DT{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TT{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class tC{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new TT,this.map.set(o,a)),a.add(r)}get(r,o){const d=this.map.get(r);return d?d.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nC(t,r,o){const a=t.previousIndex;if(null===a)return a;let d=0;return o&&a<o.length&&(d=o[a]),a+r+d}class rC{constructor(){}supports(r){return r instanceof Map||pf(r)}create(){return new ST}}class ST{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||pf(r)))throw new Ve(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,d)=>{if(o&&o.key===d)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const p=this._getOrCreateRecordForKey(d,a);o=this._insertBeforeOrAppend(o,p)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const d=this._records.get(r);this._maybeAddToChanges(d,o);const p=d._prev,w=d._next;return p&&(p._next=w),w&&(w._prev=p),d._next=null,d._prev=null,d}const a=new AT(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class AT{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iC(){return new SI([new eC])}let SI=(()=>{var t;class r{constructor(a){this.factories=a}static create(a,d){if(null!=d){const p=d.factories.slice();a=a.concat(p)}return new r(a)}static extend(a){return{provide:r,useFactory:d=>r.create(a,d||iC()),deps:[[r,new Wa,new Dc]]}}find(a){const d=this.factories.find(p=>p.supports(a));if(null!=d)return d;throw new Ve(901,!1)}}return(t=r).\u0275prov=Bn({token:t,providedIn:"root",factory:iC}),r})();function sC(){return new AI([new rC])}let AI=(()=>{var t;class r{constructor(a){this.factories=a}static create(a,d){if(d){const p=d.factories.slice();a=a.concat(p)}return new r(a)}static extend(a){return{provide:r,useFactory:d=>r.create(a,d||sC()),deps:[[r,new Wa,new Dc]]}}find(a){const d=this.factories.find(p=>p.supports(a));if(d)return d;throw new Ve(901,!1)}}return(t=r).\u0275prov=Bn({token:t,providedIn:"root",factory:sC}),r})();const RT=jw(null,"core",[]);let OT=(()=>{var t;class r{constructor(a){}}return(t=r).\u0275fac=function(a){return new(a||t)(nn(Ag))},t.\u0275mod=Rn({type:t}),t.\u0275inj=wt({}),r})();function HT(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function GT(t,r){const o=Dt(t),a=r.elementInjector||Lf();return new Jf(o).create(a,r.projectableNodes,r.hostElement,r.environmentInjector)}function WT(t){const r=Dt(t);if(!r)return null;const o=new Jf(r);return{get selector(){return o.selector},get type(){return o.componentType},get inputs(){return o.inputs},get outputs(){return o.outputs},get ngContentSelectors(){return o.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},3399:(wn,gt,L)=>{"use strict";L.d(gt,{Z:()=>nt});var I=L(9058),v=L(4537),ne=L(7592),he=L(7879);class ke{constructor(Ye,De){this._delegate=Ye,this.firebase=De,(0,ne._addComponent)(Ye,new v.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ne.deleteApp)(this._delegate)))}_getService(Ye,De=ne._DEFAULT_ENTRY_NAME){var Ee;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(Ye);return!yt.isInitialized()&&"EXPLICIT"===(null===(Ee=yt.getComponent())||void 0===Ee?void 0:Ee.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:De})}_removeServiceInstance(Ye,De=ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(De)}_addComponent(Ye){(0,ne._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,ne._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ye=function Je(){const Ze=function qe(Ze){const Ye={},De={__esModule:!0,initializeApp:function Ve(Fe,fe={}){const at=ne.initializeApp(Fe,fe);if((0,I.r3)(Ye,at.name))return Ye[at.name];const Ue=new Ze(at,De);return Ye[at.name]=Ue,Ue},app:yt,registerVersion:ne.registerVersion,setLogLevel:ne.setLogLevel,onLog:ne.onLog,apps:null,SDK_VERSION:ne.SDK_VERSION,INTERNAL:{registerComponent:function be(Fe){const fe=Fe.name,at=fe.replace("-compat","");if(ne._registerComponent(Fe)&&"PUBLIC"===Fe.type){const Ue=(zt=yt())=>{if("function"!=typeof zt[at])throw Ie.create("invalid-app-argument",{appName:fe});return zt[at]()};void 0!==Fe.serviceProps&&(0,I.ZB)(Ue,Fe.serviceProps),De[at]=Ue,Ze.prototype[at]=function(...zt){return this._getService.bind(this,fe).apply(this,Fe.multipleInstances?zt:[])}}return"PUBLIC"===Fe.type?De[at]:null},removeApp:function Ee(Fe){delete Ye[Fe]},useAsService:function Xe(Fe,fe){return"serverAuth"===fe?null:fe},modularAPIs:ne}};function yt(Fe){if(!(0,I.r3)(Ye,Fe=Fe||ne._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:Fe});return Ye[Fe]}return De.default=De,Object.defineProperty(De,"apps",{get:function rt(){return Object.keys(Ye).map(Fe=>Ye[Fe])}}),yt.App=Ze,De}(ke);return Ze.INTERNAL=Object.assign(Object.assign({},Ze.INTERNAL),{createFirebaseNamespace:Je,extendNamespace:function Ye(De){(0,I.ZB)(Ze,De)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),Ze}(),ge=new he.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){ge.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ze=self.firebase.SDK_VERSION;Ze&&Ze.indexOf("LITE")>=0&&ge.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nt=ye;!function ze(Ze){(0,ne.registerVersion)("@firebase/app-compat","0.2.13",Ze)}()},7592:(wn,gt,L)=>{"use strict";L.r(gt),L.d(gt,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>Wt,_DEFAULT_ENTRY_NAME:()=>je,_addComponent:()=>Ft,_addOrOverwriteComponent:()=>Qt,_apps:()=>ht,_clearComponents:()=>tn,_components:()=>Bt,_getProvider:()=>Vn,_registerComponent:()=>st,_removeServiceInstance:()=>Bn,deleteApp:()=>Xn,getApp:()=>En,getApps:()=>vn,initializeApp:()=>Tn,onLog:()=>wr,registerVersion:()=>Jn,setLogLevel:()=>Sn});var Pe,Ie,qe,I=L(5861),v=L(4537),ne=L(7879),he=L(9058),ke=L(1878);class Je{constructor(ot){this.container=ot}getPlatformInfoString(){return this.container.getProviders().map(Pt=>{if(function ye(jt){const ot=jt.getComponent();return"VERSION"===ot?.type}(Pt)){const sn=Pt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(Pt=>Pt).join(" ")}}const ge="@firebase/app",Ge=new ne.Yd("@firebase/app"),je="[DEFAULT]",pt={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,Bt=new Map;function Ft(jt,ot){try{jt.container.addComponent(ot)}catch(Pt){Ge.debug(`Component ${ot.name} failed to register with FirebaseApp ${jt.name}`,Pt)}}function Qt(jt,ot){jt.container.addOrOverwriteComponent(ot)}function st(jt){const ot=jt.name;if(Bt.has(ot))return Ge.debug(`There were multiple attempts to register component ${ot}.`),!1;Bt.set(ot,jt);for(const Pt of ht.values())Ft(Pt,jt);return!0}function Vn(jt,ot){const Pt=jt.container.getProvider("heartbeat").getImmediate({optional:!0});return Pt&&Pt.triggerHeartbeat(),jt.container.getProvider(ot)}function Bn(jt,ot,Pt=je){Vn(jt,ot).clearInstance(Pt)}function tn(){Bt.clear()}const Rt=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class dt{constructor(ot,Pt,sn){this._isDeleted=!1,this._options=Object.assign({},ot),this._config=Object.assign({},Pt),this._name=Pt.name,this._automaticDataCollectionEnabled=Pt.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new v.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this.checkDestroyed(),this._automaticDataCollectionEnabled=ot}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ot){this._isDeleted=ot}checkDestroyed(){if(this.isDeleted)throw Rt.create("app-deleted",{appName:this._name})}}const Wt="9.23.0";function Tn(jt,ot={}){let Pt=jt;"object"!=typeof ot&&(ot={name:ot});const sn=Object.assign({name:je,automaticDataCollectionEnabled:!1},ot),In=sn.name;if("string"!=typeof In||!In)throw Rt.create("bad-app-name",{appName:String(In)});if(Pt||(Pt=(0,he.aH)()),!Pt)throw Rt.create("no-options");const Mn=ht.get(In);if(Mn){if((0,he.vZ)(Pt,Mn.options)&&(0,he.vZ)(sn,Mn.config))return Mn;throw Rt.create("duplicate-app",{appName:In})}const br=new v.H0(In);for(const re of Bt.values())br.addComponent(re);const Ke=new dt(Pt,sn,br);return ht.set(In,Ke),Ke}function En(jt=je){const ot=ht.get(jt);if(!ot&&jt===je&&(0,he.aH)())return Tn();if(!ot)throw Rt.create("no-app",{appName:jt});return ot}function vn(){return Array.from(ht.values())}function Xn(jt){return(Pe=Pe||(0,I.Z)(function*(ot){const Pt=ot.name;ht.has(Pt)&&(ht.delete(Pt),yield Promise.all(ot.container.getProviders().map(sn=>sn.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function Jn(jt,ot,Pt){var sn;let In=null!==(sn=pt[jt])&&void 0!==sn?sn:jt;Pt&&(In+=`-${Pt}`);const Mn=In.match(/\s|\//),br=ot.match(/\s|\//);if(Mn||br){const Ke=[`Unable to register library "${In}" with version "${ot}":`];return Mn&&Ke.push(`library name "${In}" contains illegal characters (whitespace or "/")`),Mn&&br&&Ke.push("and"),br&&Ke.push(`version name "${ot}" contains illegal characters (whitespace or "/")`),void Ge.warn(Ke.join(" "))}st(new v.wA(`${In}-version`,()=>({library:In,version:ot}),"VERSION"))}function wr(jt,ot){if(null!==jt&&"function"!=typeof jt)throw Rt.create("invalid-log-argument");(0,ne.Am)(jt,ot)}function Sn(jt){(0,ne.Ub)(jt)}const Pn="firebase-heartbeat-database",Un=1,pr="firebase-heartbeat-store";let Lr=null;function Br(){return Lr||(Lr=(0,ke.X3)(Pn,Un,{upgrade:(jt,ot)=>{0===ot&&jt.createObjectStore(pr)}}).catch(jt=>{throw Rt.create("idb-open",{originalErrorMessage:jt.message})})),Lr}function hr(jt,ot){return(qe=qe||(0,I.Z)(function*(Pt,sn){try{const Mn=(yield Br()).transaction(pr,"readwrite");yield Mn.objectStore(pr).put(sn,an(Pt)),yield Mn.done}catch(In){if(In instanceof he.ZR)Ge.warn(In.message);else{const Mn=Rt.create("idb-set",{originalErrorMessage:In?.message});Ge.warn(Mn.message)}}})).apply(this,arguments)}function an(jt){return`${jt.name}!${jt.options.appId}`}class or{constructor(ot){this.container=ot,this._heartbeatsCache=null;const Pt=this.container.getProvider("app").getImmediate();this._storage=new Di(Pt),this._heartbeatsCachePromise=this._storage.read().then(sn=>(this._heartbeatsCache=sn,sn))}triggerHeartbeat(){var ot=this;return(0,I.Z)(function*(){const sn=ot.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),In=bi();if(null===ot._heartbeatsCache&&(ot._heartbeatsCache=yield ot._heartbeatsCachePromise),ot._heartbeatsCache.lastSentHeartbeatDate!==In&&!ot._heartbeatsCache.heartbeats.some(Mn=>Mn.date===In))return ot._heartbeatsCache.heartbeats.push({date:In,agent:sn}),ot._heartbeatsCache.heartbeats=ot._heartbeatsCache.heartbeats.filter(Mn=>{const br=new Date(Mn.date).valueOf();return Date.now()-br<=2592e6}),ot._storage.overwrite(ot._heartbeatsCache)})()}getHeartbeatsHeader(){var ot=this;return(0,I.Z)(function*(){if(null===ot._heartbeatsCache&&(yield ot._heartbeatsCachePromise),null===ot._heartbeatsCache||0===ot._heartbeatsCache.heartbeats.length)return"";const Pt=bi(),{heartbeatsToSend:sn,unsentEntries:In}=function Zi(jt,ot=1024){const Pt=[];let sn=jt.slice();for(const In of jt){const Mn=Pt.find(br=>br.agent===In.agent);if(Mn){if(Mn.dates.push(In.date),_i(Pt)>ot){Mn.dates.pop();break}}else if(Pt.push({agent:In.agent,dates:[In.date]}),_i(Pt)>ot){Pt.pop();break}sn=sn.slice(1)}return{heartbeatsToSend:Pt,unsentEntries:sn}}(ot._heartbeatsCache.heartbeats),Mn=(0,he.L)(JSON.stringify({version:2,heartbeats:sn}));return ot._heartbeatsCache.lastSentHeartbeatDate=Pt,In.length>0?(ot._heartbeatsCache.heartbeats=In,yield ot._storage.overwrite(ot._heartbeatsCache)):(ot._heartbeatsCache.heartbeats=[],ot._storage.overwrite(ot._heartbeatsCache)),Mn})()}}function bi(){return(new Date).toISOString().substring(0,10)}class Di{constructor(ot){this.app=ot,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ot=this;return(0,I.Z)(function*(){return(yield ot._canUseIndexedDBPromise)&&(yield function Kt(jt){return(Ie=Ie||(0,I.Z)(function*(ot){try{return yield(yield Br()).transaction(pr).objectStore(pr).get(an(ot))}catch(Pt){if(Pt instanceof he.ZR)Ge.warn(Pt.message);else{const sn=Rt.create("idb-get",{originalErrorMessage:Pt?.message});Ge.warn(sn.message)}}})).apply(this,arguments)}(ot.app))||{heartbeats:[]}})()}overwrite(ot){var Pt=this;return(0,I.Z)(function*(){var sn;if(yield Pt._canUseIndexedDBPromise){const Mn=yield Pt.read();return hr(Pt.app,{lastSentHeartbeatDate:null!==(sn=ot.lastSentHeartbeatDate)&&void 0!==sn?sn:Mn.lastSentHeartbeatDate,heartbeats:ot.heartbeats})}})()}add(ot){var Pt=this;return(0,I.Z)(function*(){var sn;if(yield Pt._canUseIndexedDBPromise){const Mn=yield Pt.read();return hr(Pt.app,{lastSentHeartbeatDate:null!==(sn=ot.lastSentHeartbeatDate)&&void 0!==sn?sn:Mn.lastSentHeartbeatDate,heartbeats:[...Mn.heartbeats,...ot.heartbeats]})}})()}}function _i(jt){return(0,he.L)(JSON.stringify({version:2,heartbeats:jt})).length}!function Ii(jt){st(new v.wA("platform-logger",ot=>new Je(ot),"PRIVATE")),st(new v.wA("heartbeat",ot=>new or(ot),"PRIVATE")),Jn(ge,"0.9.13",jt),Jn(ge,"0.9.13","esm2017"),Jn("fire-js","")}("")},4097:(wn,gt,L)=>{"use strict";L.d(gt,{C6:()=>I.getApps,Mq:()=>I.getApp});var I=L(7592);(0,I.registerVersion)("firebase","9.23.0","app")},120:(wn,gt,L)=>{"use strict";L.d(gt,{Z:()=>I.Z});var I=L(3399);I.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(wn,gt,L)=>{"use strict";L.r(gt);var qe,Je,ye,ge,Me,Ge,ze,nt,Ze,Ye,De,Ee,yt,Ve,rt,be,Xe,Fe,fe,at,Ue,zt,en,Xt,mn,de,gn,_t,pe,Se,$e,je,pt,ht,Bt,Ft,Qt,st,Vn,Bn,tn,wt,Rt,dt,Wt,Tn,En,vn,Xn,Jn,wr,Sn,Pn,Un,pr,Lr,Br,hr,an,Cr,_s,or,bi,Zi,Di,_i,Ii,jt,ot,Pt,sn,In,Mn,br,Ke,re,te,Ne,ue,lt,St,I=L(5861),v=L(3399),ne=L(9058),he=L(7592),ke=L(7582),Pe=L(7879),Ie=L(4537);const zn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Is=function Zr(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Fs=function ei(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Bi=new ne.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),oi=new Pe.Yd("@firebase/auth");function ur(P,...g){oi.logLevel<=Pe.in.ERROR&&oi.error(`Auth (${he.SDK_VERSION}): ${P}`,...g)}function Hr(P,...g){throw ti(P,...g)}function qr(P,...g){return ti(P,...g)}function Ji(P,g,m){const b=Object.assign(Object.assign({},Fs()),{[g]:m});return new ne.LL("auth","Firebase",b).create(g,{appName:P.name})}function Mi(P,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Hr(P,"argument-error"),Ji(P,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ti(P,...g){if("string"!=typeof P){const m=g[0],b=[...g.slice(1)];return b[0]&&(b[0].appName=P.name),P._errorFactory.create(m,...b)}return Bi.create(P,...g)}function on(P,g,...m){if(!P)throw ti(g,...m)}function vi(P){const g="INTERNAL ASSERTION FAILED: "+P;throw ur(g),new Error(g)}function Ni(P,g){P||vi(g)}function es(){var P;return typeof self<"u"&&(null===(P=self.location)||void 0===P?void 0:P.href)||""}function Kr(){return"http:"===$r()||"https:"===$r()}function $r(){var P;return typeof self<"u"&&(null===(P=self.location)||void 0===P?void 0:P.protocol)||null}class Qi{constructor(g,m){this.shortDelay=g,this.longDelay=m,Ni(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,ne.uI)()||(0,ne.b$)()}get(){return function Bs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kr()||(0,ne.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ei(P,g){Ni(P.emulator,"Emulator should always be set here");const{url:m}=P.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class ts{static initialize(g,m,b){this.fetchImpl=g,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},$s=new Qi(3e4,6e4);function Ir(P,g){return P.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:P.tenantId}):g}function Dr(P,g,m,b){return(qe=qe||(0,I.Z)(function*(W,ee,Ae,Oe,Tt={}){return as(W,Tt,(0,I.Z)(function*(){let Ht={},ir={};Oe&&("GET"===ee?ir=Oe:Ht={body:JSON.stringify(Oe)});const Yn=(0,ne.xO)(Object.assign({key:W.config.apiKey},ir)).slice(1),_r=yield W._getAdditionalHeaders();return _r["Content-Type"]="application/json",W.languageCode&&(_r["X-Firebase-Locale"]=W.languageCode),ts.fetch()(Cn(W,W.config.apiHost,Ae,Yn),Object.assign({method:ee,headers:_r,referrerPolicy:"no-referrer"},Ht))}))})).apply(this,arguments)}function as(P,g,m){return(Je=Je||(0,I.Z)(function*(b,W,ee){b._canInitEmulator=!1;const Ae=Object.assign(Object.assign({},Gi),W);try{const Oe=new J(b),Tt=yield Promise.race([ee(),Oe.promise]);Oe.clearNetworkTimeout();const Ht=yield Tt.json();if("needConfirmation"in Ht)throw _e(b,"account-exists-with-different-credential",Ht);if(Tt.ok&&!("errorMessage"in Ht))return Ht;{const ir=Tt.ok?Ht.errorMessage:Ht.error.message,[Yn,_r]=ir.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Yn)throw _e(b,"credential-already-in-use",Ht);if("EMAIL_EXISTS"===Yn)throw _e(b,"email-already-in-use",Ht);if("USER_DISABLED"===Yn)throw _e(b,"user-disabled",Ht);const Xr=Ae[Yn]||Yn.toLowerCase().replace(/[_\s]+/g,"-");if(_r)throw Ji(b,Xr,_r);Hr(b,Xr)}}catch(Oe){if(Oe instanceof ne.ZR)throw Oe;Hr(b,"network-request-failed",{message:String(Oe)})}})).apply(this,arguments)}function bt(P,g,m,b){return(ye=ye||(0,I.Z)(function*(W,ee,Ae,Oe,Tt={}){const Ht=yield Dr(W,ee,Ae,Oe,Tt);return"mfaPendingCredential"in Ht&&Hr(W,"multi-factor-auth-required",{_serverResponse:Ht}),Ht})).apply(this,arguments)}function Cn(P,g,m,b){const W=`${g}${m}?${b}`;return P.config.emulator?Ei(P.config,W):`${P.config.apiScheme}://${W}`}class J{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(qr(this.auth,"network-request-failed")),$s.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _e(P,g,m){const b={appName:P.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const W=qr(P,g,b);return W.customData._tokenResponse=m,W}function It(P){if(P)try{const g=new Date(Number(P));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Ut(P){return 1e3*Number(P)}function ln(P){const[g,m,b]=P.split(".");if(void 0===g||void 0===m||void 0===b)return ur("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,ne.tV)(m);return W?JSON.parse(W):(ur("Failed to decode base64 JWT payload"),null)}catch(W){return ur("Caught error parsing JWT payload as JSON",W?.toString()),null}}function We(P,g){return(nt=nt||(0,I.Z)(function*(m,b,W=!1){if(W)return b;try{return yield b}catch(ee){throw ee instanceof ne.ZR&&function He({code:P}){return"auth/user-disabled"===P||"auth/user-token-expired"===P}(ee)&&m.auth.currentUser===m&&(yield m.auth.signOut()),ee}})).apply(this,arguments)}class ut{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const W=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(g);this.timerId=setTimeout((0,I.Z)(function*(){yield m.iteration()}),b)}iteration(){var g=this;return(0,I.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&g.schedule(!0))}g.schedule()})()}}class kt{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=It(this.lastLoginAt),this.creationTime=It(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Dt(P){return(Ze=Ze||(0,I.Z)(function*(g){var m;const b=g.auth,W=yield g.getIdToken(),ee=yield We(g,function At(P,g){return(Ge=Ge||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:lookup",b)})).apply(this,arguments)}(b,{idToken:W}));on(ee?.users.length,b,"internal-error");const Ae=ee.users[0];g._notifyReloadListener(Ae);const Oe=null!==(m=Ae.providerUserInfo)&&void 0!==m&&m.length?function Kn(P){return P.map(g=>{var{providerId:m}=g,b=(0,ke._T)(g,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}(Ae.providerUserInfo):[],Tt=function qn(P,g){return[...P.filter(b=>!g.some(W=>W.providerId===b.providerId)),...g]}(g.providerData,Oe),Yn=!!g.isAnonymous&&!(g.email&&Ae.passwordHash||Tt?.length),_r={uid:Ae.localId,displayName:Ae.displayName||null,photoURL:Ae.photoUrl||null,email:Ae.email||null,emailVerified:Ae.emailVerified||!1,phoneNumber:Ae.phoneNumber||null,tenantId:Ae.tenantId||null,providerData:Tt,metadata:new kt(Ae.createdAt,Ae.lastLoginAt),isAnonymous:Yn};Object.assign(g,_r)})).apply(this,arguments)}class Ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){on(g.idToken,"internal-error"),on(typeof g.idToken<"u","internal-error"),on(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Rn(P){const g=ln(P);return on(g,"internal-error"),on(typeof g.exp<"u","internal-error"),on(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var b=this;return(0,I.Z)(function*(){return on(!b.accessToken||b.refreshToken,g,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(g,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var b=this;return(0,I.Z)(function*(){const{accessToken:W,refreshToken:ee,expiresIn:Ae}=yield function Qn(P,g){return(De=De||(0,I.Z)(function*(m,b){const W=yield as(m,{},(0,I.Z)(function*(){const ee=(0,ne.xO)({grant_type:"refresh_token",refresh_token:b}).slice(1),{tokenApiHost:Ae,apiKey:Oe}=m.config,Tt=Cn(m,Ae,"/v1/token",`key=${Oe}`),Ht=yield m._getAdditionalHeaders();return Ht["Content-Type"]="application/x-www-form-urlencoded",ts.fetch()(Tt,{method:"POST",headers:Ht,body:ee})}));return{accessToken:W.access_token,expiresIn:W.expires_in,refreshToken:W.refresh_token}})).apply(this,arguments)}(g,m);b.updateTokensAndExpiration(W,ee,Number(Ae))})()}updateTokensAndExpiration(g,m,b){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(g,m){const{refreshToken:b,accessToken:W,expirationTime:ee}=m,Ae=new Ln;return b&&(on("string"==typeof b,"internal-error",{appName:g}),Ae.refreshToken=b),W&&(on("string"==typeof W,"internal-error",{appName:g}),Ae.accessToken=W),ee&&(on("number"==typeof ee,"internal-error",{appName:g}),Ae.expirationTime=ee),Ae}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ln,this.toJSON())}_performRefresh(){return vi("not implemented")}}function wi(P,g){on("string"==typeof P||typeof P>"u","internal-error",{appName:g})}class Er{constructor(g){var{uid:m,auth:b,stsTokenManager:W}=g,ee=(0,ke._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ut(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=ee.displayName||null,this.email=ee.email||null,this.emailVerified=ee.emailVerified||!1,this.phoneNumber=ee.phoneNumber||null,this.photoURL=ee.photoURL||null,this.isAnonymous=ee.isAnonymous||!1,this.tenantId=ee.tenantId||null,this.providerData=ee.providerData?[...ee.providerData]:[],this.metadata=new kt(ee.createdAt||void 0,ee.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,I.Z)(function*(){const b=yield We(m,m.stsTokenManager.getToken(m.auth,g));return on(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(g){return function Zt(P){return(ze=ze||(0,I.Z)(function*(g,m=!1){const b=(0,ne.m9)(g),W=yield b.getIdToken(m),ee=ln(W);on(ee&&ee.exp&&ee.auth_time&&ee.iat,b.auth,"internal-error");const Ae="object"==typeof ee.firebase?ee.firebase:void 0,Oe=Ae?.sign_in_provider;return{claims:ee,token:W,authTime:It(Ut(ee.auth_time)),issuedAtTime:It(Ut(ee.iat)),expirationTime:It(Ut(ee.exp)),signInProvider:Oe||null,signInSecondFactor:Ae?.sign_in_second_factor||null}})).apply(this,arguments)}(this,g)}reload(){return function bn(P){return(Ye=Ye||(0,I.Z)(function*(g){const m=(0,ne.m9)(g);yield Dt(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}(this)}_assign(g){this!==g&&(on(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const m=new Er(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(g){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var b=this;return(0,I.Z)(function*(){let W=!1;g.idToken&&g.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(g),W=!0),m&&(yield Dt(b)),yield b.auth._persistUserIfCurrent(b),W&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var g=this;return(0,I.Z)(function*(){const m=yield g.getIdToken();return yield We(g,function it(P,g){return(ge=ge||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:delete",b)})).apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var b,W,ee,Ae,Oe,Tt,Ht,ir;const Yn=null!==(b=m.displayName)&&void 0!==b?b:void 0,_r=null!==(W=m.email)&&void 0!==W?W:void 0,Xr=null!==(ee=m.phoneNumber)&&void 0!==ee?ee:void 0,vs=null!==(Ae=m.photoURL)&&void 0!==Ae?Ae:void 0,fo=null!==(Oe=m.tenantId)&&void 0!==Oe?Oe:void 0,Fo=null!==(Tt=m._redirectEventId)&&void 0!==Tt?Tt:void 0,vl=null!==(Ht=m.createdAt)&&void 0!==Ht?Ht:void 0,$l=null!==(ir=m.lastLoginAt)&&void 0!==ir?ir:void 0,{uid:Pc,emailVerified:oc,isAnonymous:nh,providerData:Vl,stsTokenManager:rh}=m;on(Pc&&rh,g,"internal-error");const Vh=Ln.fromJSON(this.name,rh);on("string"==typeof Pc,g,"internal-error"),wi(Yn,g.name),wi(_r,g.name),on("boolean"==typeof oc,g,"internal-error"),on("boolean"==typeof nh,g,"internal-error"),wi(Xr,g.name),wi(vs,g.name),wi(fo,g.name),wi(Fo,g.name),wi(vl,g.name),wi($l,g.name);const Nc=new Er({uid:Pc,auth:g,email:_r,emailVerified:oc,displayName:Yn,isAnonymous:nh,photoURL:vs,phoneNumber:Xr,tenantId:fo,stsTokenManager:Vh,createdAt:vl,lastLoginAt:$l});return Vl&&Array.isArray(Vl)&&(Nc.providerData=Vl.map(Uh=>Object.assign({},Uh))),Fo&&(Nc._redirectEventId=Fo),Nc}static _fromIdTokenResponse(g,m,b=!1){return(0,I.Z)(function*(){const W=new Ln;W.updateFromServerResponse(m);const ee=new Er({uid:m.localId,auth:g,stsTokenManager:W,isAnonymous:b});return yield Dt(ee),ee})()}}const _o=new Map;function ki(P){Ni(P instanceof Function,"Expected a class definition");let g=_o.get(P);return g?(Ni(g instanceof P,"Instance stored in cache mismatched with class"),g):(g=new P,_o.set(P,g),g)}const An=(()=>{class P{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(m,b){var W=this;return(0,I.Z)(function*(){W.storage[m]=b})()}_get(m){var b=this;return(0,I.Z)(function*(){const W=b.storage[m];return void 0===W?null:W})()}_remove(m){var b=this;return(0,I.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return P.type="NONE",P})();function $n(P,g,m){return`firebase:${P}:${g}:${m}`}class Gn{constructor(g,m,b){this.persistence=g,this.auth=m,this.userKey=b;const{config:W,name:ee}=this.auth;this.fullUserKey=$n(this.userKey,W.apiKey,ee),this.fullPersistenceKey=$n("persistence",W.apiKey,ee),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,I.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?Er._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,I.Z)(function*(){if(m.persistence===g)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,b="authUser"){return(0,I.Z)(function*(){var W,ee;if(!m.length)return new Gn(ki(An),g,b);const Ae=(yield Promise.all(m.map(function(Yn){return(W=W||(0,I.Z)(function*(_r){if(yield _r._isAvailable())return _r})).apply(this,arguments)}))).filter(Yn=>Yn);let Oe=Ae[0]||ki(An);const Tt=$n(b,g.config.apiKey,g.name);let Ht=null;for(const Yn of m)try{const _r=yield Yn._get(Tt);if(_r){const Xr=Er._fromJSON(g,_r);Yn!==Oe&&(Ht=Xr),Oe=Yn;break}}catch{}const ir=Ae.filter(Yn=>Yn._shouldAllowMigration);return Oe._shouldAllowMigration&&ir.length?(Oe=ir[0],Ht&&(yield Oe._set(Tt,Ht.toJSON())),yield Promise.all(m.map(function(Yn){return(ee=ee||(0,I.Z)(function*(_r){if(_r!==Oe)try{yield _r._remove(Tt)}catch{}})).apply(this,arguments)})),new Gn(Oe,g,b)):new Gn(Oe,g,b)})()}}function Vr(P){const g=P.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ci(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Vs(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Mo(g))return"Blackberry";if(ar(g))return"Webos";if(Ti(g))return"Safari";if((g.includes("chrome/")||ls(g))&&!g.includes("edge/"))return"Chrome";if(Es(g))return"Android";{const b=P.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function Vs(P=(0,ne.z$)()){return/firefox\//i.test(P)}function Ti(P=(0,ne.z$)()){const g=P.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ls(P=(0,ne.z$)()){return/crios\//i.test(P)}function Ci(P=(0,ne.z$)()){return/iemobile/i.test(P)}function Es(P=(0,ne.z$)()){return/android/i.test(P)}function Mo(P=(0,ne.z$)()){return/blackberry/i.test(P)}function ar(P=(0,ne.z$)()){return/webos/i.test(P)}function xi(P=(0,ne.z$)()){return/iphone|ipad|ipod/i.test(P)||/macintosh/i.test(P)&&/mobile/i.test(P)}function ni(P=(0,ne.z$)()){return xi(P)||Es(P)||ar(P)||Mo(P)||/windows phone/i.test(P)||Ci(P)}function fs(P,g=[]){let m;switch(P){case"Browser":m=Vr((0,ne.z$)());break;case"Worker":m=`${Vr((0,ne.z$)())}-${P}`;break;default:m=P}const b=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${he.SDK_VERSION}/${b}`}function Ca(P,g){return(yt=yt||(0,I.Z)(function*(m,b){return Dr(m,"GET","/v2/recaptchaConfig",Ir(m,b))})).apply(this,arguments)}function Ms(P){return void 0!==P&&void 0!==P.getResponse}function Tr(P){return void 0!==P&&void 0!==P.enterprise}class js{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function kr(P){return new Promise((g,m)=>{const b=document.createElement("script");b.setAttribute("src",P),b.onload=g,b.onerror=W=>{const ee=qr("internal-error");ee.customData=W,m(ee)},b.type="text/javascript",b.charset="UTF-8",function mo(){var P,g;return null!==(g=null===(P=document.getElementsByTagName("head"))||void 0===P?void 0:P[0])&&void 0!==g?g:document}().appendChild(b)})}function ps(P){return`__${P}${Math.floor(1e6*Math.random())}`}class ri{constructor(g){this.type="recaptcha-enterprise",this.auth=qi(g)}verify(g="verify",m=!1){var b=this;return(0,I.Z)(function*(){var W;function Ae(Oe,Tt,Ht){const ir=window.grecaptcha;Tr(ir)?ir.enterprise.ready(()=>{ir.enterprise.execute(Oe,{action:g}).then(Yn=>{Tt(Yn)}).catch(()=>{Tt("NO_RECAPTCHA")})}):Ht(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Oe,Tt)=>{(function ee(Oe){return(W=W||(0,I.Z)(function*(Tt){var Ht;if(!m){if(null==Tt.tenantId&&null!=Tt._agentRecaptchaConfig)return Tt._agentRecaptchaConfig.siteKey;if(null!=Tt.tenantId&&void 0!==Tt._tenantRecaptchaConfigs[Tt.tenantId])return Tt._tenantRecaptchaConfigs[Tt.tenantId].siteKey}return new Promise(function(ir,Yn){return(Ht=Ht||(0,I.Z)(function*(_r,Xr){Ca(Tt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(vs=>{if(void 0!==vs.recaptchaKey){const fo=new js(vs);return null==Tt.tenantId?Tt._agentRecaptchaConfig=fo:Tt._tenantRecaptchaConfigs[Tt.tenantId]=fo,_r(fo.siteKey)}Xr(new Error("recaptcha Enterprise site key undefined"))}).catch(vs=>{Xr(vs)})})).apply(this,arguments)})})).apply(this,arguments)})(b.auth).then(Ht=>{if(!m&&Tr(window.grecaptcha))Ae(Ht,Oe,Tt);else{if(typeof window>"u")return void Tt(new Error("RecaptchaVerifier is only supported in browser"));kr("https://www.google.com/recaptcha/enterprise.js?render="+Ht).then(()=>{Ae(Ht,Oe,Tt)}).catch(ir=>{Tt(ir)})}}).catch(Ht=>{Tt(Ht)})})})()}}function Xi(P,g,m){return(Ve=Ve||(0,I.Z)(function*(b,W,ee,Ae=!1){const Oe=new ri(b);let Tt;try{Tt=yield Oe.verify(ee)}catch{Tt=yield Oe.verify(ee,!0)}const Ht=Object.assign({},W);return Object.assign(Ht,Ae?{captchaResp:Tt}:{captchaResponse:Tt}),Object.assign(Ht,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ht,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ht})).apply(this,arguments)}class Hs{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const b=ee=>new Promise((Ae,Oe)=>{try{Ae(g(ee))}catch(Tt){Oe(Tt)}});b.onAbort=m,this.queue.push(b);const W=this.queue.length-1;return()=>{this.queue[W]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,I.Z)(function*(){if(m.auth.currentUser===g)return;const b=[];try{for(const W of m.queue)yield W(g),W.onAbort&&b.push(W.onAbort)}catch(W){b.reverse();for(const ee of b)try{ee()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:W?.message})}})()}}class ns{constructor(g,m,b,W){this.app=g,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=b,this.config=W,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new us(this),this.idTokenSubscription=new us(this),this.beforeStateQueue=new Hs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=W.sdkClientVersion}_initializeWithPersistence(g,m){var b=this;return m&&(this._popupRedirectResolver=ki(m)),this._initializationPromise=this.queue((0,I.Z)(function*(){var W,ee;if(!b._deleted&&(b.persistenceManager=yield Gn.create(b,g),!b._deleted)){if(null!==(W=b._popupRedirectResolver)&&void 0!==W&&W._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(ee=b.currentUser)||void 0===ee?void 0:ee.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,I.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,I.Z)(function*(){var b;const W=yield m.assertedPersistence.getCurrentUser();let ee=W,Ae=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Oe=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,Tt=ee?._redirectEventId,Ht=yield m.tryRedirectSignIn(g);(!Oe||Oe===Tt)&&Ht?.user&&(ee=Ht.user,Ae=!0)}if(!ee)return m.directlySetCurrentUser(null);if(!ee._redirectEventId){if(Ae)try{yield m.beforeStateQueue.runMiddleware(ee)}catch(Oe){ee=W,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Oe))}return ee?m.reloadAndSetCurrentUserOrClear(ee):m.directlySetCurrentUser(null)}return on(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===ee._redirectEventId?m.directlySetCurrentUser(ee):m.reloadAndSetCurrentUserOrClear(ee)})()}tryRedirectSignIn(g){var m=this;return(0,I.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,I.Z)(function*(){try{yield Dt(g)}catch(b){if("auth/network-request-failed"!==b?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ys(){if(typeof navigator>"u")return null;const P=navigator;return P.languages&&P.languages[0]||P.language||null}()}_delete(){var g=this;return(0,I.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,I.Z)(function*(){const b=g?(0,ne.m9)(g):null;return b&&on(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(g,m=!1){var b=this;return(0,I.Z)(function*(){if(!b._deleted)return g&&on(b.tenantId===g.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(g)),b.queue((0,I.Z)(function*(){yield b.directlySetCurrentUser(g),b.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,I.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,I.Z)(function*(){yield m.assertedPersistence.setPersistence(ki(g))}))}initializeRecaptchaConfig(){var g=this;return(0,I.Z)(function*(){const m=yield Ca(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new js(m);null==g.tenantId?g._agentRecaptchaConfig=b:g._tenantRecaptchaConfigs[g.tenantId]=b,b.emailPasswordEnabled&&new ri(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new ne.LL("auth","Firebase",g())}onAuthStateChanged(g,m,b){return this.registerStateListener(this.authStateSubscription,g,m,b)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,b){return this.registerStateListener(this.idTokenSubscription,g,m,b)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var b=this;return(0,I.Z)(function*(){const W=yield b.getOrInitRedirectPersistenceManager(m);return null===g?W.removeCurrentUser():W.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,I.Z)(function*(){if(!m.redirectPersistenceManager){const b=g&&ki(g)||m._popupRedirectResolver;on(b,m,"argument-error"),m.redirectPersistenceManager=yield Gn.create(m,[ki(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,I.Z)(function*(){var b,W;return m._isInitialized&&(yield m.queue((0,I.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===g?m._currentUser:(null===(W=m.redirectUser)||void 0===W?void 0:W._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,I.Z)(function*(){if(g===m.currentUser)return m.queue((0,I.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,b,W){if(this._deleted)return()=>{};const ee="function"==typeof m?m:m.next.bind(m),Ae=this._isInitialized?Promise.resolve():this._initializationPromise;return on(Ae,this,"internal-error"),Ae.then(()=>ee(this.currentUser)),"function"==typeof m?g.addObserver(m,b,W):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,I.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=fs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,I.Z)(function*(){var m;const b={"X-Client-Version":g.clientVersion};g.app.options.appId&&(b["X-Firebase-gmpid"]=g.app.options.appId);const W=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();W&&(b["X-Firebase-Client"]=W);const ee=yield g._getAppCheckToken();return ee&&(b["X-Firebase-AppCheck"]=ee),b})()}_getAppCheckToken(){var g=this;return(0,I.Z)(function*(){var m;const b=yield null===(m=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return b?.error&&function Pi(P,...g){oi.logLevel<=Pe.in.WARN&&oi.warn(`Auth (${he.SDK_VERSION}): ${P}`,...g)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function qi(P){return(0,ne.m9)(P)}class us{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,ne.ne)(m=>this.observer=m)}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Cs(P){const g=P.indexOf(":");return g<0?"":P.substr(0,g+1)}function so(P){if(!P)return null;const g=Number(P);return isNaN(g)?null:g}class qo{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return vi("not implemented")}_getIdTokenResponse(g){return vi("not implemented")}_linkToIdToken(g,m){return vi("not implemented")}_getReauthenticationResolver(g){return vi("not implemented")}}function mi(P,g){return(rt=rt||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:resetPassword",Ir(m,b))})).apply(this,arguments)}function ia(P,g){return(be=be||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:update",b)})).apply(this,arguments)}function Eo(P,g){return(Fe=Fe||(0,I.Z)(function*(m,b){return bt(m,"POST","/v1/accounts:signInWithPassword",Ir(m,b))})).apply(this,arguments)}function Ro(P,g){return(fe=fe||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:sendOobCode",Ir(m,b))})).apply(this,arguments)}function wo(P,g){return(Ue=Ue||(0,I.Z)(function*(m,b){return Ro(m,b)})).apply(this,arguments)}function ci(P,g){return(zt=zt||(0,I.Z)(function*(m,b){return Ro(m,b)})).apply(this,arguments)}class V extends qo{constructor(g,m,b,W=null){super("password",b),this._email=g,this._password=m,this._tenantId=W}static _fromEmailAndPassword(g,m){return new V(g,m,"password")}static _fromEmailAndCode(g,m,b=null){return new V(g,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,I.Z)(function*(){var b;switch(m.signInMethod){case"password":const ee={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=g._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const Ae=yield Xi(g,ee,"signInWithPassword");return Eo(g,Ae)}var W;return Eo(g,ee).catch(function(Ae){return(W=W||(0,I.Z)(function*(Oe){if("auth/missing-recaptcha-token"===Oe.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Tt=yield Xi(g,ee,"signInWithPassword");return Eo(g,Tt)}return Promise.reject(Oe)})).apply(this,arguments)});case"emailLink":return function Gl(P,g){return(Xt=Xt||(0,I.Z)(function*(m,b){return bt(m,"POST","/v1/accounts:signInWithEmailLink",Ir(m,b))})).apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Hr(g,"internal-error")}})()}_linkToIdToken(g,m){var b=this;return(0,I.Z)(function*(){switch(b.signInMethod){case"password":return ia(g,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function z(P,g){return(mn=mn||(0,I.Z)(function*(m,b){return bt(m,"POST","/v1/accounts:signInWithEmailLink",Ir(m,b))})).apply(this,arguments)}(g,{idToken:m,email:b._email,oobCode:b._password});default:Hr(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function oe(P,g){return(de=de||(0,I.Z)(function*(m,b){return bt(m,"POST","/v1/accounts:signInWithIdp",Ir(m,b))})).apply(this,arguments)}class Te extends qo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Te(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Hr("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:W}=m,ee=(0,ke._T)(m,["providerId","signInMethod"]);if(!b||!W)return null;const Ae=new Te(b,W);return Ae.idToken=ee.idToken||void 0,Ae.accessToken=ee.accessToken||void 0,Ae.secret=ee.secret,Ae.nonce=ee.nonce,Ae.pendingToken=ee.pendingToken||null,Ae}_getIdTokenResponse(g){return oe(g,this.buildRequest())}_linkToIdToken(g,m){const b=this.buildRequest();return b.idToken=m,oe(g,b)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,oe(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,ne.xO)(m)}return g}}const C={USER_NOT_FOUND:"user-not-found"};class ae extends qo{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new ae({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new ae({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function E(P,g){return(_t=_t||(0,I.Z)(function*(m,b){return bt(m,"POST","/v1/accounts:signInWithPhoneNumber",Ir(m,b))})).apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function q(P,g){return(pe=pe||(0,I.Z)(function*(m,b){const W=yield bt(m,"POST","/v1/accounts:signInWithPhoneNumber",Ir(m,b));if(W.temporaryProof)throw _e(m,"account-exists-with-different-credential",W);return W})).apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function j(P,g){return(Se=Se||(0,I.Z)(function*(m,b){return bt(m,"POST","/v1/accounts:signInWithPhoneNumber",Ir(m,Object.assign(Object.assign({},b),{operation:"REAUTH"})),C)})).apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:b,verificationCode:W}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:b,code:W}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:b,phoneNumber:W,temporaryProof:ee}=g;return b||m||W||ee?new ae({verificationId:m,verificationCode:b,phoneNumber:W,temporaryProof:ee}):null}}class Wn{constructor(g){var m,b,W,ee,Ae,Oe;const Tt=(0,ne.zd)((0,ne.pd)(g)),Ht=null!==(m=Tt.apiKey)&&void 0!==m?m:null,ir=null!==(b=Tt.oobCode)&&void 0!==b?b:null,Yn=function Nt(P){switch(P){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=Tt.mode)&&void 0!==W?W:null);on(Ht&&ir&&Yn,"argument-error"),this.apiKey=Ht,this.operation=Yn,this.code=ir,this.continueUrl=null!==(ee=Tt.continueUrl)&&void 0!==ee?ee:null,this.languageCode=null!==(Ae=Tt.languageCode)&&void 0!==Ae?Ae:null,this.tenantId=null!==(Oe=Tt.tenantId)&&void 0!==Oe?Oe:null}static parseLink(g){const m=function jn(P){const g=(0,ne.zd)((0,ne.pd)(P)).link,m=g?(0,ne.zd)((0,ne.pd)(g)).deep_link_id:null,b=(0,ne.zd)((0,ne.pd)(P)).deep_link_id;return(b?(0,ne.zd)((0,ne.pd)(b)).link:null)||b||m||g||P}(g);try{return new Wn(m)}catch{return null}}}let pi=(()=>{class P{constructor(){this.providerId=P.PROVIDER_ID}static credential(m,b){return V._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const W=Wn.parseLink(b);return on(W,"argument-error"),V._fromEmailAndCode(m,W.code,W.tenantId)}}return P.PROVIDER_ID="password",P.EMAIL_PASSWORD_SIGN_IN_METHOD="password",P.EMAIL_LINK_SIGN_IN_METHOD="emailLink",P})();class Gr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class bs extends Gr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ds extends bs{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return on("providerId"in m&&"signInMethod"in m,"argument-error"),Te._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return on(g.idToken||g.accessToken,"argument-error"),Te._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ds.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ds.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:W,pendingToken:ee,nonce:Ae,providerId:Oe}=g;if(!b&&!W&&!m&&!ee||!Oe)return null;try{return new Ds(Oe)._credential({idToken:m,accessToken:b,nonce:Ae,pendingToken:ee})}catch{return null}}}let Lo=(()=>{class P extends bs{constructor(){super("facebook.com")}static credential(m){return Te._fromParams({providerId:P.PROVIDER_ID,signInMethod:P.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return P.credentialFromTaggedObject(m)}static credentialFromError(m){return P.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return P.credential(m.oauthAccessToken)}catch{return null}}}return P.FACEBOOK_SIGN_IN_METHOD="facebook.com",P.PROVIDER_ID="facebook.com",P})(),oo=(()=>{class P extends bs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return Te._fromParams({providerId:P.PROVIDER_ID,signInMethod:P.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return P.credentialFromTaggedObject(m)}static credentialFromError(m){return P.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:W}=m;if(!b&&!W)return null;try{return P.credential(b,W)}catch{return null}}}return P.GOOGLE_SIGN_IN_METHOD="google.com",P.PROVIDER_ID="google.com",P})(),oa=(()=>{class P extends bs{constructor(){super("github.com")}static credential(m){return Te._fromParams({providerId:P.PROVIDER_ID,signInMethod:P.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return P.credentialFromTaggedObject(m)}static credentialFromError(m){return P.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return P.credential(m.oauthAccessToken)}catch{return null}}}return P.GITHUB_SIGN_IN_METHOD="github.com",P.PROVIDER_ID="github.com",P})();class ao extends qo{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return oe(g,this.buildRequest())}_linkToIdToken(g,m){const b=this.buildRequest();return b.idToken=m,oe(g,b)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,oe(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:b,signInMethod:W,pendingToken:ee}=m;return b&&W&&ee&&b===W?new ao(b,ee):null}static _create(g,m){return new ao(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zs extends Gr{constructor(g){on(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Zs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Zs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=ao.fromJSON(g);return on(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:b}=g;if(!m||!b)return null;try{return ao._create(b,m)}catch{return null}}}let Il=(()=>{class P extends bs{constructor(){super("twitter.com")}static credential(m,b){return Te._fromParams({providerId:P.PROVIDER_ID,signInMethod:P.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return P.credentialFromTaggedObject(m)}static credentialFromError(m){return P.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:W}=m;if(!b||!W)return null;try{return P.credential(b,W)}catch{return null}}}return P.TWITTER_SIGN_IN_METHOD="twitter.com",P.PROVIDER_ID="twitter.com",P})();function Bo(P,g){return($e=$e||(0,I.Z)(function*(m,b){return bt(m,"POST","/v1/accounts:signUp",Ir(m,b))})).apply(this,arguments)}class Ts{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,b,W=!1){return(0,I.Z)(function*(){const ee=yield Er._fromIdTokenResponse(g,b,W),Ae=yo(b);return new Ts({user:ee,providerId:Ae,_tokenResponse:b,operationType:m})})()}static _forOperation(g,m,b){return(0,I.Z)(function*(){yield g._updateTokensIfNecessary(b,!0);const W=yo(b);return new Ts({user:g,providerId:W,_tokenResponse:b,operationType:m})})()}}function yo(P){return P.providerId?P.providerId:"phoneNumber"in P?"phone":null}class al extends ne.ZR{constructor(g,m,b,W){var ee;super(m.code,m.message),this.operationType=b,this.user=W,Object.setPrototypeOf(this,al.prototype),this.customData={appName:g.name,tenantId:null!==(ee=g.tenantId)&&void 0!==ee?ee:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(g,m,b,W){return new al(g,m,b,W)}}function ka(P,g,m,b){return("reauthenticate"===g?m._getReauthenticationResolver(P):m._getIdTokenResponse(P)).catch(ee=>{throw"auth/multi-factor-auth-required"===ee.code?al._fromErrorAndOperation(P,ee,g,b):ee})}function Za(P){return new Set(P.map(({providerId:g})=>g).filter(g=>!!g))}function ba(P,g){return(ht=ht||(0,I.Z)(function*(m,b,W=!1){const ee=yield We(m,b._linkToIdToken(m.auth,yield m.getIdToken()),W);return Ts._forOperation(m,"link",ee)})).apply(this,arguments)}function Fa(P,g,m){return(Bt=Bt||(0,I.Z)(function*(b,W,ee){yield Dt(W);const Oe=!1===b?"provider-already-linked":"no-such-provider";on(Za(W.providerData).has(ee)===b,W.auth,Oe)})).apply(this,arguments)}function Oo(P,g){return(Ft=Ft||(0,I.Z)(function*(m,b,W=!1){const{auth:ee}=m,Ae="reauthenticate";try{const Oe=yield We(m,ka(ee,Ae,b,m),W);on(Oe.idToken,ee,"internal-error");const Tt=ln(Oe.idToken);on(Tt,ee,"internal-error");const{sub:Ht}=Tt;return on(m.uid===Ht,ee,"user-mismatch"),Ts._forOperation(m,Ae,Oe)}catch(Oe){throw"auth/user-not-found"===Oe?.code&&Hr(ee,"user-mismatch"),Oe}})).apply(this,arguments)}function Os(P,g){return(Qt=Qt||(0,I.Z)(function*(m,b,W=!1){const Ae=yield ka(m,"signIn",b),Oe=yield Ts._fromIdTokenResponse(m,"signIn",Ae);return W||(yield m._updateCurrentUser(Oe.user)),Oe})).apply(this,arguments)}function ua(P,g){return(st=st||(0,I.Z)(function*(m,b){return Os(qi(m),b)})).apply(this,arguments)}function Qa(P,g){return(Vn=Vn||(0,I.Z)(function*(m,b){const W=(0,ne.m9)(m);return yield Fa(!1,W,b.providerId),ba(W,b)})).apply(this,arguments)}function $o(P,g){return(Bn=Bn||(0,I.Z)(function*(m,b){return Oo((0,ne.m9)(m),b)})).apply(this,arguments)}class co{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Yr._fromServerResponse(g,m):"totpInfo"in m?A._fromServerResponse(g,m):Hr(g,"internal-error")}}class Yr extends co{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Yr(m)}}class A extends co{constructor(g){super("totp",g)}static _fromServerResponse(g,m){return new A(m)}}function G(P,g,m){var b;on((null===(b=m.url)||void 0===b?void 0:b.length)>0,P,"invalid-continue-uri"),on(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,P,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(on(m.iOS.bundleId.length>0,P,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(on(m.android.packageName.length>0,P,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function tt(P,g){return(Tn=Tn||(0,I.Z)(function*(m,b){const W=(0,ne.m9)(m),ee=yield mi(W,{oobCode:b}),Ae=ee.requestType;switch(on(Ae,W,"internal-error"),Ae){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":on(ee.newEmail,W,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":on(ee.mfaInfo,W,"internal-error");default:on(ee.email,W,"internal-error")}let Oe=null;return ee.mfaInfo&&(Oe=co._fromServerResponse(qi(W),ee.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===ee.requestType?ee.newEmail:ee.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===ee.requestType?ee.email:ee.newEmail)||null,multiFactorInfo:Oe},operation:Ae}})).apply(this,arguments)}function Qs(P,g,m){return(Br=Br||(0,I.Z)(function*(b,W,ee){const{auth:Ae}=b,Tt={idToken:yield b.getIdToken(),returnSecureToken:!0};W&&(Tt.email=W),ee&&(Tt.password=ee);const Ht=yield We(b,ia(Ae,Tt));yield b._updateTokensIfNecessary(Ht,!0)})).apply(this,arguments)}class Nr{constructor(g,m,b={}){this.isNewUser=g,this.providerId=m,this.profile=b}}class Ml extends Nr{constructor(g,m,b,W){super(g,m,b),this.username=W}}class ha extends Nr{constructor(g,m){super(g,"facebook.com",m)}}class uo extends Ml{constructor(g,m){super(g,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Gc extends Nr{constructor(g,m){super(g,"google.com",m)}}class Xa extends Ml{constructor(g,m,b){super(g,"twitter.com",m,b)}}function Ja(P){const{user:g,_tokenResponse:m}=P;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function da(P){var g,m;if(!P)return null;const{providerId:b}=P,W=P.rawUserInfo?JSON.parse(P.rawUserInfo):{},ee=P.isNewUser||"identitytoolkit#SignupNewUserResponse"===P.kind;if(!b&&P?.idToken){const Ae=null===(m=null===(g=ln(P.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(Ae)return new Nr(ee,"anonymous"!==Ae&&"custom"!==Ae?Ae:null)}if(!b)return null;switch(b){case"facebook.com":return new ha(ee,W);case"github.com":return new uo(ee,W);case"google.com":return new Gc(ee,W);case"twitter.com":return new Xa(ee,W,P.screenName||null);case"custom":case"anonymous":return new Nr(ee,null);default:return new Nr(ee,b,W)}}(m)}class Ba{constructor(g,m,b){this.type=g,this.credential=m,this.auth=b}static _fromIdtoken(g,m){return new Ba("enroll",g,m)}static _fromMfaPendingCredential(g){return new Ba("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,b;if(g?.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Ba._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(b=g.multiFactorSession)&&void 0!==b&&b.idToken)return Ba._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Wl{constructor(g,m,b){this.session=g,this.hints=m,this.signInResolver=b}static _fromError(g,m){var b;const W=qi(g),ee=m.customData._serverResponse,Ae=(ee.mfaInfo||[]).map(Tt=>co._fromServerResponse(W,Tt));on(ee.mfaPendingCredential,W,"internal-error");const Oe=Ba._fromMfaPendingCredential(ee.mfaPendingCredential);return new Wl(Oe,Ae,function(Tt){return(b=b||(0,I.Z)(function*(Ht){const ir=yield Ht._process(W,Oe);delete ee.mfaInfo,delete ee.mfaPendingCredential;const Yn=Object.assign(Object.assign({},ee),{idToken:ir.idToken,refreshToken:ir.refreshToken});switch(m.operationType){case"signIn":const _r=yield Ts._fromIdTokenResponse(W,m.operationType,Yn);return yield W._updateCurrentUser(_r.user),_r;case"reauthenticate":return on(m.user,W,"internal-error"),Ts._forOperation(m.user,m.operationType,Yn);default:Hr(W,"internal-error")}})).apply(this,arguments)})}resolveSignIn(g){var m=this;return(0,I.Z)(function*(){return m.signInResolver(g)})()}}class El{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>co._fromServerResponse(g.auth,b)))})}static _fromUser(g){return new El(g)}getSession(){var g=this;return(0,I.Z)(function*(){return Ba._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var b=this;return(0,I.Z)(function*(){const W=g,ee=yield b.getSession(),Ae=yield We(b.user,W._process(b.user.auth,ee,m));return yield b.user._updateTokensIfNecessary(Ae),b.user.reload()})()}unenroll(g){var m=this;return(0,I.Z)(function*(){const b="string"==typeof g?g:g.uid,W=yield m.user.getIdToken();try{const ee=yield We(m.user,function Rl(P,g){return Dr(P,"POST","/v2/accounts/mfaEnrollment:withdraw",Ir(P,g))}(m.user.auth,{idToken:W,mfaEnrollmentId:b}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Ae})=>Ae!==b),yield m.user._updateTokensIfNecessary(ee),yield m.user.reload()}catch(ee){throw ee}})()}}const Ko=new WeakMap,Ol="__sak";class Kl{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Ol,"1"),this.storage.removeItem(Ol),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const wl=(()=>{class P extends Kl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Yl(){const P=(0,ne.z$)();return Ti(P)||xi(P)}()&&function xo(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ni(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const W=this.storage.getItem(b),ee=this.localCache[b];W!==ee&&m(b,ee,W)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((Oe,Tt,Ht)=>{this.notifyListeners(Oe,Ht)});const W=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(W);if(m.newValue!==Oe)null!==m.newValue?this.storage.setItem(W,m.newValue):this.storage.removeItem(W);else if(this.localCache[W]===m.newValue&&!b)return}const ee=()=>{const Oe=this.storage.getItem(W);!b&&this.localCache[W]===Oe||this.notifyListeners(W,Oe)},Ae=this.storage.getItem(W);!function Fi(){return(0,ne.w1)()&&10===document.documentMode}()||Ae===m.newValue||m.newValue===m.oldValue?ee():setTimeout(ee,10)}notifyListeners(m,b){this.localCache[m]=b;const W=this.listeners[m];if(W)for(const ee of Array.from(W))ee(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var W=()=>super._set,ee=this;return(0,I.Z)(function*(){yield W().call(ee,m,b),ee.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,W=this;return(0,I.Z)(function*(){const ee=yield b().call(W,m);return W.localCache[m]=JSON.stringify(ee),ee})()}_remove(m){var b=()=>super._remove,W=this;return(0,I.Z)(function*(){yield b().call(W,m),delete W.localCache[m]})()}}return P.type="LOCAL",P})(),Vi=(()=>{class P extends Kl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return P.type="SESSION",P})();let hs=(()=>{class P{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(ee=>ee.isListeningto(m));if(b)return b;const W=new P(m);return this.receivers.push(W),W}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,I.Z)(function*(){var W;const ee=m,{eventId:Ae,eventType:Oe,data:Tt}=ee.data,Ht=b.handlersMap[Oe];if(!Ht?.size)return;ee.ports[0].postMessage({status:"ack",eventId:Ae,eventType:Oe});const ir=Array.from(Ht).map(function(_r){return(W=W||(0,I.Z)(function*(Xr){return Xr(ee.origin,Tt)})).apply(this,arguments)}),Yn=yield function ul(P){var g;return Promise.all(P.map(function(m){return(g=g||(0,I.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(W){return{fulfilled:!1,reason:W}}})).apply(this,arguments)}))}(ir);ee.ports[0].postMessage({status:"done",eventId:Ae,eventType:Oe,response:Yn})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return P.receivers=[],P})();function Do(P="",g=10){let m="";for(let b=0;b<g;b++)m+=Math.floor(10*Math.random());return P+m}class Gs{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,b=50){var W=this;return(0,I.Z)(function*(){const ee=typeof MessageChannel<"u"?new MessageChannel:null;if(!ee)throw new Error("connection_unavailable");let Ae,Oe;return new Promise((Tt,Ht)=>{const ir=Do("",20);ee.port1.start();const Yn=setTimeout(()=>{Ht(new Error("unsupported_event"))},b);Oe={messageChannel:ee,onMessage(_r){const Xr=_r;if(Xr.data.eventId===ir)switch(Xr.data.status){case"ack":clearTimeout(Yn),Ae=setTimeout(()=>{Ht(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ae),Tt(Xr.data.response);break;default:clearTimeout(Yn),clearTimeout(Ae),Ht(new Error("invalid_response"))}}},W.handlers.add(Oe),ee.port1.addEventListener("message",Oe.onMessage),W.target.postMessage({eventType:g,eventId:ir,data:m},[ee.port2])}).finally(()=>{Oe&&W.removeMessageHandler(Oe)})})()}}function is(){return window}function _c(){return typeof is().WorkerGlobalScope<"u"&&"function"==typeof is().importScripts}const Ic="firebaseLocalStorageDb",Uo="firebaseLocalStorage",T="fbase_key";class R{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function N(P,g){return P.transaction([Uo],g?"readwrite":"readonly").objectStore(Uo)}function U(){const P=indexedDB.open(Ic,1);return new Promise((g,m)=>{P.addEventListener("error",()=>{m(P.error)}),P.addEventListener("upgradeneeded",()=>{const b=P.result;try{b.createObjectStore(Uo,{keyPath:T})}catch(W){m(W)}}),P.addEventListener("success",(0,I.Z)(function*(){const b=P.result;b.objectStoreNames.contains(Uo)?g(b):(b.close(),yield function x(){const P=indexedDB.deleteDatabase(Ic);return new R(P).toPromise()}(),g(yield U()))}))})}function se(P,g,m){return(an=an||(0,I.Z)(function*(b,W,ee){const Ae=N(b,!0).put({[T]:W,value:ee});return new R(Ae).toPromise()})).apply(this,arguments)}function Be(P,g){const m=N(P,!0).delete(g);return new R(m).toPromise()}const cn=(()=>{class P{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,I.Z)(function*(){return m.db||(m.db=yield U()),m.db})()}_withRetries(m){var b=this;return(0,I.Z)(function*(){let W=0;for(;;)try{const ee=yield b._openDb();return yield m(ee)}catch(ee){if(W++>3)throw ee;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,I.Z)(function*(){return _c()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,I.Z)(function*(){var b,W;m.receiver=hs._getInstance(function $a(){return _c()?self:null}()),m.receiver._subscribe("keyChanged",function(ee,Ae){return(b=b||(0,I.Z)(function*(Oe,Tt){return{keyProcessed:(yield m._poll()).includes(Tt.key)}})).apply(this,arguments)}),m.receiver._subscribe("ping",function(ee,Ae){return(W=W||(0,I.Z)(function*(Oe,Tt){return["keyChanged"]})).apply(this,arguments)})})()}initializeSender(){var m=this;return(0,I.Z)(function*(){var b,W;if(m.activeServiceWorker=yield function Wc(){return(hr=hr||(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Gs(m.activeServiceWorker);const ee=yield m.sender._send("ping",{},800);ee&&null!==(b=ee[0])&&void 0!==b&&b.fulfilled&&null!==(W=ee[0])&&void 0!==W&&W.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,I.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function To(){var P;return(null===(P=navigator?.serviceWorker)||void 0===P?void 0:P.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const m=yield U();return yield se(m,Ol,"1"),yield Be(m,Ol),!0}catch{}return!1})()}_withPendingWrite(m){var b=this;return(0,I.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var W=this;return(0,I.Z)(function*(){return W._withPendingWrite((0,I.Z)(function*(){return yield W._withRetries(ee=>se(ee,m,b)),W.localCache[m]=b,W.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,I.Z)(function*(){const W=yield b._withRetries(ee=>function Ce(P,g){return(Cr=Cr||(0,I.Z)(function*(m,b){const W=N(m,!1).get(b),ee=yield new R(W).toPromise();return void 0===ee?null:ee.value})).apply(this,arguments)}(ee,m));return b.localCache[m]=W,W})()}_remove(m){var b=this;return(0,I.Z)(function*(){return b._withPendingWrite((0,I.Z)(function*(){return yield b._withRetries(W=>Be(W,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,I.Z)(function*(){const b=yield m._withRetries(Ae=>{const Oe=N(Ae,!1).getAll();return new R(Oe).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const W=[],ee=new Set;for(const{fbase_key:Ae,value:Oe}of b)ee.add(Ae),JSON.stringify(m.localCache[Ae])!==JSON.stringify(Oe)&&(m.notifyListeners(Ae,Oe),W.push(Ae));for(const Ae of Object.keys(m.localCache))m.localCache[Ae]&&!ee.has(Ae)&&(m.notifyListeners(Ae,null),W.push(Ae));return W})()}notifyListeners(m,b){this.localCache[m]=b;const W=this.listeners[m];if(W)for(const ee of Array.from(W))ee(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return P.type="LOCAL",P})(),Ui=1e12;class gs{constructor(g){this.auth=g,this.counter=Ui,this._widgets=new Map}render(g,m){const b=this.counter;return this._widgets.set(b,new Yo(g,this.auth.name,m||{})),this.counter++,b}reset(g){var m;const b=g||Ui;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Ui))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,I.Z)(function*(){var b;return null===(b=m._widgets.get(g||Ui))||void 0===b||b.execute(),""})()}}class Yo{constructor(g,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof g?document.getElementById(g):g;on(W,"argument-error",{appName:m}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ss(P){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<P;b++)g.push(m.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qc=ps("rcb"),zd=new Qi(3e4,6e4);class Su{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=is().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return on(function fa(P){return P.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(P)}(m),g,"argument-error"),this.shouldResolveImmediately(m)&&Ms(is().grecaptcha)?Promise.resolve(is().grecaptcha):new Promise((b,W)=>{const ee=is().setTimeout(()=>{W(qr(g,"network-request-failed"))},zd.get());is()[qc]=()=>{is().clearTimeout(ee),delete is()[qc];const Oe=is().grecaptcha;if(!Oe||!Ms(Oe))return void W(qr(g,"internal-error"));const Tt=Oe.render;Oe.render=(Ht,ir)=>{const Yn=Tt(Ht,ir);return this.counter++,Yn},this.hostLanguage=m,b(Oe)},kr(`https://www.google.com/recaptcha/api.js??${(0,ne.xO)({onload:qc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(ee),W(qr(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=is().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ld{load(g){return(0,I.Z)(function*(){return new gs(g)})()}clearedOneInstance(){}}const pa="recaptcha",Po={theme:"light",type:"image"};class jr{constructor(g,m=Object.assign({},Po),b){this.parameters=m,this.type=pa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qi(b),this.isInvisible="invisible"===this.parameters.size,on(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof g?document.getElementById(g):g;on(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ld:new Su,this.validateStartingState()}verify(){var g=this;return(0,I.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),b=g.getAssertedRecaptcha();return b.getResponse(m)||new Promise(ee=>{const Ae=Oe=>{Oe&&(g.tokenChangeListeners.delete(Ae),ee(Oe))};g.tokenChangeListeners.add(Ae),g.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){on(!this.parameters.sitekey,this.auth,"argument-error"),on(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),on(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof g)g(m);else if("string"==typeof g){const b=is()[g];"function"==typeof b&&b(m)}}}assertNotDestroyed(){on(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,I.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,I.Z)(function*(){on(Kr()&&!_c(),g.auth,"internal-error"),yield function el(){let P=null;return new Promise(g=>{"complete"!==document.readyState?(P=()=>g(),window.addEventListener("load",P)):g()}).catch(g=>{throw P&&window.removeEventListener("load",P),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function Us(P){return(Ee=Ee||(0,I.Z)(function*(g){return(yield Dr(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}(g.auth);on(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return on(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class No{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=ae._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function ii(P,g,m){return(Zi=Zi||(0,I.Z)(function*(b,W,ee){var Ae;const Oe=yield ee.verify();try{let Tt;if(on("string"==typeof Oe,b,"argument-error"),on(ee.type===pa,b,"argument-error"),Tt="string"==typeof W?{phoneNumber:W}:W,"session"in Tt){const Ht=Tt.session;if("phoneNumber"in Tt)return on("enroll"===Ht.type,b,"internal-error"),(yield function ll(P,g){return Dr(P,"POST","/v2/accounts/mfaEnrollment:start",Ir(P,g))}(b,{idToken:Ht.credential,phoneEnrollmentInfo:{phoneNumber:Tt.phoneNumber,recaptchaToken:Oe}})).phoneSessionInfo.sessionInfo;{on("signin"===Ht.type,b,"internal-error");const ir=(null===(Ae=Tt.multiFactorHint)||void 0===Ae?void 0:Ae.uid)||Tt.multiFactorUid;return on(ir,b,"missing-multi-factor-info"),(yield function Hn(P,g){return Dr(P,"POST","/v2/accounts/mfaSignIn:start",Ir(P,g))}(b,{mfaPendingCredential:Ht.credential,mfaEnrollmentId:ir,phoneSignInInfo:{recaptchaToken:Oe}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ht}=yield function fn(P,g){return(gn=gn||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:sendVerificationCode",Ir(m,b))})).apply(this,arguments)}(b,{phoneNumber:Tt.phoneNumber,recaptchaToken:Oe});return Ht}}finally{ee._reset()}})).apply(this,arguments)}let Li=(()=>{class P{constructor(m){this.providerId=P.PROVIDER_ID,this.auth=qi(m)}verifyPhoneNumber(m,b){return ii(this.auth,m,(0,ne.m9)(b))}static credential(m,b){return ae._fromVerification(m,b)}static credentialFromResult(m){return P.credentialFromTaggedObject(m)}static credentialFromError(m){return P.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:W}=m;return b&&W?ae._fromTokenResponse(b,W):null}}return P.PROVIDER_ID="phone",P.PHONE_SIGN_IN_METHOD="phone",P})();function On(P,g){return g?ki(g):(on(P._popupRedirectResolver,P,"argument-error"),P._popupRedirectResolver)}class Xl extends qo{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return oe(g,this._buildIdpRequest())}_linkToIdToken(g,m){return oe(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return oe(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function cd(P){return Os(P.auth,new Xl(P),P.bypassAuthState)}function dl(P){const{auth:g,user:m}=P;return on(m,g,"internal-error"),Oo(m,new Xl(P),P.bypassAuthState)}function Mu(P){return(_i=_i||(0,I.Z)(function*(g){const{auth:m,user:b}=g;return on(b,m,"internal-error"),ba(b,new Xl(g),g.bypassAuthState)})).apply(this,arguments)}class Pl{constructor(g,m,b,W,ee=!1){this.auth=g,this.resolver=b,this.user=W,this.bypassAuthState=ee,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var m,g=this;return new Promise(function(b,W){return(m=m||(0,I.Z)(function*(ee,Ae){g.pendingPromise={resolve:ee,reject:Ae};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(Oe){g.reject(Oe)}})).apply(this,arguments)})}onAuthEvent(g){var m=this;return(0,I.Z)(function*(){const{urlResponse:b,sessionId:W,postBody:ee,tenantId:Ae,error:Oe,type:Tt}=g;if(Oe)return void m.reject(Oe);const Ht={auth:m.auth,requestUri:b,sessionId:W,tenantId:Ae||void 0,postBody:ee||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Tt)(Ht))}catch(ir){m.reject(ir)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return cd;case"linkViaPopup":case"linkViaRedirect":return Mu;case"reauthViaPopup":case"reauthViaRedirect":return dl;default:Hr(this.auth,"internal-error")}}resolve(g){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ud=new Qi(2e3,1e4);let As=(()=>{class P extends Pl{constructor(m,b,W,ee,Ae){super(m,b,ee,Ae),this.provider=W,this.authWindow=null,this.pollId=null,P.currentPopupAction&&P.currentPopupAction.cancel(),P.currentPopupAction=this}executeNotNull(){var m=this;return(0,I.Z)(function*(){const b=yield m.execute();return on(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,I.Z)(function*(){Ni(1===m.filter.length,"Popup operations only handle one event");const b=Do();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(W=>{m.reject(W)}),m.resolver._isIframeWebStorageSupported(m.auth,W=>{W||m.reject(qr(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,P.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,W;this.pollId=null!==(W=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,ud.get())};m()}}return P.currentPopupAction=null,P})();const xu="pendingRedirect",tl=new Map;class Kc extends Pl{constructor(g,m,b=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,I.Z)(function*(){let b=tl.get(m.auth._key());if(!b){try{const ee=(yield function ga(P,g){return(Pt=Pt||(0,I.Z)(function*(m,b){const W=jo(b),ee=hd(m);if(!(yield ee._isAvailable()))return!1;const Ae="true"===(yield ee._get(W));return yield ee._remove(W),Ae})).apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;b=()=>Promise.resolve(ee)}catch(W){b=()=>Promise.reject(W)}tl.set(m.auth._key(),b)}return m.bypassAuthState||tl.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,b=this;return(0,I.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(b,g);if("unknown"!==g.type){if(g.eventId){const W=yield b.auth._redirectUserForId(g.eventId);if(W)return b.user=W,m().call(b,g);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function xt(P,g){return(sn=sn||(0,I.Z)(function*(m,b){return hd(m)._set(jo(b),"true")})).apply(this,arguments)}function Zo(P,g){tl.set(P._key(),g)}function hd(P){return ki(P._redirectPersistence)}function jo(P){return $n(xu,P.config.apiKey,P.name)}function Xs(P,g){return(re=re||(0,I.Z)(function*(m,b,W=!1){const ee=qi(m),Ae=On(ee,b),Tt=yield new Kc(ee,Ae,W).execute();return Tt&&!W&&(delete Tt.user._redirectEventId,yield ee._persistUserIfCurrent(Tt.user),yield ee._setRedirectUser(null,b)),Tt})).apply(this,arguments)}function fl(P){return(te=te||(0,I.Z)(function*(g){const m=Do(`${g.uid}:::`);return g._redirectEventId=m,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),m})).apply(this,arguments)}class Yc{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(g,b)&&(m=!0,this.sendToConsumer(g,b),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function nl(P){switch(P.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bl(P);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var b;if(g.error&&!bl(g)){const W=(null===(b=g.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(qr(this.auth,W))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const b=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&b}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ko(g))}saveEventToCache(g){this.cachedEventUids.add(ko(g)),this.lastProcessedEventTime=Date.now()}}function ko(P){return[P.type,P.eventId,P.sessionId,P.tenantId].filter(g=>g).join("-")}function bl({type:P,error:g}){return"unknown"===P&&"auth/no-auth-event"===g?.code}function za(P){return(Ne=Ne||(0,I.Z)(function*(g,m={}){return Dr(g,"GET","/v1/projects",m)})).apply(this,arguments)}const Dl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tc=/^https?/;function Zc(P){const g=es(),{protocol:m,hostname:b}=new URL(g);if(P.startsWith("chrome-extension://")){const Ae=new URL(P);return""===Ae.hostname&&""===b?"chrome-extension:"===m&&P.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&Ae.hostname===b}if(!tc.test(m))return!1;if(Dl.test(P))return b===P;const W=P.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(b)}const Ls=new Qi(3e4,6e4);function fd(){const P=is().___jsl;if(P?.H)for(const g of Object.keys(P.H))if(P.H[g].r=P.H[g].r||[],P.H[g].L=P.H[g].L||[],P.H[g].r=[...P.H[g].L],P.CP)for(let m=0;m<P.CP.length;m++)P.CP[m]=null}let Qo=null;const Ru=new Qi(5e3,15e3),pl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H(P){const g=P.config;on(g.authDomain,P,"auth-domain-config-required");const m=g.emulator?Ei(g,"emulator/auth/iframe"):`https://${P.config.authDomain}/__/auth/iframe`,b={apiKey:g.apiKey,appName:P.name,v:he.SDK_VERSION},W=B.get(P.config.apiHost);W&&(b.eid=W);const ee=P._getFrameworks();return ee.length&&(b.fw=ee.join(",")),`${m}?${(0,ne.xO)(b).slice(1)}`}const ve={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dn{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const tr="__/auth/handler",si="emulator/auth/handler",Ki=encodeURIComponent("fac");function ms(P,g,m,b,W,ee){return(St=St||(0,I.Z)(function*(Ae,Oe,Tt,Ht,ir,Yn){on(Ae.config.authDomain,Ae,"auth-domain-config-required"),on(Ae.config.apiKey,Ae,"invalid-api-key");const _r={apiKey:Ae.config.apiKey,appName:Ae.name,authType:Tt,redirectUrl:Ht,v:he.SDK_VERSION,eventId:ir};if(Oe instanceof Gr){Oe.setDefaultLanguage(Ae.languageCode),_r.providerId=Oe.providerId||"",(0,ne.xb)(Oe.getCustomParameters())||(_r.customParameters=JSON.stringify(Oe.getCustomParameters()));for(const[Fo,vl]of Object.entries(Yn||{}))_r[Fo]=vl}if(Oe instanceof bs){const Fo=Oe.getScopes().filter(vl=>""!==vl);Fo.length>0&&(_r.scopes=Fo.join(","))}Ae.tenantId&&(_r.tid=Ae.tenantId);const Xr=_r;for(const Fo of Object.keys(Xr))void 0===Xr[Fo]&&delete Xr[Fo];const vs=yield Ae._getAppCheckToken(),fo=vs?`#${Ki}=${encodeURIComponent(vs)}`:"";return`${function gr({config:P}){return P.emulator?Ei(P,si):`https://${P.authDomain}/${tr}`}(Ae)}?${(0,ne.xO)(Xr).slice(1)}${fo}`})).apply(this,arguments)}const Js="webStorageSupport",yi=class dr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vi,this._completeRedirectFn=Xs,this._overrideRedirectResult=Zo}_openPopup(g,m,b,W){var ee=this;return(0,I.Z)(function*(){var Ae;Ni(null===(Ae=ee.eventManagers[g._key()])||void 0===Ae?void 0:Ae.manager,"_initialize() not called before _openPopup()");const Oe=yield ms(g,m,b,es(),W);return function nr(P,g,m,b=500,W=600){const ee=Math.max((window.screen.availHeight-W)/2,0).toString(),Ae=Math.max((window.screen.availWidth-b)/2,0).toString();let Oe="";const Tt=Object.assign(Object.assign({},ve),{width:b.toString(),height:W.toString(),top:ee,left:Ae}),Ht=(0,ne.z$)().toLowerCase();m&&(Oe=ls(Ht)?"_blank":m),Vs(Ht)&&(g=g||"http://localhost",Tt.scrollbars="yes");const ir=Object.entries(Tt).reduce((_r,[Xr,vs])=>`${_r}${Xr}=${vs},`,"");if(function Wi(P=(0,ne.z$)()){var g;return xi(P)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Ht)&&"_self"!==Oe)return function cr(P,g){const m=document.createElement("a");m.href=P,m.target=g;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(g||"",Oe),new Dn(null);const Yn=window.open(g||"",Oe,ir);on(Yn,P,"popup-blocked");try{Yn.focus()}catch{}return new Dn(Yn)}(g,Oe,Do())})()}_openRedirect(g,m,b,W){var ee=this;return(0,I.Z)(function*(){return yield ee._originValidation(g),function Zl(P){is().location.href=P}(yield ms(g,m,b,es(),W)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:W,promise:ee}=this.eventManagers[m];return W?Promise.resolve(W):(Ni(ee,"If manager is not set, promise should be"),ee)}const b=this.initAndGetManager(g);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(g){var m=this;return(0,I.Z)(function*(){const b=yield function X(P){return(lt=lt||(0,I.Z)(function*(g){const m=yield function Qc(P){return Qo=Qo||function Ta(P){return new Promise((g,m)=>{var b,W,ee;function Ae(){fd(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{fd(),m(qr(P,"network-request-failed"))},timeout:Ls.get()})}if(null!==(W=null===(b=is().gapi)||void 0===b?void 0:b.iframes)&&void 0!==W&&W.Iframe)g(gapi.iframes.getContext());else{if(null===(ee=is().gapi)||void 0===ee||!ee.load){const Oe=ps("iframefcb");return is()[Oe]=()=>{gapi.load?Ae():m(qr(P,"network-request-failed"))},kr(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(Tt=>m(Tt))}Ae()}}).catch(g=>{throw Qo=null,g})}(P),Qo}(g),b=is().gapi;return on(b,g,"internal-error"),m.open({where:document.body,url:H(g),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pl,dontclear:!0},W=>{var ee;return new Promise(function(Ae,Oe){return(ee=ee||(0,I.Z)(function*(Tt,Ht){yield W.restyle({setHideOnLeave:!1});const ir=qr(g,"network-request-failed"),Yn=is().setTimeout(()=>{Ht(ir)},Ru.get());function _r(){is().clearTimeout(Yn),Tt(W)}W.ping(_r).then(_r,()=>{Ht(ir)})})).apply(this,arguments)})})})).apply(this,arguments)}(g),W=new Yc(g);return b.register("authEvent",ee=>(on(ee?.authEvent,g,"invalid-auth-event"),{status:W.onEvent(ee.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:W},m.iframes[g._key()]=b,W})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Js,{type:Js},W=>{var ee;const Ae=null===(ee=W?.[0])||void 0===ee?void 0:ee[Js];void 0!==Ae&&m(!!Ae),Hr(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Tl(P){return(ue=ue||(0,I.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:m}=yield za(g);for(const b of m)try{if(Zc(b))return}catch{}Hr(g,"unauthorized-domain")})).apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return ni()||Ti()||xi()}};class Ws{constructor(g){this.factorId=g}_process(g,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,b);case"signin":return this._finalizeSignIn(g,m.credential);default:return vi("unexpected MultiFactorSessionType")}}}class ks extends Ws{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new ks(g)}_finalizeEnroll(g,m,b){return function ql(P,g){return Dr(P,"POST","/v2/accounts/mfaEnrollment:finalize",Ir(P,g))}(g,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Si(P,g){return Dr(P,"POST","/v2/accounts/mfaSignIn:finalize",Ir(P,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ma=(()=>{class P{constructor(){}static assertion(m){return ks._fromCredential(m)}}return P.FACTOR_ID="phone",P})();var ml,Aa,tu,Xo,nu,Al="@firebase/auth";class ho{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,I.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(b=>{g(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);m&&(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ga(){return window}(0,ne.Pz)("authIdTokenMaxAge"),function gl(P){(0,he._registerComponent)(new Ie.wA("auth",(g,{options:m})=>{const b=g.getProvider("app").getImmediate(),W=g.getProvider("heartbeat"),ee=g.getProvider("app-check-internal"),{apiKey:Ae,authDomain:Oe}=b.options;on(Ae&&!Ae.includes(":"),"invalid-api-key",{appName:b.name});const Tt={apiKey:Ae,authDomain:Oe,clientPlatform:P,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fs(P)},Ht=new ns(b,W,ee,Tt);return function Io(P,g){const m=g?.persistence||[],b=(Array.isArray(m)?m:[m]).map(ki);g?.errorMap&&P._updateErrorMap(g.errorMap),P._initializeWithPersistence(b,g?.popupRedirectResolver)}(Ht,m),Ht},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,b)=>{g.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new Ie.wA("auth-internal",g=>{const m=qi(g.getProvider("auth").getImmediate());return new ho(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(Al,"0.23.2",function eu(P){switch(P){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(P)),(0,he.registerVersion)(Al,"0.23.2","esm2017")}("Browser");class Kd extends Yc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,I.Z)(function*(){yield g.initPromise})()}}function gd(P){return(nu=nu||(0,I.Z)(function*(g){const m=yield Ho()._get(os(g));return m&&(yield Ho()._remove(os(g))),m})).apply(this,arguments)}function So(){const P=[];for(let m=0;m<20;m++){const b=Math.floor(62*Math.random());P.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(b))}return P.join("")}function Ho(){return ki(wl)}function os(P){return $n("authEvent",P.config.apiKey,P.name)}function Jo(P){if(!P?.includes("?"))return{};const[g,...m]=P.split("?");return(0,ne.zd)(m.join("?"))}const Qd=class Zd{constructor(){this._redirectPersistence=Vi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xs,this._overrideRedirectResult=Zo}_initialize(g){var m=this;return(0,I.Z)(function*(){const b=g._key();let W=m.eventManagers.get(b);return W||(W=new Kd(g),m.eventManagers.set(b,W),m.attachCallbackListeners(g,W)),W})()}_openPopup(g){Hr(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,b,W){var ee=this;return(0,I.Z)(function*(){!function pd(P){var g,m,b,W,ee,Ae,Oe,Tt,Ht,ir;const Yn=Ga();on("function"==typeof(null===(g=Yn?.universalLinks)||void 0===g?void 0:g.subscribe),P,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),on(typeof(null===(m=Yn?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),on("function"==typeof(null===(ee=null===(W=null===(b=Yn?.cordova)||void 0===b?void 0:b.plugins)||void 0===W?void 0:W.browsertab)||void 0===ee?void 0:ee.openUrl),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),on("function"==typeof(null===(Tt=null===(Oe=null===(Ae=Yn?.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Oe?void 0:Oe.browsertab)||void 0===Tt?void 0:Tt.isAvailable),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),on("function"==typeof(null===(ir=null===(Ht=Yn?.cordova)||void 0===Ht?void 0:Ht.InAppBrowser)||void 0===ir?void 0:ir.open),P,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Ae=yield ee._initialize(g);yield Ae.initialized(),Ae.resetRedirect(),function wc(){tl.clear()}(),yield ee._originValidation(g);const Oe=function ru(P,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:So(),postBody:null,tenantId:P.tenantId,error:qr(P,"no-auth-event")}}(g,b,W);yield function iu(P,g){return Ho()._set(os(P),g)}(g,Oe);const Tt=yield function Pu(P,g,m){return(ml=ml||(0,I.Z)(function*(b,W,ee){var Ae;const{BuildInfo:Oe}=Ga();Ni(W.sessionId,"AuthEvent did not contain a session ID");const Tt=yield function ku(P){return(Xo=Xo||(0,I.Z)(function*(g){const m=function Tc(P){if(Ni(/[0-9a-zA-Z]+/.test(P),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(P);const g=new ArrayBuffer(P.length),m=new Uint8Array(g);for(let b=0;b<P.length;b++)m[b]=P.charCodeAt(b);return m}(g),b=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(b)).map(ee=>ee.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}(W.sessionId),Ht={};return xi()?Ht.ibi=Oe.packageName:Es()?Ht.apn=Oe.packageName:Hr(b,"operation-not-supported-in-this-environment"),Oe.displayName&&(Ht.appDisplayName=Oe.displayName),Ht.sessionId=Tt,ms(b,ee,W.type,void 0,null!==(Ae=W.eventId)&&void 0!==Ae?Ae:void 0,Ht)})).apply(this,arguments)}(g,Oe,m),Ht=yield function Nu(P){const{cordova:g}=Ga();return new Promise(m=>{g.plugins.browsertab.isAvailable(b=>{let W=null;b?g.plugins.browsertab.openUrl(P):W=g.InAppBrowser.open(P,function io(P=(0,ne.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(P)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(P)}()?"_blank":"_system","location=yes"),m(W)})})}(Tt);return function nc(P,g,m){return(tu=tu||(0,I.Z)(function*(b,W,ee){const{cordova:Ae}=Ga();let Oe=()=>{};try{yield new Promise((Tt,Ht)=>{let ir=null;function Yn(){var vs;Tt();const fo=null===(vs=Ae.plugins.browsertab)||void 0===vs?void 0:vs.close;"function"==typeof fo&&fo(),"function"==typeof ee?.close&&ee.close()}function _r(){ir||(ir=window.setTimeout(()=>{Ht(qr(b,"redirect-cancelled-by-user"))},2e3))}function Xr(){"visible"===document?.visibilityState&&_r()}W.addPassiveListener(Yn),document.addEventListener("resume",_r,!1),Es()&&document.addEventListener("visibilitychange",Xr,!1),Oe=()=>{W.removePassiveListener(Yn),document.removeEventListener("resume",_r,!1),document.removeEventListener("visibilitychange",Xr,!1),ir&&window.clearTimeout(ir)}})}finally{Oe()}})).apply(this,arguments)}(g,Ae,Ht)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Wa(P){return(Aa=Aa||(0,I.Z)(function*(g){const{BuildInfo:m}=Ga(),b={};xi()?b.iosBundleId=m.packageName:Es()?b.androidPackageName=m.packageName:Hr(g,"operation-not-supported-in-this-environment"),yield za(g,b)})).apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){var b,W;const{universalLinks:ee,handleOpenURL:Ae,BuildInfo:Oe}=Ga(),Tt=setTimeout((0,I.Z)(function*(){yield gd(g),m.onEvent(Qr())}),500),Ht=function(Xr){return(b=b||(0,I.Z)(function*(vs){clearTimeout(Tt);const fo=yield gd(g);let Fo=null;fo&&vs?.url&&(Fo=function Yd(P,g){var m,b;const W=function Lu(P){const g=Jo(P),m=g.link?decodeURIComponent(g.link):void 0,b=Jo(m).link,W=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Jo(W).link||W||b||m||P}(g);if(W.includes("/__/auth/callback")){const ee=Jo(W),Ae=ee.firebaseError?function va(P){try{return JSON.parse(P)}catch{return null}}(decodeURIComponent(ee.firebaseError)):null,Oe=null===(b=null===(m=Ae?.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],Tt=Oe?qr(Oe):null;return Tt?{type:P.type,eventId:P.eventId,tenantId:P.tenantId,error:Tt,urlResponse:null,sessionId:null,postBody:null}:{type:P.type,eventId:P.eventId,tenantId:P.tenantId,sessionId:P.sessionId,urlResponse:W,postBody:null}}return null}(fo,vs.url)),m.onEvent(Fo||Qr())})).apply(this,arguments)};typeof ee<"u"&&"function"==typeof ee.subscribe&&ee.subscribe(null,Ht);const ir=Ae,Yn=`${Oe.packageName.toLowerCase()}://`;Ga().handleOpenURL=function(_r){return(W=W||(0,I.Z)(function*(Xr){if(Xr.toLowerCase().startsWith(Yn)&&Ht({url:Xr}),"function"==typeof ir)try{ir(Xr)}catch(vs){console.error(vs)}})).apply(this,arguments)}}};function Qr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:qr("no-auth-event")}}var rc,Xd,su;function $u(){var P;return(null===(P=self?.location)||void 0===P?void 0:P.protocol)||null}function md(P=(0,ne.z$)()){return!("file:"!==$u()&&"ionic:"!==$u()&&"capacitor:"!==$u()||!P.toLowerCase().match(/iphone|ipad|ipod|android/))}function vd(){try{const P=self.localStorage,g=Do();if(P)return P.setItem(g,"1"),P.removeItem(g),!function Sf(P=(0,ne.z$)()){return function Lh(){return(0,ne.w1)()&&11===document?.documentMode}()||function Bh(P=(0,ne.z$)()){return/Edge\/\d+/.test(P)}(P)}()||(0,ne.hl)()}catch{return Sc()&&(0,ne.hl)()}return!1}function Sc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ac(){return(function ic(){return"http:"===$u()||"https:"===$u()}()||(0,ne.ru)()||md())&&!function yd(){return(0,ne.b$)()||(0,ne.UG)()}()&&vd()&&!Sc()}function qa(){return md()&&typeof document<"u"}const to={LOCAL:"local",NONE:"none",SESSION:"session"},kl=on,Mc="persistence";function xc(P){return(Xd=Xd||(0,I.Z)(function*(g){yield g._initializationPromise;const m=Jd(),b=$n(Mc,g.config.apiKey,g.name);m&&m.setItem(b,g._getPersistence())})).apply(this,arguments)}function Jd(){var P;try{return(null===(P=function sc(){return typeof window<"u"?window:null}())||void 0===P?void 0:P.sessionStorage)||null}catch{return null}}const ou=on;class Fl{constructor(){this.browserResolver=ki(yi),this.cordovaResolver=ki(Qd),this.underlyingResolver=null,this._redirectPersistence=Vi,this._completeRedirectFn=Xs,this._overrideRedirectResult=Zo}_initialize(g){var m=this;return(0,I.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,b,W){var ee=this;return(0,I.Z)(function*(){return yield ee.selectUnderlyingResolver(),ee.assertedUnderlyingResolver._openPopup(g,m,b,W)})()}_openRedirect(g,m,b,W){var ee=this;return(0,I.Z)(function*(){return yield ee.selectUnderlyingResolver(),ee.assertedUnderlyingResolver._openRedirect(g,m,b,W)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return qa()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ou(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,I.Z)(function*(){if(g.underlyingResolver)return;const m=yield function Vu(){return(rc=rc||(0,I.Z)(function*(){return!!qa()&&new Promise(P=>{const g=setTimeout(()=>{P(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),P(!0)})})})).apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function ju(P){return P.unwrap()}function eh(P){return ea(P)}function ea(P){const{_tokenResponse:g}=P instanceof ne.ZR?P.customData:P;if(!g)return null;if(!(P instanceof ne.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Li.credentialFromResult(P);const m=g.providerId;if(!m||m===zn.PASSWORD)return null;let b;switch(m){case zn.GOOGLE:b=oo;break;case zn.FACEBOOK:b=Lo;break;case zn.GITHUB:b=oa;break;case zn.TWITTER:b=Il;break;default:const{oauthIdToken:W,oauthAccessToken:ee,oauthTokenSecret:Ae,pendingToken:Oe,nonce:Tt}=g;return ee||Ae||W||Oe?Oe?m.startsWith("saml.")?ao._create(m,Oe):Te._fromParams({providerId:m,signInMethod:m,pendingToken:Oe,idToken:W,accessToken:ee}):new Ds(m).credential({idToken:W,accessToken:ee,rawNonce:Tt}):null}return P instanceof ne.ZR?b.credentialFromError(P):b.credentialFromResult(P)}function zo(P,g){return g.catch(m=>{throw m instanceof ne.ZR&&function Rc(P,g){var m;const b=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Hu(P,function Mr(P,g){var m;const b=(0,ne.m9)(P),W=g;return on(g.customData.operationType,b,"argument-error"),on(null===(m=W.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),Wl._fromError(b,W)}(P,g));else if(b){const W=ea(g),ee=g;W&&(ee.credential=W,ee.tenantId=b.tenantId||void 0,ee.email=b.email||void 0,ee.phoneNumber=b.phoneNumber||void 0)}}(P,m),m}).then(m=>{const W=m.user;return{operationType:m.operationType,credential:eh(m),additionalUserInfo:Ja(m),user:qs.getOrCreate(W)}})}function lu(P,g){return(su=su||(0,I.Z)(function*(m,b){const W=yield b;return{verificationId:W.verificationId,confirm:ee=>zo(m,W.confirm(ee))}})).apply(this,arguments)}class Hu{constructor(g,m){this.resolver=m,this.auth=function au(P){return P.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return zo(ju(this.auth),this.resolver.resolveSignIn(g))}}class qs{constructor(g){this._delegate=g,this.multiFactor=function mc(P){const g=(0,ne.m9)(P);return Ko.has(g)||Ko.set(g,El._fromUser(g)),Ko.get(g)}(g)}static getOrCreate(g){return qs.USER_MAP.has(g)||qs.USER_MAP.set(g,new qs(g)),qs.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,I.Z)(function*(){return zo(m.auth,Qa(m._delegate,g))})()}linkWithPhoneNumber(g,m){var b=this;return(0,I.Z)(function*(){return lu(b.auth,function vr(P,g,m){return(or=or||(0,I.Z)(function*(b,W,ee){const Ae=(0,ne.m9)(b);yield Fa(!1,Ae,"phone");const Oe=yield ii(Ae.auth,W,(0,ne.m9)(ee));return new No(Oe,Tt=>Qa(Ae,Tt))})).apply(this,arguments)}(b._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,I.Z)(function*(){return zo(m.auth,function Ec(P,g,m){return(ot=ot||(0,I.Z)(function*(b,W,ee){const Ae=(0,ne.m9)(b);Mi(Ae.auth,W,Gr);const Oe=On(Ae.auth,ee);return new As(Ae.auth,"linkViaPopup",W,Oe,Ae).executeNotNull()})).apply(this,arguments)}(m._delegate,g,Fl))})()}linkWithRedirect(g){var m=this;return(0,I.Z)(function*(){return yield xc(qi(m.auth)),function Ua(P,g,m){return function ja(P,g,m){return(br=br||(0,I.Z)(function*(b,W,ee){const Ae=(0,ne.m9)(b);Mi(Ae.auth,W,Gr),yield Ae.auth._initializationPromise;const Oe=On(Ae.auth,ee);yield Fa(!1,Ae,W.providerId),yield xt(Oe,Ae.auth);const Tt=yield fl(Ae);return Oe._openRedirect(Ae.auth,W,"linkViaRedirect",Tt)})).apply(this,arguments)}(P,g,m)}(m._delegate,g,Fl)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,I.Z)(function*(){return zo(m.auth,$o(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return lu(this.auth,function Ql(P,g,m){return(bi=bi||(0,I.Z)(function*(b,W,ee){const Ae=(0,ne.m9)(b),Oe=yield ii(Ae.auth,W,(0,ne.m9)(ee));return new No(Oe,Tt=>$o(Ae,Tt))})).apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return zo(this.auth,function dd(P,g,m){return(jt=jt||(0,I.Z)(function*(b,W,ee){const Ae=(0,ne.m9)(b);Mi(Ae.auth,W,Gr);const Oe=On(Ae.auth,ee);return new As(Ae.auth,"reauthViaPopup",W,Oe,Ae).executeNotNull()})).apply(this,arguments)}(this._delegate,g,Fl))}reauthenticateWithRedirect(g){var m=this;return(0,I.Z)(function*(){return yield xc(qi(m.auth)),function Va(P,g,m){return function Nl(P,g,m){return(Mn=Mn||(0,I.Z)(function*(b,W,ee){const Ae=(0,ne.m9)(b);Mi(Ae.auth,W,Gr),yield Ae.auth._initializationPromise;const Oe=On(Ae.auth,ee);yield xt(Oe,Ae.auth);const Tt=yield fl(Ae);return Oe._openRedirect(Ae.auth,W,"reauthViaRedirect",Tt)})).apply(this,arguments)}(P,g,m)}(m._delegate,g,Fl)})()}sendEmailVerification(g){return function $i(P,g){return(Pn=Pn||(0,I.Z)(function*(m,b){const W=(0,ne.m9)(m),Ae={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};b&&G(W.auth,Ae,b);const{email:Oe}=yield function sa(P,g){return(at=at||(0,I.Z)(function*(m,b){return Ro(m,b)})).apply(this,arguments)}(W.auth,Ae);Oe!==m.email&&(yield m.reload())})).apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,I.Z)(function*(){return yield function ca(P,g){return(pt=pt||(0,I.Z)(function*(m,b){const W=(0,ne.m9)(m);yield Fa(!0,W,b);const{providerUserInfo:ee}=yield function ct(P,g){return(Me=Me||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:update",b)})).apply(this,arguments)}(W.auth,{idToken:yield W.getIdToken(),deleteProvider:[b]}),Ae=Za(ee||[]);return W.providerData=W.providerData.filter(Oe=>Ae.has(Oe.providerId)),Ae.has("phone")||(W.phoneNumber=null),yield W.auth._persistUserIfCurrent(W),W})).apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function zs(P,g){return Qs((0,ne.m9)(P),g,null)}(this._delegate,g)}updatePassword(g){return function Ss(P,g){return Qs((0,ne.m9)(P),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Au(P,g){return(Di=Di||(0,I.Z)(function*(m,b){yield ba((0,ne.m9)(m),b)})).apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function bo(P,g){return(Lr=Lr||(0,I.Z)(function*(m,{displayName:b,photoURL:W}){if(void 0===b&&void 0===W)return;const ee=(0,ne.m9)(m),Oe={idToken:yield ee.getIdToken(),displayName:b,photoUrl:W,returnSecureToken:!0},Tt=yield We(ee,function Ns(P,g){return(pr=pr||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:update",b)})).apply(this,arguments)}(ee.auth,Oe));ee.displayName=Tt.displayName||null,ee.photoURL=Tt.photoUrl||null;const Ht=ee.providerData.find(({providerId:ir})=>"password"===ir);Ht&&(Ht.displayName=ee.displayName,Ht.photoURL=ee.photoURL),yield ee._updateTokensIfNecessary(Tt)})).apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function Co(P,g,m){return(Un=Un||(0,I.Z)(function*(b,W,ee){const Ae=(0,ne.m9)(b),Tt={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:W};ee&&G(Ae.auth,Tt,ee);const{email:Ht}=yield function Or(P,g){return(en=en||(0,I.Z)(function*(m,b){return Ro(m,b)})).apply(this,arguments)}(Ae.auth,Tt);Ht!==b.email&&(yield b.reload())})).apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qs.USER_MAP=new WeakMap;const Ll=on;let Oc=(()=>{class P{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=m.options;Ll(W,"invalid-api-key",{appName:m.name}),Ll(W,"invalid-api-key",{appName:m.name});const ee=typeof window<"u"?Fl:void 0;this._delegate=b.initialize({options:{persistence:Go(W,m.name),popupRedirectResolver:ee}}),this._delegate._updateErrorMap(Is),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function ws(P,g,m){const b=qi(P);on(b._canInitEmulator,b,"emulator-config-failed"),on(/^https?:\/\//.test(g),b,"invalid-emulator-scheme");const W=!!m?.disableWarnings,ee=Cs(g),{host:Ae,port:Oe}=function rs(P){const g=Cs(P),m=/(\/\/)?([^?#/]+)/.exec(P.substr(g.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(b);if(W){const ee=W[1];return{host:ee,port:so(b.substr(ee.length+1))}}{const[ee,Ae]=b.split(":");return{host:ee,port:so(Ae)}}}(g);b.config.emulator={url:`${ee}//${Ae}${null===Oe?"":`:${Oe}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Ae,port:Oe,protocol:ee.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function ol(){function P(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",P):P())}()}(this._delegate,m,b)}applyActionCode(m){return function me(P,g){return(Wt=Wt||(0,I.Z)(function*(m,b){yield function Pa(P,g){return(Xe=Xe||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:update",Ir(m,b))})).apply(this,arguments)}((0,ne.m9)(m),{oobCode:b})})).apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return tt(this._delegate,m)}confirmPasswordReset(m,b){return function $(P,g,m){return(dt=dt||(0,I.Z)(function*(b,W,ee){yield mi((0,ne.m9)(b),{oobCode:W,newPassword:ee})})).apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var W=this;return(0,I.Z)(function*(){return zo(W._delegate,function xn(P,g,m){return(vn=vn||(0,I.Z)(function*(b,W,ee){var Ae;const Oe=qi(b),Tt={returnSecureToken:!0,email:W,password:ee,clientType:"CLIENT_TYPE_WEB"};let Ht;if(null!==(Ae=Oe._getRecaptchaConfig())&&void 0!==Ae&&Ae.emailPasswordEnabled){const Xr=yield Xi(Oe,Tt,"signUpPassword");Ht=Bo(Oe,Xr)}else{var ir;Ht=Bo(Oe,Tt).catch(function(Xr){return(ir=ir||(0,I.Z)(function*(vs){if("auth/missing-recaptcha-token"===vs.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const fo=yield Xi(Oe,Tt,"signUpPassword");return Bo(Oe,fo)}return Promise.reject(vs)})).apply(this,arguments)})}const Yn=yield Ht.catch(Xr=>Promise.reject(Xr)),_r=yield Ts._fromIdTokenResponse(Oe,"signIn",Yn);return yield Oe._updateCurrentUser(_r.user),_r})).apply(this,arguments)}(W._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Ur(P,g){return(Sn=Sn||(0,I.Z)(function*(m,b){const ee={identifier:b,continueUri:Kr()?es():"http://localhost"},{signinMethods:Ae}=yield function Rr(P,g){return(wr=wr||(0,I.Z)(function*(m,b){return Dr(m,"POST","/v1/accounts:createAuthUri",Ir(m,b))})).apply(this,arguments)}((0,ne.m9)(m),ee);return Ae||[]})).apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Sr(P,g){const m=Wn.parseLink(g);return"EMAIL_SIGNIN"===m?.operation}(0,m)}getRedirectResult(){var m=this;return(0,I.Z)(function*(){Ll(Ac(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function Cc(P,g){return(Ke=Ke||(0,I.Z)(function*(m,b){return yield qi(m)._initializationPromise,Xs(m,b,!1)})).apply(this,arguments)}(m._delegate,Fl);return b?zo(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function ys(P,g){qi(P)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,b,W){const{next:ee,error:Ae,complete:Oe}=Ia(m,b,W);return this._delegate.onAuthStateChanged(ee,Ae,Oe)}onIdTokenChanged(m,b,W){const{next:ee,error:Ae,complete:Oe}=Ia(m,b,W);return this._delegate.onIdTokenChanged(ee,Ae,Oe)}sendSignInLinkToEmail(m,b){return function Pr(P,g,m){return(Xn=Xn||(0,I.Z)(function*(b,W,ee){var Ae;const Oe=qi(b),Tt={requestType:"EMAIL_SIGNIN",email:W,clientType:"CLIENT_TYPE_WEB"};function Ht(Yn,_r){on(_r.handleCodeInApp,Oe,"argument-error"),_r&&G(Oe,Yn,_r)}if(null!==(Ae=Oe._getRecaptchaConfig())&&void 0!==Ae&&Ae.emailPasswordEnabled){const Yn=yield Xi(Oe,Tt,"getOobCode",!0);Ht(Yn,ee),yield ci(Oe,Yn)}else{var ir;Ht(Tt,ee),yield ci(Oe,Tt).catch(function(Yn){return(ir=ir||(0,I.Z)(function*(_r){if("auth/missing-recaptcha-token"!==_r.code)return Promise.reject(_r);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Xr=yield Xi(Oe,Tt,"getOobCode",!0);Ht(Xr,ee),yield ci(Oe,Xr)}})).apply(this,arguments)})}})).apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function we(P,g,m){return(Rt=Rt||(0,I.Z)(function*(b,W,ee){var Ae;const Oe=qi(b),Tt={requestType:"PASSWORD_RESET",email:W,clientType:"CLIENT_TYPE_WEB"};if(null!==(Ae=Oe._getRecaptchaConfig())&&void 0!==Ae&&Ae.emailPasswordEnabled){const ir=yield Xi(Oe,Tt,"getOobCode",!0);ee&&G(Oe,ir,ee),yield wo(Oe,ir)}else{var Ht;ee&&G(Oe,Tt,ee),yield wo(Oe,Tt).catch(function(ir){return(Ht=Ht||(0,I.Z)(function*(Yn){if("auth/missing-recaptcha-token"!==Yn.code)return Promise.reject(Yn);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const _r=yield Xi(Oe,Tt,"getOobCode",!0);ee&&G(Oe,_r,ee),yield wo(Oe,_r)}})).apply(this,arguments)})}})).apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,I.Z)(function*(){let W;switch(function Uu(P,g){kl(Object.values(to).includes(g),P,"invalid-persistence-type"),(0,ne.b$)()?kl(g!==to.SESSION,P,"unsupported-persistence-type"):(0,ne.UG)()?kl(g===to.NONE,P,"unsupported-persistence-type"):Sc()?kl(g===to.NONE||g===to.LOCAL&&(0,ne.hl)(),P,"unsupported-persistence-type"):kl(g===to.NONE||vd(),P,"unsupported-persistence-type")}(b._delegate,m),m){case to.SESSION:W=Vi;break;case to.LOCAL:W=(yield ki(cn)._isAvailable())?cn:wl;break;case to.NONE:W=An;break;default:return Hr("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return zo(this._delegate,function la(P){return(je=je||(0,I.Z)(function*(g){var m;const b=qi(g);if(yield b._initializationPromise,null!==(m=b.currentUser)&&void 0!==m&&m.isAnonymous)return new Ts({user:b.currentUser,providerId:null,operationType:"signIn"});const W=yield Bo(b,{returnSecureToken:!0}),ee=yield Ts._fromIdTokenResponse(b,"signIn",W,!0);return yield b._updateCurrentUser(ee.user),ee})).apply(this,arguments)}(this._delegate))}signInWithCredential(m){return zo(this._delegate,ua(this._delegate,m))}signInWithCustomToken(m){return zo(this._delegate,function lo(P,g){return(wt=wt||(0,I.Z)(function*(m,b){const W=qi(m),ee=yield function Ps(P,g){return(tn=tn||(0,I.Z)(function*(m,b){return bt(m,"POST","/v1/accounts:signInWithCustomToken",Ir(m,b))})).apply(this,arguments)}(W,{token:b,returnSecureToken:!0}),Ae=yield Ts._fromIdTokenResponse(W,"signIn",ee);return yield W._updateCurrentUser(Ae.user),Ae})).apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return zo(this._delegate,function xr(P,g,m){return ua((0,ne.m9)(P),pi.credential(g,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return zo(this._delegate,function Wr(P,g,m){return(Jn=Jn||(0,I.Z)(function*(b,W,ee){const Ae=(0,ne.m9)(b),Oe=pi.credentialWithLink(W,ee||es());return on(Oe._tenantId===(Ae.tenantId||null),Ae,"tenant-id-mismatch"),ua(Ae,Oe)})).apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return lu(this._delegate,function Ri(P,g,m){return(_s=_s||(0,I.Z)(function*(b,W,ee){const Ae=qi(b),Oe=yield ii(Ae,W,(0,ne.m9)(ee));return new No(Oe,Tt=>ua(Ae,Tt))})).apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,I.Z)(function*(){return Ll(Ac(),b._delegate,"operation-not-supported-in-this-environment"),zo(b._delegate,function Jl(P,g,m){return(Ii=Ii||(0,I.Z)(function*(b,W,ee){const Ae=qi(b);Mi(b,W,Gr);const Oe=On(Ae,ee);return new As(Ae,"signInViaPopup",W,Oe).executeNotNull()})).apply(this,arguments)}(b._delegate,m,Fl))})()}signInWithRedirect(m){var b=this;return(0,I.Z)(function*(){return Ll(Ac(),b._delegate,"operation-not-supported-in-this-environment"),yield xc(b._delegate),function hl(P,g,m){return function ec(P,g,m){return(In=In||(0,I.Z)(function*(b,W,ee){const Ae=qi(b);Mi(b,W,Gr),yield Ae._initializationPromise;const Oe=On(Ae,ee);return yield xt(Oe,Ae),Oe._openRedirect(Ae,W,"signInViaRedirect")})).apply(this,arguments)}(P,g,m)}(b._delegate,m,Fl)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function $t(P,g){return(En=En||(0,I.Z)(function*(m,b){const{data:W}=yield tt((0,ne.m9)(m),b);return W.email})).apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return P.Persistence=to,P})();function Ia(P,g,m){let b=P;"function"!=typeof P&&({next:b,error:g,complete:m}=P);const W=b;return{next:Ae=>W(Ae&&qs.getOrCreate(Ae)),error:g,complete:m}}function Go(P,g){const m=function rl(P,g){const m=Jd();if(!m)return[];const b=$n(Mc,P,g);switch(m.getItem(b)){case to.NONE:return[An];case to.LOCAL:return[cn,Vi];case to.SESSION:return[Vi];default:return[]}}(P,g);if(typeof self<"u"&&!m.includes(cn)&&m.push(cn),typeof window<"u")for(const b of[wl,Vi])m.includes(b)||m.push(b);return m.includes(An)||m.push(An),m}class Bl{constructor(){this.providerId="phone",this._delegate=new Li(ju(v.Z.auth()))}static credential(g,m){return Li.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}Bl.PHONE_SIGN_IN_METHOD=Li.PHONE_SIGN_IN_METHOD,Bl.PROVIDER_ID=Li.PROVIDER_ID;const yl=on;class $h{constructor(g,m,b=v.Z.app()){var W;yl(null===(W=b.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new jr(g,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function th(P){P.INTERNAL.registerComponent(new Ie.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),b=g.getProvider("auth");return new Oc(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:pi,FacebookAuthProvider:Lo,GithubAuthProvider:oa,GoogleAuthProvider:oo,OAuthProvider:Ds,SAMLAuthProvider:Zs,PhoneAuthProvider:Bl,PhoneMultiFactorGenerator:ma,RecaptchaVerifier:$h,TwitterAuthProvider:Il,Auth:Oc,AuthCredential:qo,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),P.registerVersion("@firebase/auth-compat","0.4.2")}(v.Z)},95:(wn,gt,L)=>{"use strict";L.d(gt,{u5:()=>Or,Fd:()=>kr,qQ:()=>xs,Cf:()=>Xe,JU:()=>nt,a5:()=>Xn,JJ:()=>Pn,On:()=>He});var I=L(5879),v=L(6814),ne=L(2459),he=L(5592),ke=L(7453),Pe=L(4829),Ie=L(4564),qe=L(8251),Je=L(7400),ye=L(2714),Me=L(7398);let Ge=(()=>{var z;class V{constructor(Y,Te){this._renderer=Y,this._elementRef=Te,this.onChange=fn=>{},this.onTouched=()=>{}}setProperty(Y,Te){this._renderer.setProperty(this._elementRef.nativeElement,Y,Te)}registerOnTouched(Y){this.onTouched=Y}registerOnChange(Y){this.onChange=Y}setDisabledState(Y){this.setProperty("disabled",Y)}}return(z=V).\u0275fac=function(Y){return new(Y||z)(I.Y36(I.Qsj),I.Y36(I.SBq))},z.\u0275dir=I.lG2({type:z}),V})(),ze=(()=>{var z;class V extends Ge{}return(z=V).\u0275fac=function(){let oe;return function(Te){return(oe||(oe=I.n5z(z)))(Te||z)}}(),z.\u0275dir=I.lG2({type:z,features:[I.qOj]}),V})();const nt=new I.OlP("NgValueAccessor"),De={provide:nt,useExisting:(0,I.Gpc)(()=>Ve),multi:!0},yt=new I.OlP("CompositionEventMode");let Ve=(()=>{var z;class V extends Ge{constructor(Y,Te,fn){super(Y,Te),this._compositionMode=fn,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ee(){const z=(0,v.q)()?(0,v.q)().getUserAgent():"";return/android (\d+)/.test(z.toLowerCase())}())}writeValue(Y){this.setProperty("value",Y??"")}_handleInput(Y){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(Y)}_compositionStart(){this._composing=!0}_compositionEnd(Y){this._composing=!1,this._compositionMode&&this.onChange(Y)}}return(z=V).\u0275fac=function(Y){return new(Y||z)(I.Y36(I.Qsj),I.Y36(I.SBq),I.Y36(yt,8))},z.\u0275dir=I.lG2({type:z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Y,Te){1&Y&&I.NdJ("input",function(E){return Te._handleInput(E.target.value)})("blur",function(){return Te.onTouched()})("compositionstart",function(){return Te._compositionStart()})("compositionend",function(E){return Te._compositionEnd(E.target.value)})},features:[I._Bn([De]),I.qOj]}),V})();function rt(z){return null==z||("string"==typeof z||Array.isArray(z))&&0===z.length}const Xe=new I.OlP("NgValidators"),Fe=new I.OlP("NgAsyncValidators");function pe(z){return null}function Se(z){return null!=z}function $e(z){return(0,I.QGY)(z)?(0,ne.D)(z):z}function je(z){let V={};return z.forEach(oe=>{V=null!=oe?{...V,...oe}:V}),0===Object.keys(V).length?null:V}function pt(z,V){return V.map(oe=>oe(z))}function Bt(z){return z.map(V=>function ht(z){return!z.validate}(V)?V:oe=>V.validate(oe))}function Qt(z){return null!=z?function Ft(z){if(!z)return null;const V=z.filter(Se);return 0==V.length?null:function(oe){return je(pt(oe,V))}}(Bt(z)):null}function Vn(z){return null!=z?function st(z){if(!z)return null;const V=z.filter(Se);return 0==V.length?null:function(oe){return function ge(...z){const V=(0,Ie.jO)(z),{args:oe,keys:Y}=(0,ke.D)(z),Te=new he.y(fn=>{const{length:E}=oe;if(!E)return void fn.complete();const q=new Array(E);let C=E,j=E;for(let ae=0;ae<E;ae++){let Nt=!1;(0,Pe.Xf)(oe[ae]).subscribe((0,qe.x)(fn,jn=>{Nt||(Nt=!0,j--),q[ae]=jn},()=>C--,void 0,()=>{(!C||!Nt)&&(j||fn.next(Y?(0,ye.n)(Y,q):q),fn.complete())}))}});return V?Te.pipe((0,Je.Z)(V)):Te}(pt(oe,V).map($e)).pipe((0,Me.U)(je))}}(Bt(z)):null}function Bn(z,V){return null===z?[V]:Array.isArray(z)?[...z,V]:[z,V]}function Rt(z){return z?Array.isArray(z)?z:[z]:[]}function dt(z,V){return Array.isArray(z)?z.includes(V):z===V}function Wt(z,V){const oe=Rt(V);return Rt(z).forEach(Te=>{dt(oe,Te)||oe.push(Te)}),oe}function Tn(z,V){return Rt(V).filter(oe=>!dt(z,oe))}class En{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=Qt(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=Vn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V=void 0){this.control&&this.control.reset(V)}hasError(V,oe){return!!this.control&&this.control.hasError(V,oe)}getError(V,oe){return this.control?this.control.getError(V,oe):null}}class vn extends En{get formDirective(){return null}get path(){return null}}class Xn extends En{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Jn{constructor(V){this._cd=V}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Pn=(()=>{var z;class V extends Jn{constructor(Y){super(Y)}}return(z=V).\u0275fac=function(Y){return new(Y||z)(I.Y36(Xn,2))},z.\u0275dir=I.lG2({type:z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Y,Te){2&Y&&I.ekj("ng-untouched",Te.isUntouched)("ng-touched",Te.isTouched)("ng-pristine",Te.isPristine)("ng-dirty",Te.isDirty)("ng-valid",Te.isValid)("ng-invalid",Te.isInvalid)("ng-pending",Te.isPending)},features:[I.qOj]}),V})();const sn="VALID",In="INVALID",Mn="PENDING",br="DISABLED";function ue(z){return null!=z&&!Array.isArray(z)&&"object"==typeof z}class nn{constructor(V,oe){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(V),this._assignAsyncValidators(oe)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===sn}get invalid(){return this.status===In}get pending(){return this.status==Mn}get disabled(){return this.status===br}get enabled(){return this.status!==br}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._assignValidators(V)}setAsyncValidators(V){this._assignAsyncValidators(V)}addValidators(V){this.setValidators(Wt(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Wt(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(Tn(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(Tn(V,this._rawAsyncValidators))}hasValidator(V){return dt(this._rawValidators,V)}hasAsyncValidator(V){return dt(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(oe=>{oe.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(oe=>{oe.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=Mn,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const oe=this._parentMarkedDirty(V.onlySelf);this.status=br,this.errors=null,this._forEachChild(Y=>{Y.disable({...V,onlySelf:!0})}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...V,skipPristineCheck:oe}),this._onDisabledChange.forEach(Y=>Y(!0))}enable(V={}){const oe=this._parentMarkedDirty(V.onlySelf);this.status=sn,this._forEachChild(Y=>{Y.enable({...V,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors({...V,skipPristineCheck:oe}),this._onDisabledChange.forEach(Y=>Y(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}getRawValue(){return this.value}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sn||this.status===Mn)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(oe=>oe._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?br:sn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=Mn,this._hasOwnPendingAsyncValidator=!0;const oe=$e(this.asyncValidator(this));this._asyncValidationSubscription=oe.subscribe(Y=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Y,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,oe={}){this.errors=V,this._updateControlsErrors(!1!==oe.emitEvent)}get(V){let oe=V;return null==oe||(Array.isArray(oe)||(oe=oe.split(".")),0===oe.length)?null:oe.reduce((Y,Te)=>Y&&Y._find(Te),this)}getError(V,oe){const Y=oe?this.get(oe):this;return Y&&Y.errors?Y.errors[V]:null}hasError(V,oe){return!!this.getError(V,oe)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new I.vpe,this.statusChanges=new I.vpe}_calculateStatus(){return this._allControlsDisabled()?br:this.errors?In:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mn)?Mn:this._anyControlsHaveStatus(In)?In:sn}_anyControlsHaveStatus(V){return this._anyControls(oe=>oe.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){ue(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(V){return null}_assignValidators(V){this._rawValidators=Array.isArray(V)?V.slice():V,this._composedValidatorFn=function re(z){return Array.isArray(z)?Qt(z):z||null}(this._rawValidators)}_assignAsyncValidators(V){this._rawAsyncValidators=Array.isArray(V)?V.slice():V,this._composedAsyncValidatorFn=function Ne(z){return Array.isArray(z)?Vn(z):z||null}(this._rawAsyncValidators)}}const ei=new I.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Is}),Is="always";function Bi(z,V,oe=Is){(function ur(z,V){const oe=function tn(z){return z._rawValidators}(z);null!==V.validator?z.setValidators(Bn(oe,V.validator)):"function"==typeof oe&&z.setValidators([oe]);const Y=function wt(z){return z._rawAsyncValidators}(z);null!==V.asyncValidator?z.setAsyncValidators(Bn(Y,V.asyncValidator)):"function"==typeof Y&&z.setAsyncValidators([Y]);const Te=()=>z.updateValueAndValidity();oi(V._rawValidators,Te),oi(V._rawAsyncValidators,Te)})(z,V),V.valueAccessor.writeValue(z.value),(z.disabled||"always"===oe)&&V.valueAccessor.setDisabledState?.(z.disabled),function qr(z,V){V.valueAccessor.registerOnChange(oe=>{z._pendingValue=oe,z._pendingChange=!0,z._pendingDirty=!0,"change"===z.updateOn&&Mi(z,V)})}(z,V),function ti(z,V){const oe=(Y,Te)=>{V.valueAccessor.writeValue(Y),Te&&V.viewToModelUpdate(Y)};z.registerOnChange(oe),V._registerOnDestroy(()=>{z._unregisterOnChange(oe)})}(z,V),function Ji(z,V){V.valueAccessor.registerOnTouched(()=>{z._pendingTouched=!0,"blur"===z.updateOn&&z._pendingChange&&Mi(z,V),"submit"!==z.updateOn&&z.markAsTouched()})}(z,V),function Pi(z,V){if(V.valueAccessor.setDisabledState){const oe=Y=>{V.valueAccessor.setDisabledState(Y)};z.registerOnDisabledChange(oe),V._registerOnDestroy(()=>{z._unregisterOnDisabledChange(oe)})}}(z,V)}function oi(z,V){z.forEach(oe=>{oe.registerOnValidatorChange&&oe.registerOnValidatorChange(V)})}function Mi(z,V){z._pendingDirty&&z.markAsDirty(),z.setValue(z._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(z._pendingValue),z._pendingChange=!1}function bt(z,V){const oe=z.indexOf(V);oe>-1&&z.splice(oe,1)}function Cn(z){return"object"==typeof z&&null!==z&&2===Object.keys(z).length&&"value"in z&&"disabled"in z}const J=class extends nn{constructor(V=null,oe,Y){super(function Ke(z){return(ue(z)?z.validators:z)||null}(oe),function te(z,V){return(ue(V)?V.asyncValidators:z)||null}(Y,oe)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(V),this._setUpdateStrategy(oe),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ue(oe)&&(oe.nonNullable||oe.initialValueIsDefault)&&(this.defaultValue=Cn(V)?V.value:V)}setValue(V,oe={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==oe.emitModelToViewChange&&this._onChange.forEach(Y=>Y(this.value,!1!==oe.emitViewToModelChange)),this.updateValueAndValidity(oe)}patchValue(V,oe={}){this.setValue(V,oe)}reset(V=this.defaultValue,oe={}){this._applyFormState(V),this.markAsPristine(oe),this.markAsUntouched(oe),this.setValue(this.value,oe),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){bt(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){bt(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){Cn(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}},Rn={provide:Xn,useExisting:(0,I.Gpc)(()=>He)},We=(()=>Promise.resolve())();let He=(()=>{var z;class V extends Xn{constructor(Y,Te,fn,E,q,C){super(),this._changeDetectorRef=q,this.callSetDisabledState=C,this.control=new J,this._registered=!1,this.name="",this.update=new I.vpe,this._parent=Y,this._setValidators(Te),this._setAsyncValidators(fn),this.valueAccessor=function ts(z,V){if(!V)return null;let oe,Y,Te;return Array.isArray(V),V.forEach(fn=>{fn.constructor===Ve?oe=fn:function Qi(z){return Object.getPrototypeOf(z.constructor)===ze}(fn)?Y=fn:Te=fn}),Te||Y||oe||null}(0,E)}ngOnChanges(Y){if(this._checkForErrors(),!this._registered||"name"in Y){if(this._registered&&(this._checkName(),this.formDirective)){const Te=Y.name.previousValue;this.formDirective.removeControl({name:Te,path:this._getPath(Te)})}this._setUpControl()}"isDisabled"in Y&&this._updateDisabled(Y),function Ys(z,V){if(!z.hasOwnProperty("model"))return!1;const oe=z.model;return!!oe.isFirstChange()||!Object.is(V,oe.currentValue)}(Y,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(Y){this.viewModel=Y,this.update.emit(Y)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Bi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(Y){We.then(()=>{this.control.setValue(Y,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(Y){const Te=Y.isDisabled.currentValue,fn=0!==Te&&(0,I.VuI)(Te);We.then(()=>{fn&&!this.control.disabled?this.control.disable():!fn&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(Y){return this._parent?function Fs(z,V){return[...V.path,z]}(Y,this._parent):[Y]}}return(z=V).\u0275fac=function(Y){return new(Y||z)(I.Y36(vn,9),I.Y36(Xe,10),I.Y36(Fe,10),I.Y36(nt,10),I.Y36(I.sBO,8),I.Y36(ei,8))},z.\u0275dir=I.lG2({type:z,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[I._Bn([Rn]),I.qOj,I.TTD]}),V})(),Kn=(()=>{var z;class V{}return(z=V).\u0275fac=function(Y){return new(Y||z)},z.\u0275mod=I.oAB({type:z}),z.\u0275inj=I.cJS({}),V})();function Tr(z){return"number"==typeof z?z:parseFloat(z)}let js=(()=>{var z;class V{constructor(){this._validator=pe}ngOnChanges(Y){if(this.inputName in Y){const Te=this.normalizeInput(Y[this.inputName].currentValue);this._enabled=this.enabled(Te),this._validator=this._enabled?this.createValidator(Te):pe,this._onChange&&this._onChange()}}validate(Y){return this._validator(Y)}registerOnValidatorChange(Y){this._onChange=Y}enabled(Y){return null!=Y}}return(z=V).\u0275fac=function(Y){return new(Y||z)},z.\u0275dir=I.lG2({type:z,features:[I.TTD]}),V})();const mo={provide:Xe,useExisting:(0,I.Gpc)(()=>kr),multi:!0};let kr=(()=>{var z;class V extends js{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=Y=>Tr(Y),this.createValidator=Y=>function zt(z){return V=>{if(rt(V.value)||rt(z))return null;const oe=parseFloat(V.value);return!isNaN(oe)&&oe>z?{max:{max:z,actual:V.value}}:null}}(Y)}}return(z=V).\u0275fac=function(){let oe;return function(Te){return(oe||(oe=I.n5z(z)))(Te||z)}}(),z.\u0275dir=I.lG2({type:z,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(Y,Te){2&Y&&I.uIk("max",Te._enabled?Te.max:null)},inputs:{max:"max"},features:[I._Bn([mo]),I.qOj]}),V})();const ps={provide:Xe,useExisting:(0,I.Gpc)(()=>xs),multi:!0};let xs=(()=>{var z;class V extends js{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=Y=>Tr(Y),this.createValidator=Y=>function Ue(z){return V=>{if(rt(V.value)||rt(z))return null;const oe=parseFloat(V.value);return!isNaN(oe)&&oe<z?{min:{min:z,actual:V.value}}:null}}(Y)}}return(z=V).\u0275fac=function(){let oe;return function(Te){return(oe||(oe=I.n5z(z)))(Te||z)}}(),z.\u0275dir=I.lG2({type:z,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(Y,Te){2&Y&&I.uIk("min",Te._enabled?Te.min:null)},inputs:{min:"min"},features:[I._Bn([ps]),I.qOj]}),V})(),qo=(()=>{var z;class V{}return(z=V).\u0275fac=function(Y){return new(Y||z)},z.\u0275mod=I.oAB({type:z}),z.\u0275inj=I.cJS({imports:[Kn]}),V})(),Or=(()=>{var z;class V{static withConfig(Y){return{ngModule:V,providers:[{provide:ei,useValue:Y.callSetDisabledState??Is}]}}}return(z=V).\u0275fac=function(Y){return new(Y||z)},z.\u0275mod=I.oAB({type:z}),z.\u0275inj=I.cJS({imports:[qo]}),V})()},6593:(wn,gt,L)=>{"use strict";L.d(gt,{Dx:()=>Xn,b2:()=>dt,q6:()=>Bn});var I=L(5879),v=L(6814);class ne extends v.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class he extends ne{static makeCurrent(){(0,v.HT)(new he)}onAndCancel(te,Ne,ue){return te.addEventListener(Ne,ue),()=>{te.removeEventListener(Ne,ue)}}dispatchEvent(te,Ne){te.dispatchEvent(Ne)}remove(te){te.parentNode&&te.parentNode.removeChild(te)}createElement(te,Ne){return(Ne=Ne||this.getDefaultDocument()).createElement(te)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(te){return te.nodeType===Node.ELEMENT_NODE}isShadowRoot(te){return te instanceof DocumentFragment}getGlobalEventTarget(te,Ne){return"window"===Ne?window:"document"===Ne?te:"body"===Ne?te.body:null}getBaseHref(te){const Ne=function Pe(){return ke=ke||document.querySelector("base"),ke?ke.getAttribute("href"):null}();return null==Ne?null:function qe(re){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",re);const te=Ie.pathname;return"/"===te.charAt(0)?te:`/${te}`}(Ne)}resetBaseElement(){ke=null}getUserAgent(){return window.navigator.userAgent}getCookie(te){return(0,v.Mx)(document.cookie,te)}}let Ie,ke=null,ye=(()=>{var re;class te{build(){return new XMLHttpRequest}}return(re=te).\u0275fac=function(ue){return new(ue||re)},re.\u0275prov=I.Yz7({token:re,factory:re.\u0275fac}),te})();const ge=new I.OlP("EventManagerPlugins");let Me=(()=>{var re;class te{constructor(ue,lt){this._zone=lt,this._eventNameToPlugin=new Map,ue.forEach(St=>{St.manager=this}),this._plugins=ue.slice().reverse()}addEventListener(ue,lt,St){return this._findPluginFor(lt).addEventListener(ue,lt,St)}getZone(){return this._zone}_findPluginFor(ue){let lt=this._eventNameToPlugin.get(ue);if(lt)return lt;if(lt=this._plugins.find(nn=>nn.supports(ue)),!lt)throw new I.vHH(5101,!1);return this._eventNameToPlugin.set(ue,lt),lt}}return(re=te).\u0275fac=function(ue){return new(ue||re)(I.LFG(ge),I.LFG(I.R0b))},re.\u0275prov=I.Yz7({token:re,factory:re.\u0275fac}),te})();class Ge{constructor(te){this._doc=te}}const ze="ng-app-id";let nt=(()=>{var re;class te{constructor(ue,lt,St,nn={}){this.doc=ue,this.appId=lt,this.nonce=St,this.platformId=nn,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,v.PM)(nn),this.resetHostNodes()}addStyles(ue){for(const lt of ue)1===this.changeUsageCount(lt,1)&&this.onStyleAdded(lt)}removeStyles(ue){for(const lt of ue)this.changeUsageCount(lt,-1)<=0&&this.onStyleRemoved(lt)}ngOnDestroy(){const ue=this.styleNodesInDOM;ue&&(ue.forEach(lt=>lt.remove()),ue.clear());for(const lt of this.getAllStyles())this.onStyleRemoved(lt);this.resetHostNodes()}addHost(ue){this.hostNodes.add(ue);for(const lt of this.getAllStyles())this.addStyleToHost(ue,lt)}removeHost(ue){this.hostNodes.delete(ue)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(ue){for(const lt of this.hostNodes)this.addStyleToHost(lt,ue)}onStyleRemoved(ue){const lt=this.styleRef;lt.get(ue)?.elements?.forEach(St=>St.remove()),lt.delete(ue)}collectServerRenderedStyles(){const ue=this.doc.head?.querySelectorAll(`style[${ze}="${this.appId}"]`);if(ue?.length){const lt=new Map;return ue.forEach(St=>{null!=St.textContent&&lt.set(St.textContent,St)}),lt}return null}changeUsageCount(ue,lt){const St=this.styleRef;if(St.has(ue)){const nn=St.get(ue);return nn.usage+=lt,nn.usage}return St.set(ue,{usage:lt,elements:[]}),lt}getStyleElement(ue,lt){const St=this.styleNodesInDOM,nn=St?.get(lt);if(nn?.parentNode===ue)return St.delete(lt),nn.removeAttribute(ze),nn;{const zn=this.doc.createElement("style");return this.nonce&&zn.setAttribute("nonce",this.nonce),zn.textContent=lt,this.platformIsServer&&zn.setAttribute(ze,this.appId),zn}}addStyleToHost(ue,lt){const St=this.getStyleElement(ue,lt);ue.appendChild(St);const nn=this.styleRef,zn=nn.get(lt)?.elements;zn?zn.push(St):nn.set(lt,{elements:[St],usage:1})}resetHostNodes(){const ue=this.hostNodes;ue.clear(),ue.add(this.doc.head)}}return(re=te).\u0275fac=function(ue){return new(ue||re)(I.LFG(v.K0),I.LFG(I.AFp),I.LFG(I.Ojb,8),I.LFG(I.Lbi))},re.\u0275prov=I.Yz7({token:re,factory:re.\u0275fac}),te})();const Ze={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ye=/%COMP%/g,rt=new I.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Fe(re,te){return te.map(Ne=>Ne.replace(Ye,re))}let fe=(()=>{var re;class te{constructor(ue,lt,St,nn,zn,yn,lr,er=null){this.eventManager=ue,this.sharedStylesHost=lt,this.appId=St,this.removeStylesOnCompDestroy=nn,this.doc=zn,this.platformId=yn,this.ngZone=lr,this.nonce=er,this.rendererByCompId=new Map,this.platformIsServer=(0,v.PM)(yn),this.defaultRenderer=new at(ue,zn,lr,this.platformIsServer)}createRenderer(ue,lt){if(!ue||!lt)return this.defaultRenderer;this.platformIsServer&&lt.encapsulation===I.ifc.ShadowDom&&(lt={...lt,encapsulation:I.ifc.Emulated});const St=this.getOrCreateRenderer(ue,lt);return St instanceof de?St.applyToHost(ue):St instanceof mn&&St.applyStyles(),St}getOrCreateRenderer(ue,lt){const St=this.rendererByCompId;let nn=St.get(lt.id);if(!nn){const zn=this.doc,yn=this.ngZone,lr=this.eventManager,er=this.sharedStylesHost,Zr=this.removeStylesOnCompDestroy,ei=this.platformIsServer;switch(lt.encapsulation){case I.ifc.Emulated:nn=new de(lr,er,lt,this.appId,Zr,zn,yn,ei);break;case I.ifc.ShadowDom:return new Xt(lr,er,ue,lt,zn,yn,this.nonce,ei);default:nn=new mn(lr,er,lt,Zr,zn,yn,ei)}St.set(lt.id,nn)}return nn}ngOnDestroy(){this.rendererByCompId.clear()}}return(re=te).\u0275fac=function(ue){return new(ue||re)(I.LFG(Me),I.LFG(nt),I.LFG(I.AFp),I.LFG(rt),I.LFG(v.K0),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(I.Ojb))},re.\u0275prov=I.Yz7({token:re,factory:re.\u0275fac}),te})();class at{constructor(te,Ne,ue,lt){this.eventManager=te,this.doc=Ne,this.ngZone=ue,this.platformIsServer=lt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(te,Ne){return Ne?this.doc.createElementNS(Ze[Ne]||Ne,te):this.doc.createElement(te)}createComment(te){return this.doc.createComment(te)}createText(te){return this.doc.createTextNode(te)}appendChild(te,Ne){(en(te)?te.content:te).appendChild(Ne)}insertBefore(te,Ne,ue){te&&(en(te)?te.content:te).insertBefore(Ne,ue)}removeChild(te,Ne){te&&te.removeChild(Ne)}selectRootElement(te,Ne){let ue="string"==typeof te?this.doc.querySelector(te):te;if(!ue)throw new I.vHH(-5104,!1);return Ne||(ue.textContent=""),ue}parentNode(te){return te.parentNode}nextSibling(te){return te.nextSibling}setAttribute(te,Ne,ue,lt){if(lt){Ne=lt+":"+Ne;const St=Ze[lt];St?te.setAttributeNS(St,Ne,ue):te.setAttribute(Ne,ue)}else te.setAttribute(Ne,ue)}removeAttribute(te,Ne,ue){if(ue){const lt=Ze[ue];lt?te.removeAttributeNS(lt,Ne):te.removeAttribute(`${ue}:${Ne}`)}else te.removeAttribute(Ne)}addClass(te,Ne){te.classList.add(Ne)}removeClass(te,Ne){te.classList.remove(Ne)}setStyle(te,Ne,ue,lt){lt&(I.JOm.DashCase|I.JOm.Important)?te.style.setProperty(Ne,ue,lt&I.JOm.Important?"important":""):te.style[Ne]=ue}removeStyle(te,Ne,ue){ue&I.JOm.DashCase?te.style.removeProperty(Ne):te.style[Ne]=""}setProperty(te,Ne,ue){te[Ne]=ue}setValue(te,Ne){te.nodeValue=Ne}listen(te,Ne,ue){if("string"==typeof te&&!(te=(0,v.q)().getGlobalEventTarget(this.doc,te)))throw new Error(`Unsupported event target ${te} for event ${Ne}`);return this.eventManager.addEventListener(te,Ne,this.decoratePreventDefault(ue))}decoratePreventDefault(te){return Ne=>{if("__ngUnwrap__"===Ne)return te;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>te(Ne)):te(Ne))&&Ne.preventDefault()}}}function en(re){return"TEMPLATE"===re.tagName&&void 0!==re.content}class Xt extends at{constructor(te,Ne,ue,lt,St,nn,zn,yn){super(te,St,nn,yn),this.sharedStylesHost=Ne,this.hostEl=ue,this.shadowRoot=ue.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const lr=Fe(lt.id,lt.styles);for(const er of lr){const Zr=document.createElement("style");zn&&Zr.setAttribute("nonce",zn),Zr.textContent=er,this.shadowRoot.appendChild(Zr)}}nodeOrShadowRoot(te){return te===this.hostEl?this.shadowRoot:te}appendChild(te,Ne){return super.appendChild(this.nodeOrShadowRoot(te),Ne)}insertBefore(te,Ne,ue){return super.insertBefore(this.nodeOrShadowRoot(te),Ne,ue)}removeChild(te,Ne){return super.removeChild(this.nodeOrShadowRoot(te),Ne)}parentNode(te){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(te)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mn extends at{constructor(te,Ne,ue,lt,St,nn,zn,yn){super(te,St,nn,zn),this.sharedStylesHost=Ne,this.removeStylesOnCompDestroy=lt,this.styles=yn?Fe(yn,ue.styles):ue.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class de extends mn{constructor(te,Ne,ue,lt,St,nn,zn,yn){const lr=lt+"-"+ue.id;super(te,Ne,ue,St,nn,zn,yn,lr),this.contentAttr=function be(re){return"_ngcontent-%COMP%".replace(Ye,re)}(lr),this.hostAttr=function Xe(re){return"_nghost-%COMP%".replace(Ye,re)}(lr)}applyToHost(te){this.applyStyles(),this.setAttribute(te,this.hostAttr,"")}createElement(te,Ne){const ue=super.createElement(te,Ne);return super.setAttribute(ue,this.contentAttr,""),ue}}let gn=(()=>{var re;class te extends Ge{constructor(ue){super(ue)}supports(ue){return!0}addEventListener(ue,lt,St){return ue.addEventListener(lt,St,!1),()=>this.removeEventListener(ue,lt,St)}removeEventListener(ue,lt,St){return ue.removeEventListener(lt,St)}}return(re=te).\u0275fac=function(ue){return new(ue||re)(I.LFG(v.K0))},re.\u0275prov=I.Yz7({token:re,factory:re.\u0275fac}),te})();const _t=["alt","control","meta","shift"],pe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Se={alt:re=>re.altKey,control:re=>re.ctrlKey,meta:re=>re.metaKey,shift:re=>re.shiftKey};let $e=(()=>{var re;class te extends Ge{constructor(ue){super(ue)}supports(ue){return null!=te.parseEventName(ue)}addEventListener(ue,lt,St){const nn=te.parseEventName(lt),zn=te.eventCallback(nn.fullKey,St,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,v.q)().onAndCancel(ue,nn.domEventName,zn))}static parseEventName(ue){const lt=ue.toLowerCase().split("."),St=lt.shift();if(0===lt.length||"keydown"!==St&&"keyup"!==St)return null;const nn=te._normalizeKey(lt.pop());let zn="",yn=lt.indexOf("code");if(yn>-1&&(lt.splice(yn,1),zn="code."),_t.forEach(er=>{const Zr=lt.indexOf(er);Zr>-1&&(lt.splice(Zr,1),zn+=er+".")}),zn+=nn,0!=lt.length||0===nn.length)return null;const lr={};return lr.domEventName=St,lr.fullKey=zn,lr}static matchEventFullKeyCode(ue,lt){let St=pe[ue.key]||ue.key,nn="";return lt.indexOf("code.")>-1&&(St=ue.code,nn="code."),!(null==St||!St)&&(St=St.toLowerCase()," "===St?St="space":"."===St&&(St="dot"),_t.forEach(zn=>{zn!==St&&(0,Se[zn])(ue)&&(nn+=zn+".")}),nn+=St,nn===lt)}static eventCallback(ue,lt,St){return nn=>{te.matchEventFullKeyCode(nn,ue)&&St.runGuarded(()=>lt(nn))}}static _normalizeKey(ue){return"esc"===ue?"escape":ue}}return(re=te).\u0275fac=function(ue){return new(ue||re)(I.LFG(v.K0))},re.\u0275prov=I.Yz7({token:re,factory:re.\u0275fac}),te})();const Bn=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:v.bD},{provide:I.g9A,useValue:function Ft(){he.makeCurrent()},multi:!0},{provide:v.K0,useFactory:function st(){return(0,I.RDi)(document),document},deps:[]}]),tn=new I.OlP(""),wt=[{provide:I.rWj,useClass:class Je{addToWindow(te){I.dqk.getAngularTestability=(ue,lt=!0)=>{const St=te.findTestabilityInTree(ue,lt);if(null==St)throw new I.vHH(5103,!1);return St},I.dqk.getAllAngularTestabilities=()=>te.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>te.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(ue=>{const lt=I.dqk.getAllAngularTestabilities();let St=lt.length,nn=!1;const zn=function(yn){nn=nn||yn,St--,0==St&&ue(nn)};lt.forEach(yn=>{yn.whenStable(zn)})})}findTestabilityInTree(te,Ne,ue){return null==Ne?null:te.getTestability(Ne)??(ue?(0,v.q)().isShadowRoot(Ne)?this.findTestabilityInTree(te,Ne.host,!0):this.findTestabilityInTree(te,Ne.parentElement,!0):null)}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],Rt=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function Qt(){return new I.qLn},deps:[]},{provide:ge,useClass:gn,multi:!0,deps:[v.K0,I.R0b,I.Lbi]},{provide:ge,useClass:$e,multi:!0,deps:[v.K0]},fe,nt,Me,{provide:I.FYo,useExisting:fe},{provide:v.JF,useClass:ye,deps:[]},[]];let dt=(()=>{var re;class te{constructor(ue){}static withServerTransition(ue){return{ngModule:te,providers:[{provide:I.AFp,useValue:ue.appId}]}}}return(re=te).\u0275fac=function(ue){return new(ue||re)(I.LFG(tn,12))},re.\u0275mod=I.oAB({type:re}),re.\u0275inj=I.cJS({providers:[...Rt,...wt],imports:[v.ez,I.hGG]}),te})(),Xn=(()=>{var re;class te{constructor(ue){this._doc=ue}getTitle(){return this._doc.title}setTitle(ue){this._doc.title=ue||""}}return(re=te).\u0275fac=function(ue){return new(ue||re)(I.LFG(v.K0))},re.\u0275prov=I.Yz7({token:re,factory:function(ue){let lt=null;return lt=ue?new ue:function vn(){return new Xn((0,I.LFG)(v.K0))}(),lt},providedIn:"root"}),te})();typeof window<"u"&&window},4934:(wn,gt,L)=>{"use strict";L.d(gt,{gz:()=>Er,y6:()=>ut,OD:()=>ts,eC:()=>st,wm:()=>Vo,wN:()=>Sr,F0:()=>Nr,rH:()=>uo,Bz:()=>Vi,Hx:()=>or});var I=L(5879),v=L(5592),ne=L(4674),ke=L(2459),Pe=L(2096),Ie=L(5619),qe=L(2572),Je=L(6973),ye=L(5211),ge=L(4829);function Me(T){return new v.y(R=>{(0,ge.Xf)(T()).subscribe(R)})}var Ge=L(8407);function ze(T,R){const N=(0,ne.m)(T)?T:()=>T,x=U=>U.error(N());return new v.y(R?U=>R.schedule(x,0,U):x)}var nt=L(6232),Ze=L(7394),Ye=L(9360),De=L(8251);function Ee(){return(0,Ye.e)((T,R)=>{let N=null;T._refCount++;const x=(0,De.x)(R,void 0,void 0,void 0,()=>{if(!T||T._refCount<=0||0<--T._refCount)return void(N=null);const U=T._connection,se=N;N=null,U&&(!se||U===se)&&U.unsubscribe(),R.unsubscribe()});T.subscribe(x),x.closed||(N=T.connect())})}class yt extends v.y{constructor(R,N){super(),this.source=R,this.subjectFactory=N,this._subject=null,this._refCount=0,this._connection=null,(0,Ye.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new Ze.w0;const N=this.getSubject();R.add(this.source.subscribe((0,De.x)(N,void 0,()=>{this._teardown(),N.complete()},x=>{this._teardown(),N.error(x)},()=>this._teardown()))),R.closed&&(this._connection=null,R=Ze.w0.EMPTY)}return R}refCount(){return Ee()(this)}}var Ve=L(8645),rt=L(6814),be=L(7398),Xe=L(4664),Fe=L(8180),fe=L(7921),at=L(2181),Ue=L(1631),zt=L(1374);function en(T,R){return(0,ne.m)(R)?(0,Ue.z)(T,R,1):(0,Ue.z)(T,1)}var Xt=L(9397);function mn(T){return(0,Ye.e)((R,N)=>{let se,x=null,U=!1;x=R.subscribe((0,De.x)(N,void 0,void 0,Ce=>{se=(0,ge.Xf)(T(Ce,mn(T)(R))),x?(x.unsubscribe(),x=null,se.subscribe(N)):U=!0})),U&&(x.unsubscribe(),x=null,se.subscribe(N))})}var de=L(6699),gn=L(3572);function _t(T){return T<=0?()=>nt.E:(0,Ye.e)((R,N)=>{let x=[];R.subscribe((0,De.x)(N,U=>{x.push(U),T<x.length&&x.shift()},()=>{for(const U of x)N.next(U);N.complete()},void 0,()=>{x=null}))})}var pe=L(3026),Se=L(2737);function pt(T){return(0,Ye.e)((R,N)=>{try{R.subscribe(N)}finally{N.add(T)}})}var ht=L(2420),Ft=L(7537),Qt=L(6593);const st="primary",Vn=Symbol("RouteTitle");class Bn{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const N=this.params[R];return Array.isArray(N)?N[0]:N}return null}getAll(R){if(this.has(R)){const N=this.params[R];return Array.isArray(N)?N:[N]}return[]}get keys(){return Object.keys(this.params)}}function tn(T){return new Bn(T)}function wt(T,R,N){const x=N.path.split("/");if(x.length>T.length||"full"===N.pathMatch&&(R.hasChildren()||x.length<T.length))return null;const U={};for(let se=0;se<x.length;se++){const Ce=x[se],Be=T[se];if(Ce.startsWith(":"))U[Ce.substring(1)]=Be;else if(Ce!==Be.path)return null}return{consumed:T.slice(0,x.length),posParams:U}}function dt(T,R){const N=T?Object.keys(T):void 0,x=R?Object.keys(R):void 0;if(!N||!x||N.length!=x.length)return!1;let U;for(let se=0;se<N.length;se++)if(U=N[se],!Wt(T[U],R[U]))return!1;return!0}function Wt(T,R){if(Array.isArray(T)&&Array.isArray(R)){if(T.length!==R.length)return!1;const N=[...T].sort(),x=[...R].sort();return N.every((U,se)=>x[se]===U)}return T===R}function Tn(T){return T.length>0?T[T.length-1]:null}function En(T){return function he(T){return!!T&&(T instanceof v.y||(0,ne.m)(T.lift)&&(0,ne.m)(T.subscribe))}(T)?T:(0,I.QGY)(T)?(0,ke.D)(Promise.resolve(T)):(0,Pe.of)(T)}const vn={exact:function Sn(T,R,N){if(!Cr(T.segments,R.segments)||!Lr(T.segments,R.segments,N)||T.numberOfChildren!==R.numberOfChildren)return!1;for(const x in R.children)if(!T.children[x]||!Sn(T.children[x],R.children[x],N))return!1;return!0},subset:Un},Xn={exact:function wr(T,R){return dt(T,R)},subset:function Pn(T,R){return Object.keys(R).length<=Object.keys(T).length&&Object.keys(R).every(N=>Wt(T[N],R[N]))},ignored:()=>!0};function Jn(T,R,N){return vn[N.paths](T.root,R.root,N.matrixParams)&&Xn[N.queryParams](T.queryParams,R.queryParams)&&!("exact"===N.fragment&&T.fragment!==R.fragment)}function Un(T,R,N){return pr(T,R,R.segments,N)}function pr(T,R,N,x){if(T.segments.length>N.length){const U=T.segments.slice(0,N.length);return!(!Cr(U,N)||R.hasChildren()||!Lr(U,N,x))}if(T.segments.length===N.length){if(!Cr(T.segments,N)||!Lr(T.segments,N,x))return!1;for(const U in R.children)if(!T.children[U]||!Un(T.children[U],R.children[U],x))return!1;return!0}{const U=N.slice(0,T.segments.length),se=N.slice(T.segments.length);return!!(Cr(T.segments,U)&&Lr(T.segments,U,x)&&T.children[st])&&pr(T.children[st],R,se,x)}}function Lr(T,R,N){return R.every((x,U)=>Xn[N](T[U].parameters,x.parameters))}class Br{constructor(R=new Kt([],{}),N={},x=null){this.root=R,this.queryParams=N,this.fragment=x}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tn(this.queryParams)),this._queryParamMap}toString(){return Zi.serialize(this)}}class Kt{constructor(R,N){this.segments=R,this.children=N,this.parent=null,Object.values(N).forEach(x=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Di(this)}}class hr{constructor(R,N){this.path=R,this.parameters=N}get parameterMap(){return this._parameterMap||(this._parameterMap=tn(this.parameters)),this._parameterMap}toString(){return Mn(this)}}function Cr(T,R){return T.length===R.length&&T.every((N,x)=>N.path===R[x].path)}let or=(()=>{var T;class R{}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:function(){return new bi},providedIn:"root"}),R})();class bi{parse(R){const N=new yn(R);return new Br(N.parseRootSegment(),N.parseQueryParams(),N.parseFragment())}serialize(R){const N=`/${_i(R.root,!0)}`,x=function Ke(T){const R=Object.keys(T).map(N=>{const x=T[N];return Array.isArray(x)?x.map(U=>`${jt(N)}=${jt(U)}`).join("&"):`${jt(N)}=${jt(x)}`}).filter(N=>!!N);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${N}${x}${"string"==typeof R.fragment?`#${function ot(T){return encodeURI(T)}(R.fragment)}`:""}`}}const Zi=new bi;function Di(T){return T.segments.map(R=>Mn(R)).join("/")}function _i(T,R){if(!T.hasChildren())return Di(T);if(R){const N=T.children[st]?_i(T.children[st],!1):"",x=[];return Object.entries(T.children).forEach(([U,se])=>{U!==st&&x.push(`${U}:${_i(se,!1)}`)}),x.length>0?`${N}(${x.join("//")})`:N}{const N=function _s(T,R){let N=[];return Object.entries(T.children).forEach(([x,U])=>{x===st&&(N=N.concat(R(U,x)))}),Object.entries(T.children).forEach(([x,U])=>{x!==st&&(N=N.concat(R(U,x)))}),N}(T,(x,U)=>U===st?[_i(T.children[st],!1)]:[`${U}:${_i(x,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[st]?`${Di(T)}/${N[0]}`:`${Di(T)}/(${N.join("//")})`}}function Ii(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jt(T){return Ii(T).replace(/%3B/gi,";")}function Pt(T){return Ii(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sn(T){return decodeURIComponent(T)}function In(T){return sn(T.replace(/\+/g,"%20"))}function Mn(T){return`${Pt(T.path)}${function br(T){return Object.keys(T).map(R=>`;${Pt(R)}=${Pt(T[R])}`).join("")}(T.parameters)}`}const re=/^[^\/()?;#]+/;function te(T){const R=T.match(re);return R?R[0]:""}const Ne=/^[^\/()?;=#]+/,lt=/^[^=?&#]+/,nn=/^[^&#]+/;class yn{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let N={};this.peekStartsWith("/(")&&(this.capture("/"),N=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(R.length>0||Object.keys(N).length>0)&&(x[st]=new Kt(R,N)),x}parseSegment(){const R=te(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new I.vHH(4009,!1);return this.capture(R),new hr(sn(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const N=function ue(T){const R=T.match(Ne);return R?R[0]:""}(this.remaining);if(!N)return;this.capture(N);let x="";if(this.consumeOptional("=")){const U=te(this.remaining);U&&(x=U,this.capture(x))}R[sn(N)]=sn(x)}parseQueryParam(R){const N=function St(T){const R=T.match(lt);return R?R[0]:""}(this.remaining);if(!N)return;this.capture(N);let x="";if(this.consumeOptional("=")){const Ce=function zn(T){const R=T.match(nn);return R?R[0]:""}(this.remaining);Ce&&(x=Ce,this.capture(x))}const U=In(N),se=In(x);if(R.hasOwnProperty(U)){let Ce=R[U];Array.isArray(Ce)||(Ce=[Ce],R[U]=Ce),Ce.push(se)}else R[U]=se}parseParens(R){const N={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=te(this.remaining),U=this.remaining[x.length];if("/"!==U&&")"!==U&&";"!==U)throw new I.vHH(4010,!1);let se;x.indexOf(":")>-1?(se=x.slice(0,x.indexOf(":")),this.capture(se),this.capture(":")):R&&(se=st);const Ce=this.parseChildren();N[se]=1===Object.keys(Ce).length?Ce[st]:new Kt([],Ce),this.consumeOptional("//")}return N}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new I.vHH(4011,!1)}}function lr(T){return T.segments.length>0?new Kt([],{[st]:T}):T}function er(T){const R={};for(const x of Object.keys(T.children)){const se=er(T.children[x]);if(x===st&&0===se.segments.length&&se.hasChildren())for(const[Ce,Be]of Object.entries(se.children))R[Ce]=Be;else(se.segments.length>0||se.hasChildren())&&(R[x]=se)}return function Zr(T){if(1===T.numberOfChildren&&T.children[st]){const R=T.children[st];return new Kt(T.segments.concat(R.segments),R.children)}return T}(new Kt(T.segments,R))}function ei(T){return T instanceof Br}function Fs(T){let R;const U=lr(function N(se){const Ce={};for(const hn of se.children){const Lt=N(hn);Ce[hn.outlet]=Lt}const Be=new Kt(se.url,Ce);return se===T&&(R=Be),Be}(T.root));return R??U}function Bi(T,R,N,x){let U=T;for(;U.parent;)U=U.parent;if(0===R.length)return Pi(U,U,U,N,x);const se=function qr(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Hr(!0,0,T);let R=0,N=!1;const x=T.reduce((U,se,Ce)=>{if("object"==typeof se&&null!=se){if(se.outlets){const Be={};return Object.entries(se.outlets).forEach(([hn,Lt])=>{Be[hn]="string"==typeof Lt?Lt.split("/"):Lt}),[...U,{outlets:Be}]}if(se.segmentPath)return[...U,se.segmentPath]}return"string"!=typeof se?[...U,se]:0===Ce?(se.split("/").forEach((Be,hn)=>{0==hn&&"."===Be||(0==hn&&""===Be?N=!0:".."===Be?R++:""!=Be&&U.push(Be))}),U):[...U,se]},[]);return new Hr(N,R,x)}(R);if(se.toRoot())return Pi(U,U,new Kt([],{}),N,x);const Ce=function Mi(T,R,N){if(T.isAbsolute)return new Ji(R,!0,0);if(!N)return new Ji(R,!1,NaN);if(null===N.parent)return new Ji(N,!0,0);const x=zi(T.commands[0])?0:1;return function ti(T,R,N){let x=T,U=R,se=N;for(;se>U;){if(se-=U,x=x.parent,!x)throw new I.vHH(4005,!1);U=x.segments.length}return new Ji(x,!1,U-se)}(N,N.segments.length-1+x,T.numberOfDoubleDots)}(se,U,T),Be=Ce.processChildren?Ni(Ce.segmentGroup,Ce.index,se.commands):vi(Ce.segmentGroup,Ce.index,se.commands);return Pi(U,Ce.segmentGroup,Be,N,x)}function zi(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function oi(T){return"object"==typeof T&&null!=T&&T.outlets}function Pi(T,R,N,x,U){let Ce,se={};x&&Object.entries(x).forEach(([hn,Lt])=>{se[hn]=Array.isArray(Lt)?Lt.map(yr=>`${yr}`):`${Lt}`}),Ce=T===R?N:ur(T,R,N);const Be=lr(er(Ce));return new Br(Be,se,U)}function ur(T,R,N){const x={};return Object.entries(T.children).forEach(([U,se])=>{x[U]=se===R?N:ur(se,R,N)}),new Kt(T.segments,x)}class Hr{constructor(R,N,x){if(this.isAbsolute=R,this.numberOfDoubleDots=N,this.commands=x,R&&x.length>0&&zi(x[0]))throw new I.vHH(4003,!1);const U=x.find(oi);if(U&&U!==Tn(x))throw new I.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ji{constructor(R,N,x){this.segmentGroup=R,this.processChildren=N,this.index=x}}function vi(T,R,N){if(T||(T=new Kt([],{})),0===T.segments.length&&T.hasChildren())return Ni(T,R,N);const x=function es(T,R,N){let x=0,U=R;const se={match:!1,pathIndex:0,commandIndex:0};for(;U<T.segments.length;){if(x>=N.length)return se;const Ce=T.segments[U],Be=N[x];if(oi(Be))break;const hn=`${Be}`,Lt=x<N.length-1?N[x+1]:null;if(U>0&&void 0===hn)break;if(hn&&Lt&&"object"==typeof Lt&&void 0===Lt.outlets){if(!Ys(hn,Lt,Ce))return se;x+=2}else{if(!Ys(hn,{},Ce))return se;x++}U++}return{match:!0,pathIndex:U,commandIndex:x}}(T,R,N),U=N.slice(x.commandIndex);if(x.match&&x.pathIndex<T.segments.length){const se=new Kt(T.segments.slice(0,x.pathIndex),{});return se.children[st]=new Kt(T.segments.slice(x.pathIndex),T.children),Ni(se,0,U)}return x.match&&0===U.length?new Kt(T.segments,{}):x.match&&!T.hasChildren()?Kr(T,R,N):x.match?Ni(T,0,U):Kr(T,R,N)}function Ni(T,R,N){if(0===N.length)return new Kt(T.segments,{});{const x=function on(T){return oi(T[0])?T[0].outlets:{[st]:T}}(N),U={};if(Object.keys(x).some(se=>se!==st)&&T.children[st]&&1===T.numberOfChildren&&0===T.children[st].segments.length){const se=Ni(T.children[st],R,N);return new Kt(T.segments,se.children)}return Object.entries(x).forEach(([se,Ce])=>{"string"==typeof Ce&&(Ce=[Ce]),null!==Ce&&(U[se]=vi(T.children[se],R,Ce))}),Object.entries(T.children).forEach(([se,Ce])=>{void 0===x[se]&&(U[se]=Ce)}),new Kt(T.segments,U)}}function Kr(T,R,N){const x=T.segments.slice(0,R);let U=0;for(;U<N.length;){const se=N[U];if(oi(se)){const hn=$r(se.outlets);return new Kt(x,hn)}if(0===U&&zi(N[0])){x.push(new hr(T.segments[R].path,Bs(N[0]))),U++;continue}const Ce=oi(se)?se.outlets[st]:`${se}`,Be=U<N.length-1?N[U+1]:null;Ce&&Be&&zi(Be)?(x.push(new hr(Ce,Bs(Be))),U+=2):(x.push(new hr(Ce,{})),U++)}return new Kt(x,{})}function $r(T){const R={};return Object.entries(T).forEach(([N,x])=>{"string"==typeof x&&(x=[x]),null!==x&&(R[N]=Kr(new Kt([],{}),0,x))}),R}function Bs(T){const R={};return Object.entries(T).forEach(([N,x])=>R[N]=`${x}`),R}function Ys(T,R,N){return T==N.path&&dt(R,N.parameters)}const Qi="imperative";class Ei{constructor(R,N){this.id=R,this.url=N}}class ts extends Ei{constructor(R,N,x="imperative",U=null){super(R,N),this.type=0,this.navigationTrigger=x,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gi extends Ei{constructor(R,N,x){super(R,N),this.urlAfterRedirects=x,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $s extends Ei{constructor(R,N,x,U){super(R,N),this.reason=x,this.code=U,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ir extends Ei{constructor(R,N,x,U){super(R,N),this.reason=x,this.code=U,this.type=16}}class Dr extends Ei{constructor(R,N,x,U){super(R,N),this.error=x,this.target=U,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class as extends Ei{constructor(R,N,x,U){super(R,N),this.urlAfterRedirects=x,this.state=U,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bt extends Ei{constructor(R,N,x,U){super(R,N),this.urlAfterRedirects=x,this.state=U,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cn extends Ei{constructor(R,N,x,U,se){super(R,N),this.urlAfterRedirects=x,this.state=U,this.shouldActivate=se,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class J extends Ei{constructor(R,N,x,U){super(R,N),this.urlAfterRedirects=x,this.state=U,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _e extends Ei{constructor(R,N,x,U){super(R,N),this.urlAfterRedirects=x,this.state=U,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class it{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ct{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class At{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class It{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qt{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zt{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ut{constructor(R,N,x){this.routerEvent=R,this.position=N,this.anchor=x,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ln{}class Rn{constructor(R){this.url=R}}class He{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ut,this.attachRef=null}}let ut=(()=>{var T;class R{constructor(){this.contexts=new Map}onChildOutletCreated(x,U){const se=this.getOrCreateContext(x);se.outlet=U,this.contexts.set(x,se)}onChildOutletDestroyed(x){const U=this.getContext(x);U&&(U.outlet=null,U.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let U=this.getContext(x);return U||(U=new He,this.contexts.set(x,U)),U}getContext(x){return this.contexts.get(x)||null}}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),R})();class kt{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const N=this.pathFromRoot(R);return N.length>1?N[N.length-2]:null}children(R){const N=Dt(R,this._root);return N?N.children.map(x=>x.value):[]}firstChild(R){const N=Dt(R,this._root);return N&&N.children.length>0?N.children[0].value:null}siblings(R){const N=bn(R,this._root);return N.length<2?[]:N[N.length-2].children.map(U=>U.value).filter(U=>U!==R)}pathFromRoot(R){return bn(R,this._root).map(N=>N.value)}}function Dt(T,R){if(T===R.value)return R;for(const N of R.children){const x=Dt(T,N);if(x)return x}return null}function bn(T,R){if(T===R.value)return[R];for(const N of R.children){const x=bn(T,N);if(x.length)return x.unshift(R),x}return[]}class qn{constructor(R,N){this.value=R,this.children=N}toString(){return`TreeNode(${this.value})`}}function Kn(T){const R={};return T&&T.children.forEach(N=>R[N.value.outlet]=N),R}class Qn extends kt{constructor(R,N){super(R),this.snapshot=N,$n(this,R)}toString(){return this.snapshot.toString()}}function Ln(T,R){const N=function wi(T,R){const Ce=new zr([],{},{},"",{},st,R,null,{});return new An("",new qn(Ce,[]))}(0,R),x=new Ie.X([new hr("",{})]),U=new Ie.X({}),se=new Ie.X({}),Ce=new Ie.X({}),Be=new Ie.X(""),hn=new Er(x,U,Ce,Be,se,st,R,N.root);return hn.snapshot=N.root,new Qn(new qn(hn,[]),N)}class Er{constructor(R,N,x,U,se,Ce,Be,hn){this.urlSubject=R,this.paramsSubject=N,this.queryParamsSubject=x,this.fragmentSubject=U,this.dataSubject=se,this.outlet=Ce,this.component=Be,this._futureSnapshot=hn,this.title=this.dataSubject?.pipe((0,be.U)(Lt=>Lt[Vn]))??(0,Pe.of)(void 0),this.url=R,this.params=N,this.queryParams=x,this.fragment=U,this.data=se}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,be.U)(R=>tn(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,be.U)(R=>tn(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _o(T,R="emptyOnly"){const N=T.pathFromRoot;let x=0;if("always"!==R)for(x=N.length-1;x>=1;){const U=N[x],se=N[x-1];if(U.routeConfig&&""===U.routeConfig.path)x--;else{if(se.component)break;x--}}return function ki(T){return T.reduce((R,N)=>({params:{...R.params,...N.params},data:{...R.data,...N.data},resolve:{...N.data,...R.resolve,...N.routeConfig?.data,...N._resolvedData}}),{params:{},data:{},resolve:{}})}(N.slice(x))}class zr{get title(){return this.data?.[Vn]}constructor(R,N,x,U,se,Ce,Be,hn,Lt){this.url=R,this.params=N,this.queryParams=x,this.fragment=U,this.data=se,this.outlet=Ce,this.component=Be,this.routeConfig=hn,this._resolve=Lt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=tn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class An extends kt{constructor(R,N){super(N),this.url=R,$n(this,N)}toString(){return Gn(this._root)}}function $n(T,R){R.value._routerState=T,R.children.forEach(N=>$n(T,N))}function Gn(T){const R=T.children.length>0?` { ${T.children.map(Gn).join(", ")} } `:"";return`${T.value}${R}`}function Vr(T){if(T.snapshot){const R=T.snapshot,N=T._futureSnapshot;T.snapshot=N,dt(R.queryParams,N.queryParams)||T.queryParamsSubject.next(N.queryParams),R.fragment!==N.fragment&&T.fragmentSubject.next(N.fragment),dt(R.params,N.params)||T.paramsSubject.next(N.params),function Rt(T,R){if(T.length!==R.length)return!1;for(let N=0;N<T.length;++N)if(!dt(T[N],R[N]))return!1;return!0}(R.url,N.url)||T.urlSubject.next(N.url),dt(R.data,N.data)||T.dataSubject.next(N.data)}else T.snapshot=T._futureSnapshot,T.dataSubject.next(T._futureSnapshot.data)}function Vs(T,R){const N=dt(T.params,R.params)&&function an(T,R){return Cr(T,R)&&T.every((N,x)=>dt(N.parameters,R[x].parameters))}(T.url,R.url);return N&&!(!T.parent!=!R.parent)&&(!T.parent||Vs(T.parent,R.parent))}let Ti=(()=>{var T;class R{constructor(){this.activated=null,this._activatedRoute=null,this.name=st,this.activateEvents=new I.vpe,this.deactivateEvents=new I.vpe,this.attachEvents=new I.vpe,this.detachEvents=new I.vpe,this.parentContexts=(0,I.f3M)(ut),this.location=(0,I.f3M)(I.s_b),this.changeDetector=(0,I.f3M)(I.sBO),this.environmentInjector=(0,I.f3M)(I.lqb),this.inputBinder=(0,I.f3M)(Ci,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(x){if(x.name){const{firstChange:U,previousValue:se}=x.name;if(U)return;this.isTrackedInParentContexts(se)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(se)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(x){return this.parentContexts.getContext(x)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const x=this.parentContexts.getContext(this.name);x?.route&&(x.attachRef?this.attach(x.attachRef,x.route):this.activateWith(x.route,x.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I.vHH(4012,!1);this.location.detach();const x=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(x.instance),x}attach(x,U){this.activated=x,this._activatedRoute=U,this.location.insert(x.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(x.instance)}deactivate(){if(this.activated){const x=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(x)}}activateWith(x,U){if(this.isActivated)throw new I.vHH(4013,!1);this._activatedRoute=x;const se=this.location,Be=x.snapshot.component,hn=this.parentContexts.getOrCreateContext(this.name).children,Lt=new ls(x,hn,se.injector);this.activated=se.createComponent(Be,{index:se.length,injector:Lt,environmentInjector:U??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275dir=I.lG2({type:T,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[I.TTD]}),R})();class ls{constructor(R,N,x){this.route=R,this.childContexts=N,this.parent=x}get(R,N){return R===Er?this.route:R===ut?this.childContexts:this.parent.get(R,N)}}const Ci=new I.OlP("");let Es=(()=>{var T;class R{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(x){this.unsubscribeFromRouteData(x),this.subscribeToRouteData(x)}unsubscribeFromRouteData(x){this.outletDataSubscriptions.get(x)?.unsubscribe(),this.outletDataSubscriptions.delete(x)}subscribeToRouteData(x){const{activatedRoute:U}=x,se=(0,qe.a)([U.queryParams,U.params,U.data]).pipe((0,Xe.w)(([Ce,Be,hn],Lt)=>(hn={...Ce,...Be,...hn},0===Lt?(0,Pe.of)(hn):Promise.resolve(hn)))).subscribe(Ce=>{if(!x.isActivated||!x.activatedComponentRef||x.activatedRoute!==U||null===U.component)return void this.unsubscribeFromRouteData(x);const Be=(0,I.qFp)(U.component);if(Be)for(const{templateName:hn}of Be.inputs)x.activatedComponentRef.setInput(hn,Ce[hn]);else this.unsubscribeFromRouteData(x)});this.outletDataSubscriptions.set(x,se)}}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac}),R})();function ar(T,R,N){if(N&&T.shouldReuseRoute(R.value,N.value.snapshot)){const x=N.value;x._futureSnapshot=R.value;const U=function xi(T,R,N){return R.children.map(x=>{for(const U of N.children)if(T.shouldReuseRoute(x.value,U.value.snapshot))return ar(T,x,U);return ar(T,x)})}(T,R,N);return new qn(x,U)}{if(T.shouldAttach(R.value)){const se=T.retrieve(R.value);if(null!==se){const Ce=se.route;return Ce.value._futureSnapshot=R.value,Ce.children=R.children.map(Be=>ar(T,Be)),Ce}}const x=function io(T){return new Er(new Ie.X(T.url),new Ie.X(T.params),new Ie.X(T.queryParams),new Ie.X(T.fragment),new Ie.X(T.data),T.outlet,T.component,T)}(R.value),U=R.children.map(se=>ar(T,se));return new qn(x,U)}}const Wi="ngNavigationCancelingError";function Fi(T,R){const{redirectTo:N,navigationBehaviorOptions:x}=ei(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,U=ni(!1,0,R);return U.url=N,U.navigationBehaviorOptions=x,U}function ni(T,R,N){const x=new Error("NavigationCancelingError: "+(T||""));return x[Wi]=!0,x.cancellationCode=R,N&&(x.url=N),x}function fs(T){return T&&T[Wi]}let Us=(()=>{var T;class R{}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275cmp=I.Xpm({type:T,selectors:[["ng-component"]],standalone:!0,features:[I.jDz],decls:1,vars:0,template:function(x,U){1&x&&I._UZ(0,"router-outlet")},dependencies:[Ti],encapsulation:2}),R})();function cs(T){const R=T.children&&T.children.map(cs),N=R?{...T,children:R}:{...T};return!N.component&&!N.loadComponent&&(R||N.loadChildren)&&N.outlet&&N.outlet!==st&&(N.component=Us),N}function ri(T){return T.outlet||st}function Hs(T){if(!T)return null;if(T.routeConfig?._injector)return T.routeConfig._injector;for(let R=T.parent;R;R=R.parent){const N=R.routeConfig;if(N?._loadedInjector)return N._loadedInjector;if(N?._injector)return N._injector}return null}class us{constructor(R,N,x,U,se){this.routeReuseStrategy=R,this.futureState=N,this.currState=x,this.forwardEvent=U,this.inputBindingEnabled=se}activate(R){const N=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(N,x,R),Vr(this.futureState.root),this.activateChildRoutes(N,x,R)}deactivateChildRoutes(R,N,x){const U=Kn(N);R.children.forEach(se=>{const Ce=se.value.outlet;this.deactivateRoutes(se,U[Ce],x),delete U[Ce]}),Object.values(U).forEach(se=>{this.deactivateRouteAndItsChildren(se,x)})}deactivateRoutes(R,N,x){const U=R.value,se=N?N.value:null;if(U===se)if(U.component){const Ce=x.getContext(U.outlet);Ce&&this.deactivateChildRoutes(R,N,Ce.children)}else this.deactivateChildRoutes(R,N,x);else se&&this.deactivateRouteAndItsChildren(N,x)}deactivateRouteAndItsChildren(R,N){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,N):this.deactivateRouteAndOutlet(R,N)}detachAndStoreRouteSubtree(R,N){const x=N.getContext(R.value.outlet),U=x&&R.value.component?x.children:N,se=Kn(R);for(const Ce of Object.keys(se))this.deactivateRouteAndItsChildren(se[Ce],U);if(x&&x.outlet){const Ce=x.outlet.detach(),Be=x.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:Ce,route:R,contexts:Be})}}deactivateRouteAndOutlet(R,N){const x=N.getContext(R.value.outlet),U=x&&R.value.component?x.children:N,se=Kn(R);for(const Ce of Object.keys(se))this.deactivateRouteAndItsChildren(se[Ce],U);x&&(x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated()),x.attachRef=null,x.route=null)}activateChildRoutes(R,N,x){const U=Kn(N);R.children.forEach(se=>{this.activateRoutes(se,U[se.value.outlet],x),this.forwardEvent(new Zt(se.value.snapshot))}),R.children.length&&this.forwardEvent(new It(R.value.snapshot))}activateRoutes(R,N,x){const U=R.value,se=N?N.value:null;if(Vr(U),U===se)if(U.component){const Ce=x.getOrCreateContext(U.outlet);this.activateChildRoutes(R,N,Ce.children)}else this.activateChildRoutes(R,N,x);else if(U.component){const Ce=x.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const Be=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),Ce.children.onOutletReAttached(Be.contexts),Ce.attachRef=Be.componentRef,Ce.route=Be.route.value,Ce.outlet&&Ce.outlet.attach(Be.componentRef,Be.route.value),Vr(Be.route.value),this.activateChildRoutes(R,null,Ce.children)}else{const Be=Hs(U.snapshot);Ce.attachRef=null,Ce.route=U,Ce.injector=Be,Ce.outlet&&Ce.outlet.activateWith(U,Ce.injector),this.activateChildRoutes(R,null,Ce.children)}}else this.activateChildRoutes(R,null,x)}}class ds{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Io{constructor(R,N){this.component=R,this.route=N}}function ws(T,R,N){const x=T._root;return so(x,R?R._root:null,N,[x.value])}function rs(T,R){const N=Symbol(),x=R.get(T,N);return x===N?"function"!=typeof T||(0,I.Z0I)(T)?R.get(T):T:x}function so(T,R,N,x,U={canDeactivateChecks:[],canActivateChecks:[]}){const se=Kn(R);return T.children.forEach(Ce=>{(function ol(T,R,N,x,U={canDeactivateChecks:[],canActivateChecks:[]}){const se=T.value,Ce=R?R.value:null,Be=N?N.getContext(T.value.outlet):null;if(Ce&&se.routeConfig===Ce.routeConfig){const hn=function qo(T,R,N){if("function"==typeof N)return N(T,R);switch(N){case"pathParamsChange":return!Cr(T.url,R.url);case"pathParamsOrQueryParamsChange":return!Cr(T.url,R.url)||!dt(T.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vs(T,R)||!dt(T.queryParams,R.queryParams);default:return!Vs(T,R)}}(Ce,se,se.routeConfig.runGuardsAndResolvers);hn?U.canActivateChecks.push(new ds(x)):(se.data=Ce.data,se._resolvedData=Ce._resolvedData),so(T,R,se.component?Be?Be.children:null:N,x,U),hn&&Be&&Be.outlet&&Be.outlet.isActivated&&U.canDeactivateChecks.push(new Io(Be.outlet.component,Ce))}else Ce&&mi(R,Be,U),U.canActivateChecks.push(new ds(x)),so(T,null,se.component?Be?Be.children:null:N,x,U)})(Ce,se[Ce.value.outlet],N,x.concat([Ce.value]),U),delete se[Ce.value.outlet]}),Object.entries(se).forEach(([Ce,Be])=>mi(Be,N.getContext(Ce),U)),U}function mi(T,R,N){const x=Kn(T),U=T.value;Object.entries(x).forEach(([se,Ce])=>{mi(Ce,U.component?R?R.children.getContext(se):null:R,N)}),N.canDeactivateChecks.push(new Io(U.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,U))}function ia(T){return"function"==typeof T}function z(T){return T instanceof Je.K||"EmptyError"===T?.name}const V=Symbol("INITIAL_VALUE");function oe(){return(0,Xe.w)(T=>(0,qe.a)(T.map(R=>R.pipe((0,Fe.q)(1),(0,fe.O)(V)))).pipe((0,be.U)(R=>{for(const N of R)if(!0!==N){if(N===V)return V;if(!1===N||N instanceof Br)return N}return!0}),(0,at.h)(R=>R!==V),(0,Fe.q)(1)))}function jn(T){return(0,Ge.z)((0,Xt.b)(R=>{if(ei(R))throw Fi(0,R)}),(0,be.U)(R=>!0===R))}class fr{constructor(R){this.segmentGroup=R||null}}class pi{constructor(R){this.urlTree=R}}function Gr(T){return ze(new fr(T))}function bs(T){return ze(new pi(T))}class oo{constructor(R,N){this.urlSerializer=R,this.urlTree=N}noMatchError(R){return new I.vHH(4002,!1)}lineralizeSegments(R,N){let x=[],U=N.root;for(;;){if(x=x.concat(U.segments),0===U.numberOfChildren)return(0,Pe.of)(x);if(U.numberOfChildren>1||!U.children[st])return ze(new I.vHH(4e3,!1));U=U.children[st]}}applyRedirectCommands(R,N,x){return this.applyRedirectCreateUrlTree(N,this.urlSerializer.parse(N),R,x)}applyRedirectCreateUrlTree(R,N,x,U){const se=this.createSegmentGroup(R,N.root,x,U);return new Br(se,this.createQueryParams(N.queryParams,this.urlTree.queryParams),N.fragment)}createQueryParams(R,N){const x={};return Object.entries(R).forEach(([U,se])=>{if("string"==typeof se&&se.startsWith(":")){const Be=se.substring(1);x[U]=N[Be]}else x[U]=se}),x}createSegmentGroup(R,N,x,U){const se=this.createSegments(R,N.segments,x,U);let Ce={};return Object.entries(N.children).forEach(([Be,hn])=>{Ce[Be]=this.createSegmentGroup(R,hn,x,U)}),new Kt(se,Ce)}createSegments(R,N,x,U){return N.map(se=>se.path.startsWith(":")?this.findPosParam(R,se,U):this.findOrReturn(se,x))}findPosParam(R,N,x){const U=x[N.path.substring(1)];if(!U)throw new I.vHH(4001,!1);return U}findOrReturn(R,N){let x=0;for(const U of N){if(U.path===R.path)return N.splice(x),U;x++}return R}}const oa={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Na(T,R,N,x,U){const se=ao(T,R,N);return se.matched?(x=function Ca(T,R){return T.providers&&!T._injector&&(T._injector=(0,I.MMx)(T.providers,R,`Route: ${T.path}`)),T._injector??R}(R,x),function Wn(T,R,N,x){const U=R.canMatch;if(!U||0===U.length)return(0,Pe.of)(!0);const se=U.map(Ce=>{const Be=rs(Ce,T);return En(function ci(T){return T&&ia(T.canMatch)}(Be)?Be.canMatch(R,N):T.runInContext(()=>Be(R,N)))});return(0,Pe.of)(se).pipe(oe(),jn())}(x,R,N).pipe((0,be.U)(Ce=>!0===Ce?se:{...oa}))):(0,Pe.of)(se)}function ao(T,R,N){if(""===R.path)return"full"===R.pathMatch&&(T.hasChildren()||N.length>0)?{...oa}:{matched:!0,consumedSegments:[],remainingSegments:N,parameters:{},positionalParamSegments:{}};const U=(R.matcher||wt)(N,T,R);if(!U)return{...oa};const se={};Object.entries(U.posParams??{}).forEach(([Be,hn])=>{se[Be]=hn.path});const Ce=U.consumed.length>0?{...se,...U.consumed[U.consumed.length-1].parameters}:se;return{matched:!0,consumedSegments:U.consumed,remainingSegments:N.slice(U.consumed.length),parameters:Ce,positionalParamSegments:U.posParams??{}}}function aa(T,R,N,x){return N.length>0&&function Bo(T,R,N){return N.some(x=>yo(T,R,x)&&ri(x)!==st)}(T,N,x)?{segmentGroup:new Kt(R,Il(x,new Kt(N,T.children))),slicedSegments:[]}:0===N.length&&function Ts(T,R,N){return N.some(x=>yo(T,R,x))}(T,N,x)?{segmentGroup:new Kt(T.segments,Zs(T,0,N,x,T.children)),slicedSegments:N}:{segmentGroup:new Kt(T.segments,T.children),slicedSegments:N}}function Zs(T,R,N,x,U){const se={};for(const Ce of x)if(yo(T,N,Ce)&&!U[ri(Ce)]){const Be=new Kt([],{});se[ri(Ce)]=Be}return{...U,...se}}function Il(T,R){const N={};N[st]=R;for(const x of T)if(""===x.path&&ri(x)!==st){const U=new Kt([],{});N[ri(x)]=U}return N}function yo(T,R,N){return(!(T.hasChildren()||R.length>0)||"full"!==N.pathMatch)&&""===N.path}class Za{constructor(R,N,x,U,se,Ce,Be){this.injector=R,this.configLoader=N,this.rootComponentType=x,this.config=U,this.urlTree=se,this.paramsInheritanceStrategy=Ce,this.urlSerializer=Be,this.allowRedirects=!0,this.applyRedirects=new oo(this.urlSerializer,this.urlTree)}noMatchError(R){return new I.vHH(4002,!1)}recognize(){const R=aa(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,st).pipe(mn(N=>{if(N instanceof pi)return this.allowRedirects=!1,this.urlTree=N.urlTree,this.match(N.urlTree);throw N instanceof fr?this.noMatchError(N):N}),(0,be.U)(N=>{const x=new zr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},st,this.rootComponentType,null,{}),U=new qn(x,N),se=new An("",U),Ce=function Is(T,R,N=null,x=null){return Bi(Fs(T),R,N,x)}(x,[],this.urlTree.queryParams,this.urlTree.fragment);return Ce.queryParams=this.urlTree.queryParams,se.url=this.urlSerializer.serialize(Ce),this.inheritParamsAndData(se._root),{state:se,tree:Ce}}))}match(R){return this.processSegmentGroup(this.injector,this.config,R.root,st).pipe(mn(x=>{throw x instanceof fr?this.noMatchError(x):x}))}inheritParamsAndData(R){const N=R.value,x=_o(N,this.paramsInheritanceStrategy);N.params=Object.freeze(x.params),N.data=Object.freeze(x.data),R.children.forEach(U=>this.inheritParamsAndData(U))}processSegmentGroup(R,N,x,U){return 0===x.segments.length&&x.hasChildren()?this.processChildren(R,N,x):this.processSegment(R,N,x,x.segments,U,!0)}processChildren(R,N,x){const U=[];for(const se of Object.keys(x.children))"primary"===se?U.unshift(se):U.push(se);return(0,ke.D)(U).pipe(en(se=>{const Ce=x.children[se],Be=function Xi(T,R){const N=T.filter(x=>ri(x)===R);return N.push(...T.filter(x=>ri(x)!==R)),N}(N,se);return this.processSegmentGroup(R,Be,Ce,se)}),(0,de.R)((se,Ce)=>(se.push(...Ce),se)),(0,gn.d)(null),function $e(T,R){const N=arguments.length>=2;return x=>x.pipe(T?(0,at.h)((U,se)=>T(U,se,x)):Se.y,_t(1),N?(0,gn.d)(R):(0,pe.T)(()=>new Je.K))}(),(0,Ue.z)(se=>{if(null===se)return Gr(x);const Ce=Fa(se);return function ca(T){T.sort((R,N)=>R.value.outlet===st?-1:N.value.outlet===st?1:R.value.outlet.localeCompare(N.value.outlet))}(Ce),(0,Pe.of)(Ce)}))}processSegment(R,N,x,U,se,Ce){return(0,ke.D)(N).pipe(en(Be=>this.processSegmentAgainstRoute(Be._injector??R,N,Be,x,U,se,Ce).pipe(mn(hn=>{if(hn instanceof fr)return(0,Pe.of)(null);throw hn}))),(0,zt.P)(Be=>!!Be),mn(Be=>{if(z(Be))return function al(T,R,N){return 0===R.length&&!T.children[N]}(x,U,se)?(0,Pe.of)([]):Gr(x);throw Be}))}processSegmentAgainstRoute(R,N,x,U,se,Ce,Be){return function la(T,R,N,x){return!!(ri(T)===x||x!==st&&yo(R,N,T))&&("**"===T.path||ao(R,T,N).matched)}(x,U,se,Ce)?void 0===x.redirectTo?this.matchSegmentAgainstRoute(R,U,x,se,Ce,Be):Be&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,U,N,x,se,Ce):Gr(U):Gr(U)}expandSegmentAgainstRouteUsingRedirect(R,N,x,U,se,Ce){return"**"===U.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,x,U,Ce):this.expandRegularSegmentAgainstRouteUsingRedirect(R,N,x,U,se,Ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,N,x,U){const se=this.applyRedirects.applyRedirectCommands([],x.redirectTo,{});return x.redirectTo.startsWith("/")?bs(se):this.applyRedirects.lineralizeSegments(x,se).pipe((0,Ue.z)(Ce=>{const Be=new Kt(Ce,{});return this.processSegment(R,N,Be,Ce,U,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,N,x,U,se,Ce){const{matched:Be,consumedSegments:hn,remainingSegments:Lt,positionalParamSegments:yr}=ao(N,U,se);if(!Be)return Gr(N);const cn=this.applyRedirects.applyRedirectCommands(hn,U.redirectTo,yr);return U.redirectTo.startsWith("/")?bs(cn):this.applyRedirects.lineralizeSegments(U,cn).pipe((0,Ue.z)(Hn=>this.processSegment(R,x,N,Hn.concat(Lt),Ce,!1)))}matchSegmentAgainstRoute(R,N,x,U,se,Ce){let Be;if("**"===x.path){const hn=U.length>0?Tn(U).parameters:{},Lt=new zr(U,hn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Os(x),ri(x),x.component??x._loadedComponent??null,x,ua(x));Be=(0,Pe.of)({snapshot:Lt,consumedSegments:[],remainingSegments:[]}),N.children={}}else Be=Na(N,x,U,R).pipe((0,be.U)(({matched:hn,consumedSegments:Lt,remainingSegments:yr,parameters:cn})=>hn?{snapshot:new zr(Lt,cn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Os(x),ri(x),x.component??x._loadedComponent??null,x,ua(x)),consumedSegments:Lt,remainingSegments:yr}:null));return Be.pipe((0,Xe.w)(hn=>null===hn?Gr(N):this.getChildConfig(R=x._injector??R,x,U).pipe((0,Xe.w)(({routes:Lt})=>{const yr=x._loadedInjector??R,{snapshot:cn,consumedSegments:Hn,remainingSegments:Si}=hn,{segmentGroup:kn,slicedSegments:Mt}=aa(N,Hn,Si,Lt);if(0===Mt.length&&kn.hasChildren())return this.processChildren(yr,Lt,kn).pipe((0,be.U)(Ui=>null===Ui?null:[new qn(cn,Ui)]));if(0===Lt.length&&0===Mt.length)return(0,Pe.of)([new qn(cn,[])]);const rn=ri(x)===se;return this.processSegment(yr,Lt,kn,Mt,rn?st:se,!0).pipe((0,be.U)(Ui=>[new qn(cn,Ui)]))}))))}getChildConfig(R,N,x){return N.children?(0,Pe.of)({routes:N.children,injector:R}):N.loadChildren?void 0!==N._loadedRoutes?(0,Pe.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):function Nt(T,R,N,x){const U=R.canLoad;if(void 0===U||0===U.length)return(0,Pe.of)(!0);const se=U.map(Ce=>{const Be=rs(Ce,T);return En(function Eo(T){return T&&ia(T.canLoad)}(Be)?Be.canLoad(R,N):T.runInContext(()=>Be(R,N)))});return(0,Pe.of)(se).pipe(oe(),jn())}(R,N,x).pipe((0,Ue.z)(U=>U?this.configLoader.loadChildren(R,N).pipe((0,Xt.b)(se=>{N._loadedRoutes=se.routes,N._loadedInjector=se.injector})):function Lo(T){return ze(ni(!1,3))}())):(0,Pe.of)({routes:[],injector:R})}}function ba(T){const R=T.value.routeConfig;return R&&""===R.path}function Fa(T){const R=[],N=new Set;for(const x of T){if(!ba(x)){R.push(x);continue}const U=R.find(se=>x.value.routeConfig===se.value.routeConfig);void 0!==U?(U.children.push(...x.children),N.add(U)):R.push(x)}for(const x of N){const U=Fa(x.children);R.push(new qn(x.value,U))}return R.filter(x=>!N.has(x))}function Os(T){return T.data||{}}function ua(T){return T.resolve||{}}function A(T){return"string"==typeof T.title||null===T.title}function G(T){return(0,Xe.w)(R=>{const N=T(R);return N?(0,ke.D)(N).pipe((0,be.U)(()=>R)):(0,Pe.of)(R)})}const we=new I.OlP("ROUTES");let $=(()=>{var T;class R{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,I.f3M)(I.Sil)}loadComponent(x){if(this.componentLoaders.get(x))return this.componentLoaders.get(x);if(x._loadedComponent)return(0,Pe.of)(x._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(x);const U=En(x.loadComponent()).pipe((0,be.U)(tt),(0,Xt.b)(Ce=>{this.onLoadEndListener&&this.onLoadEndListener(x),x._loadedComponent=Ce}),pt(()=>{this.componentLoaders.delete(x)})),se=new yt(U,()=>new Ve.x).pipe(Ee());return this.componentLoaders.set(x,se),se}loadChildren(x,U){if(this.childrenLoaders.get(U))return this.childrenLoaders.get(U);if(U._loadedRoutes)return(0,Pe.of)({routes:U._loadedRoutes,injector:U._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(U);const Ce=this.loadModuleFactoryOrRoutes(U.loadChildren).pipe((0,be.U)(hn=>{this.onLoadEndListener&&this.onLoadEndListener(U);let Lt,yr;return Array.isArray(hn)?yr=hn:(Lt=hn.create(x).injector,yr=Lt.get(we,[],I.XFs.Self|I.XFs.Optional).flat()),{routes:yr.map(cs),injector:Lt}}),pt(()=>{this.childrenLoaders.delete(U)})),Be=new yt(Ce,()=>new Ve.x).pipe(Ee());return this.childrenLoaders.set(U,Be),Be}loadModuleFactoryOrRoutes(x){return En(x()).pipe((0,be.U)(tt),(0,Ue.z)(U=>U instanceof I.YKP||Array.isArray(U)?(0,Pe.of)(U):(0,ke.D)(this.compiler.compileModuleAsync(U))))}}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),R})();function tt(T){return function me(T){return T&&"object"==typeof T&&"default"in T}(T)?T.default:T}let $t=(()=>{var T;class R{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ve.x,this.transitionAbortSubject=new Ve.x,this.configLoader=(0,I.f3M)($),this.environmentInjector=(0,I.f3M)(I.lqb),this.urlSerializer=(0,I.f3M)(or),this.rootContexts=(0,I.f3M)(ut),this.inputBindingEnabled=null!==(0,I.f3M)(Ci,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Pe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=se=>this.events.next(new ct(se)),this.configLoader.onLoadStartListener=se=>this.events.next(new it(se))}complete(){this.transitions?.complete()}handleNavigationRequest(x){const U=++this.navigationId;this.transitions?.next({...this.transitions.value,...x,id:U})}setupNavigations(x,U,se){return this.transitions=new Ie.X({id:0,currentUrlTree:U,currentRawUrl:U,currentBrowserUrl:U,extractedUrl:x.urlHandlingStrategy.extract(U),urlAfterRedirects:x.urlHandlingStrategy.extract(U),rawUrl:U,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qi,restoredState:null,currentSnapshot:se.snapshot,targetSnapshot:null,currentRouterState:se,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,at.h)(Ce=>0!==Ce.id),(0,be.U)(Ce=>({...Ce,extractedUrl:x.urlHandlingStrategy.extract(Ce.rawUrl)})),(0,Xe.w)(Ce=>{this.currentTransition=Ce;let Be=!1,hn=!1;return(0,Pe.of)(Ce).pipe((0,Xt.b)(Lt=>{this.currentNavigation={id:Lt.id,initialUrl:Lt.rawUrl,extractedUrl:Lt.extractedUrl,trigger:Lt.source,extras:Lt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Xe.w)(Lt=>{const yr=Lt.currentBrowserUrl.toString(),cn=!x.navigated||Lt.extractedUrl.toString()!==yr||yr!==Lt.currentUrlTree.toString();if(!cn&&"reload"!==(Lt.extras.onSameUrlNavigation??x.onSameUrlNavigation)){const Si="";return this.events.next(new Ir(Lt.id,this.urlSerializer.serialize(Lt.rawUrl),Si,0)),Lt.resolve(null),nt.E}if(x.urlHandlingStrategy.shouldProcessUrl(Lt.rawUrl))return(0,Pe.of)(Lt).pipe((0,Xe.w)(Si=>{const kn=this.transitions?.getValue();return this.events.next(new ts(Si.id,this.urlSerializer.serialize(Si.extractedUrl),Si.source,Si.restoredState)),kn!==this.transitions?.getValue()?nt.E:Promise.resolve(Si)}),function Qa(T,R,N,x,U,se){return(0,Ue.z)(Ce=>function ka(T,R,N,x,U,se,Ce="emptyOnly"){return new Za(T,R,N,x,U,Ce,se).recognize()}(T,R,N,x,Ce.extractedUrl,U,se).pipe((0,be.U)(({state:Be,tree:hn})=>({...Ce,targetSnapshot:Be,urlAfterRedirects:hn}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,x.config,this.urlSerializer,x.paramsInheritanceStrategy),(0,Xt.b)(Si=>{Ce.targetSnapshot=Si.targetSnapshot,Ce.urlAfterRedirects=Si.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Si.urlAfterRedirects};const kn=new as(Si.id,this.urlSerializer.serialize(Si.extractedUrl),this.urlSerializer.serialize(Si.urlAfterRedirects),Si.targetSnapshot);this.events.next(kn)}));if(cn&&x.urlHandlingStrategy.shouldProcessUrl(Lt.currentRawUrl)){const{id:Si,extractedUrl:kn,source:Mt,restoredState:rn,extras:Ui}=Lt,gs=new ts(Si,this.urlSerializer.serialize(kn),Mt,rn);this.events.next(gs);const Yo=Ln(0,this.rootComponentType).snapshot;return this.currentTransition=Ce={...Lt,targetSnapshot:Yo,urlAfterRedirects:kn,extras:{...Ui,skipLocationChange:!1,replaceUrl:!1}},(0,Pe.of)(Ce)}{const Si="";return this.events.next(new Ir(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),Si,1)),Lt.resolve(null),nt.E}}),(0,Xt.b)(Lt=>{const yr=new bt(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),this.urlSerializer.serialize(Lt.urlAfterRedirects),Lt.targetSnapshot);this.events.next(yr)}),(0,be.U)(Lt=>(this.currentTransition=Ce={...Lt,guards:ws(Lt.targetSnapshot,Lt.currentSnapshot,this.rootContexts)},Ce)),function Y(T,R){return(0,Ue.z)(N=>{const{targetSnapshot:x,currentSnapshot:U,guards:{canActivateChecks:se,canDeactivateChecks:Ce}}=N;return 0===Ce.length&&0===se.length?(0,Pe.of)({...N,guardsResult:!0}):function Te(T,R,N,x){return(0,ke.D)(T).pipe((0,Ue.z)(U=>function ae(T,R,N,x,U){const se=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!se||0===se.length)return(0,Pe.of)(!0);const Ce=se.map(Be=>{const hn=Hs(R)??U,Lt=rs(Be,hn);return En(function wo(T){return T&&ia(T.canDeactivate)}(Lt)?Lt.canDeactivate(T,R,N,x):hn.runInContext(()=>Lt(T,R,N,x))).pipe((0,zt.P)())});return(0,Pe.of)(Ce).pipe(oe())}(U.component,U.route,N,R,x)),(0,zt.P)(U=>!0!==U,!0))}(Ce,x,U,T).pipe((0,Ue.z)(Be=>Be&&function Pa(T){return"boolean"==typeof T}(Be)?function fn(T,R,N,x){return(0,ke.D)(R).pipe(en(U=>(0,ye.z)(function q(T,R){return null!==T&&R&&R(new At(T)),(0,Pe.of)(!0)}(U.route.parent,x),function E(T,R){return null!==T&&R&&R(new qt(T)),(0,Pe.of)(!0)}(U.route,x),function j(T,R,N){const x=R[R.length-1],se=R.slice(0,R.length-1).reverse().map(Ce=>function Cs(T){const R=T.routeConfig?T.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:T,guards:R}:null}(Ce)).filter(Ce=>null!==Ce).map(Ce=>Me(()=>{const Be=Ce.guards.map(hn=>{const Lt=Hs(Ce.node)??N,yr=rs(hn,Lt);return En(function sa(T){return T&&ia(T.canActivateChild)}(yr)?yr.canActivateChild(x,T):Lt.runInContext(()=>yr(x,T))).pipe((0,zt.P)())});return(0,Pe.of)(Be).pipe(oe())}));return(0,Pe.of)(se).pipe(oe())}(T,U.path,N),function C(T,R,N){const x=R.routeConfig?R.routeConfig.canActivate:null;if(!x||0===x.length)return(0,Pe.of)(!0);const U=x.map(se=>Me(()=>{const Ce=Hs(R)??N,Be=rs(se,Ce);return En(function Ro(T){return T&&ia(T.canActivate)}(Be)?Be.canActivate(R,T):Ce.runInContext(()=>Be(R,T))).pipe((0,zt.P)())}));return(0,Pe.of)(U).pipe(oe())}(T,U.route,N))),(0,zt.P)(U=>!0!==U,!0))}(x,se,T,R):(0,Pe.of)(Be)),(0,be.U)(Be=>({...N,guardsResult:Be})))})}(this.environmentInjector,Lt=>this.events.next(Lt)),(0,Xt.b)(Lt=>{if(Ce.guardsResult=Lt.guardsResult,ei(Lt.guardsResult))throw Fi(0,Lt.guardsResult);const yr=new Cn(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),this.urlSerializer.serialize(Lt.urlAfterRedirects),Lt.targetSnapshot,!!Lt.guardsResult);this.events.next(yr)}),(0,at.h)(Lt=>!!Lt.guardsResult||(this.cancelNavigationTransition(Lt,"",3),!1)),G(Lt=>{if(Lt.guards.canActivateChecks.length)return(0,Pe.of)(Lt).pipe((0,Xt.b)(yr=>{const cn=new J(yr.id,this.urlSerializer.serialize(yr.extractedUrl),this.urlSerializer.serialize(yr.urlAfterRedirects),yr.targetSnapshot);this.events.next(cn)}),(0,Xe.w)(yr=>{let cn=!1;return(0,Pe.of)(yr).pipe(function $o(T,R){return(0,Ue.z)(N=>{const{targetSnapshot:x,guards:{canActivateChecks:U}}=N;if(!U.length)return(0,Pe.of)(N);let se=0;return(0,ke.D)(U).pipe(en(Ce=>function Ps(T,R,N,x){const U=T.routeConfig,se=T._resolve;return void 0!==U?.title&&!A(U)&&(se[Vn]=U.title),function lo(T,R,N,x){const U=function co(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}(T);if(0===U.length)return(0,Pe.of)({});const se={};return(0,ke.D)(U).pipe((0,Ue.z)(Ce=>function Yr(T,R,N,x){const U=Hs(R)??x,se=rs(T,U);return En(se.resolve?se.resolve(R,N):U.runInContext(()=>se(R,N)))}(T[Ce],R,N,x).pipe((0,zt.P)(),(0,Xt.b)(Be=>{se[Ce]=Be}))),_t(1),function je(T){return(0,be.U)(()=>T)}(se),mn(Ce=>z(Ce)?nt.E:ze(Ce)))}(se,T,R,x).pipe((0,be.U)(Ce=>(T._resolvedData=Ce,T.data=_o(T,N).resolve,U&&A(U)&&(T.data[Vn]=U.title),null)))}(Ce.route,x,T,R)),(0,Xt.b)(()=>se++),_t(1),(0,Ue.z)(Ce=>se===U.length?(0,Pe.of)(N):nt.E))})}(x.paramsInheritanceStrategy,this.environmentInjector),(0,Xt.b)({next:()=>cn=!0,complete:()=>{cn||this.cancelNavigationTransition(yr,"",2)}}))}),(0,Xt.b)(yr=>{const cn=new _e(yr.id,this.urlSerializer.serialize(yr.extractedUrl),this.urlSerializer.serialize(yr.urlAfterRedirects),yr.targetSnapshot);this.events.next(cn)}))}),G(Lt=>{const yr=cn=>{const Hn=[];cn.routeConfig?.loadComponent&&!cn.routeConfig._loadedComponent&&Hn.push(this.configLoader.loadComponent(cn.routeConfig).pipe((0,Xt.b)(Si=>{cn.component=Si}),(0,be.U)(()=>{})));for(const Si of cn.children)Hn.push(...yr(Si));return Hn};return(0,qe.a)(yr(Lt.targetSnapshot.root)).pipe((0,gn.d)(),(0,Fe.q)(1))}),G(()=>this.afterPreactivation()),(0,be.U)(Lt=>{const yr=function Mo(T,R,N){const x=ar(T,R._root,N?N._root:void 0);return new Qn(x,R)}(x.routeReuseStrategy,Lt.targetSnapshot,Lt.currentRouterState);return this.currentTransition=Ce={...Lt,targetRouterState:yr},Ce}),(0,Xt.b)(()=>{this.events.next(new ln)}),((T,R,N,x)=>(0,be.U)(U=>(new us(R,U.targetRouterState,U.currentRouterState,N,x).activate(T),U)))(this.rootContexts,x.routeReuseStrategy,Lt=>this.events.next(Lt),this.inputBindingEnabled),(0,Fe.q)(1),(0,Xt.b)({next:Lt=>{Be=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gi(Lt.id,this.urlSerializer.serialize(Lt.extractedUrl),this.urlSerializer.serialize(Lt.urlAfterRedirects))),x.titleStrategy?.updateTitle(Lt.targetRouterState.snapshot),Lt.resolve(!0)},complete:()=>{Be=!0}}),function Bt(T){return(0,Ye.e)((R,N)=>{(0,ge.Xf)(T).subscribe((0,De.x)(N,()=>N.complete(),ht.Z)),!N.closed&&R.subscribe(N)})}(this.transitionAbortSubject.pipe((0,Xt.b)(Lt=>{throw Lt}))),pt(()=>{Be||hn||this.cancelNavigationTransition(Ce,"",1),this.currentNavigation?.id===Ce.id&&(this.currentNavigation=null)}),mn(Lt=>{if(hn=!0,fs(Lt))this.events.next(new $s(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),Lt.message,Lt.cancellationCode)),function xo(T){return fs(T)&&ei(T.url)}(Lt)?this.events.next(new Rn(Lt.url)):Ce.resolve(!1);else{this.events.next(new Dr(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),Lt,Ce.targetSnapshot??void 0));try{Ce.resolve(x.errorHandler(Lt))}catch(yr){Ce.reject(yr)}}return nt.E}))}))}cancelNavigationTransition(x,U,se){const Ce=new $s(x.id,this.urlSerializer.serialize(x.extractedUrl),U,se);this.events.next(Ce),x.resolve(!1)}}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),R})();function xn(T){return T!==Qi}let xr=(()=>{var T;class R{buildTitle(x){let U,se=x.root;for(;void 0!==se;)U=this.getResolvedTitleForRoute(se)??U,se=se.children.find(Ce=>Ce.outlet===st);return U}getResolvedTitleForRoute(x){return x.data[Vn]}}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:function(){return(0,I.f3M)(Pr)},providedIn:"root"}),R})(),Pr=(()=>{var T;class R extends xr{constructor(x){super(),this.title=x}updateTitle(x){const U=this.buildTitle(x);void 0!==U&&this.title.setTitle(U)}}return(T=R).\u0275fac=function(x){return new(x||T)(I.LFG(Qt.Dx))},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),R})(),Sr=(()=>{var T;class R{}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:function(){return(0,I.f3M)(Rr)},providedIn:"root"}),R})();class Wr{shouldDetach(R){return!1}store(R,N){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,N){return R.routeConfig===N.routeConfig}}let Rr=(()=>{var T;class R extends Wr{}return(T=R).\u0275fac=function(){let N;return function(U){return(N||(N=I.n5z(T)))(U||T)}}(),T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),R})();const Ur=new I.OlP("",{providedIn:"root",factory:()=>({})});let $i=(()=>{var T;class R{}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:function(){return(0,I.f3M)(Co)},providedIn:"root"}),R})(),Co=(()=>{var T;class R{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,U){return x}}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),R})();var Ns=function(T){return T[T.COMPLETE=0]="COMPLETE",T[T.FAILED=1]="FAILED",T[T.REDIRECTING=2]="REDIRECTING",T}(Ns||{});function bo(T,R){T.events.pipe((0,at.h)(N=>N instanceof Gi||N instanceof $s||N instanceof Dr||N instanceof Ir),(0,be.U)(N=>N instanceof Gi||N instanceof Ir?Ns.COMPLETE:N instanceof $s&&(0===N.code||1===N.code)?Ns.REDIRECTING:Ns.FAILED),(0,at.h)(N=>N!==Ns.REDIRECTING),(0,Fe.q)(1)).subscribe(()=>{R()})}function zs(T){throw T}function Ss(T,R,N){return R.parse("/")}const Qs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},da={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{var T;class R{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,I.f3M)(I.c2e),this.isNgZoneEnabled=!1,this._events=new Ve.x,this.options=(0,I.f3M)(Ur,{optional:!0})||{},this.pendingTasks=(0,I.f3M)(I.HDt),this.errorHandler=this.options.errorHandler||zs,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ss,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,I.f3M)($i),this.routeReuseStrategy=(0,I.f3M)(Sr),this.titleStrategy=(0,I.f3M)(xr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,I.f3M)(we,{optional:!0})?.flat()??[],this.navigationTransitions=(0,I.f3M)($t),this.urlSerializer=(0,I.f3M)(or),this.location=(0,I.f3M)(rt.Ye),this.componentInputBindingEnabled=!!(0,I.f3M)(Ci,{optional:!0}),this.eventsSubscription=new Ze.w0,this.isNgZoneEnabled=(0,I.f3M)(I.R0b)instanceof I.R0b&&I.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Br,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ln(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(x=>{this.lastSuccessfulId=x.id,this.currentPageId=this.browserPageId},x=>{this.console.warn(`Unhandled Navigation Error: ${x}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const x=this.navigationTransitions.events.subscribe(U=>{try{const{currentTransition:se}=this.navigationTransitions;if(null===se)return void(ha(U)&&this._events.next(U));if(U instanceof ts)xn(se.source)&&(this.browserUrlTree=se.extractedUrl);else if(U instanceof Ir)this.rawUrlTree=se.rawUrl;else if(U instanceof as){if("eager"===this.urlUpdateStrategy){if(!se.extras.skipLocationChange){const Ce=this.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl);this.setBrowserUrl(Ce,se)}this.browserUrlTree=se.urlAfterRedirects}}else if(U instanceof ln)this.currentUrlTree=se.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl),this.routerState=se.targetRouterState,"deferred"===this.urlUpdateStrategy&&(se.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,se),this.browserUrlTree=se.urlAfterRedirects);else if(U instanceof $s)0!==U.code&&1!==U.code&&(this.navigated=!0),(3===U.code||2===U.code)&&this.restoreHistory(se);else if(U instanceof Rn){const Ce=this.urlHandlingStrategy.merge(U.url,se.currentRawUrl),Be={skipLocationChange:se.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||xn(se.source)};this.scheduleNavigation(Ce,Qi,null,Be,{resolve:se.resolve,reject:se.reject,promise:se.promise})}U instanceof Dr&&this.restoreHistory(se,!0),U instanceof Gi&&(this.navigated=!0),ha(U)&&this._events.next(U)}catch(se){this.navigationTransitions.transitionAbortSubject.next(se)}});this.eventsSubscription.add(x)}resetRootComponentType(x){this.routerState.root.component=x,this.navigationTransitions.rootComponentType=x}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const x=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Qi,x)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(x=>{const U="popstate"===x.type?"popstate":"hashchange";"popstate"===U&&setTimeout(()=>{this.navigateToSyncWithBrowser(x.url,U,x.state)},0)}))}navigateToSyncWithBrowser(x,U,se){const Ce={replaceUrl:!0},Be=se?.navigationId?se:null;if(se){const Lt={...se};delete Lt.navigationId,delete Lt.\u0275routerPageId,0!==Object.keys(Lt).length&&(Ce.state=Lt)}const hn=this.parseUrl(x);this.scheduleNavigation(hn,U,Be,Ce)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(x){this.config=x.map(cs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(x,U={}){const{relativeTo:se,queryParams:Ce,fragment:Be,queryParamsHandling:hn,preserveFragment:Lt}=U,yr=Lt?this.currentUrlTree.fragment:Be;let Hn,cn=null;switch(hn){case"merge":cn={...this.currentUrlTree.queryParams,...Ce};break;case"preserve":cn=this.currentUrlTree.queryParams;break;default:cn=Ce||null}null!==cn&&(cn=this.removeEmptyProps(cn));try{Hn=Fs(se?se.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof x[0]||!x[0].startsWith("/"))&&(x=[]),Hn=this.currentUrlTree.root}return Bi(Hn,x,cn,yr??null)}navigateByUrl(x,U={skipLocationChange:!1}){const se=ei(x)?x:this.parseUrl(x),Ce=this.urlHandlingStrategy.merge(se,this.rawUrlTree);return this.scheduleNavigation(Ce,Qi,null,U)}navigate(x,U={skipLocationChange:!1}){return function Ml(T){for(let R=0;R<T.length;R++)if(null==T[R])throw new I.vHH(4008,!1)}(x),this.navigateByUrl(this.createUrlTree(x,U),U)}serializeUrl(x){return this.urlSerializer.serialize(x)}parseUrl(x){let U;try{U=this.urlSerializer.parse(x)}catch(se){U=this.malformedUriErrorHandler(se,this.urlSerializer,x)}return U}isActive(x,U){let se;if(se=!0===U?{...Qs}:!1===U?{...da}:U,ei(x))return Jn(this.currentUrlTree,x,se);const Ce=this.parseUrl(x);return Jn(this.currentUrlTree,Ce,se)}removeEmptyProps(x){return Object.keys(x).reduce((U,se)=>{const Ce=x[se];return null!=Ce&&(U[se]=Ce),U},{})}scheduleNavigation(x,U,se,Ce,Be){if(this.disposed)return Promise.resolve(!1);let hn,Lt,yr;Be?(hn=Be.resolve,Lt=Be.reject,yr=Be.promise):yr=new Promise((Hn,Si)=>{hn=Hn,Lt=Si});const cn=this.pendingTasks.add();return bo(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(cn))}),this.navigationTransitions.handleNavigationRequest({source:U,restoredState:se,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:x,extras:Ce,resolve:hn,reject:Lt,promise:yr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),yr.catch(Hn=>Promise.reject(Hn))}setBrowserUrl(x,U){const se=this.urlSerializer.serialize(x);if(this.location.isCurrentPathEqualTo(se)||U.extras.replaceUrl){const Be={...U.extras.state,...this.generateNgRouterState(U.id,this.browserPageId)};this.location.replaceState(se,"",Be)}else{const Ce={...U.extras.state,...this.generateNgRouterState(U.id,this.browserPageId+1)};this.location.go(se,"",Ce)}}restoreHistory(x,U=!1){if("computed"===this.canceledNavigationResolution){const Ce=this.currentPageId-this.browserPageId;0!==Ce?this.location.historyGo(Ce):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Ce&&(this.resetState(x),this.browserUrlTree=x.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(U&&this.resetState(x),this.resetUrlToCurrentUrlTree())}resetState(x){this.routerState=x.currentRouterState,this.currentUrlTree=x.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,x.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(x,U){return"computed"===this.canceledNavigationResolution?{navigationId:x,\u0275routerPageId:U}:{navigationId:x}}}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),R})();function ha(T){return!(T instanceof ln||T instanceof Rn)}let uo=(()=>{var T;class R{constructor(x,U,se,Ce,Be,hn){this.router=x,this.route=U,this.tabIndexAttribute=se,this.renderer=Ce,this.el=Be,this.locationStrategy=hn,this.href=null,this.commands=null,this.onChanges=new Ve.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Lt=Be.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Lt||"area"===Lt,this.isAnchorElement?this.subscription=x.events.subscribe(yr=>{yr instanceof Gi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(x){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",x)}ngOnChanges(x){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(x){null!=x?(this.commands=Array.isArray(x)?x:[x],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(x,U,se,Ce,Be){return!!(null===this.urlTree||this.isAnchorElement&&(0!==x||U||se||Ce||Be||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const x=null===this.href?null:(0,I.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",x)}applyAttributeValue(x,U){const se=this.renderer,Ce=this.el.nativeElement;null!==U?se.setAttribute(Ce,x,U):se.removeAttribute(Ce,x)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(T=R).\u0275fac=function(x){return new(x||T)(I.Y36(Nr),I.Y36(Er),I.$8M("tabindex"),I.Y36(I.Qsj),I.Y36(I.SBq),I.Y36(rt.S$))},T.\u0275dir=I.lG2({type:T,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(x,U){1&x&&I.NdJ("click",function(Ce){return U.onClick(Ce.button,Ce.ctrlKey,Ce.shiftKey,Ce.altKey,Ce.metaKey)}),2&x&&I.uIk("target",U.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",I.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",I.VuI],replaceUrl:["replaceUrl","replaceUrl",I.VuI],routerLink:"routerLink"},standalone:!0,features:[I.Xq5,I.TTD]}),R})();class Ja{}let Vo=(()=>{var T;class R{preload(x,U){return U().pipe(mn(()=>(0,Pe.of)(null)))}}return(T=R).\u0275fac=function(x){return new(x||T)},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),R})(),pc=(()=>{var T;class R{constructor(x,U,se,Ce,Be){this.router=x,this.injector=se,this.preloadingStrategy=Ce,this.loader=Be}setUpPreloading(){this.subscription=this.router.events.pipe((0,at.h)(x=>x instanceof Gi),en(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(x,U){const se=[];for(const Ce of U){Ce.providers&&!Ce._injector&&(Ce._injector=(0,I.MMx)(Ce.providers,x,`Route: ${Ce.path}`));const Be=Ce._injector??x,hn=Ce._loadedInjector??Be;(Ce.loadChildren&&!Ce._loadedRoutes&&void 0===Ce.canLoad||Ce.loadComponent&&!Ce._loadedComponent)&&se.push(this.preloadConfig(Be,Ce)),(Ce.children||Ce._loadedRoutes)&&se.push(this.processRoutes(hn,Ce.children??Ce._loadedRoutes))}return(0,ke.D)(se).pipe((0,Ft.J)())}preloadConfig(x,U){return this.preloadingStrategy.preload(U,()=>{let se;se=U.loadChildren&&void 0===U.canLoad?this.loader.loadChildren(x,U):(0,Pe.of)(null);const Ce=se.pipe((0,Ue.z)(Be=>null===Be?(0,Pe.of)(void 0):(U._loadedRoutes=Be.routes,U._loadedInjector=Be.injector,this.processRoutes(Be.injector??x,Be.routes))));if(U.loadComponent&&!U._loadedComponent){const Be=this.loader.loadComponent(U);return(0,ke.D)([Ce,Be]).pipe((0,Ft.J)())}return Ce})}}return(T=R).\u0275fac=function(x){return new(x||T)(I.LFG(Nr),I.LFG(I.Sil),I.LFG(I.lqb),I.LFG(Ja),I.LFG($))},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),R})();const xl=new I.OlP("");let Da=(()=>{var T;class R{constructor(x,U,se,Ce,Be={}){this.urlSerializer=x,this.transitions=U,this.viewportScroller=se,this.zone=Ce,this.options=Be,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Be.scrollPositionRestoration=Be.scrollPositionRestoration||"disabled",Be.anchorScrolling=Be.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(x=>{x instanceof ts?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=x.navigationTrigger,this.restoredId=x.restoredState?x.restoredState.navigationId:0):x instanceof Gi?(this.lastId=x.id,this.scheduleScrollEvent(x,this.urlSerializer.parse(x.urlAfterRedirects).fragment)):x instanceof Ir&&0===x.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(x,this.urlSerializer.parse(x.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(x=>{x instanceof Ut&&(x.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(x.position):x.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(x.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(x,U){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ut(x,"popstate"===this.lastSource?this.store[this.restoredId]:null,U))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(T=R).\u0275fac=function(x){I.$Z()},T.\u0275prov=I.Yz7({token:T,factory:T.\u0275fac}),R})();function La(T,R){return{\u0275kind:T,\u0275providers:R}}function ll(){const T=(0,I.f3M)(I.zs3);return R=>{const N=T.get(I.z2F);if(R!==N.components[0])return;const x=T.get(Nr),U=T.get(ql);1===T.get(cl)&&x.initialNavigation(),T.get(Ko,null,I.XFs.Optional)?.setUpPreloading(),T.get(xl,null,I.XFs.Optional)?.init(),x.resetRootComponentType(N.componentTypes[0]),U.closed||(U.next(),U.complete(),U.unsubscribe())}}const ql=new I.OlP("",{factory:()=>new Ve.x}),cl=new I.OlP("",{providedIn:"root",factory:()=>1}),Ko=new I.OlP("");function mc(T){return La(0,[{provide:Ko,useExisting:pc},{provide:Ja,useExisting:T}])}const gi=new I.OlP("ROUTER_FORROOT_GUARD"),wl=[rt.Ye,{provide:or,useClass:bi},Nr,ut,{provide:Er,useFactory:function Du(T){return T.routerState.root},deps:[Nr]},$,[]];function vc(){return new I.PXZ("Router",Nr)}let Vi=(()=>{var T;class R{constructor(x){}static forRoot(x,U){return{ngModule:R,providers:[wl,[],{provide:we,multi:!0,useValue:x},{provide:gi,useFactory:Gs,deps:[[Nr,new I.FiY,new I.tp0]]},{provide:Ur,useValue:U||{}},U?.useHash?{provide:rt.S$,useClass:rt.Do}:{provide:rt.S$,useClass:rt.b0},{provide:xl,useFactory:()=>{const T=(0,I.f3M)(rt.EM),R=(0,I.f3M)(I.R0b),N=(0,I.f3M)(Ur),x=(0,I.f3M)($t),U=(0,I.f3M)(or);return N.scrollOffset&&T.setOffset(N.scrollOffset),new Da(U,x,T,R,N)}},U?.preloadingStrategy?mc(U.preloadingStrategy).\u0275providers:[],{provide:I.PXZ,multi:!0,useFactory:vc},U?.initialNavigation?is(U):[],U?.bindToComponentInputs?La(8,[Es,{provide:Ci,useExisting:Es}]).\u0275providers:[],[{provide:Zl,useFactory:ll},{provide:I.tb,multi:!0,useExisting:Zl}]]}}static forChild(x){return{ngModule:R,providers:[{provide:we,multi:!0,useValue:x}]}}}return(T=R).\u0275fac=function(x){return new(x||T)(I.LFG(gi,8))},T.\u0275mod=I.oAB({type:T}),T.\u0275inj=I.cJS({}),R})();function Gs(T){return"guarded"}function is(T){return["disabled"===T.initialNavigation?La(3,[{provide:I.ip1,multi:!0,useFactory:()=>{const R=(0,I.f3M)(Nr);return()=>{R.setUpLocationChangeListener()}}},{provide:cl,useValue:2}]).\u0275providers:[],"enabledBlocking"===T.initialNavigation?La(2,[{provide:cl,useValue:0},{provide:I.ip1,multi:!0,deps:[I.zs3],useFactory:R=>{const N=R.get(rt.V_,Promise.resolve());return()=>N.then(()=>new Promise(x=>{const U=R.get(Nr),se=R.get(ql);bo(U,()=>{x(!0)}),R.get($t).afterPreactivation=()=>(x(!0),se.closed?(0,Pe.of)(void 0):se),U.initialNavigation()}))}}]).\u0275providers:[]]}const Zl=new I.OlP("")},4303:(wn,gt,L)=>{"use strict";L.d(gt,{Jn:()=>Wt,KN:()=>Jn,Xd:()=>st,qX:()=>Vn});var Ie,qe,I=L(5861),v=L(4537),ne=L(7879),he=L(9058),ke=L(1878);class Je{constructor(ot){this.container=ot}getPlatformInfoString(){return this.container.getProviders().map(Pt=>{if(function ye(jt){const ot=jt.getComponent();return"VERSION"===ot?.type}(Pt)){const sn=Pt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(Pt=>Pt).join(" ")}}const ge="@firebase/app",Ge=new ne.Yd("@firebase/app"),pt={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,Bt=new Map;function Ft(jt,ot){try{jt.container.addComponent(ot)}catch(Pt){Ge.debug(`Component ${ot.name} failed to register with FirebaseApp ${jt.name}`,Pt)}}function st(jt){const ot=jt.name;if(Bt.has(ot))return Ge.debug(`There were multiple attempts to register component ${ot}.`),!1;Bt.set(ot,jt);for(const Pt of ht.values())Ft(Pt,jt);return!0}function Vn(jt,ot){const Pt=jt.container.getProvider("heartbeat").getImmediate({optional:!0});return Pt&&Pt.triggerHeartbeat(),jt.container.getProvider(ot)}const Rt=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."}),Wt="10.3.1";function Jn(jt,ot,Pt){var sn;let In=null!==(sn=pt[jt])&&void 0!==sn?sn:jt;Pt&&(In+=`-${Pt}`);const Mn=In.match(/\s|\//),br=ot.match(/\s|\//);if(Mn||br){const Ke=[`Unable to register library "${In}" with version "${ot}":`];return Mn&&Ke.push(`library name "${In}" contains illegal characters (whitespace or "/")`),Mn&&br&&Ke.push("and"),br&&Ke.push(`version name "${ot}" contains illegal characters (whitespace or "/")`),void Ge.warn(Ke.join(" "))}st(new v.wA(`${In}-version`,()=>({library:In,version:ot}),"VERSION"))}const Pn="firebase-heartbeat-database",Un=1,pr="firebase-heartbeat-store";let Lr=null;function Br(){return Lr||(Lr=(0,ke.X3)(Pn,Un,{upgrade:(jt,ot)=>{0===ot&&jt.createObjectStore(pr)}}).catch(jt=>{throw Rt.create("idb-open",{originalErrorMessage:jt.message})})),Lr}function hr(jt,ot){return(qe=qe||(0,I.Z)(function*(Pt,sn){try{const Mn=(yield Br()).transaction(pr,"readwrite");yield Mn.objectStore(pr).put(sn,an(Pt)),yield Mn.done}catch(In){if(In instanceof he.ZR)Ge.warn(In.message);else{const Mn=Rt.create("idb-set",{originalErrorMessage:In?.message});Ge.warn(Mn.message)}}})).apply(this,arguments)}function an(jt){return`${jt.name}!${jt.options.appId}`}class or{constructor(ot){this.container=ot,this._heartbeatsCache=null;const Pt=this.container.getProvider("app").getImmediate();this._storage=new Di(Pt),this._heartbeatsCachePromise=this._storage.read().then(sn=>(this._heartbeatsCache=sn,sn))}triggerHeartbeat(){var ot=this;return(0,I.Z)(function*(){const sn=ot.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),In=bi();if(null===ot._heartbeatsCache&&(ot._heartbeatsCache=yield ot._heartbeatsCachePromise),ot._heartbeatsCache.lastSentHeartbeatDate!==In&&!ot._heartbeatsCache.heartbeats.some(Mn=>Mn.date===In))return ot._heartbeatsCache.heartbeats.push({date:In,agent:sn}),ot._heartbeatsCache.heartbeats=ot._heartbeatsCache.heartbeats.filter(Mn=>{const br=new Date(Mn.date).valueOf();return Date.now()-br<=2592e6}),ot._storage.overwrite(ot._heartbeatsCache)})()}getHeartbeatsHeader(){var ot=this;return(0,I.Z)(function*(){if(null===ot._heartbeatsCache&&(yield ot._heartbeatsCachePromise),null===ot._heartbeatsCache||0===ot._heartbeatsCache.heartbeats.length)return"";const Pt=bi(),{heartbeatsToSend:sn,unsentEntries:In}=function Zi(jt,ot=1024){const Pt=[];let sn=jt.slice();for(const In of jt){const Mn=Pt.find(br=>br.agent===In.agent);if(Mn){if(Mn.dates.push(In.date),_i(Pt)>ot){Mn.dates.pop();break}}else if(Pt.push({agent:In.agent,dates:[In.date]}),_i(Pt)>ot){Pt.pop();break}sn=sn.slice(1)}return{heartbeatsToSend:Pt,unsentEntries:sn}}(ot._heartbeatsCache.heartbeats),Mn=(0,he.L)(JSON.stringify({version:2,heartbeats:sn}));return ot._heartbeatsCache.lastSentHeartbeatDate=Pt,In.length>0?(ot._heartbeatsCache.heartbeats=In,yield ot._storage.overwrite(ot._heartbeatsCache)):(ot._heartbeatsCache.heartbeats=[],ot._storage.overwrite(ot._heartbeatsCache)),Mn})()}}function bi(){return(new Date).toISOString().substring(0,10)}class Di{constructor(ot){this.app=ot,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ot=this;return(0,I.Z)(function*(){return(yield ot._canUseIndexedDBPromise)&&(yield function Kt(jt){return(Ie=Ie||(0,I.Z)(function*(ot){try{return yield(yield Br()).transaction(pr).objectStore(pr).get(an(ot))}catch(Pt){if(Pt instanceof he.ZR)Ge.warn(Pt.message);else{const sn=Rt.create("idb-get",{originalErrorMessage:Pt?.message});Ge.warn(sn.message)}}})).apply(this,arguments)}(ot.app))||{heartbeats:[]}})()}overwrite(ot){var Pt=this;return(0,I.Z)(function*(){var sn;if(yield Pt._canUseIndexedDBPromise){const Mn=yield Pt.read();return hr(Pt.app,{lastSentHeartbeatDate:null!==(sn=ot.lastSentHeartbeatDate)&&void 0!==sn?sn:Mn.lastSentHeartbeatDate,heartbeats:ot.heartbeats})}})()}add(ot){var Pt=this;return(0,I.Z)(function*(){var sn;if(yield Pt._canUseIndexedDBPromise){const Mn=yield Pt.read();return hr(Pt.app,{lastSentHeartbeatDate:null!==(sn=ot.lastSentHeartbeatDate)&&void 0!==sn?sn:Mn.lastSentHeartbeatDate,heartbeats:[...Mn.heartbeats,...ot.heartbeats]})}})()}}function _i(jt){return(0,he.L)(JSON.stringify({version:2,heartbeats:jt})).length}!function Ii(jt){st(new v.wA("platform-logger",ot=>new Je(ot),"PRIVATE")),st(new v.wA("heartbeat",ot=>new or(ot),"PRIVATE")),Jn(ge,"0.9.18",jt),Jn(ge,"0.9.18","esm2017"),Jn("fire-js","")}("")},4537:(wn,gt,L)=>{"use strict";L.d(gt,{H0:()=>qe,wA:()=>ne,zt:()=>ke});var I=L(5861),v=L(9058);class ne{constructor(ye,ge,Me){this.name=ye,this.instanceFactory=ge,this.type=Me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ye){return this.instantiationMode=ye,this}setMultipleInstances(ye){return this.multipleInstances=ye,this}setServiceProps(ye){return this.serviceProps=ye,this}setInstanceCreatedCallback(ye){return this.onInstanceCreated=ye,this}}const he="[DEFAULT]";class ke{constructor(ye,ge){this.name=ye,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ye){const ge=this.normalizeInstanceIdentifier(ye);if(!this.instancesDeferred.has(ge)){const Me=new v.BH;if(this.instancesDeferred.set(ge,Me),this.isInitialized(ge)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:ge});Ge&&Me.resolve(Ge)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(ye){var ge;const Me=this.normalizeInstanceIdentifier(ye?.identifier),Ge=null!==(ge=ye?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Me)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Me})}catch(ze){if(Ge)return null;throw ze}}getComponent(){return this.component}setComponent(ye){if(ye.name!==this.name)throw Error(`Mismatching Component ${ye.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ye,this.shouldAutoInitialize()){if(function Ie(Je){return"EAGER"===Je.instantiationMode}(ye))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[ge,Me]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(ge);try{const ze=this.getOrInitializeService({instanceIdentifier:Ge});Me.resolve(ze)}catch{}}}}clearInstance(ye=he){this.instancesDeferred.delete(ye),this.instancesOptions.delete(ye),this.instances.delete(ye)}delete(){var ye=this;return(0,I.Z)(function*(){const ge=Array.from(ye.instances.values());yield Promise.all([...ge.filter(Me=>"INTERNAL"in Me).map(Me=>Me.INTERNAL.delete()),...ge.filter(Me=>"_delete"in Me).map(Me=>Me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ye=he){return this.instances.has(ye)}getOptions(ye=he){return this.instancesOptions.get(ye)||{}}initialize(ye={}){const{options:ge={}}=ye,Me=this.normalizeInstanceIdentifier(ye.instanceIdentifier);if(this.isInitialized(Me))throw Error(`${this.name}(${Me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:Me,options:ge});for(const[ze,nt]of this.instancesDeferred.entries())Me===this.normalizeInstanceIdentifier(ze)&&nt.resolve(Ge);return Ge}onInit(ye,ge){var Me;const Ge=this.normalizeInstanceIdentifier(ge),ze=null!==(Me=this.onInitCallbacks.get(Ge))&&void 0!==Me?Me:new Set;ze.add(ye),this.onInitCallbacks.set(Ge,ze);const nt=this.instances.get(Ge);return nt&&ye(nt,Ge),()=>{ze.delete(ye)}}invokeOnInitCallbacks(ye,ge){const Me=this.onInitCallbacks.get(ge);if(Me)for(const Ge of Me)try{Ge(ye,ge)}catch{}}getOrInitializeService({instanceIdentifier:ye,options:ge={}}){let Me=this.instances.get(ye);if(!Me&&this.component&&(Me=this.component.instanceFactory(this.container,{instanceIdentifier:(Je=ye,Je===he?void 0:Je),options:ge}),this.instances.set(ye,Me),this.instancesOptions.set(ye,ge),this.invokeOnInitCallbacks(Me,ye),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ye,Me)}catch{}var Je;return Me||null}normalizeInstanceIdentifier(ye=he){return this.component?this.component.multipleInstances?ye:he:ye}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qe{constructor(ye){this.name=ye,this.providers=new Map}addComponent(ye){const ge=this.getProvider(ye.name);if(ge.isComponentSet())throw new Error(`Component ${ye.name} has already been registered with ${this.name}`);ge.setComponent(ye)}addOrOverwriteComponent(ye){this.getProvider(ye.name).isComponentSet()&&this.providers.delete(ye.name),this.addComponent(ye)}getProvider(ye){if(this.providers.has(ye))return this.providers.get(ye);const ge=new ke(ye,this);return this.providers.set(ye,ge),ge}getProviders(){return Array.from(this.providers.values())}}},7879:(wn,gt,L)=>{"use strict";L.d(gt,{Am:()=>Je,Ub:()=>qe,Yd:()=>Ie,in:()=>v});const I=[];var v=function(ye){return ye[ye.DEBUG=0]="DEBUG",ye[ye.VERBOSE=1]="VERBOSE",ye[ye.INFO=2]="INFO",ye[ye.WARN=3]="WARN",ye[ye.ERROR=4]="ERROR",ye[ye.SILENT=5]="SILENT",ye}(v||{});const ne={debug:v.DEBUG,verbose:v.VERBOSE,info:v.INFO,warn:v.WARN,error:v.ERROR,silent:v.SILENT},he=v.INFO,ke={[v.DEBUG]:"log",[v.VERBOSE]:"log",[v.INFO]:"info",[v.WARN]:"warn",[v.ERROR]:"error"},Pe=(ye,ge,...Me)=>{if(ge<ye.logLevel)return;const Ge=(new Date).toISOString(),ze=ke[ge];if(!ze)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[ze](`[${Ge}]  ${ye.name}:`,...Me)};class Ie{constructor(ge){this.name=ge,this._logLevel=he,this._logHandler=Pe,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in v))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?ne[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,v.DEBUG,...ge),this._logHandler(this,v.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,v.VERBOSE,...ge),this._logHandler(this,v.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,v.INFO,...ge),this._logHandler(this,v.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,v.WARN,...ge),this._logHandler(this,v.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,v.ERROR,...ge),this._logHandler(this,v.ERROR,...ge)}}function qe(ye){I.forEach(ge=>{ge.setLogLevel(ye)})}function Je(ye,ge){for(const Me of I){let Ge=null;ge&&ge.level&&(Ge=ne[ge.level]),Me.userLogHandler=null===ye?null:(ze,nt,...Ze)=>{const Ye=Ze.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");nt>=(Ge??ze.logLevel)&&ye({level:v[nt].toLowerCase(),message:Ye,args:Ze,type:ze.name})}}}},7027:(wn,gt,L)=>{"use strict";L.d(gt,{Br:()=>qo,w:()=>wr,dr:()=>Zi,YG:()=>sn,W2:()=>St,IJ:()=>yn,W4:()=>lr,Gu:()=>Is,gu:()=>Fs,pK:()=>Pi,Ie:()=>ur,Q$:()=>on,q_:()=>vi,jP:()=>ps,wd:()=>bn,ho:()=>Kn,sr:()=>Qn,Pc:()=>Te,r4:()=>z,as:()=>Sn,j9:()=>pr});var I=L(5861),v=L(5879),ne=L(95),he=L(7582),ke=L(4829),Pe=L(5592),Ie=L(1631),qe=L(4266),Je=L(4674),ye=L(7400);const ge=["addListener","removeListener"],Me=["addEventListener","removeEventListener"],Ge=["on","off"];function ze(E,q,C,j){if((0,Je.m)(C)&&(j=C,C=void 0),j)return ze(E,q,C).pipe((0,ye.Z)(j));const[ae,Nt]=function De(E){return(0,Je.m)(E.addEventListener)&&(0,Je.m)(E.removeEventListener)}(E)?Me.map(jn=>Wn=>E[jn](q,Wn,C)):function Ze(E){return(0,Je.m)(E.addListener)&&(0,Je.m)(E.removeListener)}(E)?ge.map(nt(E,q)):function Ye(E){return(0,Je.m)(E.on)&&(0,Je.m)(E.off)}(E)?Ge.map(nt(E,q)):[];if(!ae&&(0,qe.z)(E))return(0,Ie.z)(jn=>ze(jn,q,C))((0,ke.Xf)(E));if(!ae)throw new TypeError("Invalid event target");return new Pe.y(jn=>{const Wn=(...fr)=>jn.next(1<fr.length?fr:fr[0]);return ae(Wn),()=>Nt(Wn)})}function nt(E,q){return C=>j=>E[C](q,j)}var Ee=L(8645),yt=L(5619),Ve=L(2572),rt=L(2096),be=L(4934),Ue=(L(1774),L(2650),L(1904),L(9203),L(2085)),zt=L(839),en=L(3365),Xt=L(1651),de=(L(5662),L(1647)),pe=(L(6225),L(619),L(1688)),$e=L(2181),je=L(4664),pt=L(3997),ht=L(6814);const Ft=Ue.i,st=["*"],Wt=E=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(E):"function"==typeof requestAnimationFrame?requestAnimationFrame(E):setTimeout(E);let Tn=(()=>{class E{constructor(C,j){this.injector=C,this.el=j,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(C){this.el.nativeElement.value=this.lastValue=C,En(this.el)}handleValueChange(C,j){C===this.el.nativeElement&&(j!==this.lastValue&&(this.lastValue=j,this.onChange(j)),En(this.el))}_handleBlurEvent(C){C===this.el.nativeElement&&(this.onTouched(),En(this.el))}registerOnChange(C){this.onChange=C}registerOnTouched(C){this.onTouched=C}setDisabledState(C){this.el.nativeElement.disabled=C}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let C;try{C=this.injector.get(ne.a5)}catch{}if(!C)return;C.statusChanges&&(this.statusChanges=C.statusChanges.subscribe(()=>En(this.el)));const j=C.control;j&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Nt=>{if(typeof j[Nt]<"u"){const jn=j[Nt].bind(j);j[Nt]=(...Wn)=>{jn(...Wn),En(this.el)}}})}}return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.zs3),v.Y36(v.SBq))},E.\u0275dir=v.lG2({type:E,hostBindings:function(C,j){1&C&&v.NdJ("ionBlur",function(Nt){return j._handleBlurEvent(Nt.target)})}}),E})();const En=E=>{Wt(()=>{const q=E.nativeElement,C=null!=q.value&&q.value.toString().length>0,j=vn(q);Xn(q,j);const ae=q.closest("ion-item");ae&&Xn(ae,C?[...j,"item-has-value"]:j)})},vn=E=>{const q=E.classList,C=[];for(let j=0;j<q.length;j++){const ae=q.item(j);null!==ae&&Jn(ae,"ng-")&&C.push(`ion-${ae.substring(3)}`)}return C},Xn=(E,q)=>{const C=E.classList;C.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),C.add(...q)},Jn=(E,q)=>E.substring(0,q.length)===q;let wr=(()=>{class E extends Tn{constructor(C,j){super(C,j)}writeValue(C){this.el.nativeElement.checked=this.lastValue=C,En(this.el)}_handleIonChange(C){this.handleValueChange(C,C.checked)}}return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.zs3),v.Y36(v.SBq))},E.\u0275dir=v.lG2({type:E,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(C,j){1&C&&v.NdJ("ionChange",function(Nt){return j._handleIonChange(Nt.target)})},features:[v._Bn([{provide:ne.JU,useExisting:E,multi:!0}]),v.qOj]}),E})(),Sn=(()=>{class E extends Tn{constructor(C,j){super(C,j)}handleInputEvent(C){this.handleValueChange(C,C.value)}registerOnChange(C){super.registerOnChange(j=>{C(""===j?null:parseFloat(j))})}}return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.zs3),v.Y36(v.SBq))},E.\u0275dir=v.lG2({type:E,selectors:[["ion-input","type","number"]],hostBindings:function(C,j){1&C&&v.NdJ("ionInput",function(Nt){return j.handleInputEvent(Nt.target)})},features:[v._Bn([{provide:ne.JU,useExisting:E,multi:!0}]),v.qOj]}),E})(),pr=(()=>{class E extends Tn{constructor(C,j){super(C,j)}_handleInputEvent(C){this.handleValueChange(C,C.value)}}return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.zs3),v.Y36(v.SBq))},E.\u0275dir=v.lG2({type:E,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(C,j){1&C&&v.NdJ("ionInput",function(Nt){return j._handleInputEvent(Nt.target)})},features:[v._Bn([{provide:ne.JU,useExisting:E,multi:!0}]),v.qOj]}),E})();const Lr=(E,q)=>{const C=E.prototype;q.forEach(j=>{Object.defineProperty(C,j,{get(){return this.el[j]},set(ae){this.z.runOutsideAngular(()=>this.el[j]=ae)}})})},Br=(E,q)=>{const C=E.prototype;q.forEach(j=>{C[j]=function(){const ae=arguments;return this.z.runOutsideAngular(()=>this.el[j].apply(this.el,ae))}})},Kt=(E,q,C)=>{C.forEach(j=>E[j]=ze(q,j))};function an(E){return function(C){const{defineCustomElementFn:j,inputs:ae,methods:Nt}=E;return void 0!==j&&j(),ae&&Lr(C,ae),Nt&&Br(C,Nt),C}}let Zi=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-app"]],ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({})],E),E})(),sn=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement,Kt(this,this.el,["ionFocus","ionBlur"])}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],E),E})(),St=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement,Kt(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],E),E})(),yn=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],E),E})(),lr=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement,Kt(this,this.el,["ionFocus","ionBlur"])}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],E),E})(),Is=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["collapse","mode","translucent"]})],E),E})(),Fs=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],E),E})(),Pi=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement,Kt(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],E),E})(),ur=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],E),E})(),on=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["color","mode","position"]})],E),E})(),vi=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],E),E})(),bn=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["color","size"]})],E),E})(),Kn=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement,Kt(this,this.el,["ionChange","ionFocus","ionBlur"])}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-toggle"]],inputs:{checked:"checked",color:"color",disabled:"disabled",enableOnOffLabels:"enableOnOffLabels",justify:"justify",labelPlacement:"labelPlacement",legacy:"legacy",mode:"mode",name:"name",value:"value"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["checked","color","disabled","enableOnOffLabels","justify","labelPlacement","legacy","mode","name","value"]})],E),E})(),Qn=(()=>{let E=class{constructor(C,j,ae){this.z=ae,C.detach(),this.el=j.nativeElement}};return E.\u0275fac=function(C){return new(C||E)(v.Y36(v.sBO),v.Y36(v.SBq),v.Y36(v.R0b))},E.\u0275cmp=v.Xpm({type:E,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:st,decls:1,vars:0,template:function(C,j){1&C&&(v.F$t(),v.Hsn(0))},encapsulation:2,changeDetection:0}),E=(0,he.gn)([an({inputs:["color","mode"]})],E),E})(),Ln=(()=>{class E{get(C,j){const ae=Er();return ae?ae.get(C,j):null}getBoolean(C,j){const ae=Er();return!!ae&&ae.getBoolean(C,j)}getNumber(C,j){const ae=Er();return ae?ae.getNumber(C,j):0}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const wi=new v.OlP("USERCONFIG"),Er=()=>{if(typeof window<"u"){const E=window.Ionic;if(E?.config)return E.config}return null};let _o=(()=>{class E{constructor(C,j){this.doc=C,this.backButton=new Ee.x,this.keyboardDidShow=new Ee.x,this.keyboardDidHide=new Ee.x,this.pause=new Ee.x,this.resume=new Ee.x,this.resize=new Ee.x,j.run(()=>{let ae;this.win=C.defaultView,this.backButton.subscribeWithPriority=function(Nt,jn){return this.subscribe(Wn=>Wn.register(Nt,fr=>j.run(()=>jn(fr))))},zr(this.pause,C,"pause"),zr(this.resume,C,"resume"),zr(this.backButton,C,"ionBackButton"),zr(this.resize,this.win,"resize"),zr(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),zr(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(Nt=>{ae=Nt}),this.win?.cordova?C.addEventListener("deviceready",()=>{ae("cordova")},{once:!0}):ae("dom")})}is(C){return(0,Ue.a)(this.win,C)}platforms(){return(0,Ue.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(C){return ki(this.win.location.href,C)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia?.("(orientation: portrait)").matches}testUserAgent(C){const j=this.win.navigator;return!!(j?.userAgent&&j.userAgent.indexOf(C)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return E.\u0275fac=function(C){return new(C||E)(v.LFG(ht.K0),v.LFG(v.R0b))},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const ki=(E,q)=>{q=q.replace(/[[\]\\]/g,"\\$&");const j=new RegExp("[\\?&]"+q+"=([^&#]*)").exec(E);return j?decodeURIComponent(j[1].replace(/\+/g," ")):null},zr=(E,q,C)=>{q&&q.addEventListener(C,j=>{const ae=j?.detail;E.next(ae)})};let An=(()=>{class E{constructor(C,j,ae,Nt){this.location=j,this.serializer=ae,this.router=Nt,this.direction=Gn,this.animated=Vr,this.guessDirection="forward",this.lastNavId=-1,Nt&&Nt.events.subscribe(jn=>{if(jn instanceof be.OD){const Wn=jn.restoredState?jn.restoredState.navigationId:jn.id;this.guessDirection=Wn<this.lastNavId?"back":"forward",this.guessAnimation=jn.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?jn.id:Wn}}),C.backButton.subscribeWithPriority(0,jn=>{this.pop(),jn()})}navigateForward(C,j={}){return this.setDirection("forward",j.animated,j.animationDirection,j.animation),this.navigate(C,j)}navigateBack(C,j={}){return this.setDirection("back",j.animated,j.animationDirection,j.animation),this.navigate(C,j)}navigateRoot(C,j={}){return this.setDirection("root",j.animated,j.animationDirection,j.animation),this.navigate(C,j)}back(C={animated:!0,animationDirection:"back"}){return this.setDirection("back",C.animated,C.animationDirection,C.animation),this.location.back()}pop(){var C=this;return(0,I.Z)(function*(){let j=C.topOutlet;for(;j;){if(yield j.pop())return!0;j=j.parentOutlet}return!1})()}setDirection(C,j,ae,Nt){this.direction=C,this.animated=$n(C,j,ae),this.animationBuilder=Nt}setTopOutlet(C){this.topOutlet=C}consumeTransition(){let j,C="root";const ae=this.animationBuilder;return"auto"===this.direction?(C=this.guessDirection,j=this.guessAnimation):(j=this.animated,C=this.direction),this.direction=Gn,this.animated=Vr,this.animationBuilder=void 0,{direction:C,animation:j,animationBuilder:ae}}navigate(C,j){if(Array.isArray(C))return this.router.navigate(C,j);{const ae=this.serializer.parse(C.toString());return void 0!==j.queryParams&&(ae.queryParams={...j.queryParams}),void 0!==j.fragment&&(ae.fragment=j.fragment),this.router.navigateByUrl(ae,j)}}}return E.\u0275fac=function(C){return new(C||E)(v.LFG(_o),v.LFG(ht.Ye),v.LFG(be.Hx),v.LFG(be.F0,8))},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const $n=(E,q,C)=>{if(!1!==q){if(void 0!==C)return C;if("forward"===E||"back"===E)return E;if("root"===E&&!0===q)return"forward"}},Gn="auto",Vr=void 0;class Vs{constructor(q={}){this.data=q}get(q){return this.data[q]}}let Ti=(()=>{class E{constructor(){this.zone=(0,v.f3M)(v.R0b),this.applicationRef=(0,v.f3M)(v.z2F)}create(C,j,ae){return new ls(C,j,this.applicationRef,this.zone,ae)}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac}),E})();class ls{constructor(q,C,j,ae,Nt){this.environmentInjector=q,this.injector=C,this.applicationRef=j,this.zone=ae,this.elementReferenceKey=Nt,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(q,C,j,ae){return this.zone.run(()=>new Promise(Nt=>{const jn={...j};void 0!==this.elementReferenceKey&&(jn[this.elementReferenceKey]=q),Nt(Ci(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,q,C,jn,ae,this.elementReferenceKey))}))}removeViewFromDom(q,C){return this.zone.run(()=>new Promise(j=>{const ae=this.elRefMap.get(C);if(ae){ae.destroy(),this.elRefMap.delete(C);const Nt=this.elEventsMap.get(C);Nt&&(Nt(),this.elEventsMap.delete(C))}j()}))}}const Ci=(E,q,C,j,ae,Nt,jn,Wn,fr,pi,Gr)=>{const bs=v.zs3.create({providers:xi(fr),parent:C}),Ds=(0,v.LMc)(Wn,{environmentInjector:q,elementInjector:bs}),Lo=Ds.instance,oo=Ds.location.nativeElement;if(fr&&(Gr&&void 0!==Lo[Gr]&&console.error(`[Ionic Error]: ${Gr} is a reserved property when using ${jn.tagName.toLowerCase()}. Rename or remove the "${Gr}" property from ${Wn.name}.`),Object.assign(Lo,fr)),pi)for(const Na of pi)oo.classList.add(Na);const oa=Mo(E,Lo,oo);return jn.appendChild(oo),j.attachView(Ds.hostView),ae.set(oo,Ds),Nt.set(oo,oa),oo},Es=[Xt.L,Xt.a,Xt.b,Xt.c,Xt.d],Mo=(E,q,C)=>E.run(()=>{const j=Es.filter(ae=>"function"==typeof q[ae]).map(ae=>{const Nt=jn=>q[ae](jn.detail);return C.addEventListener(ae,Nt),()=>C.removeEventListener(ae,Nt)});return()=>j.forEach(ae=>ae())}),ar=new v.OlP("NavParamsToken"),xi=E=>[{provide:ar,useValue:E},{provide:Vs,useFactory:io,deps:[ar]}],io=E=>new Vs(E),Fi=(E,q)=>((E=E.filter(C=>C.stackId!==q.stackId)).push(q),E),fs=(E,q)=>{const C=E.createUrlTree(["."],{relativeTo:q});return E.serializeUrl(C)},Us=(E,q)=>!q||E.stackId!==q.stackId,Ca=(E,q)=>{if(!E)return;const C=Ms(q);for(let j=0;j<C.length;j++){if(j>=E.length)return C[j];if(C[j]!==E[j])return}},Ms=E=>E.split("/").map(q=>q.trim()).filter(q=>""!==q),Tr=E=>{E&&(E.ref.destroy(),E.unlistenEvents())};class js{constructor(q,C,j,ae,Nt,jn){this.containerEl=C,this.router=j,this.navCtrl=ae,this.zone=Nt,this.location=jn,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==q?Ms(q):void 0}createView(q,C){const j=fs(this.router,C),ae=q?.location?.nativeElement,Nt=Mo(this.zone,q.instance,ae);return{id:this.nextId++,stackId:Ca(this.tabsPrefix,j),unlistenEvents:Nt,element:ae,ref:q,url:j}}getExistingView(q){const C=fs(this.router,q),j=this.views.find(ae=>ae.url===C);return j&&j.ref.changeDetectorRef.reattach(),j}setActive(q){const C=this.navCtrl.consumeTransition();let{direction:j,animation:ae,animationBuilder:Nt}=C;const jn=this.activeView,Wn=Us(q,jn);Wn&&(j="back",ae=void 0);const fr=this.views.slice();let pi;const Gr=this.router;Gr.getCurrentNavigation?pi=Gr.getCurrentNavigation():Gr.navigations?.value&&(pi=Gr.navigations.value),pi?.extras?.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const bs=this.views.includes(q),Ds=this.insertView(q,j);bs||q.ref.changeDetectorRef.detectChanges();const Lo=q.animationBuilder;return void 0===Nt&&"back"===j&&!Wn&&void 0!==Lo&&(Nt=Lo),jn&&(jn.animationBuilder=Nt),this.zone.runOutsideAngular(()=>this.wait(()=>(jn&&jn.ref.changeDetectorRef.detach(),q.ref.changeDetectorRef.reattach(),this.transition(q,jn,ae,this.canGoBack(1),!1,Nt).then(()=>mo(q,Ds,fr,this.location,this.zone)).then(()=>({enteringView:q,direction:j,animation:ae,tabSwitch:Wn})))))}canGoBack(q,C=this.getActiveStackId()){return this.getStack(C).length>q}pop(q,C=this.getActiveStackId()){return this.zone.run(()=>{const j=this.getStack(C);if(j.length<=q)return Promise.resolve(!1);const ae=j[j.length-q-1];let Nt=ae.url;const jn=ae.savedData;if(jn){const fr=jn.get("primary");fr?.route?._routerState?.snapshot.url&&(Nt=fr.route._routerState.snapshot.url)}const{animationBuilder:Wn}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Nt,{...ae.savedExtras,animation:Wn}).then(()=>!0)})}startBackTransition(){const q=this.activeView;if(q){const C=this.getStack(q.stackId),j=C[C.length-2],ae=j.animationBuilder;return this.wait(()=>this.transition(j,q,"back",this.canGoBack(2),!0,ae))}return Promise.resolve()}endBackTransition(q){q?(this.skipTransition=!0,this.pop(1)):this.activeView&&kr(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(q){const C=this.getStack(q);return C.length>0?C[C.length-1]:void 0}getRootUrl(q){const C=this.getStack(q);return C.length>0?C[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}getActiveView(){return this.activeView}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Tr),this.activeView=void 0,this.views=[]}getStack(q){return this.views.filter(C=>C.stackId===q)}insertView(q,C){return this.activeView=q,this.views=((E,q,C)=>"root"===C?Fi(E,q):"forward"===C?((E,q)=>(E.indexOf(q)>=0?E=E.filter(j=>j.stackId!==q.stackId||j.id<=q.id):E.push(q),E))(E,q):((E,q)=>E.indexOf(q)>=0?E.filter(j=>j.stackId!==q.stackId||j.id<=q.id):Fi(E,q))(E,q))(this.views,q,C),this.views.slice()}transition(q,C,j,ae,Nt,jn){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(C===q)return Promise.resolve(!1);const Wn=q?q.element:void 0,fr=C?C.element:void 0,pi=this.containerEl;return Wn&&Wn!==fr&&(Wn.classList.add("ion-page"),Wn.classList.add("ion-page-invisible"),Wn.parentElement!==pi&&pi.appendChild(Wn),pi.commit)?pi.commit(Wn,fr,{duration:void 0===j?0:void 0,direction:j,showGoBack:ae,progressAnimation:Nt,animationBuilder:jn}):Promise.resolve(!1)}wait(q){var C=this;return(0,I.Z)(function*(){void 0!==C.runningTask&&(yield C.runningTask,C.runningTask=void 0);const j=C.runningTask=q();return j.finally(()=>C.runningTask=void 0),j})()}}const mo=(E,q,C,j,ae)=>"function"==typeof requestAnimationFrame?new Promise(Nt=>{requestAnimationFrame(()=>{kr(E,q,C,j,ae),Nt()})}):Promise.resolve(),kr=(E,q,C,j,ae)=>{ae.run(()=>C.filter(Nt=>!q.includes(Nt)).forEach(Tr)),q.forEach(Nt=>{const Wn=j.path().split("?")[0].split("#")[0];if(Nt!==E&&Nt.url!==Wn){const fr=Nt.element;fr.setAttribute("aria-hidden","true"),fr.classList.add("ion-page-hidden"),Nt.ref.changeDetectorRef.detach()}})};let ps=(()=>{class E{constructor(C,j,ae,Nt,jn,Wn,fr,pi){this.parentOutlet=pi,this.activatedView=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new yt.X(null),this.activated=null,this._activatedRoute=null,this.name=be.eC,this.stackWillChange=new v.vpe,this.stackDidChange=new v.vpe,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.parentContexts=(0,v.f3M)(be.y6),this.location=(0,v.f3M)(v.s_b),this.environmentInjector=(0,v.f3M)(v.lqb),this.inputBinder=(0,v.f3M)(Rs,{optional:!0}),this.supportsBindingToComponentInputs=!0,this.config=(0,v.f3M)(Ln),this.navCtrl=(0,v.f3M)(An),this.nativeEl=Nt.nativeElement,this.name=C||be.eC,this.tabsPrefix="true"===j?fs(jn,fr):void 0,this.stackCtrl=new js(this.tabsPrefix,this.nativeEl,jn,this.navCtrl,Wn,ae),this.parentContexts.onChildOutletCreated(this.name,this)}get activatedComponentRef(){return this.activated}set animation(C){this.nativeEl.animation=C}set animated(C){this.nativeEl.animated=C}set swipeGesture(C){this._swipeGesture=C,this.nativeEl.swipeHandler=C?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:j=>this.stackCtrl.endBackTransition(j)}:void 0}ngOnDestroy(){this.stackCtrl.destroy(),this.inputBinder?.unsubscribeFromRouteData(this)}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const C=this.getContext();C?.route&&this.activateWith(C.route,C.injector)}new Promise(C=>(0,zt.c)(this.nativeEl,C)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(C,j){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const j=this.getContext();this.activatedView.savedData=new Map(j.children.contexts);const ae=this.activatedView.savedData.get("primary");if(ae&&j.route&&(ae.route={...j.route}),this.activatedView.savedExtras={},j.route){const Nt=j.route.snapshot;this.activatedView.savedExtras.queryParams=Nt.queryParams,this.activatedView.savedExtras.fragment=Nt.fragment}}const C=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,j){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=C;let ae,Nt=this.stackCtrl.getExistingView(C);if(Nt){ae=this.activated=Nt.ref;const Wn=Nt.savedData;Wn&&(this.getContext().children.contexts=Wn),this.updateActivatedRouteProxy(ae.instance,C)}else{const Wn=C._futureSnapshot,fr=this.parentContexts.getOrCreateContext(this.name).children,pi=new yt.X(null),Gr=this.createActivatedRouteProxy(pi,C),bs=new xs(Gr,fr,this.location.injector);ae=this.activated=this.location.createComponent(Wn.routeConfig.component??Wn.component,{index:this.location.length,injector:bs,environmentInjector:j??this.environmentInjector}),pi.next(ae.instance),Nt=this.stackCtrl.createView(this.activated,C),this.proxyMap.set(ae.instance,Gr),this.currentActivatedRoute$.next({component:ae.instance,activatedRoute:C})}this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activatedView=Nt,this.navCtrl.setTopOutlet(this);const jn=this.stackCtrl.getActiveView();this.stackWillChange.emit({enteringView:Nt,tabSwitch:Us(Nt,jn)}),this.stackCtrl.setActive(Nt).then(Wn=>{this.activateEvents.emit(ae.instance),this.stackDidChange.emit(Wn)})}canGoBack(C=1,j){return this.stackCtrl.canGoBack(C,j)}pop(C=1,j){return this.stackCtrl.pop(C,j)}getLastUrl(C){const j=this.stackCtrl.getLastUrl(C);return j?j.url:void 0}getLastRouteView(C){return this.stackCtrl.getLastUrl(C)}getRootView(C){return this.stackCtrl.getRootUrl(C)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(C,j){const ae=new be.gz;return ae._futureSnapshot=j._futureSnapshot,ae._routerState=j._routerState,ae.snapshot=j.snapshot,ae.outlet=j.outlet,ae.component=j.component,ae._paramMap=this.proxyObservable(C,"paramMap"),ae._queryParamMap=this.proxyObservable(C,"queryParamMap"),ae.url=this.proxyObservable(C,"url"),ae.params=this.proxyObservable(C,"params"),ae.queryParams=this.proxyObservable(C,"queryParams"),ae.fragment=this.proxyObservable(C,"fragment"),ae.data=this.proxyObservable(C,"data"),ae}proxyObservable(C,j){return C.pipe((0,$e.h)(ae=>!!ae),(0,je.w)(ae=>this.currentActivatedRoute$.pipe((0,$e.h)(Nt=>null!==Nt&&Nt.component===ae),(0,je.w)(Nt=>Nt&&Nt.activatedRoute[j]),(0,pt.x)())))}updateActivatedRouteProxy(C,j){const ae=this.proxyMap.get(C);if(!ae)throw new Error("Could not find activated route proxy for view");ae._futureSnapshot=j._futureSnapshot,ae._routerState=j._routerState,ae.snapshot=j.snapshot,ae.outlet=j.outlet,ae.component=j.component,this.currentActivatedRoute$.next({component:C,activatedRoute:j})}}return E.\u0275fac=function(C){return new(C||E)(v.$8M("name"),v.$8M("tabs"),v.Y36(ht.Ye),v.Y36(v.SBq),v.Y36(be.F0),v.Y36(v.R0b),v.Y36(be.gz),v.Y36(E,12))},E.\u0275dir=v.lG2({type:E,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",name:"name"},outputs:{stackWillChange:"stackWillChange",stackDidChange:"stackDidChange",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),E})();class xs{constructor(q,C,j){this.route=q,this.childContexts=C,this.parent=j}get(q,C){return q===be.gz?this.route:q===be.y6?this.childContexts:this.parent.get(q,C)}}const Rs=new v.OlP("");let cs=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(C){this.unsubscribeFromRouteData(C),this.subscribeToRouteData(C)}unsubscribeFromRouteData(C){this.outletDataSubscriptions.get(C)?.unsubscribe(),this.outletDataSubscriptions.delete(C)}subscribeToRouteData(C){const{activatedRoute:j}=C,ae=(0,Ve.a)([j.queryParams,j.params,j.data]).pipe((0,je.w)(([Nt,jn,Wn],fr)=>(Wn={...Nt,...jn,...Wn},0===fr?(0,rt.of)(Wn):Promise.resolve(Wn)))).subscribe(Nt=>{if(!C.isActivated||!C.activatedComponentRef||C.activatedRoute!==j||null===j.component)return void this.unsubscribeFromRouteData(C);const jn=(0,v.qFp)(j.component);if(jn)for(const{templateName:Wn}of jn.inputs)C.activatedComponentRef.setInput(Wn,Nt[Wn]);else this.unsubscribeFromRouteData(C)});this.outletDataSubscriptions.set(C,ae)}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac}),E})();const Io={provide:ne.Cf,useExisting:(0,v.Gpc)(()=>ws),multi:!0};let ws=(()=>{class E extends ne.Fd{}return E.\u0275fac=function(){let q;return function(j){return(q||(q=v.n5z(E)))(j||E)}}(),E.\u0275dir=v.lG2({type:E,selectors:[["ion-input","type","number","max","","formControlName",""],["ion-input","type","number","max","","formControl",""],["ion-input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(C,j){2&C&&v.uIk("max",j._enabled?j.max:null)},features:[v._Bn([Io]),v.qOj]}),E})();const Cs={provide:ne.Cf,useExisting:(0,v.Gpc)(()=>rs),multi:!0};let rs=(()=>{class E extends ne.qQ{}return E.\u0275fac=function(){let q;return function(j){return(q||(q=v.n5z(E)))(j||E)}}(),E.\u0275dir=v.lG2({type:E,selectors:[["ion-input","type","number","min","","formControlName",""],["ion-input","type","number","min","","formControl",""],["ion-input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(C,j){2&C&&v.uIk("min",j._enabled?j.min:null)},features:[v._Bn([Cs]),v.qOj]}),E})();class so{constructor(q){this.ctrl=q}create(q){return this.ctrl.create(q||{})}dismiss(q,C,j){return this.ctrl.dismiss(q,C,j)}getTop(){return this.ctrl.getTop()}}let qo=(()=>{class E extends so{constructor(){super(de.a)}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})(),Eo=(()=>{class E extends so{constructor(){super(de.m),this.angularDelegate=(0,v.f3M)(Ti),this.injector=(0,v.f3M)(v.zs3),this.environmentInjector=(0,v.f3M)(v.lqb)}create(C){return super.create({...C,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac}),E})(),Ro=(()=>{class E extends so{constructor(){super(de.c),this.angularDelegate=(0,v.f3M)(Ti),this.injector=(0,v.f3M)(v.zs3),this.environmentInjector=(0,v.f3M)(v.lqb)}create(C){return super.create({...C,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275prov=v.Yz7({token:E,factory:E.\u0275fac}),E})();class z{shouldDetach(q){return!1}shouldAttach(q){return!1}store(q,C){}retrieve(q){return null}shouldReuseRoute(q,C){if(q.routeConfig!==C.routeConfig)return!1;const j=q.params,ae=C.params,Nt=Object.keys(j),jn=Object.keys(ae);if(Nt.length!==jn.length)return!1;for(const Wn of Nt)if(ae[Wn]!==j[Wn])return!1;return!0}}const V=(E,q,C)=>()=>{if(q.defaultView&&typeof window<"u"){(0,en.s)({...E,_zoneGate:Nt=>C.run(Nt)});const ae="__zone_symbol__addEventListener"in q.body?"__zone_symbol__addEventListener":"addEventListener";return function Bt(){var E=[];if(typeof window<"u"){var q=window;(!q.customElements||q.Element&&(!q.Element.prototype.closest||!q.Element.prototype.matches||!q.Element.prototype.remove||!q.Element.prototype.getRootNode))&&E.push(L.e(6748).then(L.t.bind(L,3342,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||q.NodeList&&!q.NodeList.prototype.forEach||!q.fetch||!function(){try{var j=new URL("b","http://a");return j.pathname="c%20d","http://a/c%20d"===j.href&&j.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&E.push(L.e(2214).then(L.t.bind(L,2668,23)))}return Promise.all(E)}().then(()=>((E,q)=>{if(!(typeof window>"u"))return Ft(),(0,pe.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"revealContentToScreenReader":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[1028],"layout":[1],"type":[1],"value":[8],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1032],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[38,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"name":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[38,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[514],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"label":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"toggleIcon":[1,"toggle-icon"],"expandedIcon":[1,"expanded-icon"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),q)})(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Wt,jmp:Nt=>C.runOutsideAngular(Nt),ael(Nt,jn,Wn,fr){Nt[ae](jn,Wn,fr)},rel(Nt,jn,Wn,fr){Nt.removeEventListener(jn,Wn,fr)}}))}};let Te=(()=>{class E{static forRoot(C){return{ngModule:E,providers:[{provide:wi,useValue:C},{provide:v.ip1,useFactory:V,multi:!0,deps:[wi,ht.K0,v.R0b]},{provide:Rs,useFactory:fn,deps:[be.F0]}]}}}return E.\u0275fac=function(C){return new(C||E)},E.\u0275mod=v.oAB({type:E}),E.\u0275inj=v.cJS({providers:[Ti,Eo,Ro],imports:[ht.ez]}),E})();function fn(E){return E?.componentInputBindingEnabled?new cs:null}},1878:(wn,gt,L)=>{"use strict";L.d(gt,{X3:()=>yt});var I=L(5861);const v=(fe,at)=>at.some(Ue=>fe instanceof Ue);let ne,he;const Ie=new WeakMap,qe=new WeakMap,Je=new WeakMap,ye=new WeakMap,ge=new WeakMap;let ze={get(fe,at,Ue){if(fe instanceof IDBTransaction){if("done"===at)return qe.get(fe);if("objectStoreNames"===at)return fe.objectStoreNames||Je.get(fe);if("store"===at)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return De(fe[at])},set:(fe,at,Ue)=>(fe[at]=Ue,!0),has:(fe,at)=>fe instanceof IDBTransaction&&("done"===at||"store"===at)||at in fe};function Ye(fe){return"function"==typeof fe?function Ze(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pe(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...at){return fe.apply(Ee(this),at),De(Ie.get(this))}:function(...at){return De(fe.apply(Ee(this),at))}:function(at,...Ue){const zt=fe.call(Ee(this),at,...Ue);return Je.set(zt,at.sort?at.sort():[at]),De(zt)}}(fe):(fe instanceof IDBTransaction&&function Ge(fe){if(qe.has(fe))return;const at=new Promise((Ue,zt)=>{const en=()=>{fe.removeEventListener("complete",Xt),fe.removeEventListener("error",mn),fe.removeEventListener("abort",mn)},Xt=()=>{Ue(),en()},mn=()=>{zt(fe.error||new DOMException("AbortError","AbortError")),en()};fe.addEventListener("complete",Xt),fe.addEventListener("error",mn),fe.addEventListener("abort",mn)});qe.set(fe,at)}(fe),v(fe,function ke(){return ne||(ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,ze):fe)}function De(fe){if(fe instanceof IDBRequest)return function Me(fe){const at=new Promise((Ue,zt)=>{const en=()=>{fe.removeEventListener("success",Xt),fe.removeEventListener("error",mn)},Xt=()=>{Ue(De(fe.result)),en()},mn=()=>{zt(fe.error),en()};fe.addEventListener("success",Xt),fe.addEventListener("error",mn)});return at.then(Ue=>{Ue instanceof IDBCursor&&Ie.set(Ue,fe)}).catch(()=>{}),ge.set(at,fe),at}(fe);if(ye.has(fe))return ye.get(fe);const at=Ye(fe);return at!==fe&&(ye.set(fe,at),ge.set(at,fe)),at}const Ee=fe=>ge.get(fe);function yt(fe,at,{blocked:Ue,upgrade:zt,blocking:en,terminated:Xt}={}){const mn=indexedDB.open(fe,at),de=De(mn);return zt&&mn.addEventListener("upgradeneeded",gn=>{zt(De(mn.result),gn.oldVersion,gn.newVersion,De(mn.transaction),gn)}),Ue&&mn.addEventListener("blocked",gn=>Ue(gn.oldVersion,gn.newVersion,gn)),de.then(gn=>{Xt&&gn.addEventListener("close",()=>Xt()),en&&gn.addEventListener("versionchange",_t=>en(_t.oldVersion,_t.newVersion,_t))}).catch(()=>{}),de}const rt=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Xe=new Map;function Fe(fe,at){var Ue;if(!(fe instanceof IDBDatabase)||at in fe||"string"!=typeof at)return;if(Xe.get(at))return Xe.get(at);const zt=at.replace(/FromIndex$/,""),en=at!==zt,Xt=be.includes(zt);if(!(zt in(en?IDBIndex:IDBObjectStore).prototype)||!Xt&&!rt.includes(zt))return;const mn=function(gn){return(Ue=Ue||(0,I.Z)(function*(_t,...pe){const Se=this.transaction(_t,Xt?"readwrite":"readonly");let $e=Se.store;return en&&($e=$e.index(pe.shift())),(yield Promise.all([$e[zt](...pe),Xt&&Se.done]))[0]})).apply(this,arguments)};return Xe.set(at,mn),mn}!function nt(fe){ze=fe(ze)}(fe=>({...fe,get:(at,Ue,zt)=>Fe(at,Ue)||fe.get(at,Ue,zt),has:(at,Ue)=>!!Fe(at,Ue)||fe.has(at,Ue)}))},5861:(wn,gt,L)=>{"use strict";function I(ne,he,ke,Pe,Ie,qe,Je){try{var ye=ne[qe](Je),ge=ye.value}catch(Me){return void ke(Me)}ye.done?he(ge):Promise.resolve(ge).then(Pe,Ie)}function v(ne){return function(){var he=this,ke=arguments;return new Promise(function(Pe,Ie){var qe=ne.apply(he,ke);function Je(ge){I(qe,Pe,Ie,Je,ye,"next",ge)}function ye(ge){I(qe,Pe,Ie,Je,ye,"throw",ge)}Je(void 0)})}}L.d(gt,{Z:()=>v})},7582:(wn,gt,L)=>{"use strict";function he(pe,Se){var $e={};for(var je in pe)Object.prototype.hasOwnProperty.call(pe,je)&&Se.indexOf(je)<0&&($e[je]=pe[je]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var pt=0;for(je=Object.getOwnPropertySymbols(pe);pt<je.length;pt++)Se.indexOf(je[pt])<0&&Object.prototype.propertyIsEnumerable.call(pe,je[pt])&&($e[je[pt]]=pe[je[pt]])}return $e}function ke(pe,Se,$e,je){var Bt,pt=arguments.length,ht=pt<3?Se:null===je?je=Object.getOwnPropertyDescriptor(Se,$e):je;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ht=Reflect.decorate(pe,Se,$e,je);else for(var Ft=pe.length-1;Ft>=0;Ft--)(Bt=pe[Ft])&&(ht=(pt<3?Bt(ht):pt>3?Bt(Se,$e,ht):Bt(Se,$e))||ht);return pt>3&&ht&&Object.defineProperty(Se,$e,ht),ht}function Me(pe,Se,$e,je){return new($e||($e=Promise))(function(ht,Bt){function Ft(Vn){try{st(je.next(Vn))}catch(Bn){Bt(Bn)}}function Qt(Vn){try{st(je.throw(Vn))}catch(Bn){Bt(Bn)}}function st(Vn){Vn.done?ht(Vn.value):function pt(ht){return ht instanceof $e?ht:new $e(function(Bt){Bt(ht)})}(Vn.value).then(Ft,Qt)}st((je=je.apply(pe,Se||[])).next())})}function Ve(pe){return this instanceof Ve?(this.v=pe,this):new Ve(pe)}function rt(pe,Se,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt,je=$e.apply(pe,Se||[]),ht=[];return pt={},Bt("next"),Bt("throw"),Bt("return"),pt[Symbol.asyncIterator]=function(){return this},pt;function Bt(tn){je[tn]&&(pt[tn]=function(wt){return new Promise(function(Rt,dt){ht.push([tn,wt,Rt,dt])>1||Ft(tn,wt)})})}function Ft(tn,wt){try{!function Qt(tn){tn.value instanceof Ve?Promise.resolve(tn.value.v).then(st,Vn):Bn(ht[0][2],tn)}(je[tn](wt))}catch(Rt){Bn(ht[0][3],Rt)}}function st(tn){Ft("next",tn)}function Vn(tn){Ft("throw",tn)}function Bn(tn,wt){tn(wt),ht.shift(),ht.length&&Ft(ht[0][0],ht[0][1])}}function Xe(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,Se=pe[Symbol.asyncIterator];return Se?Se.call(pe):(pe=function Ze(pe){var Se="function"==typeof Symbol&&Symbol.iterator,$e=Se&&pe[Se],je=0;if($e)return $e.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&je>=pe.length&&(pe=void 0),{value:pe&&pe[je++],done:!pe}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),$e={},je("next"),je("throw"),je("return"),$e[Symbol.asyncIterator]=function(){return this},$e);function je(ht){$e[ht]=pe[ht]&&function(Bt){return new Promise(function(Ft,Qt){!function pt(ht,Bt,Ft,Qt){Promise.resolve(Qt).then(function(st){ht({value:st,done:Ft})},Bt)}(Ft,Qt,(Bt=pe[ht](Bt)).done,Bt.value)})}}}L.d(gt,{FC:()=>rt,KL:()=>Xe,_T:()=>he,gn:()=>ke,mG:()=>Me,qq:()=>Ve}),"function"==typeof SuppressedError&&SuppressedError}},wn=>{wn(wn.s=4796)}]);